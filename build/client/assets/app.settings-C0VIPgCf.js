import{r as t,j as e}from"./jsx-runtime-DexIYAB0.js";import{b as R,C as w,T as y,a as _}from"./toastMessage-BoDQuLRo.js";import b from"./variables-EC5tLZZH.js";import{P as D,C as F,T as $,a as o,b as q}from"./Page-g_6naJ0r.js";import{L as z}from"./Toast-Ckam4cjg.js";import"./index-BmgK8DIy.js";const W=()=>{const[m,c]=t.useState(""),[u,d]=t.useState(""),[n,g]=t.useState(""),[P,G]=t.useState(""),[E,U]=t.useState(""),[L,I]=t.useState(""),[T,r]=t.useState(!1),[p,l]=t.useState(""),[N,i]=t.useState(!1),f=R(),k=t.useCallback(()=>r(a=>!a),[]),A=()=>{i(!0);var a={mailer_name:m,mailer_auth:{user:u,pass:n}};_.put(`${b.API_URL}/stores/update/mailer`,a,{params:{store_id:f.config.shop}}).then(s=>{if(r(!0),s.data.success===!1)return U("Invalid User!"),I("Invalid Password!"),l(s.data.message),!1;s.data.success===!0&&l(s.data.message),i(!1),console.log(s)}).catch(s=>{console.log(s)})},B=()=>{i(!0),_.get(`${b.API_URL}/stores/get`,{params:{store_id:f.config.shop}}).then(a=>{var s,h,x,v,S,j,M,C;a.data.success===!0?(c((h=(s=a==null?void 0:a.data)==null?void 0:s.data)==null?void 0:h.mailer_name),d((S=(v=(x=a==null?void 0:a.data)==null?void 0:x.data)==null?void 0:v.mailer_auth)==null?void 0:S.user),g((C=(M=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:M.mailer_auth)==null?void 0:C.pass)):(r(!0),l(a.data.message)),i(!1)}).catch(a=>{r(!0),l(a)})};return t.useEffect(()=>{B()},[]),e.jsx(e.Fragment,{children:e.jsxs(D,{children:[N?e.jsx(w,{}):"",e.jsxs(F,{children:[e.jsx($,{variant:"headingMd",as:"h2",children:"Settings"}),e.jsx(z,{vertical:!0,children:e.jsxs("form",{children:[e.jsx(o,{label:"Mailer name",value:m,onChange:()=>c(event.target.value),name:"mailer_name",autoComplete:"off",error:P}),e.jsx(o,{label:"User",value:u,onChange:()=>d(event.target.value),name:"mailer_user",autoComplete:"off",error:E}),e.jsx(o,{label:"Password",value:n,onChange:()=>g(event.target.value),name:"mailer_pass",autoComplete:"off",error:L}),e.jsx("br",{}),e.jsx(q,{onClick:A,children:"Save"})]})})]}),T?e.jsx(y,{message:p,toggle:k}):""]})})};export{W as default};
