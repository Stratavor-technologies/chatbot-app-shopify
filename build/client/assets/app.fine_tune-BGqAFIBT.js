import{R as d,r as o,j as e}from"./jsx-runtime-DexIYAB0.js";import{b as S,a as u,C as A,T as P}from"./toastMessage-BoDQuLRo.js";import m from"./variables-EC5tLZZH.js";import{L as N}from"./Toast-Ckam4cjg.js";import{T as z,D as U}from"./Thumbnail-8zv5IRGT.js";import{T as x,b,P as O,B as f,C}from"./Page-g_6naJ0r.js";import{L as V,D as q}from"./DataTable-Cc8KQHKZ.js";import"./index-BmgK8DIy.js";var M=function(n){return d.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),d.createElement("path",{d:"M6.55 7.25a.7.7 0 0 1 .7-.7h5.5a.7.7 0 0 1 0 1.4h-5.5a.7.7 0 0 1-.7-.7Z"}),d.createElement("path",{d:"M7 9.05a.7.7 0 0 0 0 1.4h2.25a.7.7 0 1 0 0-1.4h-2.25Z"}),d.createElement("path",{fillRule:"evenodd",d:"M3.5 6.25a2.75 2.75 0 0 1 2.75-2.75h7.5a2.75 2.75 0 0 1 2.75 2.75v5.5a.75.75 0 0 1-.22.53l-4 4a.75.75 0 0 1-.53.22h-5.5a2.75 2.75 0 0 1-2.75-2.75v-7.5Zm2.75-1.25c-.69 0-1.25.56-1.25 1.25v7.5c0 .69.56 1.25 1.25 1.25h4.75v-2.25c0-.966.784-1.75 1.75-1.75h2.25v-4.75c0-.69-.56-1.25-1.25-1.25h-7.5Zm7.69 7.5h-1.19a.25.25 0 0 0-.25.25v1.19l1.44-1.44Z"}))};M.displayName="NoteIcon";function ee(T){const[n,v]=o.useState(null),[_,L]=o.useState([]),[r,$]=o.useState(!1),[I,j]=o.useState(""),[y,p]=o.useState(!0),D=S(),g=o.useCallback(()=>$(s=>!s),[]),w=o.useCallback(s=>{console.log("isFileUploaded1: ",r),v(s[0]);var a=D.config.shop;const t=new FormData;t.append("storeId",`${a}`),t.append("training_csv",s[0]),u.post(`${m.API_URL}/training/upload-csv`,t,{params:{store_id:a}},{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{console.log(l.data),g(),h(),j("File uplaoded!"),setTimeout(function(){v()},1500)}).catch(l=>{console.log(l)}),console.log("isFileUploaded2: ",r)},[]),B=!n&&e.jsx(U.FileUpload,{}),E=n&&e.jsxs(N,{children:[e.jsx(z,{size:"small",alt:n.name,source:M}),e.jsxs("div",{children:[n.name," ",e.jsxs(x,{variant:"bodySm",as:"p",children:[n.size," bytes"]})]})]}),R=s=>{p(!0),u.delete(`${m.API_URL}/trainings/delete/${s}`,{params:{store_id:D.config.shop}}).then(a=>{a.data.success===!0&&(g(),j(a.data.message),p(!1),h())}).catch(a=>{console.log(a)})},h=async()=>{var s=S(),a=s.config.shop;await u.get(`${m.API_URL}/trainings`,{params:{store_id:a}}).then(t=>{var l=[],F=0;t.data.success===!0&&t.data.data.map(c=>{F++;var i=new Date(c.createdAt),Z=`${i.getFullYear()}-${i.getMonth()}-${i.getDate()} ${i.getHours()}:${i.getMinutes()}`;let k=e.jsx(b,{onClick:()=>R(c._id),children:"Delete"});l.push([F,c.csvfilename,Z,e.jsxs(e.Fragment,{children:[e.jsx(b,{url:c.csvfilepath,children:"Download"})," ",k]})])}),p(!1),L(l)}).catch(t=>{console.log(t)})};return o.useEffect(()=>{h()},[]),console.log("isFileUploaded3: ",r),e.jsx(e.Fragment,{children:e.jsxs(O,{children:[y?e.jsx(A,{}):"",e.jsxs(f,{gap:"200",children:[e.jsx(C,{children:e.jsxs(f,{gap:"200",children:[e.jsx(x,{variant:"headingMd",as:"h2",children:"Upload CSV"}),e.jsxs(U,{allowMultiple:!1,onDrop:w,children:[E,B]})]})}),e.jsx(C,{children:e.jsxs(f,{gap:"200",children:[e.jsx(x,{variant:"headingMd",as:"h2",children:"Uploaded CSV"}),e.jsx(V,{children:e.jsx(q,{columnContentTypes:["text","text","text","text","text"],headings:["Sr no.","Filename","Date","Actions"],rows:_})})]})})]}),r?e.jsx(P,{message:I,toggle:g}):""]})})}export{ee as default};
