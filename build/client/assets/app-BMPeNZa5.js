import{r as m,R as l,b as pn,j as Sr}from"./jsx-runtime-DexIYAB0.js";import{i as zn,t as hu,v as l0,r as c0,w as u0,m as Um,x as d0,U as Lc,E as p0,y as h0,z as f0,B as m0,C as g0,G as y0,H as b0,V as v0,I as E0,J as _0,K as S0,q as w0,N as jm,P as A0,Q as P0,T as C0,W as fu,R as qm,X as T0,F as R0,a as Ga,L as k0,Y as I0,M as x0,Z as $0,$ as O0,O as Vm,a0 as N0,a1 as L0,a2 as M0,S as F0,a3 as up,a4 as H0,a5 as D0,a6 as B0,a7 as W0,a8 as U0,a9 as j0,aa as q0,ab as V0,b as K0,ac as z0,ad as G0,ae as J0,af as X0,ag as Y0,ah as Q0,ai as Z0,aj as e_,ak as t_,al as r_,u as Km,d as n_,am as a_,an as s_,ao as o_,ap as i_,aq as l_,ar as c_,as as u_,g as d_,at as p_,au as h_,j as zm,av as f_,aw as m_,ax as g_,ay as y_}from"./components-BnUS28CX.js";import{u as le,t as b_,d as R,v as St,aj as Tr,$ as ne,o as Wr,C as Gm,n as ye,B as ut,T as se,f as pe,ak as mu,ae as ya,al as Yt,i as Qt,h as ir,am as v_,a4 as ha,a5 as $t,an as mo,a as hn,p as dt,ao as sn,W as Fo,c as Fn,b as Ae,k as Gn,l as gu,r as Vt,ap as us,A as fn,aq as Kt,ar as Jm,I as Xm,j as E_,E as ar,as as __,at as Ho,au as ds,a2 as lr,av as go,ab as Do,aw as Ym,D as yu,ax as Qm,ay as Zm,af as ps,ac as eg,ag as S_,az as w_,ad as rs,aA as A_,aB as P_,aC as dp,m as ns,aD as C_,R as T_,U as R_,V as k_,X as I_,Y as tg,w as x_,Z as $_,G as O_,Q as N_,L as Bo,aE as rg,aF as L_,aG as M_,s as F_,aH as H_,aI as D_,aJ as B_,aK as W_,aL as U_,aM as j_,aN as q_,aO as V_,P as K_,aP as z_,aQ as G_,aR as J_}from"./Page-g_6naJ0r.js";import{F as hs,a as bu,I as X_,S as Y_,m as Q_,P as ng,b as Z_,E as eS,A as tS}from"./styles-FO6d1KNi.js";import{I as on,S as rS,b as ag,c as as,u as Wo,L as ln,M as cr,d as Mc,s as nS,C as vu,e as sg,B as og,f as Eu,g as ig,i as fa,h as lg,j as aS,k as cg,l as Fc,D as sS,m as oS,F as iS,a as lS,T as cS}from"./Toast-Ckam4cjg.js";import{C as uS,h as dS,R as ug}from"./RadioButton-POZI-aKh.js";import{L as ss,A as pp,S as _u,a as hp,b as fp,D as pS}from"./DataTable-Cc8KQHKZ.js";import{D as hS,T as fS}from"./Thumbnail-8zv5IRGT.js";import{c as mS,s as gS,a as yS,R as bS}from"./browser-D0HVO5KW.js";import{S as vS}from"./scroll-restoration-CnQ_QcNm.js";import"./index-BmgK8DIy.js";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var ES=wS,_S=AS,SS=Object.prototype.toString,Ls=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function wS(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},a=n.decode||PS,s=0;s<e.length;){var o=e.indexOf("=",s);if(o===-1)break;var i=e.indexOf(";",s);if(i===-1)i=e.length;else if(i<o){s=e.lastIndexOf(";",o-1)+1;continue}var c=e.slice(s,o).trim();if(r[c]===void 0){var u=e.slice(o+1,i).trim();u.charCodeAt(0)===34&&(u=u.slice(1,-1)),r[c]=RS(u,a)}s=i+1}return r}function AS(e,t,r){var n=r||{},a=n.encode||CS;if(typeof a!="function")throw new TypeError("option encode is invalid");if(!Ls.test(e))throw new TypeError("argument name is invalid");var s=a(t);if(s&&!Ls.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(n.maxAge!=null){var i=n.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(i)}if(n.domain){if(!Ls.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!Ls.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var c=n.expires;if(!TS(c)||isNaN(c.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+c.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.partitioned&&(o+="; Partitioned"),n.priority){var u=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(u){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var d=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(d){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function PS(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function CS(e){return encodeURIComponent(e)}function TS(e){return SS.call(e)==="[object Date]"||e instanceof Date}function RS(e,t){try{return t(e)}catch{return e}}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const mp={};function dg(e,t){!e&&!mp[t]&&(mp[t]=!0,console.warn(t))}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const kS=({sign:e,unsign:t})=>(r,n={})=>{let{secrets:a=[],...s}={path:"/",sameSite:"lax",...n};return LS(r,s.expires),{get name(){return r},get isSigned(){return a.length>0},get expires(){return typeof s.maxAge<"u"?new Date(Date.now()+s.maxAge*1e3):s.expires},async parse(o,i){if(!o)return null;let c=ES(o,{...s,...i});return r in c?c[r]===""?"":await xS(t,c[r],a):null},async serialize(o,i){return _S(r,o===""?"":await IS(e,o,a),{...s,...i})}}},Su=e=>e!=null&&typeof e.name=="string"&&typeof e.isSigned=="boolean"&&typeof e.parse=="function"&&typeof e.serialize=="function";async function IS(e,t,r){let n=$S(t);return r.length>0&&(n=await e(n,r[0])),n}async function xS(e,t,r){if(r.length>0){for(let n of r){let a=await e(t,n);if(a!==!1)return gp(a)}return null}return gp(t)}function $S(e){return btoa(NS(encodeURIComponent(JSON.stringify(e))))}function gp(e){try{return JSON.parse(decodeURIComponent(OS(atob(e))))}catch{return{}}}function OS(e){let t=e.toString(),r="",n=0,a,s;for(;n<t.length;)a=t.charAt(n++),/[\w*+\-./@]/.exec(a)?r+=a:(s=a.charCodeAt(0),s<256?r+="%"+yp(s,2):r+="%u"+yp(s,4).toUpperCase());return r}function yp(e,t){let r=e.toString(16);for(;r.length<t;)r="0"+r;return r}function NS(e){let t=e.toString(),r="",n=0,a,s;for(;n<t.length;){if(a=t.charAt(n++),a==="%"){if(t.charAt(n)==="u"){if(s=t.slice(n+1,n+5),/^[\da-f]{4}$/i.exec(s)){r+=String.fromCharCode(parseInt(s,16)),n+=5;continue}}else if(s=t.slice(n,n+2),/^[\da-f]{2}$/i.exec(s)){r+=String.fromCharCode(parseInt(s,16)),n+=2;continue}}r+=a}return r}function LS(e,t){dg(!t,`The "${e}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}function Uo(e){const t=unescape(encodeURIComponent(e));return Uint8Array.from(t,(r,n)=>t.charCodeAt(n))}function MS(e){const t=String.fromCharCode.apply(null,e);return decodeURIComponent(escape(t))}function yo(...e){const t=new Uint8Array(e.reduce((n,a)=>n+a.length,0));let r=0;for(const n of e)t.set(n,r),r+=n.length;return t}function FS(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function bp(e){return e instanceof Uint8Array?t=>e[t]:e}function El(e,t,r,n,a){const s=bp(e),o=bp(r);for(let i=0;i<a;++i)if(s(t+i)!==o(n+i))return!1;return!0}function HS(e){const t=new Array(256).fill(e.length);if(e.length>1)for(let r=0;r<e.length-1;r++)t[e[r]]=e.length-1-r;return t}const Hr=Symbol("Match");class wu{constructor(t){this._lookbehind=new Uint8Array,typeof t=="string"?this._needle=t=Uo(t):this._needle=t,this._lastChar=t[t.length-1],this._occ=HS(t)}feed(t){let r=0,n;const a=[];for(;r!==t.length;)[r,...n]=this._feed(t,r),a.push(...n);return a}end(){const t=this._lookbehind;return this._lookbehind=new Uint8Array,t}_feed(t,r){const n=[];let a=-this._lookbehind.length;if(a<0){for(;a<0&&a<=t.length-this._needle.length;){const s=this._charAt(t,a+this._needle.length-1);if(s===this._lastChar&&this._memcmp(t,a,this._needle.length-1))return a>-this._lookbehind.length&&n.push(this._lookbehind.slice(0,this._lookbehind.length+a)),n.push(Hr),this._lookbehind=new Uint8Array,[a+this._needle.length,...n];a+=this._occ[s]}if(a<0)for(;a<0&&!this._memcmp(t,a,t.length-a);)a++;if(a>=0)n.push(this._lookbehind),this._lookbehind=new Uint8Array;else{const s=this._lookbehind.length+a;return s>0&&(n.push(this._lookbehind.slice(0,s)),this._lookbehind=this._lookbehind.slice(s)),this._lookbehind=Uint8Array.from(new Array(this._lookbehind.length+t.length),(o,i)=>this._charAt(t,i-this._lookbehind.length)),[t.length,...n]}}for(a+=r;a<=t.length-this._needle.length;){const s=t[a+this._needle.length-1];if(s===this._lastChar&&t[a]===this._needle[0]&&El(this._needle,0,t,a,this._needle.length-1))return a>r&&n.push(t.slice(r,a)),n.push(Hr),[a+this._needle.length,...n];a+=this._occ[s]}if(a<t.length){for(;a<t.length&&(t[a]!==this._needle[0]||!El(t,a,this._needle,0,t.length-a));)++a;a<t.length&&(this._lookbehind=t.slice(a))}return a>0&&n.push(t.slice(r,a<t.length?a:t.length)),[t.length,...n]}_charAt(t,r){return r<0?this._lookbehind[this._lookbehind.length+r]:t[r]}_memcmp(t,r,n){return El(this._charAt.bind(this,t),r,this._needle,0,n)}}class DS{constructor(t,r){this._readableStream=r,this._search=new wu(t)}async*[Symbol.asyncIterator](){const t=this._readableStream.getReader();try{for(;;){const n=await t.read();if(n.done)break;yield*this._search.feed(n.value)}const r=this._search.end();r.length&&(yield r)}finally{t.releaseLock()}}}const BS=Function.prototype.apply.bind(yo,void 0),pg=Uo("--"),Ya=Uo(`\r
`);function WS(e){const t=e.split(";").map(n=>n.trim());if(t.shift()!=="form-data")throw new Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(t)+"`");const r={};for(const n of t){const a=n.split("=",2);if(a.length!==2)throw new Error("malformed content-disposition header: key-value pair not found - "+n+" in `"+e+"`");const[s,o]=a;if(o[0]==='"'&&o[o.length-1]==='"')r[s]=o.slice(1,-1).replace(/\\"/g,'"');else if(o[0]!=='"'&&o[o.length-1]!=='"')r[s]=o;else if(o[0]==='"'&&o[o.length-1]!=='"'||o[0]!=='"'&&o[o.length-1]==='"')throw new Error("malformed content-disposition header: mismatched quotations in `"+e+"`")}if(!r.name)throw new Error("malformed content-disposition header: missing field name in `"+e+"`");return r}function US(e){const t=[];let r=!1,n;for(;typeof(n=e.shift())<"u";){const a=n.indexOf(":");if(a===-1)throw new Error("malformed multipart-form header: missing colon");const s=n.slice(0,a).trim().toLowerCase(),o=n.slice(a+1).trim();switch(s){case"content-disposition":r=!0,t.push(...Object.entries(WS(o)));break;case"content-type":t.push(["contentType",o])}}if(!r)throw new Error("malformed multipart-form header: missing content-disposition");return Object.fromEntries(t)}async function jS(e,t){let r=!0,n=!1;const a=[[]],s=new wu(Ya);for(;;){const o=await e.next();if(o.done)throw new Error("malformed multipart-form data: unexpected end of stream");if(r&&o.value!==Hr&&FS(o.value.slice(0,2),pg))return[void 0,new Uint8Array];let i;if(o.value!==Hr)i=o.value;else if(!n)i=t;else throw new Error("malformed multipart-form data: unexpected boundary");if(!i.length)continue;r&&(r=!1);const c=s.feed(i);for(const[u,d]of c.entries()){const p=d===Hr;if(!(!p&&!d.length)){if(n&&p)return c.push(s.end()),[a.filter(f=>f.length).map(BS).map(MS),yo(...c.slice(u+1).map(f=>f===Hr?Ya:f))];(n=p)?a.push([]):a[a.length-1].push(d)}}}}async function*qS(e,t){const r=yo(pg,Uo(t)),n=new DS(r,e)[Symbol.asyncIterator]();for(;;){const s=await n.next();if(s.done)return;if(s.value===Hr)break}const a=new wu(Ya);for(;;){let u=function(h){const g=[];for(const y of a.feed(h))c&&g.push(Ya),(c=y===Hr)||g.push(y);return yo(...g)};const[s,o]=await jS(n,r);if(!s)return;async function i(){const h=await n.next();if(h.done)throw new Error("malformed multipart-form data: unexpected end of stream");return h}let c=!1,d=!1;async function p(){const h=await i();let g;if(h.value!==Hr)g=h.value;else if(!c)g=Ya;else return d=!0,{value:a.end()};return{value:u(g)}}const f=[{value:u(o)}];for(yield{...US(s),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){const h=f.shift();if(!h)break;if(h.value.length>0)return h}for(;;){if(d)return{done:d,value:void 0};const h=await p();if(h.value.length>0)return h}}}};!d;)f.push(await p())}}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function VS(...e){return async t=>{for(let r of e){let n=await r(t);if(typeof n<"u"&&n!==null)return n}}}async function KS(e,t){let r=e.headers.get("Content-Type")||"",[n,a]=r.split(/\s*;\s*boundary=/);if(!e.body||!a||n!=="multipart/form-data")throw new TypeError("Could not parse content as FormData.");let s=new FormData,o=qS(e.body,a);for await(let i of o){if(i.done)break;typeof i.filename=="string"&&(i.filename=i.filename.split(/[/\\]/).pop());let c=await t(i);typeof c<"u"&&c!==null&&s.append(i.name,c)}return s}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */let Br=function(e){return e.Development="development",e.Production="production",e.Test="test",e}({});function zS(e){return e===Br.Development||e===Br.Production||e===Br.Test}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(e,t){if(e instanceof Error&&t!==Br.Development){let r=new Error("Unexpected Server Error");return r.stack=void 0,r}return e}function vp(e,t){return Object.entries(e).reduce((r,[n,a])=>Object.assign(r,{[n]:Au(a,t)}),{})}function jo(e,t){let r=Au(e,t);return{message:r.message,stack:r.stack}}function Ep(e,t){if(!e)return null;let r=Object.entries(e),n={};for(let[a,s]of r)if(zn(s))n[a]={...s,__type:"RouteErrorResponse"};else if(s instanceof Error){let o=Au(s,t);n[a]={message:o.message,stack:o.stack,__type:"Error",...o.name!=="Error"?{__subType:o.name}:{}}}else n[a]=s;return n}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qo=(e,t={})=>hu(e,t),hg=(e,t={})=>l0(e,t),Pu=(e,t=302)=>c0(e,t),fg=(e,t=302)=>u0(e,t);function GS(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Hn(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}const JS=new Set([301,302,303,307,308]);function mg(e){return JS.has(e)}function XS(e){return mg(e.status)}function YS(e){return e!=null&&typeof e.then=="function"&&e._tracked===!0}const QS="__deferred_promise:";function ZS(e,t,r){let n=new TextEncoder;return new ReadableStream({async start(s){let o={},i=[];for(let[u,d]of Object.entries(e.data))YS(d)?(o[u]=`${QS}${u}`,(typeof d._data<"u"||typeof d._error<"u")&&i.push(u)):o[u]=d;s.enqueue(n.encode(JSON.stringify(o)+`

`));for(let u of i)_p(s,n,u,e.data[u],r);let c=e.subscribe((u,d)=>{d&&_p(s,n,d,e.data[d],r)});await e.resolveData(t),c(),s.close()}})}function _p(e,t,r,n,a){"_error"in n?e.enqueue(t.encode("error:"+JSON.stringify({[r]:n._error instanceof Error?jo(n._error,a):n._error})+`

`)):e.enqueue(t.encode("data:"+JSON.stringify({[r]:n._data??null})+`

`))}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ew(e){return Object.keys(e).reduce((t,r)=>(t[r]=e[r].module,t),{})}var Vo={exports:{}},ca={decodeValues:!0,map:!1,silent:!1};function Hc(e){return typeof e=="string"&&!!e.trim()}function Dc(e,t){var r=e.split(";").filter(Hc),n=r.shift(),a=tw(n),s=a.name,o=a.value;t=t?Object.assign({},ca,t):ca;try{o=t.decodeValues?decodeURIComponent(o):o}catch(c){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",c)}var i={name:s,value:o};return r.forEach(function(c){var u=c.split("="),d=u.shift().trimLeft().toLowerCase(),p=u.join("=");d==="expires"?i.expires=new Date(p):d==="max-age"?i.maxAge=parseInt(p,10):d==="secure"?i.secure=!0:d==="httponly"?i.httpOnly=!0:d==="samesite"?i.sameSite=p:i[d]=p}),i}function tw(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function gg(e,t){if(t=t?Object.assign({},ca,t):ca,!e)return t.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find(function(a){return a.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t=t?Object.assign({},ca,t):ca,t.map){var n={};return e.filter(Hc).reduce(function(a,s){var o=Dc(s,t);return a[o.name]=o,a},n)}else return e.filter(Hc).map(function(a){return Dc(a,t)})}function rw(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,a,s,o,i;function c(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function u(){return a=e.charAt(r),a!=="="&&a!==";"&&a!==","}for(;r<e.length;){for(n=r,i=!1;c();)if(a=e.charAt(r),a===","){for(s=r,r+=1,c(),o=r;r<e.length&&u();)r+=1;r<e.length&&e.charAt(r)==="="?(i=!0,r=o,t.push(e.substring(n,s)),n=r):r=s+1}else r+=1;(!i||r>=e.length)&&t.push(e.substring(n,e.length))}return t}Vo.exports=gg;Vo.exports.parse=gg;Vo.exports.parseString=Dc;var nw=Vo.exports.splitCookiesString=rw;/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aw(e,t){let r=t.errors?t.matches.findIndex(s=>t.errors[s.route.id]):-1,n=r>=0?t.matches.slice(0,r+1):t.matches,a;if(r>=0){let{actionHeaders:s,actionData:o,loaderHeaders:i,loaderData:c}=t;t.matches.slice(r).some(u=>{let d=u.route.id;return s[d]&&(!o||o[d]===void 0)?a=s[d]:i[d]&&c[d]===void 0&&(a=i[d]),a!=null})}return n.reduce((s,o,i)=>{let{id:c}=o.route,u=e.routes[c].module,d=t.loaderHeaders[c]||new Headers,p=t.actionHeaders[c]||new Headers,f=a!=null&&i===n.length-1,h=f&&a!==d&&a!==p;if(u.headers==null){let y=new Headers(s);return h&&Sn(a,y),Sn(p,y),Sn(d,y),y}let g=new Headers(u.headers?typeof u.headers=="function"?u.headers({loaderHeaders:d,parentHeaders:s,actionHeaders:p,errorHeaders:f?a:void 0}):u.headers:void 0);return h&&Sn(a,g),Sn(p,g),Sn(d,g),Sn(s,g),g},new Headers)}function Sn(e,t){let r=e.get("Set-Cookie");r&&nw(r).forEach(a=>{t.append("Set-Cookie",a)})}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sp(e,t){if(e===!1||e===null||typeof e>"u")throw console.error("The following error is a bug in Remix; please open an issue! https://github.com/remix-run/remix/issues/new"),new Error(t)}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sw(e,t,r){let n=Um(e,t,r);return n?n.map(a=>({params:a.params,pathname:a.pathname,route:a.route})):null}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */async function ow({loadContext:e,action:t,params:r,request:n,routeId:a}){let s=await t({request:bg(yg(n)),context:e,params:r});if(s===void 0)throw new Error(`You defined an action for route "${a}" but didn't return anything from your \`action\` function. Please return a value or \`null\`.`);return Hn(s)?s:qo(s)}async function iw({loadContext:e,loader:t,params:r,request:n,routeId:a}){let s=await t({request:bg(yg(n)),context:e,params:r});if(s===void 0)throw new Error(`You defined a loader for route "${a}" but didn't return anything from your \`loader\` function. Please return a value or \`null\`.`);return GS(s)?s.init&&mg(s.init.status||200)?Pu(new Headers(s.init.headers).get("Location"),s.init):s:Hn(s)?s:qo(s)}function yg(e){let t=new URL(e.url),r=t.searchParams.getAll("index");t.searchParams.delete("index");let n=[];for(let s of r)s&&n.push(s);for(let s of n)t.searchParams.append("index",s);let a={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return a.body&&(a.duplex="half"),new Request(t.href,a)}function bg(e){let t=new URL(e.url);t.searchParams.delete("_data");let r={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return r.body&&(r.duplex="half"),new Request(t.href,r)}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vg(e){let t={};return Object.values(e).forEach(r=>{let n=r.parentId||"";t[n]||(t[n]=[]),t[n].push(r)}),t}function Eg(e,t="",r=vg(e)){return(r[t]||[]).map(n=>({...n,children:Eg(e,n.id,r)}))}function _g(e,t,r="",n=vg(e)){return(n[r]||[]).map(a=>{let s={hasErrorBoundary:a.id==="root"||a.module.ErrorBoundary!=null,id:a.id,path:a.path,loader:a.module.loader?o=>iw({request:o.request,params:o.params,loadContext:o.context,loader:a.module.loader,routeId:a.id}):void 0,action:a.module.action?o=>ow({request:o.request,params:o.params,loadContext:o.context,action:a.module.action,routeId:a.id}):void 0,handle:a.module.handle};return a.index?{index:!0,...s}:{caseSensitive:a.caseSensitive,children:_g(e,t,a.id,n),...s}})}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const lw={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},cw=/[&><\u2028\u2029]/g;function uw(e){return e.replace(cw,t=>lw[t])}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wp(e){return uw(JSON.stringify(e))}var dw={};/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */async function pw(e,t){if(t??(t=dw.REMIX_DEV_ORIGIN),!t)throw Error("Dev server origin not set");let r=new URL(t);r.pathname="ping";let n=await fetch(r.href,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buildHash:e.assets.version})}).catch(a=>{throw console.error(`Could not reach Remix dev server at ${r}`),a});if(!n.ok)throw console.error(`Could not reach Remix dev server at ${r} (${n.status})`),Error(await n.text())}function hw(e){console.log(`[REMIX DEV] ${e.assets.version} ready`)}const Sg="__remix_devServerHooks";function fw(e){globalThis[Sg]=e}function Ap(){return globalThis[Sg]}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pp(e,t){var r,n;let a=Eg(e.routes),s=_g(e.routes,e.future),o=zS(t)?t:Br.Production,i=f0(s,{basename:e.basename,future:{v7_relativeSplatPath:((r=e.future)===null||r===void 0?void 0:r.v3_relativeSplatPath)===!0,v7_throwAbortReason:((n=e.future)===null||n===void 0?void 0:n.v3_throwAbortReason)===!0}}),c=e.entry.module.handleError||((u,{request:d})=>{o!==Br.Test&&!d.signal.aborted&&console.error(zn(u)&&u.error?u.error:u)});return{routes:a,dataRoutes:s,serverMode:o,staticHandler:i,errorHandler:c}}const mw=(e,t)=>{let r,n,a,s,o;return async function(c,u={}){if(r=typeof e=="function"?await e():e,t??(t=r.mode),typeof e=="function"){let v=Pp(r,t);n=v.routes,a=v.serverMode,s=v.staticHandler,o=v.errorHandler}else if(!n||!a||!s||!o){let v=Pp(r,t);n=v.routes,a=v.serverMode,s=v.staticHandler,o=v.errorHandler}let d=new URL(c.url),p=sw(n,d.pathname,r.basename),f=v=>{if(t===Br.Development){var _,A;(_=Ap())===null||_===void 0||(A=_.processRequestError)===null||A===void 0||A.call(_,v)}o(v,{context:u,params:p&&p.length>0?p[0].params:{},request:c})},h;if(d.searchParams.has("_data")){let v=d.searchParams.get("_data");if(h=await gw(a,r,s,v,c,u,f),r.entry.module.handleDataRequest){var g;h=await r.entry.module.handleDataRequest(h,{context:u,params:(p==null||(g=p.find(_=>_.route.id==v))===null||g===void 0?void 0:g.params)||{},request:c})}}else if(p&&p[p.length-1].route.module.default==null&&p[p.length-1].route.module.ErrorBoundary==null)h=await bw(a,s,p.slice(-1)[0].route.id,c,u,f);else{var y,b;let v=t===Br.Development?await((y=Ap())===null||y===void 0||(b=y.getCriticalCss)===null||b===void 0?void 0:b.call(y,r,d.pathname)):void 0;h=await yw(a,r,s,c,u,f,v)}return c.method==="HEAD"?new Response(null,{headers:h.headers,status:h.status,statusText:h.statusText}):h}};async function gw(e,t,r,n,a,s,o){try{let i=await r.queryRoute(a,{routeId:n,requestContext:s});if(XS(i)){let c=new Headers(i.headers),u=c.get("Location");return c.set("X-Remix-Redirect",t.basename&&d0(u,t.basename)||u),c.set("X-Remix-Status",i.status),c.delete("Location"),i.headers.get("Set-Cookie")!==null&&c.set("X-Remix-Revalidate","yes"),new Response(null,{status:204,headers:c})}if(Lc in i){let c=i[Lc],u=ZS(c,a.signal,e),d=c.init||{},p=new Headers(d.headers);return p.set("Content-Type","text/remix-deferred"),p.set("X-Remix-Response","yes"),d.headers=p,new Response(u,d)}return i.headers.set("X-Remix-Response","yes"),i}catch(i){if(Hn(i))return i.headers.set("X-Remix-Catch","yes"),i;if(zn(i))return i&&o(i),wg(i,e);let c=i instanceof Error||i instanceof DOMException?i:new Error("Unexpected Server Error");return o(c),hu(jo(c,e),{status:500,headers:{"X-Remix-Error":"yes"}})}}async function yw(e,t,r,n,a,s,o){let i;try{i=await r.query(n,{requestContext:a})}catch(p){return s(p),new Response(null,{status:500})}if(Hn(i))return i;i.errors&&(Object.values(i.errors).forEach(p=>{(!zn(p)||p.error)&&s(p)}),i.errors=vp(i.errors,e));let c=aw(t,i),u={manifest:t.assets,routeModules:ew(t.routes),staticHandlerContext:i,criticalCss:o,serverHandoffString:wp({url:i.location.pathname,basename:t.basename,criticalCss:o,state:{loaderData:i.loaderData,actionData:i.actionData,errors:Ep(i.errors,e)},future:t.future,isSpaMode:t.isSpaMode}),future:t.future,isSpaMode:t.isSpaMode,serializeError:p=>jo(p,e)},d=t.entry.module.default;try{return await d(n,i.statusCode,c,u,a)}catch(p){s(p);let f=p;if(Hn(p)){let h;try{let g=p.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?p.body==null?h=null:h=await p.json():h=await p.text(),f=new p0(p.status,p.statusText,h)}catch{}}i=h0(r.dataRoutes,i,f),i.errors&&(i.errors=vp(i.errors,e)),u={...u,staticHandlerContext:i,serverHandoffString:wp({url:i.location.pathname,basename:t.basename,state:{loaderData:i.loaderData,actionData:i.actionData,errors:Ep(i.errors,e)},future:t.future,isSpaMode:t.isSpaMode})};try{return await d(n,i.statusCode,c,u,a)}catch(h){return s(h),Ag(h,e)}}}async function bw(e,t,r,n,a,s){try{let o=await t.queryRoute(n,{routeId:r,requestContext:a});return Sp(!(Lc in o),`You cannot return a \`defer()\` response from a Resource Route.  Did you forget to export a default UI component from the "${r}" route?`),Sp(Hn(o),"Expected a Response to be returned from queryRoute"),o}catch(o){return Hn(o)?(o.headers.set("X-Remix-Catch","yes"),o):zn(o)?(o&&s(o),wg(o,e)):(s(o),Ag(o,e))}}function wg(e,t){return hu(jo(e.error||new Error("Unexpected Server Error"),t),{status:e.status,statusText:e.statusText,headers:{"X-Remix-Error":"yes"}})}function Ag(e,t){let r="Unexpected Server Error";return t!==Br.Production&&(r+=`

${String(e)}`),new Response(r,{status:500,headers:{"Content-Type":"text/plain"}})}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _l(e){return`__flash_${e}__`}const Cu=(e={},t="")=>{let r=new Map(Object.entries(e));return{get id(){return t},get data(){return Object.fromEntries(r)},has(n){return r.has(n)||r.has(_l(n))},get(n){if(r.has(n))return r.get(n);let a=_l(n);if(r.has(a)){let s=r.get(a);return r.delete(a),s}},set(n,a){r.set(n,a)},flash(n,a){r.set(_l(n),a)},unset(n){r.delete(n)}}},vw=e=>e!=null&&typeof e.id=="string"&&typeof e.data<"u"&&typeof e.has=="function"&&typeof e.get=="function"&&typeof e.set=="function"&&typeof e.flash=="function"&&typeof e.unset=="function",Ew=e=>({cookie:t,createData:r,readData:n,updateData:a,deleteData:s})=>{let o=Su(t)?t:e((t==null?void 0:t.name)||"__session",t);return Pg(o),{async getSession(i,c){let u=i&&await o.parse(i,c),d=u&&await n(u);return Cu(d||{},u||"")},async commitSession(i,c){let{id:u,data:d}=i,p=(c==null?void 0:c.maxAge)!=null?new Date(Date.now()+c.maxAge*1e3):(c==null?void 0:c.expires)!=null?c.expires:o.expires;return u?await a(u,d,p):u=await r(d,p),o.serialize(u,c)},async destroySession(i,c){return await s(i.id),o.serialize("",{...c,maxAge:void 0,expires:new Date(0)})}}};function Pg(e){dg(e.isSigned,`The "${e.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://remix.run/utils/cookies#signing-cookies for more information.`)}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const _w=e=>({cookie:t}={})=>{let r=Su(t)?t:e((t==null?void 0:t.name)||"__session",t);return Pg(r),{async getSession(n,a){return Cu(n&&await r.parse(n,a)||{})},async commitSession(n,a){let s=await r.serialize(n.data,a);if(s.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+s.length);return s},async destroySession(n,a){return r.serialize("",{...a,maxAge:void 0,expires:new Date(0)})}}};/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Sw=e=>({cookie:t}={})=>{let r=new Map;return e({cookie:t,async createData(n,a){let s=Math.random().toString(36).substring(2,10);return r.set(s,{data:n,expires:a}),s},async readData(n){if(r.has(n)){let{data:a,expires:s}=r.get(n);if(!s||s>new Date)return a;s&&r.delete(n)}return null},async updateData(n,a,s){r.set(n,{data:a,expires:s})},async deleteData(n){r.delete(n)}})};/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */class Cg extends Error{constructor(t,r){super(`Field "${t}" exceeded upload size of ${r} bytes.`),this.field=t,this.maxBytes=r}}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ww({filter:e,maxPartSize:t=3e6}={}){return async({filename:r,contentType:n,name:a,data:s})=>{if(e&&!await e({filename:r,contentType:n,name:a}))return;let o=0,i=[];for await(let c of s){if(o+=c.byteLength,o>t)throw new Cg(a,t);i.push(c)}return typeof r=="string"?new File(i,r,{type:n}):await new Blob(i,{type:n}).text()}}/**
 * @remix-run/server-runtime v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Aw=Object.freeze(Object.defineProperty({__proto__:null,MaxPartSizeExceededError:Cg,broadcastDevReady:pw,createCookieFactory:kS,createCookieSessionStorageFactory:_w,createMemorySessionStorageFactory:Sw,createRequestHandler:mw,createSession:Cu,createSessionStorageFactory:Ew,defer:hg,isCookie:Su,isSession:vw,json:qo,logDevReady:hw,redirect:Pu,redirectDocument:fg,unstable_composeUploadHandlers:VS,unstable_createMemoryUploadHandler:ww,unstable_parseMultipartFormData:KS,unstable_setDevServerHooks:fw},Symbol.toStringTag,{value:"Module"}));function Pw({context:e,router:t,hydrate:r=!0,nonce:n}){t&&e||m0(!1);let a={router:t,navigator:Rw(),static:!0,staticContext:e,basename:e.basename||"/"},s=new Map,o="";if(r!==!1){let c={loaderData:e.loaderData,actionData:e.actionData,errors:Tw(e.errors)};o=`window.__staticRouterHydrationData = JSON.parse(${Ow(JSON.stringify(JSON.stringify(c)))});`}let{state:i}=a.router;return m.createElement(m.Fragment,null,m.createElement(g0.Provider,{value:a},m.createElement(y0.Provider,{value:i},m.createElement(b0.Provider,{value:s},m.createElement(v0.Provider,{value:{isTransitioning:!1}},m.createElement(E0,{basename:a.basename,location:i.location,navigationType:i.historyAction,navigator:a.navigator,static:a.static,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},m.createElement(Cw,{routes:t.routes,future:t.future,state:i})))))),o?m.createElement("script",{suppressHydrationWarning:!0,nonce:n,dangerouslySetInnerHTML:{__html:o}}):null)}function Cw({routes:e,future:t,state:r}){return _0(e,void 0,r,t)}function Tw(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,a]of t)zn(a)?r[n]={...a,__type:"RouteErrorResponse"}:a instanceof Error?r[n]={message:a.message,__type:"Error",...a.name!=="Error"?{__subType:a.name}:{}}:r[n]=a;return r}function Rw(){return{createHref:Tg,encodeLocation:Rg,push(e){throw new Error(`You cannot use navigator.push() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(e)})\` somewhere in your app.`)},replace(e){throw new Error(`You cannot use navigator.replace() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(e)}, { replace: true })\` somewhere in your app.`)},go(e){throw new Error(`You cannot use navigator.go() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${e})\` somewhere in your app.`)},back(){throw new Error("You cannot use navigator.back() on the server because it is a stateless environment.")},forward(){throw new Error("You cannot use navigator.forward() on the server because it is a stateless environment.")}}}function kw(e,t,r={}){let n={},a=S0(e,w0,void 0,n),s=t.matches.map(i=>{let c=n[i.route.id]||i.route;return{...i,route:c}}),o=i=>`You cannot use router.${i}() on the server because it is a stateless environment`;return{get basename(){return t.basename},get future(){var i,c;return{v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:((i=r.future)==null?void 0:i.v7_partialHydration)===!0,v7_prependBasename:!1,v7_relativeSplatPath:((c=r.future)==null?void 0:c.v7_relativeSplatPath)===!0}},get state(){return{historyAction:jm.Pop,location:t.location,matches:s,loaderData:t.loaderData,actionData:t.actionData,errors:t.errors,initialized:!0,navigation:A0,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",fetchers:new Map,blockers:new Map}},get routes(){return a},get window(){},initialize(){throw o("initialize")},subscribe(){throw o("subscribe")},enableScrollRestoration(){throw o("enableScrollRestoration")},navigate(){throw o("navigate")},fetch(){throw o("fetch")},revalidate(){throw o("revalidate")},createHref:Tg,encodeLocation:Rg,getFetcher(){return P0},deleteFetcher(){throw o("deleteFetcher")},dispose(){throw o("dispose")},getBlocker(){return C0},deleteBlocker(){throw o("deleteBlocker")},_internalFetchControllers:new Map,_internalActiveDeferreds:new Map,_internalSetRoutes(){throw o("_internalSetRoutes")}}}function Tg(e){return typeof e=="string"?e:fu(e)}function Rg(e){let t=typeof e=="string"?e:fu(e);t=t.replace(/ $/,"%20");let r=Iw.test(t)?new URL(t):new URL(t,"http://localhost");return{pathname:r.pathname,search:r.search,hash:r.hash}}const Iw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xw={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},$w=/[&><\u2028\u2029]/g;function Ow(e){return e.replace($w,t=>xw[t])}/**
 * @remix-run/react v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nw({context:e,url:t,abortDelay:r}){typeof t=="string"&&(t=new URL(t));let{manifest:n,routeModules:a,criticalCss:s,serverHandoffString:o}=e,i=mS(n.routes,a,e.future,e.isSpaMode);e.staticHandlerContext.loaderData={...e.staticHandlerContext.loaderData};for(let u of e.staticHandlerContext.matches){let d=u.route.id,p=a[d],f=e.manifest.routes[d];p&&gS(f,p,e.isSpaMode)&&(p.HydrateFallback||!f.hasLoader)&&(e.staticHandlerContext.loaderData[d]=void 0)}let c=kw(i,e.staticHandlerContext,{future:{v7_partialHydration:!0,v7_relativeSplatPath:e.future.v3_relativeSplatPath}});return m.createElement(qm.Provider,{value:{manifest:n,routeModules:a,criticalCss:s,serverHandoffString:o,future:e.future,isSpaMode:e.isSpaMode,serializeError:e.serializeError,abortDelay:r}},m.createElement(yS,{location:c.state.location},m.createElement(Pw,{router:c,context:e.staticHandlerContext,hydrate:!1})))}/**
 * @remix-run/react v2.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Lw=Object.freeze(Object.defineProperty({__proto__:null,Await:T0,Form:R0,Link:Ga,Links:k0,LiveReload:I0,Meta:x0,NavLink:$0,Navigate:O0,get NavigationType(){return jm},Outlet:Vm,PrefetchPageLinks:N0,RemixBrowser:bS,RemixServer:Nw,Route:L0,Routes:M0,Scripts:F0,ScrollRestoration:vS,UNSAFE_RemixContext:qm,createPath:fu,createRoutesFromChildren:up,createRoutesFromElements:up,createSearchParams:H0,defer:hg,generatePath:D0,isRouteErrorResponse:zn,json:qo,matchPath:B0,matchRoutes:Um,parsePath:W0,redirect:Pu,redirectDocument:fg,renderMatches:U0,resolvePath:j0,unstable_usePrompt:q0,unstable_useViewTransitionState:V0,useActionData:K0,useAsyncError:z0,useAsyncValue:G0,useBeforeUnload:J0,useBlocker:X0,useFetcher:Y0,useFetchers:Q0,useFormAction:Z0,useHref:e_,useInRouterContext:t_,useLinkClickHandler:r_,useLoaderData:Km,useLocation:n_,useMatch:a_,useMatches:s_,useNavigate:o_,useNavigation:i_,useNavigationType:l_,useOutlet:c_,useOutletContext:u_,useParams:d_,useResolvedPath:p_,useRevalidator:h_,useRouteError:zm,useRouteLoaderData:f_,useRoutes:m_,useSearchParams:g_,useSubmit:y_},Symbol.toStringTag,{value:"Module"})),Mw="en",Fw=["cs","da","de","en","es","fi","fr","it","ja","ko","nb","nl","pl","pt-BR","pt-PT","sv","th","tr","vi","zh-CN","zh-TW"];function _t(e,t,r){return e<t?t:e>r?r:e}function kn(e,t){const r=+`${e}e${t}`;return+`${Math.round(r)}e-${t}`}function kg(e){const{red:t,green:r,blue:n}=e;return"alpha"in e?`rgba(${t}, ${r}, ${n}, ${e.alpha})`:`rgb(${t}, ${r}, ${n})`}const Hw=kg;function Ig({red:e,green:t,blue:r}){return`#${Sl(e)}${Sl(t)}${Sl(r)}`}function Sl(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Dw(e){return Ig(Ko(e))}function xg(e,t){const r=e/60,n=1-Math.abs(r%2-1),a=t*n;let s=0,o=0,i=0;return r>=0&&r<=1&&(s=t,o=a,i=0),r>=1&&r<=2&&(s=a,o=t,i=0),r>=2&&r<=3&&(s=0,o=t,i=a),r>=3&&r<=4&&(s=0,o=a,i=t),r>=4&&r<=5&&(s=a,o=0,i=t),r>=5&&r<=6&&(s=t,o=0,i=a),{red:s,green:o,blue:i}}function Ko(e){const{hue:t,saturation:r,brightness:n,alpha:a=1}=e,s=n*r;let{red:o,green:i,blue:c}=xg(t,s);const u=n-s;return o+=u,i+=u,c+=u,{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(c*255),alpha:a}}function Bw(e){const{hue:t,saturation:r,lightness:n,alpha:a=1}=e,s=(1-Math.abs(2*(n/100)-1))*(r/100);let{red:o,green:i,blue:c}=xg(t,s);const u=n/100-s/2;return o+=u,i+=u,c+=u,{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(c*255),alpha:a}}function $g(e,t="b"){const{alpha:r=1}=e,n=e.red/255,a=e.green/255,s=e.blue/255,o=Math.max(n,a,s),i=Math.min(n,a,s),c=o-i,u=(o+i)/2;let d=0;if(o===0)d=0;else if(t==="b")d=c/o;else if(t==="l"){const g=u>.5?c/(2-o-i):c/(o+i);d=isNaN(g)?0:g}let p=0;switch(o){case n:p=(a-s)/c+(a<s?6:0);break;case a:p=(s-n)/c+2;break;case s:p=(n-a)/c+4}const f=p/6*360,h=_t(f,0,360);return{hue:h?kn(h,2):0,saturation:kn(_t(d,0,1),4),brightness:kn(_t(o,0,1),4),lightness:kn(u,4),alpha:kn(r,4)}}function Ww(e){const{hue:t,saturation:r,brightness:n,alpha:a=1}=$g(e,"b");return{hue:t,saturation:r,brightness:n,alpha:a}}function Uw(e){const{hue:t,saturation:r,lightness:n,alpha:a=1}=$g(e,"l"),s=kn(r*100,2),o=kn(n*100,2);return{hue:t,saturation:s,lightness:o,alpha:a}}function jw(e){if(e.length===4){const a=(c,u)=>e.slice(c,u).repeat(2),s=parseInt(a(1,2),16),o=parseInt(a(2,3),16),i=parseInt(a(3,4),16);return{red:s,green:o,blue:i}}const t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return{red:t,green:r,blue:n}}let Yr;(function(e){e.All="all",e.Page="page",e.Multi="multi",e.Single="single",e.Range="range"})(Yr||(Yr={}));function Cp(e){if("id"in e)return e.id;throw new Error("Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`")}function qw(e,{selectedResources:t=[],allResourcesSelected:r=!1,resourceIDResolver:n=Cp,resourceFilter:a=void 0}={selectedResources:[],allResourcesSelected:!1,resourceIDResolver:Cp,resourceFilter:void 0}){const[s,o]=m.useState(t),[i,c]=m.useState(r),u=m.useCallback((f,h,g,y)=>{switch(f===Yr.All?c(h):i&&c(!1),f){case Yr.Single:o(b=>h?[...b,g]:b.filter(v=>v!==g));break;case Yr.All:case Yr.Page:if(a){const b=e.filter(a);o(h&&s.length<b.length?b.map(n):[])}else o(h?e.map(n):[]);break;case Yr.Multi:if(!g)break;o(b=>{const v=[],_=a?e.filter(a):e;for(let A=g[0];A<=g[1];A++)if(_.includes(e[A])){const T=n(e[A]);(h&&!b.includes(T)||!h&&b.includes(T))&&v.push(T)}return h?[...b,...v]:b.filter(A=>!v.includes(A))});break;case Yr.Range:if(!g)break;o(b=>{const A=(a?e.filter(a):e).map(n).slice(Number(g[0]),Number(g[1])+1),T=A.some(P=>s.includes(P));return!A.every(P=>s.includes(P))&&(h||T)?[...new Set([...b,...A]).values()]:b.filter(P=>!A.includes(P))});break}},[i,a,s,e,n]),d=m.useCallback(()=>{o([]),c(!1)},[]),p=m.useCallback(f=>{const g=[...s].filter(y=>!f.includes(y));o(g),g.length===0&&c(!1)},[s]);return{selectedResources:s,allResourcesSelected:i,handleSelectionChange:u,clearSelection:d,removeSelectedResources:p}}var Og=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M10 6a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),l.createElement("path",{d:"M11 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),l.createElement("path",{fillRule:"evenodd",d:"M11.237 3.177a1.75 1.75 0 0 0-2.474 0l-5.586 5.585a1.75 1.75 0 0 0 0 2.475l5.586 5.586a1.75 1.75 0 0 0 2.474 0l5.586-5.586a1.75 1.75 0 0 0 0-2.475l-5.586-5.585Zm-1.414 1.06a.25.25 0 0 1 .354 0l5.586 5.586a.25.25 0 0 1 0 .354l-5.586 5.585a.25.25 0 0 1-.354 0l-5.586-5.585a.25.25 0 0 1 0-.354l5.586-5.586Z"}))};Og.displayName="AlertDiamondIcon";var Ng=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M10 3.5a.75.75 0 0 1 .75.75v9.69l2.72-2.72a.75.75 0 0 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06l2.72 2.72v-9.69a.75.75 0 0 1 .75-.75Z"}))};Ng.displayName="ArrowDownIcon";var Lg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M3.5 10a.75.75 0 0 1 .75-.75h9.69l-2.72-2.72a.75.75 0 1 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06l2.72-2.72h-9.69a.75.75 0 0 1-.75-.75Z"}))};Lg.displayName="ArrowRightIcon";var Mg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M10 16.5a.75.75 0 0 1-.75-.75v-9.69l-2.72 2.72a.75.75 0 1 1-1.06-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06l-2.72-2.72v9.69a.75.75 0 0 1-.75.75Z"}))};Mg.displayName="ArrowUpIcon";var zo=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};zo.displayName="CheckIcon";var Fg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M13.28 8.78a.75.75 0 0 0-1.06-1.06l-2.97 2.97-1.22-1.22a.75.75 0 0 0-1.06 1.06l1.75 1.75a.75.75 0 0 0 1.06 0l3.5-3.5Z"}),l.createElement("path",{fillRule:"evenodd",d:"M6.25 3.5a2.75 2.75 0 0 0-2.75 2.75v7.5a2.75 2.75 0 0 0 2.75 2.75h7.5a2.75 2.75 0 0 0 2.75-2.75v-7.5a2.75 2.75 0 0 0-2.75-2.75h-7.5Zm-1.25 2.75c0-.69.56-1.25 1.25-1.25h7.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25h-7.5c-.69 0-1.25-.56-1.25-1.25v-7.5Z"}))};Fg.displayName="CheckboxIcon";var Hg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M11.5 8.25a.75.75 0 0 1 .75.75v4.25a.75.75 0 0 1-1.5 0v-4.25a.75.75 0 0 1 .75-.75Z"}),l.createElement("path",{d:"M9.25 9a.75.75 0 0 0-1.5 0v4.25a.75.75 0 0 0 1.5 0v-4.25Z"}),l.createElement("path",{fillRule:"evenodd",d:"M7.25 5.25a2.75 2.75 0 0 1 5.5 0h3a.75.75 0 0 1 0 1.5h-.75v5.45c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311c-.642.327-1.482.327-3.162.327h-.4c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311c-.327-.642-.327-1.482-.327-3.162v-5.45h-.75a.75.75 0 0 1 0-1.5h3Zm1.5 0a1.25 1.25 0 1 1 2.5 0h-2.5Zm-2.25 1.5h7v5.45c0 .865-.001 1.423-.036 1.848-.033.408-.09.559-.128.633a1.5 1.5 0 0 1-.655.655c-.074.038-.225.095-.633.128-.425.035-.983.036-1.848.036h-.4c-.865 0-1.423-.001-1.848-.036-.408-.033-.559-.09-.633-.128a1.5 1.5 0 0 1-.656-.655c-.037-.074-.094-.225-.127-.633-.035-.425-.036-.983-.036-1.848v-5.45Z"}))};Hg.displayName="DeleteIcon";var Dg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M11.25 8.5c-.414 0-.75.336-.75.75v1.25h-1.25c-.414 0-.75.336-.75.75s.336.75.75.75h1.25v1.25c0 .414.336.75.75.75s.75-.336.75-.75v-1.25h1.25c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-1.25v-1.25c0-.414-.336-.75-.75-.75Z"}),l.createElement("path",{fillRule:"evenodd",d:"M8.75 16.5c-1.438 0-2.618-1.104-2.74-2.51-1.406-.122-2.51-1.302-2.51-2.74v-5c0-1.519 1.231-2.75 2.75-2.75h5c1.438 0 2.618 1.104 2.74 2.51 1.406.122 2.51 1.302 2.51 2.74v5c0 1.519-1.231 2.75-2.75 2.75h-5Zm0-10.5c-1.519 0-2.75 1.231-2.75 2.75v3.725c-.57-.116-1-.62-1-1.225v-5c0-.69.56-1.25 1.25-1.25h5c.605 0 1.11.43 1.225 1h-3.725Zm0 1.5c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h5c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25h-5Z"}))};Dg.displayName="DuplicateIcon";var Bg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M15.655 4.344a2.695 2.695 0 0 0-3.81 0l-.599.599-.009-.009-1.06 1.06.008.01-5.88 5.88a2.75 2.75 0 0 0-.805 1.944v1.922a.75.75 0 0 0 .75.75h1.922a2.75 2.75 0 0 0 1.944-.806l7.54-7.539a2.695 2.695 0 0 0 0-3.81Zm-4.409 2.72-5.88 5.88a1.25 1.25 0 0 0-.366.884v1.172h1.172c.331 0 .65-.132.883-.366l5.88-5.88-1.689-1.69Zm2.75.629.599-.599a1.195 1.195 0 1 0-1.69-1.689l-.598.599 1.69 1.689Z"}))};Bg.displayName="EditIcon";var Wg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M9.75 3c-1.243 0-2.25 1.007-2.25 2.25 0 .414.336.75.75.75s.75-.336.75-.75.336-.75.75-.75h3.5c.69 0 1.25.56 1.25 1.25v8.5c0 .69-.56 1.25-1.25 1.25h-3.5c-.414 0-.75-.336-.75-.75s-.336-.75-.75-.75-.75.336-.75.75c0 1.243 1.007 2.25 2.25 2.25h3.5c1.519 0 2.75-1.231 2.75-2.75v-8.5c0-1.519-1.231-2.75-2.75-2.75h-3.5Z"}),l.createElement("path",{d:"M12.25 10.75c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-5.69l.97-.97c.293-.293.293-.767 0-1.06-.293-.293-.767-.293-1.06 0l-2.25 2.25c-.141.14-.22.331-.22.53s.079.39.22.53l2.25 2.25c.293.293.767.293 1.06 0 .293-.293.293-.767 0-1.06l-.97-.97h5.69Z"}))};Wg.displayName="ExitIcon";var Ug=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M3 6a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),l.createElement("path",{d:"M6.75 14a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"}),l.createElement("path",{d:"M5.5 9.25a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5h-9Z"}))};Ug.displayName="FilterIcon";var Tu=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M10 14a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-.75.75Z"}),l.createElement("path",{d:"M9 7a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z"}),l.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};Tu.displayName="InfoIcon";var Ru=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M3 6.75c0-2.071 1.679-3.75 3.75-3.75h6.5c2.071 0 3.75 1.679 3.75 3.75v6.5c0 2.071-1.679 3.75-3.75 3.75h-6.5c-2.071 0-3.75-1.679-3.75-3.75v-6.5Zm3.75-2.25c-1.243 0-2.25 1.007-2.25 2.25v6.5c0 1.243 1.007 2.25 2.25 2.25h.5v-11h-.5Zm4.5 11h-2.5v-11h2.5v11Zm1.5 0h.5c1.243 0 2.25-1.007 2.25-2.25v-6.5c0-1.243-1.007-2.25-2.25-2.25h-.5v11Z"}))};Ru.displayName="LayoutColumns3Icon";var jg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M3 4.75a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),l.createElement("path",{fillRule:"evenodd",d:"M3 10a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),l.createElement("path",{fillRule:"evenodd",d:"M3 15.25a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}))};jg.displayName="MenuIcon";var qg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M5 10c0-.414.336-.75.75-.75h8.5c.414 0 .75.336.75.75s-.336.75-.75.75h-8.5c-.414 0-.75-.336-.75-.75Z"}))};qg.displayName="MinusIcon";var Vg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{fillRule:"evenodd",d:"M15.375 8.485c1.167.674 1.167 2.358 0 3.031l-7.5 4.33c-1.167.674-2.625-.168-2.625-1.515v-8.66c0-1.348 1.458-2.19 2.625-1.516l7.5 4.33Zm-.75 1.732a.25.25 0 0 0 0-.433l-7.5-4.33a.25.25 0 0 0-.375.217v8.66a.25.25 0 0 0 .375.216l7.5-4.33Z"}))};Vg.displayName="PlayIcon";var ku=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M10.75 5.75c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3.5h-3.5c-.414 0-.75.336-.75.75s.336.75.75.75h3.5v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5h3.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-3.5v-3.5Z"}))};ku.displayName="PlusIcon";var Kg=function(t){return l.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),l.createElement("path",{d:"M7.75 6.06v7.69a.75.75 0 0 1-1.5 0v-7.69l-1.72 1.72a.75.75 0 0 1-1.06-1.06l3-3a.75.75 0 0 1 1.06 0l3 3a.75.75 0 1 1-1.06 1.06l-1.72-1.72Z"}),l.createElement("path",{d:"M13.75 6.25a.75.75 0 0 0-1.5 0v7.69l-1.72-1.72a.75.75 0 1 0-1.06 1.06l3 3a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06l-1.72 1.72v-7.69Z"}))};Kg.displayName="SortIcon";var wl={SettingAction:"Polaris-SettingAction",Setting:"Polaris-SettingAction__Setting",Action:"Polaris-SettingAction__Action"};function zg({action:e,children:t}){return l.createElement("div",{className:wl.SettingAction},l.createElement("div",{className:wl.Setting},t),l.createElement("div",{className:wl.Action},e))}var fr={Avatar:"Polaris-Avatar",imageHasLoaded:"Polaris-Avatar--imageHasLoaded",Text:"Polaris-Avatar__Text",long:"Polaris-Avatar--long",hidden:"Polaris-Avatar--hidden",sizeXs:"Polaris-Avatar--sizeXs",sizeSm:"Polaris-Avatar--sizeSm",sizeMd:"Polaris-Avatar--sizeMd",sizeLg:"Polaris-Avatar--sizeLg",sizeXl:"Polaris-Avatar--sizeXl",styleOne:"Polaris-Avatar--styleOne",styleTwo:"Polaris-Avatar--styleTwo",styleThree:"Polaris-Avatar--styleThree",styleFour:"Polaris-Avatar--styleFour",styleFive:"Polaris-Avatar--styleFive",styleSix:"Polaris-Avatar--styleSix",styleSeven:"Polaris-Avatar--styleSeven",Image:"Polaris-Avatar__Image",Initials:"Polaris-Avatar__Initials",Svg:"Polaris-Avatar__Svg"},br;(function(e){e.Pending="PENDING",e.Loaded="LOADED",e.Errored="ERRORED"})(br||(br={}));const Al=["one","two","three","four","five","six","seven"],Tp={xs:"3",sm:"2.5",md:"2.5",lg:"2.5",xl:"2"};function Vw(e){let t=0;for(const r of e)t^=r.charCodeAt(0);return t}function Kw(e){return e?Al[Vw(e)%Al.length]:Al[0]}function Iu({name:e,source:t,onError:r,initials:n,customer:a,size:s="md",accessibilityLabel:o}){const i=le(),c=b_(),[u,d]=m.useState(br.Pending);m.useEffect(()=>{d(br.Pending)},[t]);const p=m.useCallback(()=>{d(br.Errored),r&&r()},[r]),f=m.useCallback(()=>{d(br.Loaded)},[]),h=t&&u!==br.Errored,g=e||n;let y;if(o)y=o;else if(e)y=e;else if(n){const P=n.split("").join(" ");y=i.translate("Polaris.Avatar.labelWithInitials",{initials:P})}const b=R(fr.Avatar,s&&fr[St("size",s)],h&&u===br.Loaded&&fr.imageHasLoaded,!a&&!h&&fr[St("style",Kw(g))]),v=R(fr.Text,((n==null?void 0:n.length)||0)>2&&fr.long),_=R(fr.Image,u!==br.Loaded&&fr.hidden),A=t&&c&&u!==br.Errored?l.createElement(on,{className:_,source:t,alt:"",role:"presentation",onLoad:f,onError:p}):null,T="0.35em",k=l.createElement(l.Fragment,null,l.createElement("path",{fill:"none",d:"M25.5 13.5C25.5 16.5376 23.0376 19 20 19C16.9624 19 14.5 16.5376 14.5 13.5C14.5 10.4624 16.9624 8 20 8C23.0376 8 25.5 10.4624 25.5 13.5Z",stroke:"currentColor",strokeWidth:Tp[s]}),l.createElement("path",{fill:"none",d:"M10.3433 29.682L9.47 31.254C9.03481 32.0373 9.60125 33 10.4974 33H29.5026C30.3988 33 30.9652 32.0373 30.53 31.254L29.6567 29.682C27.7084 26.175 24.0119 24 20 24C15.9882 24 12.2916 26.175 10.3433 29.682Z",stroke:"currentColor",strokeWidth:Tp[s],strokeLinecap:"round",strokeLinejoin:"round"})),I=a||!n?k:l.createElement("text",{className:v,x:"50%",y:"50%",dy:T,fill:"currentColor",textAnchor:"middle"},n),E=h?null:l.createElement("span",{className:fr.Initials},l.createElement("svg",{className:fr.Svg,viewBox:"0 0 40 40"},I));return l.createElement("span",{"aria-label":y,role:y?"img":"presentation",className:b},E,A)}function zw({connected:e=!1,action:t,avatarUrl:r,accountName:n="",title:a,details:s,termsOfService:o}){const i=Tr(),c=n?n.split(/\s+/).map(y=>y[0]).join(""):void 0,u=e?l.createElement("span",null,l.createElement(Iu,{accessibilityLabel:"",name:n,initials:c,source:r})):null,d=a||n,p=l.createElement(se,{as:"h2",variant:"headingSm"},d),f=s?l.createElement(se,{as:"span",tone:"subdued"},s):null,h=o?l.createElement(ne,{paddingBlockStart:i.mdUp?"400":"500"},o):null,g=t?Wr(t,{variant:e?void 0:"primary"}):null;return l.createElement(Gm,null,l.createElement(zg,{action:g},l.createElement(ye,{gap:"400"},u,l.createElement(ut,{gap:"100"},p,f))),h)}function Bc(e){return typeof e[0]=="object"&&Object.prototype.hasOwnProperty.call(e[0],"options")}var Gw={Loading:"Polaris-Autocomplete__Loading",SectionWrapper:"Polaris-Autocomplete__SectionWrapper"},Ms={Content:"Polaris-Autocomplete-MappedOption__Content",Media:"Polaris-Autocomplete-MappedOption__Media",singleSelectionMedia:"Polaris-Autocomplete-MappedOption--singleSelectionMedia",disabledMedia:"Polaris-Autocomplete-MappedOption--disabledMedia"},Jw={Listbox:"Polaris-Listbox"};const Gg=m.createContext(void 0),Jg=m.createContext({}),Xg=m.createContext({});function Xw(){const e=m.useContext(Gg);if(!e)throw new Error("No Combobox was provided. Your component must be wrapped in a <Combobox> component.");return e}function Yw(){return m.useContext(Jg)}function Qw(e,t){const r=t.scrollTop,n=r+t.clientHeight,{offsetHeight:a}=e,{offsetTop:s}=e,o=s+a;if(!(s>r&&o<n)){let c=0;o>n?c=o+a*.85-n:s<r&&(c=s-a*.15-r),requestAnimationFrame(()=>{t.scrollBy({top:c,behavior:"auto"})})}}const Yg=m.createContext(void 0),Qg=m.createContext(!1),xu=m.createContext(!1);var wn={TextOption:"Polaris-Listbox-TextOption",allowMultiple:"Polaris-Listbox-TextOption--allowMultiple",isAction:"Polaris-Listbox-TextOption--isAction",disabled:"Polaris-Listbox-TextOption--disabled",selected:"Polaris-Listbox-TextOption--selected",Content:"Polaris-Listbox-TextOption__Content",Checkbox:"Polaris-Listbox-TextOption__Checkbox"},mr={Checkbox:"Polaris-Checkbox",ChoiceLabel:"Polaris-Checkbox__ChoiceLabel",Backdrop:"Polaris-Checkbox__Backdrop",Input:"Polaris-Checkbox__Input","Input-indeterminate":"Polaris-Checkbox__Input--indeterminate",Icon:"Polaris-Checkbox__Icon",animated:"Polaris-Checkbox--animated",toneMagic:"Polaris-Checkbox--toneMagic",hover:"Polaris-Checkbox--hover",error:"Polaris-Checkbox--error",checked:"Polaris-Checkbox--checked",pathAnimation:"Polaris-Checkbox--pathAnimation"};const mn=m.forwardRef(function({ariaControls:t,ariaDescribedBy:r,label:n,labelHidden:a,checked:s=!1,helpText:o,disabled:i,id:c,name:u,value:d,error:p,onChange:f,onFocus:h,onBlur:g,labelClassName:y,fill:b,bleed:v,bleedBlockStart:_,bleedBlockEnd:A,bleedInlineStart:T,bleedInlineEnd:k,tone:I},E){const P=m.useRef(null),C=m.useId(),x=c??C,$=m.useContext(Qg);m.useImperativeHandle(E,()=>({focus:()=>{P.current&&P.current.focus()}}));const M=()=>{g&&g()},w=()=>{f==null||P.current==null||i||(f(P.current.checked,x),P.current.focus())},S=[];p&&typeof p!="boolean"&&S.push(mu(x)),o&&S.push(dS(x)),r&&S.push(r);const O=S.length?S.join(" "):void 0,N=R(mr.Checkbox,p&&mr.error),H=s==="indeterminate",L=!H&&!!s,W=H?{indeterminate:"true","aria-checked":"mixed"}:{"aria-checked":L},F=l.createElement("svg",{viewBox:"0 0 16 16",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision"},l.createElement("path",{className:R(s&&mr.checked),d:"M1.5,5.5L3.44655,8.22517C3.72862,8.62007,4.30578,8.64717,4.62362,8.28044L10.5,1.5",transform:"translate(2 2.980376)",opacity:"0",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",pathLength:"1"})),D=R(mr.Input,H&&mr["Input-indeterminate"],I&&mr[St("tone",I)]),q={helpText:o,error:p,bleed:v,bleedBlockStart:_,bleedBlockEnd:A,bleedInlineStart:T,bleedInlineEnd:k};return l.createElement(uS,Object.assign({id:x,label:n,labelHidden:a,disabled:i,labelClassName:R(mr.ChoiceLabel,y),fill:b,tone:I},q),l.createElement("span",{className:N},l.createElement("input",Object.assign({ref:P,id:x,name:u,value:d,type:"checkbox",checked:L,disabled:i,className:D,onBlur:M,onChange:Zw,onClick:w,onFocus:h,"aria-invalid":p!=null,"aria-controls":t,"aria-describedby":O,role:$?"presentation":"checkbox"},W)),l.createElement("span",{className:mr.Backdrop,onClick:Rp,onKeyUp:Rp}),l.createElement("span",{className:R(mr.Icon,!H&&mr.animated)},H?l.createElement(pe,{source:qg}):F)))});function Zw(){}function Rp(e){e.stopPropagation()}const $u=m.memo(function({children:t,selected:r,disabled:n}){const{allowMultiple:a}=m.useContext(Xg),s=m.useContext(xu),o=R(wn.TextOption,r&&!a&&wn.selected,n&&wn.disabled,a&&wn.allowMultiple,s&&wn.isAction),i=r?l.createElement(ne,{width:"100%"},l.createElement(ye,{wrap:!1,align:"space-between",gap:"200"},t,l.createElement(ye,{align:"end"},l.createElement(pe,{source:zo})))):l.createElement(l.Fragment,null,t);return l.createElement("div",{className:o},l.createElement("div",{className:wn.Content},a&&!s?l.createElement("div",{className:wn.Checkbox},l.createElement(mn,{disabled:n,checked:r,label:t})):i))});var kp={ListItem:"Polaris-Listbox-Loading__ListItem",Loading:"Polaris-Listbox-Loading"};function Zg(){const e=m.useContext(Yg);if(!e)throw new Error("No Listbox was provided. Listbox components must be wrapped in a Listbox");return e}const eA=m.memo(function({children:t,accessibilityLabel:r}){const{setLoading:n}=Zg();return m.useEffect(()=>(n(r),()=>{n(void 0)}),[r,n]),l.createElement("li",{className:kp.ListItem,role:"presentation"},t||l.createElement("div",{className:kp.Loading},l.createElement(ya,{size:"small",accessibilityLabel:r})))}),tA={props:{"data-polaris-listbox-section-item":!0},selector:"[data-polaris-listbox-section-item]"},rA={attribute:"data-polaris-listbox-within-section-item"},ey=m.createContext(null);var Ip={SectionGroup:"Polaris-Listbox-Section__SectionGroup",noDivider:"Polaris-Listbox-Section--noDivider"};function nA({children:e,divider:t=!0,title:r}){const n=m.useId();return l.createElement(ey.Provider,{value:n},l.createElement("li",Object.assign({role:"presentation"},tA.props),r,l.createElement("ul",{role:"group","aria-labelledby":n,className:R(Ip.SectionGroup,!t&&Ip.noDivider)},e)))}function ty(){return m.useContext(ey)}function aA({children:e}){const t=ty()||"",r=typeof e=="string"?l.createElement(ne,{paddingBlockStart:"200",paddingInlineStart:"400",paddingBlockEnd:"200",paddingInlineEnd:"400"},l.createElement(se,{as:"span",variant:"headingSm",tone:"subdued"},e)):e;return l.createElement("div",{"aria-hidden":!0,id:t},r)}var Pl={Action:"Polaris-Listbox-Action",ActionDivider:"Polaris-Listbox-Action__ActionDivider",Icon:"Polaris-Listbox-Action__Icon"},xp={Option:"Polaris-Listbox-Option",divider:"Polaris-Listbox-Option--divider"};const ry=m.createContext({}),ny=m.memo(function({value:t,children:r,selected:n,disabled:a=!1,accessibilityLabel:s,divider:o}){const{onOptionSelect:i}=Zg(),c=m.useContext(xu),{role:u,url:d,external:p,onAction:f,destructive:h}=m.useContext(ry),g=m.useRef(null),y=m.useId(),v=!!ty(),_=m.useCallback(P=>{P.preventDefault(),P.stopPropagation(),f&&f(),g.current&&!f&&i({domId:y,value:t,element:g.current,disabled:a})},[y,i,t,a,f]),A=P=>{P.preventDefault()},T=typeof r=="string"?l.createElement($u,{selected:n,disabled:a},r):r,k={[rA.attribute]:v},I=u||"option",E=d?l.createElement(Yt,{url:d,external:p},T):T;return l.createElement("li",Object.assign({},k,{"data-listbox-option":!0,"data-listbox-option-action":c,"data-listbox-option-value":t,"data-listbox-option-destructive":h,"data-within-section":v,className:R(xp.Option,o&&xp.divider),id:y,ref:g,tabIndex:-1,role:I,"aria-label":s,"aria-selected":n,"aria-disabled":a,onClick:a?void 0:_,onKeyDown:a?void 0:_,onMouseDown:A}),E)});function sA(e){const{selected:t,disabled:r,children:n,icon:a,divider:s}=e,o=a&&l.createElement("div",{className:Pl.Icon},l.createElement(pe,{tone:"subdued",source:a})),i=R(Pl.Action,s&&Pl.ActionDivider);return l.createElement(xu.Provider,{value:!0},l.createElement(ny,e,l.createElement("div",{className:i},l.createElement($u,{selected:t,disabled:r},o,n))))}let en;(function(e){e.FirstSelected="FIRST_SELECTED",e.First="FIRST",e.None="NONE"})(en||(en={}));const oA="[data-listbox-option]",Cl="data-listbox-option-value",iA="data-listbox-option-action",$p="data-focused";function vt({children:e,autoSelection:t=en.FirstSelected,enableKeyboardControl:r,accessibilityLabel:n,customListId:a,onSelect:s,onActiveOptionChange:o}){const[i,c]=m.useState(),[u,d]=m.useState(),[p,f]=m.useState(!1),[h,g]=m.useState([]),{value:y,setTrue:b,setFalse:v}=Qt(!!r),_=m.useId(),A=a||_,T=m.useRef(null),k=m.useRef(null),{listboxId:I,textFieldLabelId:E,textFieldFocused:P,willLoadMoreOptions:C,setActiveOptionId:x,setListboxId:$,onOptionSelected:M,onKeyToBottom:w}=Yw(),S=!!x;m.useEffect(()=>{$&&!I&&$(A)},[$,I,A]);const O=m.useCallback(()=>k.current?[...new Set(k.current.querySelectorAll(oA))]:[],[]),N=m.useCallback(z=>{const re=z.some(ge=>ge.getAttribute("aria-selected")==="true");let Te=0;const ce=z.find((ge,xe)=>{const te=ge.getAttribute("aria-disabled")!=="true";let Q;return re&&t===en.FirstSelected?Q=ge.getAttribute("aria-selected")==="true"&&te:Q=te,Q&&(Te=xe),Q});if(ce)return{element:ce,index:Te}},[t]),H=m.useCallback(z=>{const{current:re}=T;re&&Qw(z.element,re)},[]),L=ir(H,50),W=m.useCallback(()=>{if(w)return f(!0),Promise.resolve(w())},[w]),F=m.useCallback(z=>{if(!z)return d(void 0);u==null||u.element.removeAttribute($p),z.element.setAttribute($p,"true"),L(z),d(z),x==null||x(z.domId),o==null||o(z.value,z.domId)},[u,x,o,L]),D=m.useCallback((z,re)=>({element:z,index:re,domId:z.id,value:z.getAttribute(Cl)||"",disabled:z.getAttribute("aria-disabled")==="true",isAction:z.getAttribute(iA)==="true"}),[]),q=m.useCallback(()=>{let z;const re=O(),Te=N(re);if(re.length===0&&h.length>0){g(re),F();return}if(Te){const{element:Ne,index:At}=Te;z=D(Ne,At)}const ce=u!==void 0&&(z==null?void 0:z.domId)===(u==null?void 0:u.domId),ge=(u==null?void 0:u.isAction)&&(z==null?void 0:z.isAction)&&(z==null?void 0:z.value)!==(u==null?void 0:u.value),xe=h.map(Ne=>Ne.getAttribute(Cl)),te=re.map(Ne=>Ne.getAttribute(Cl)),Q=te.length===xe.length&&te.every((Ne,At)=>xe[At]===Ne),$e=xe.length!==0&&te.length>xe.length&&xe.every((Ne,At)=>te[At]===Ne);if(Q){ce&&ge&&(g(re),F(z));return}if($e){g(re);return}if(g(re),p){f(!1);return}F(z)},[p,h,u,N,O,D,F]);m.useEffect(()=>{t!==en.None&&!i&&e&&m.Children.count(e)>0&&q()},[e,t,u,i,q]),m.useEffect(()=>{k.current&&(T.current=k.current.closest(v_.selector))},[]),m.useEffect(()=>{r&&!y&&b()},[r,y,b]);const Y=m.useCallback(z=>{F(z),M&&M(),s&&s(z.value)},[F,s,M]),V=m.useCallback((z,re,Te)=>{let ce;return Te==="down"?z===re?ce=C?z+1:0:ce=z+1:ce=z===0?re:z-1,ce},[C]),ue=m.useCallback(async z=>{const re=h.length-1;let Te=(u==null?void 0:u.index)||0,ce=0,ge=u==null?void 0:u.element,xe=-1;if(!u&&t===en.None){const te=O(),Q=N(te);return g(te),{element:Q==null?void 0:Q.element,nextIndex:(Q==null?void 0:Q.index)||0}}for(;xe++<re;){ce=V(Te,re,z),ge=h[ce];const te=ce>=re,Q=(ge==null?void 0:ge.getAttribute("aria-disabled"))==="true";if(te&&C&&await W(),Q){Te=ce,ge=void 0;continue}break}return{element:ge,nextIndex:ce}},[t,h,u,C,V,W,N,O]),U=m.useCallback(async(z,re)=>{re.preventDefault();const{element:Te,nextIndex:ce}=await ue(z);if(!Te)return;const ge=D(Te,ce);F(ge)},[D,ue,F]),G=m.useCallback(z=>{U("down",z)},[U]),me=m.useCallback(z=>{U("up",z)},[U]),Me=m.useCallback(z=>{z.preventDefault(),z.stopPropagation(),u&&Y(u)},[u,Y]),Pe=m.useCallback(()=>{r||b()},[r,b]),Ce=m.useCallback(z=>{if(z.stopPropagation(),y){const re=N(h);if(re){const{element:Te,index:ce}=re,ge=D(Te,ce);F(ge)}}r||v()},[r,h,y,v,N,D,F]),He=y||P?l.createElement(l.Fragment,null,l.createElement(ha,{keyEvent:"keydown",keyCode:$t.DownArrow,handler:G}),l.createElement(ha,{keyEvent:"keydown",keyCode:$t.UpArrow,handler:me}),l.createElement(ha,{keyEvent:"keydown",keyCode:$t.Enter,handler:Me})):null,De=m.useMemo(()=>({onOptionSelect:Y,setLoading:c}),[Y]);return l.createElement(l.Fragment,null,He,l.createElement(se,{as:"span",visuallyHidden:!0},l.createElement("div",{"aria-live":"polite"},i||null)),l.createElement(Yg.Provider,{value:De},l.createElement(Qg.Provider,{value:!0},e?l.createElement("ul",{tabIndex:0,role:"listbox",className:Jw.Listbox,"aria-label":S?void 0:n,"aria-labelledby":E,"aria-busy":!!i,"aria-activedescendant":u&&u.domId,id:A,onFocus:S?void 0:Pe,onBlur:S?void 0:Ce,ref:k},e):null)))}vt.Option=ny;vt.TextOption=$u;vt.Loading=eA;vt.Section=nA;vt.Header=aA;vt.Action=sA;const lA=m.memo(function({label:t,value:r,disabled:n,media:a,selected:s,singleSelection:o}){const i=R(Ms.Media,n&&Ms.disabledMedia,o&&Ms.singleSelectionMedia),c=a?l.createElement("div",{className:i},a):null,u=typeof t=="string"?t:void 0;return l.createElement(vt.Option,{accessibilityLabel:u,key:r,selected:s,value:r,disabled:n},l.createElement(vt.TextOption,{selected:s,disabled:n},l.createElement("div",{className:Ms.Content},c,t)))});var cA={Listbox:"Polaris-Combobox__Listbox"};function uA({value:e,id:t,type:r="text",ariaAutocomplete:n="list",onFocus:a,onBlur:s,onChange:o,...i}){const c=Xw(),{activeOptionId:u,listboxId:d,expanded:p,setTextFieldFocused:f,setTextFieldLabelId:h,onTextFieldFocus:g,onTextFieldChange:y,onTextFieldBlur:b}=c,v=m.useId(),_=m.useMemo(()=>t||v,[v,t]),A=m.useMemo(()=>mo(t||v),[v,t]);m.useEffect(()=>{h&&h(A)},[A,h]);const T=m.useCallback(E=>{a&&a(E),g&&g(),f&&f(!0)},[a,g,f]),k=m.useCallback(E=>{s&&s(E),b&&b(),f&&f(!1)},[s,b,f]),I=m.useCallback((E,P)=>{o&&o(E,P),y&&y(E)},[o,y]);return l.createElement(hn,Object.assign({},i,{value:e,id:_,type:r,ariaAutocomplete:n,"aria-haspopup":"listbox",ariaActiveDescendant:u,ariaControls:d,role:"combobox",ariaExpanded:p,onFocus:T,onBlur:k,onChange:I}))}function Go({activator:e,allowMultiple:t,children:r,preferredPosition:n="below",willLoadMoreOptions:a,height:s,onScrolledToBottom:o,onClose:i}){const[c,u]=m.useState(!1),[d,p]=m.useState(),[f,h]=m.useState(),[g,y]=m.useState(),[b,v]=m.useState(!1),_=!c,A=c&&m.Children.count(r)>0,T=m.useRef(null),k=m.useCallback(()=>{u(!1),i==null||i(),p(void 0)},[i]),I=m.useCallback(()=>{u(!0),p(void 0)},[]),E=m.useCallback(()=>{var S;if(!t){k(),p(void 0);return}(S=T.current)==null||S.forceUpdatePosition()},[t,k]),P=m.useCallback(()=>{_&&I()},[_,I]),C=m.useCallback(()=>{_&&I()},[_,I]),x=m.useCallback(()=>{c&&k()},[c,k]),$=m.useMemo(()=>({activeOptionId:d,expanded:c,listboxId:g,setTextFieldFocused:v,setTextFieldLabelId:h,onTextFieldFocus:P,onTextFieldChange:C,onTextFieldBlur:x}),[d,c,g,v,h,P,C,x]),M=m.useMemo(()=>({allowMultiple:t}),[t]),w=m.useMemo(()=>({listboxId:g,textFieldLabelId:f,textFieldFocused:b,willLoadMoreOptions:a,onOptionSelected:E,setActiveOptionId:p,setListboxId:y,onKeyToBottom:o}),[g,f,b,a,E,p,y,o]);return l.createElement(dt,{ref:T,active:A,activator:l.createElement(Gg.Provider,{value:$},e),autofocusTarget:"none",preventFocusOnClose:!0,fullWidth:!0,preferInputActivator:!1,preferredPosition:n,onClose:k},m.Children.count(r)>0?l.createElement(dt.Pane,{onScrolledToBottom:o,height:s},l.createElement(Jg.Provider,{value:w},l.createElement(Xg.Provider,{value:M},l.createElement("div",{className:cA.Listbox},r)))):null)}Go.TextField=uA;var Bt={ActionContainer:"Polaris-Autocomplete-MappedAction__ActionContainer",Action:"Polaris-Autocomplete-MappedAction__Action",destructive:"Polaris-Autocomplete-MappedAction--destructive",selected:"Polaris-Autocomplete-MappedAction--selected",disabled:"Polaris-Autocomplete-MappedAction--disabled",Prefix:"Polaris-Autocomplete-MappedAction__Prefix",Suffix:"Polaris-Autocomplete-MappedAction__Suffix",Content:"Polaris-Autocomplete-MappedAction__Content",Text:"Polaris-Autocomplete-MappedAction__Text",ContentWrap:"Polaris-Autocomplete-MappedAction__ContentWrap"};function dA({active:e,content:t,disabled:r,icon:n,image:a,prefix:s,suffix:o,ellipsis:i,role:c,url:u,external:d,onAction:p,destructive:f,badge:h,helpText:g,wrapOverflow:y=!1}){const b=le();let v=null;const _=y?Bt.ContentWrap:void 0;s?v=l.createElement("div",{className:Bt.Prefix},s):n?v=l.createElement("div",{className:Bt.Prefix},l.createElement(pe,{source:n})):a&&(v=l.createElement("div",{role:"presentation",className:Bt.Prefix,style:{backgroundImage:`url(${a}`}}));const A=h&&l.createElement("span",{className:Bt.Suffix},l.createElement(sn,{tone:h.tone},h.content)),T=o&&l.createElement("span",{className:Bt.Suffix},o),k=i&&t?b.translate("Polaris.Autocomplete.ellipsis",{content:t}):t,I=l.createElement("div",{className:Bt.Text},l.createElement("div",{className:_},k),g?l.createElement(se,{tone:"subdued",as:"span"},g):null),E=m.useMemo(()=>({role:c,url:u,external:d,onAction:p,destructive:f}),[c,u,d,p,f]),P=R(Bt.Action,r&&Bt.disabled,f&&Bt.destructive,e&&Bt.selected);return l.createElement(ry.Provider,{value:E},l.createElement("div",{className:Bt.ActionContainer},l.createElement(vt.Action,{selected:e,disabled:r,value:t||""},l.createElement("div",{className:P},l.createElement("div",{className:Bt.Content},v,I,A,T)))))}const ay=function({options:t,selected:r,textField:n,preferredPosition:a,listTitle:s,allowMultiple:o,loading:i,actionBefore:c,willLoadMoreResults:u,emptyState:d,onSelect:p,onLoadMoreResults:f}){const h=le(),g=m.useCallback(k=>k.map(I=>l.createElement(lA,Object.assign({key:I.id||I.value},I,{selected:r.includes(I.value),singleSelection:!o}))),[r,o]),y=m.useMemo(()=>{const k=i&&!u?[]:t;if(Bc(k)){if(k.every(({options:C})=>C.length===0))return null;const P=k.map(({options:C,title:x})=>{if(C.length===0)return null;const $=g(C);return l.createElement(vt.Section,{divider:!1,title:l.createElement(vt.Header,null,x),key:x},$)});return l.createElement("div",{className:Gw.SectionWrapper},P)}const I=k.length>0?g(k):null;return s?l.createElement(vt.Section,{divider:!1,title:l.createElement(vt.Header,null,s)},I):I},[s,i,t,u,g]),b=i?l.createElement(vt.Loading,{accessibilityLabel:h.translate("Polaris.Autocomplete.spinnerAccessibilityLabel")}):null,v=m.useCallback(k=>{if(c&&k===c.content){c.onAction&&c.onAction();return}o?r.includes(k)?p(r.filter(I=>I!==k)):p([...r,k]):p([k])},[o,p,r,c]),_=c&&l.createElement(dA,c),A=d&&t.length<1&&!i&&l.createElement("div",{role:"status"},d),T=c?en.First:void 0;return l.createElement(Go,{activator:n,allowMultiple:o,onScrolledToBottom:f,preferredPosition:a,willLoadMoreOptions:u},_||y||b||A?l.createElement(vt,{autoSelection:T,onSelect:v},_,y&&(!i||u)?y:null,b,A):null)};ay.TextField=Go.TextField;const sy=m.createContext(!1);var On={Banner:"Polaris-Banner",keyFocused:"Polaris-Banner--keyFocused",withinContentContainer:"Polaris-Banner--withinContentContainer",withinPage:"Polaris-Banner--withinPage",DismissIcon:"Polaris-Banner__DismissIcon","text-success-on-bg-fill":"Polaris-Banner--textSuccessOnBgFill","text-success":"Polaris-Banner__text--success","text-warning-on-bg-fill":"Polaris-Banner--textWarningOnBgFill","text-warning":"Polaris-Banner__text--warning","text-critical-on-bg-fill":"Polaris-Banner--textCriticalOnBgFill","text-critical":"Polaris-Banner__text--critical","text-info-on-bg-fill":"Polaris-Banner--textInfoOnBgFill","text-info":"Polaris-Banner__text--info","icon-secondary":"Polaris-Banner__icon--secondary"};const Tl={success:{withinPage:{background:"bg-fill-success",text:"text-success-on-bg-fill",icon:"text-success-on-bg-fill"},withinContentContainer:{background:"bg-surface-success",text:"text-success",icon:"text-success"},icon:zo},warning:{withinPage:{background:"bg-fill-warning",text:"text-warning-on-bg-fill",icon:"text-warning-on-bg-fill"},withinContentContainer:{background:"bg-surface-warning",text:"text-warning",icon:"text-warning"},icon:rS},critical:{withinPage:{background:"bg-fill-critical",text:"text-critical-on-bg-fill",icon:"text-critical-on-bg-fill"},withinContentContainer:{background:"bg-surface-critical",text:"text-critical",icon:"text-critical"},icon:Og},info:{withinPage:{background:"bg-fill-info",text:"text-info-on-bg-fill",icon:"text-info-on-bg-fill"},withinContentContainer:{background:"bg-surface-info",text:"text-info",icon:"text-info"},icon:Tu}};function pA(e){const t=m.useRef(null),[r,n]=m.useState(!1);return m.useImperativeHandle(e,()=>({focus:()=>{var i;(i=t.current)==null||i.focus(),n(!0)}}),[]),{wrapperRef:t,handleKeyUp:i=>{i.target===t.current&&n(!0)},handleBlur:()=>n(!1),handleMouseUp:i=>{i.currentTarget.blur(),n(!1)},shouldShowFocus:r}}const hA=m.forwardRef(function(t,r){const{tone:n,stopAnnouncements:a}=t,s=m.useContext(Fo),{wrapperRef:o,handleKeyUp:i,handleBlur:c,handleMouseUp:u,shouldShowFocus:d}=pA(r),p=R(On.Banner,d&&On.keyFocused,s?On.withinContentContainer:On.withinPage);return l.createElement(sy.Provider,{value:!0},l.createElement("div",{className:p,tabIndex:0,ref:o,role:n==="warning"||n==="critical"?"alert":"status","aria-live":a?"off":"polite",onMouseUp:u,onKeyUp:i,onBlur:c},l.createElement(fA,t)))});function fA({tone:e="info",icon:t,hideIcon:r,onDismiss:n,action:a,secondaryAction:s,title:o,children:i}){const c=le(),u=m.useContext(Fo),d=!o&&!u,p=Object.keys(Tl).includes(e)?e:"info",f=Tl[p][u?"withinContentContainer":"withinPage"],h={backgroundColor:f.background,textColor:f.text,bannerTitle:o?l.createElement(se,{as:"h2",variant:"headingSm",breakWord:!0},o):null,bannerIcon:r?null:l.createElement("span",{className:On[f.icon]},l.createElement(pe,{source:t??Tl[p].icon})),actionButtons:a||s?l.createElement(Fn,null,a&&l.createElement(Ae,Object.assign({onClick:a.onAction},a),a.content),s&&l.createElement(Ae,Object.assign({onClick:s.onAction},s),s.content)):null,dismissButton:n?l.createElement(Ae,{variant:"tertiary",icon:l.createElement("span",{className:On[d?"icon-secondary":f.icon]},l.createElement(pe,{source:ag})),onClick:n,accessibilityLabel:c.translate("Polaris.Banner.dismissButton")}):null};return u?l.createElement(yA,h,i):d?l.createElement(gA,h,i):l.createElement(mA,h,i)}function mA({backgroundColor:e,textColor:t,bannerTitle:r,bannerIcon:n,actionButtons:a,dismissButton:s,children:o}){const{smUp:i}=Tr(),c=o||a;return l.createElement(ne,{width:"100%"},l.createElement(ut,{align:"space-between"},l.createElement(ne,{background:e,color:t,borderStartStartRadius:i?"300":void 0,borderStartEndRadius:i?"300":void 0,borderEndStartRadius:!c&&i?"300":void 0,borderEndEndRadius:!c&&i?"300":void 0,padding:"300"},l.createElement(ye,{align:"space-between",blockAlign:"center",gap:"200",wrap:!1},l.createElement(ye,{gap:"100",wrap:!1},n,r),s)),c&&l.createElement(ne,{padding:{xs:"300",md:"400"},paddingBlockStart:"300"},l.createElement(ut,{gap:"200"},l.createElement("div",null,o),a))))}function gA({backgroundColor:e,bannerIcon:t,actionButtons:r,dismissButton:n,children:a}){const[s,o]=m.useState("center"),i=m.useRef(null),c=m.useRef(null),u=m.useRef(null),d=m.useCallback(()=>{var h,g,y;const p=(h=i.current)==null?void 0:h.offsetHeight,f=((g=c.current)==null?void 0:g.offsetHeight)||((y=u.current)==null?void 0:y.offsetHeight);!p||!f||(p>f?o("start"):o("center"))},[]);return m.useEffect(()=>d(),[d]),Gn("resize",d),l.createElement(ne,{width:"100%",padding:"300",borderRadius:"300"},l.createElement(ye,{align:"space-between",blockAlign:s,wrap:!1},l.createElement(ne,{width:"100%"},l.createElement(ye,{gap:"200",wrap:!1,blockAlign:s},t?l.createElement("div",{ref:c},l.createElement(ne,{background:e,borderRadius:"200",padding:"100"},t)):null,l.createElement(ne,{ref:i,width:"100%"},l.createElement(ut,{gap:"200"},l.createElement("div",null,a),r)))),l.createElement("div",{ref:u,className:On.DismissIcon},n)))}function yA({backgroundColor:e,textColor:t,bannerTitle:r,bannerIcon:n,actionButtons:a,dismissButton:s,children:o}){return l.createElement(ne,{width:"100%",background:e,padding:"200",borderRadius:"200",color:t},l.createElement(ye,{align:"space-between",blockAlign:"start",wrap:!1,gap:"200"},l.createElement(ye,{gap:"150",wrap:!1},n,l.createElement(ne,{width:"100%"},l.createElement(ut,{gap:"200"},l.createElement(ut,{gap:"050"},r,l.createElement("div",null,o)),a))),s))}function Op(e=[],t,r,n){const a=r.reduce((c,u)=>c+u,0),s=e.map((c,u)=>u),o=[],i=[];if(n>a)o.push(...s);else{let c=0,u=!1;s.forEach(d=>{const p=r[d];if(c+p>=n-t||u){i.push(d),u=!0;return}o.push(d),c+=p})}return{visiblePromotedActions:o,hiddenPromotedActions:i}}function bA(e){const t=e.filter(r=>r.items);return e.length===t.length}function vA(e){const t=e.filter(r=>!r.items);return e.length===t.length}function Wc(e){return"title"in e&&"actions"in e}function EA(e){return"items"in e}function _A(e){if(!(!e||e.length===0)){if(bA(e))return e;if(vA(e))return[{items:e}]}}function Np(e){var t;if(!e)return!1;for(const r of e)for(const n of r.items)if(((t=n.badge)==null?void 0:t.tone)==="new")return!0;return!1}var vr={BulkActionsOuterLayout:"Polaris-BulkActions__BulkActionsOuterLayout",BulkActionsSelectAllWrapper:"Polaris-BulkActions__BulkActionsSelectAllWrapper",BulkActionsPromotedActionsWrapper:"Polaris-BulkActions__BulkActionsPromotedActionsWrapper",BulkActionsLayout:"Polaris-BulkActions__BulkActionsLayout","BulkActionsLayout--measuring":"Polaris-BulkActions--bulkActionsLayoutMeasuring",BulkActionsMeasurerLayout:"Polaris-BulkActions__BulkActionsMeasurerLayout",ButtonGroupWrapper:"Polaris-BulkActions__ButtonGroupWrapper","Group-measuring":"Polaris-BulkActions__Group--measuring",BulkActionButton:"Polaris-BulkActions__BulkActionButton",disabled:"Polaris-BulkActions--disabled",PaginatedSelectAll:"Polaris-BulkActions__PaginatedSelectAll",AllAction:"Polaris-BulkActions__AllAction"},Lp={Indicator:"Polaris-Indicator",pulseIndicator:"Polaris-Indicator--pulseIndicator"};function Ou({pulse:e=!0}){const t=R(Lp.Indicator,e&&Lp.pulseIndicator);return l.createElement("span",{className:t})}function ma({handleMeasurement:e,url:t,external:r,onAction:n,content:a,disclosure:s,accessibilityLabel:o,disabled:i,indicator:c,showContentInButton:u,size:d}){const p=m.useRef(null);gu(()=>{if(e&&p.current){const y=p.current.getBoundingClientRect().width;e(y)}});const f=s&&!u,h=f?void 0:a,g=l.createElement(Ae,{external:r,url:t,accessibilityLabel:f?a:o,disclosure:s&&u,onClick:n,disabled:i,size:d,icon:f?l.createElement(pe,{source:us,tone:"base"}):void 0},h);return l.createElement("div",{className:vr.BulkActionButton,ref:p},f?l.createElement(Vt,{content:a,preferredPosition:"above"},g):g,c&&l.createElement(Ou,null))}function SA({title:e,actions:t,isNewBadgeInBadgeActions:r,size:n}){const{value:a,toggle:s}=Qt(!1);return l.createElement(l.Fragment,null,l.createElement(dt,{active:a,activator:l.createElement(ma,{disclosure:!0,showContentInButton:!0,onAction:s,content:e,indicator:r,size:n}),onClose:s,preferInputActivator:!0},l.createElement(fn,{items:t,onActionAnyItem:s})))}var Rl={CheckableButton:"Polaris-CheckableButton",Checkbox:"Polaris-CheckableButton__Checkbox",Label:"Polaris-CheckableButton__Label"};const Nu=m.forwardRef(function({accessibilityLabel:t,label:r="",onToggleAll:n,selected:a,disabled:s,ariaLive:o},i){const c=m.useRef(null);function u(){var p;(p=c==null?void 0:c.current)==null||p.focus()}m.useImperativeHandle(i,()=>({focus:u}));const d=R(Rl.CheckableButton);return l.createElement("div",{className:d,onClick:n},l.createElement("div",{className:Rl.Checkbox},l.createElement(mn,{label:t,labelHidden:!0,checked:a,disabled:s,onChange:n,ref:c})),r?l.createElement("span",{className:Rl.Label,"aria-live":o},r):null)}),wA=4;function AA({promotedActions:e=[],disabled:t,buttonSize:r,handleMeasurement:n}){const a=le(),s=m.useRef(null),o=a.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),i=l.createElement(ma,{disclosure:!0,content:o}),c=m.useCallback(()=>{if(!s.current)return;const d=s.current.offsetWidth,p=s.current.children,h=Array.from(p).map(y=>Math.ceil(y.getBoundingClientRect().width)+wA),g=h.pop()||0;n({containerWidth:d,disclosureWidth:g,hiddenActionsWidths:h})},[n]);m.useEffect(()=>{c()},[c,e]);const u=e.map((d,p)=>Wc(d)?l.createElement(ma,{key:p,disclosure:!0,showContentInButton:!0,content:d.title,size:r}):l.createElement(ma,Object.assign({key:p,disabled:t},d,{size:r})));return Gn("resize",c),l.createElement("div",{className:vr.BulkActionsMeasurerLayout,ref:s},u,i)}const Lu=m.forwardRef(function({promotedActions:t,actions:r,disabled:n,buttonSize:a,paginatedSelectAllAction:s,paginatedSelectAllText:o,label:i,accessibilityLabel:c,selected:u,onToggleAll:d,onMoreActionPopoverToggle:p,width:f},h){const g=le(),[y,b]=m.useState(!1),[v,_]=m.useReducer((U,G)=>({...U,...G}),{disclosureWidth:0,containerWidth:1/0,actionsWidths:[],visiblePromotedActions:[],hiddenPromotedActions:[],hasMeasured:!1}),{visiblePromotedActions:A,hiddenPromotedActions:T,containerWidth:k,disclosureWidth:I,actionsWidths:E,hasMeasured:P}=v;m.useEffect(()=>{if(k===0||!t||t.length===0)return;const{visiblePromotedActions:U,hiddenPromotedActions:G}=Op(t,I,E,k);_({visiblePromotedActions:U,hiddenPromotedActions:G,hasMeasured:k!==1/0})},[k,I,t,E]);const C=!t||t&&A.length===0?g.translate("Polaris.ResourceList.BulkActions.actionsActivatorLabel"):g.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),x=s?l.createElement(Kt,{className:vr.AllAction,onClick:s.onAction,size:"slim",disabled:n},s.content):null,$=o&&s,M=x?l.createElement("div",{className:vr.PaginatedSelectAll},x):null,S={accessibilityLabel:c,label:$?o:i,selected:u,onToggleAll:d,disabled:n,ariaLive:$?"polite":void 0,ref:h},O=m.useCallback(()=>{p==null||p(y),b(U=>!U)},[p,y]),N=m.useCallback(U=>{const{hiddenActionsWidths:G,containerWidth:me,disclosureWidth:Me}=U;if(!t||t.length===0)return;const{visiblePromotedActions:Pe,hiddenPromotedActions:Ce}=Op(t,Me,G,me);_({visiblePromotedActions:Pe,hiddenPromotedActions:Ce,actionsWidths:G,containerWidth:me,disclosureWidth:Me,hasMeasured:!0})},[t]),H=_A(r),L=t?t.filter((U,G)=>!!A.includes(G)).map((U,G)=>Wc(U)?l.createElement(SA,Object.assign({key:G},U,{isNewBadgeInBadgeActions:Np(H),size:a})):l.createElement(ma,Object.assign({key:G,disabled:n},U,{size:a}))):null,D={items:T.map(U=>t==null?void 0:t[U]).reduce((U,G)=>G?Wc(G)?U.concat(G.actions):U.concat(G):U,[])},q=m.useMemo(()=>{if(H)return H;if(!r)return[];let U=!0;return r.filter(G=>G).reduce((G,me)=>{if(EA(me))return U=!1,G.concat(me);if(U){if(G.length===0)return[{items:[me]}];const Me=G[G.length-1];return G.splice(G.length-1,1,{items:[...Me.items,me]}),G}return U=!0,G.concat({items:[me]})},[])},[r,H]),Y=l.createElement(ma,{disclosure:!0,showContentInButton:!L,onAction:O,content:C,disabled:n,indicator:Np(H),size:a}),V=q.length>0?l.createElement(dt,{active:y,activator:Y,preferredAlignment:"right",onClose:O},l.createElement(fn,{sections:D.items.length>0?[D,...q]:q,onActionAnyItem:O})):null,ue=l.createElement(AA,{promotedActions:t,disabled:n,buttonSize:a,handleMeasurement:N});return l.createElement("div",{className:vr.BulkActions,style:f?{width:f}:void 0},l.createElement(ye,{gap:"400",blockAlign:"center"},l.createElement("div",{className:vr.BulkActionsSelectAllWrapper},l.createElement(Nu,S),M),l.createElement("div",{className:vr.BulkActionsPromotedActionsWrapper},l.createElement(ye,{gap:"100",blockAlign:"center"},l.createElement("div",{className:vr.BulkActionsOuterLayout},ue,l.createElement("div",{className:R(vr.BulkActionsLayout,!P&&vr["BulkActionsLayout--measuring"])},L)),V))))});var Ir={CalloutCard:"Polaris-CalloutCard",Image:"Polaris-CalloutCard__Image",DismissImage:"Polaris-CalloutCard__DismissImage",Content:"Polaris-CalloutCard__Content",Title:"Polaris-CalloutCard__Title",Buttons:"Polaris-CalloutCard__Buttons",Container:"Polaris-CalloutCard__Container",Dismiss:"Polaris-CalloutCard__Dismiss",hasDismiss:"Polaris-CalloutCard--hasDismiss"};function PA({title:e,children:t,illustration:r,primaryAction:n,secondaryAction:a,onDismiss:s}){const o=Wr(n),i=a?Wr(a,{variant:a.variant??"tertiary"}):null,c=i?l.createElement(Fn,null,o,i):o,u=s?l.createElement("div",{className:Ir.Dismiss},l.createElement(Ae,{variant:"plain",icon:as,onClick:s,accessibilityLabel:"Dismiss card"})):null,d=R(Ir.Image,s&&Ir.DismissImage),p=R(Ir.Container,s&&Ir.hasDismiss);return l.createElement(ss,null,l.createElement("div",{className:p},u,l.createElement(ss.Section,null,l.createElement("div",{className:Ir.CalloutCard},l.createElement("div",{className:Ir.Content},l.createElement("div",{className:Ir.Title},l.createElement(se,{variant:"headingMd",as:"h2"},e)),l.createElement(ut,null,t),l.createElement("div",{className:Ir.Buttons},c)),l.createElement(on,{alt:"",className:d,source:r})))))}var CA={ChoiceChildren:"Polaris-ChoiceList__ChoiceChildren"};function oy({title:e,titleHidden:t,allowMultiple:r,choices:n,selected:a,onChange:s=TA,error:o,disabled:i=!1,name:c,tone:u}){const d=r?mn:ug,p=m.useId(),f=c??p,h=r?`${f}[]`:f,g=e?l.createElement(ne,{as:"legend",paddingBlockEnd:{xs:"500",md:"100"},visuallyHidden:t},e):null,y=n.map(v=>{const{value:_,id:A,label:T,helpText:k,disabled:I,describedByError:E}=v;function P(M){s(RA(v,M,a,r),f)}const C=Mp(v,a),x=v.renderChildren?v.renderChildren(C):null,$=x?l.createElement("div",{className:CA.ChoiceChildren},l.createElement(ne,{paddingBlockStart:{xs:"400",md:"0"}},x)):null;return l.createElement("li",{key:_},l.createElement(Jm,{marginBlockEnd:k?{xs:"100",md:"0"}:{xs:"0"}},l.createElement(d,{name:h,value:_,id:A,label:T,disabled:I||i,fill:{xs:!0,sm:!1},checked:Mp(v,a),helpText:k,onChange:P,ariaDescribedBy:o&&E?mu(h):null,tone:u}),$))}),b=o&&l.createElement(ne,{paddingBlockStart:{xs:"0",md:"100"},paddingBlockEnd:"200"},l.createElement(Xm,{message:o,fieldID:h}));return l.createElement(ut,{as:"fieldset",gap:{xs:"400",md:"0"},"aria-invalid":o!=null,id:h},g,l.createElement(ut,{as:"ul",gap:{xs:"400",md:"0"}},y),b)}function TA(){}function Mp({value:e},t){return t.includes(e)}function RA({value:e},t,r,n=!1){return t?n?[...r,e]:[e]:r.filter(a=>a!==e)}var kl={Collapsible:"Polaris-Collapsible",isFullyClosed:"Polaris-Collapsible--isFullyClosed",expandOnPrint:"Polaris-Collapsible--expandOnPrint"};function Jo({id:e,expandOnPrint:t,open:r,transition:n=!0,children:a,onAnimationEnd:s}){const[o,i]=m.useState(0),[c,u]=m.useState(r),[d,p]=m.useState("idle"),f=m.useRef(null),h=d==="idle"&&r&&c,g=d==="idle"&&!r&&!c,y=t||!g?a:null,b=R(kl.Collapsible,g&&kl.isFullyClosed,t&&kl.expandOnPrint),v=IA(n),A={...typeof n=="object"&&{transitionDuration:n.duration,transitionTimingFunction:n.timingFunction},maxHeight:h?"none":`${o}px`,overflow:h?"visible":"hidden"},T=m.useCallback(({target:I})=>{I===f.current&&(p("idle"),u(r),s&&s())},[s,r]),k=m.useCallback(()=>{v?(u(r),p("idle"),r&&f.current?i(f.current.scrollHeight):i(0)):p("measuring")},[r,v]);return m.useEffect(()=>{r!==c&&k()},[r,c]),m.useEffect(()=>{!r||!f.current||i(f.current.scrollHeight)},[]),m.useEffect(()=>{if(f.current)switch(d){case"idle":break;case"measuring":i(f.current.scrollHeight),p("animating");break;case"animating":i(r?f.current.scrollHeight:0)}},[d,r,c]),l.createElement("div",{id:e,style:A,ref:f,className:b,onTransitionEnd:T,"aria-hidden":!r},y)}const kA=/^0(ms|s)$/;function IA(e){if(typeof e=="boolean")return!e;const{duration:t}=e;return!!(t&&kA.test(t.trim()))}var Dr={ColorPicker:"Polaris-ColorPicker",MainColor:"Polaris-ColorPicker__MainColor",fullWidth:"Polaris-ColorPicker--fullWidth",Dragger:"Polaris-ColorPicker__Dragger",ColorLayer:"Polaris-ColorPicker__ColorLayer",HuePicker:"Polaris-ColorPicker__HuePicker",AlphaPicker:"Polaris-ColorPicker__AlphaPicker",Slidable:"Polaris-ColorPicker__Slidable"};const bo=13;function xA(e,t,r){const n=NA(e,t,r);return _t(n,0,t)}function $A(e,t){const r=_t(e,0,t);return OA(r,t)}function OA(e,t){const r=e-bo,n=t-bo*2;return _t(1-r/n,0,1)}function NA(e,t,r){const n=t-(r+bo);return _t((1-e)*n+bo,0,t-r)}let Uc=!1;E_||window.addEventListener("touchmove",e=>{Uc&&e.preventDefault()},{passive:!1});class Mu extends m.PureComponent{constructor(...t){super(...t),this.state={dragging:!1},this.node=null,this.draggerNode=null,this.setDraggerNode=r=>{this.draggerNode=r},this.setNode=r=>{this.node=r},this.startDrag=r=>{MA(r)&&this.handleDraggerMove(r.clientX,r.clientY),Uc=!0,this.setState({dragging:!0})},this.handleDragEnd=()=>{Uc=!1,this.setState({dragging:!1})},this.handleMove=r=>{if(r.stopImmediatePropagation(),r.stopPropagation(),r.cancelable&&r.preventDefault(),LA(r)){this.handleDraggerMove(r.clientX,r.clientY);return}this.handleDraggerMove(r.touches[0].clientX,r.touches[0].clientY)},this.handleDraggerMove=(r,n)=>{if(this.node==null)return;const{onChange:a}=this.props,s=this.node.getBoundingClientRect(),o=r-s.left,i=n-s.top;a({x:o,y:i})}}componentDidMount(){const{onDraggerHeight:t}=this.props;if(t==null)return;const{draggerNode:r}=this;r!=null&&t(r.clientWidth)}render(){const{dragging:t}=this.state,{draggerX:r=0,draggerY:n=0}=this.props,a={transform:`translate3d(${r}px, ${n}px, 0)`},s=t?l.createElement(ar,{event:"mousemove",handler:this.handleMove,passive:!1}):null,o=t?l.createElement(ar,{event:"touchmove",handler:this.handleMove,passive:!1}):null,i=t?l.createElement(ar,{event:"mouseup",handler:this.handleDragEnd}):null,c=t?l.createElement(ar,{event:"touchend",handler:this.handleDragEnd}):null,u=t?l.createElement(ar,{event:"touchcancel",handler:this.handleDragEnd}):null;return l.createElement("div",{ref:this.setNode,className:Dr.Slidable,onMouseDown:this.startDrag,onTouchStart:this.startDrag},i,s,o,c,u,l.createElement("div",{style:a,className:Dr.Dragger,ref:this.setDraggerNode}))}}function LA(e){return e.type==="mousemove"}function MA(e){return e.type==="mousedown"}class FA extends m.PureComponent{constructor(...t){super(...t),this.state={sliderHeight:0,draggerHeight:0},this.setSliderHeight=r=>{r!=null&&this.setState({sliderHeight:r.clientHeight})},this.setDraggerHeight=r=>{this.setState({draggerHeight:r})},this.handleChange=({y:r})=>{const{onChange:n}=this.props,{sliderHeight:a}=this.state,s=$A(r,a);n(s)}}render(){const{color:t,alpha:r}=this.props,{sliderHeight:n,draggerHeight:a}=this.state,s=xA(r,n,a),o=HA(t);return l.createElement("div",{className:Dr.AlphaPicker,ref:this.setSliderHeight},l.createElement("div",{className:Dr.ColorLayer,style:{background:o}}),l.createElement(Mu,{draggerY:s,draggerX:0,onChange:this.handleChange,onDraggerHeight:this.setDraggerHeight}))}}function HA(e){const{red:t,green:r,blue:n}=Ko(e),a=`${t}, ${r}, ${n}`;return`linear-gradient(to top, rgba(${a}, 0) 18px, rgba(${a}, 1) calc(100% - 18px))`}const vo=13;function DA(e,t,r){const n=UA(e,t,r);return _t(n,0,t)}function BA(e,t){const r=_t(e,0,t);return WA(r,t)}function WA(e,t){const r=e-vo,n=t-vo*2;return _t(r/n*360,0,360)}function UA(e,t,r){const n=t-(r+vo);return _t(e/360*n+vo,0,t-r)}class jA extends m.PureComponent{constructor(...t){super(...t),this.state={sliderHeight:0,draggerHeight:0},this.setSliderHeight=r=>{r!=null&&this.setState({sliderHeight:r.clientHeight})},this.setDraggerHeight=r=>{this.setState({draggerHeight:r})},this.handleChange=({y:r})=>{const{onChange:n}=this.props,{sliderHeight:a}=this.state,s=BA(r,a);n(s)}}render(){const{hue:t}=this.props,{sliderHeight:r,draggerHeight:n}=this.state,a=DA(t,r,n);return l.createElement("div",{className:Dr.HuePicker,ref:this.setSliderHeight},l.createElement(Mu,{draggerY:a,draggerX:0,onChange:this.handleChange,onDraggerHeight:this.setDraggerHeight}))}}const Fp=200;class qA extends m.PureComponent{constructor(...t){super(...t),this.state={pickerSize:{width:0,height:0}},this.colorNode=null,this.handleResize=ir(()=>{const{colorNode:r}=this;r!=null&&this.setState({pickerSize:{width:r.clientWidth,height:r.clientHeight}})},Fp,{leading:!0,trailing:!0,maxWait:Fp}),this.setColorNode=r=>{this.colorNode=r},this.handleHueChange=r=>{const{color:{brightness:n,saturation:a,alpha:s=1},onChange:o}=this.props;o({hue:r,brightness:n,saturation:a,alpha:s})},this.handleAlphaChange=r=>{const{color:{hue:n,brightness:a,saturation:s},onChange:o}=this.props;o({hue:n,brightness:a,saturation:s,alpha:r})},this.handleDraggerMove=({x:r,y:n})=>{const{pickerSize:a}=this.state,{color:{hue:s,alpha:o=1},onChange:i}=this.props,c=_t(r/a.width,0,1),u=_t(1-n/a.height,0,1);i({hue:s,saturation:c,brightness:u,alpha:o})},this.handlePickerDrag=r=>{r.preventDefault()}}componentDidMount(){const{colorNode:t}=this;t!=null&&this.setState({pickerSize:{width:t.clientWidth,height:t.clientHeight}})}render(){const{id:t,color:r,allowAlpha:n,fullWidth:a}=this.props,{hue:s,saturation:o,brightness:i,alpha:c}=r,{pickerSize:u}=this.state,d=c!=null&&n?c:1,{red:p,green:f,blue:h}=Ko({hue:s,saturation:1,brightness:1}),g=`rgba(${p}, ${f}, ${h}, ${d})`,y=_t(o*u.width,0,u.width),b=_t(u.height-i*u.height,0,u.height),v=n?l.createElement(FA,{alpha:d,color:r,onChange:this.handleAlphaChange}):null,_=R(Dr.ColorPicker,a&&Dr.fullWidth);return l.createElement("div",{className:_,id:t,onMouseDown:this.handlePickerDrag},l.createElement("div",{ref:this.setColorNode,className:Dr.MainColor},l.createElement("div",{className:Dr.ColorLayer,style:{backgroundColor:g}}),l.createElement(Mu,{onChange:this.handleDraggerMove,draggerX:y,draggerY:b})),l.createElement(jA,{hue:s,onChange:this.handleHueChange}),v,l.createElement(ar,{event:"resize",handler:this.handleResize}))}}const VA=m.memo(function({message:t,saveAction:r,discardAction:n,alignContentFlush:a,fullWidth:s,contextControl:o,secondaryMenu:i}){const{setContextualSaveBar:c,removeContextualSaveBar:u}=Wo();return m.useEffect(()=>{c({message:t,saveAction:r,discardAction:n,alignContentFlush:a,fullWidth:s,contextControl:o,secondaryMenu:i})},[t,r,n,a,c,s,o,i]),m.useEffect(()=>u,[u]),null}),KA=7;function zA(e,t,r=0){const n=new Date(t,e,1),a=n.getDay(),s=[[]];let o=s[0],i=n;const c=iy(r);for(let u=0;u<c.indexOf(a);u++)o.push(null);for(;i.getMonth()===e;)o.length===KA&&(o=[],s.push(o)),o.push(i),i=new Date(t,e,i.getDate()+1);for(;o.length<7;)o.push(null);return s}function GA(e,t){if(e==null)return!1;const{start:r,end:n}=t;return!!(r&&e>r&&n&&e<n)}function JA(e,t){if(e==null)return!1;const{start:r,end:n}=t;return!!(r&&sr(r,e)||n&&sr(n,e))}function sr(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function XA(e,t){if(e==null)return{start:t,end:t};const{start:r,end:n}=e;return n&&(os(r,n)||Mn(r,n))?{start:t,end:t}:r?Mn(t,r)?{start:t,end:t}:{start:r,end:t}:n?Mn(t,n)?{start:t,end:n}:{start:r||n,end:t}:{start:t,end:t}}function Hp(e){return e===11?0:e+1}function Dp(e,t){return e===11?t+1:t}function YA(e){return e===0?11:e-1}function QA(e,t){return e===0?t-1:t}function os(e,t){return e.getTime()>t.getTime()}function Mn(e,t){return e.getTime()<t.getTime()}function Ja(e,t){return t.some(r=>e.getTime()===r.getTime())}const ZA=[0,1,2,3,4,5,6];function iy(e){const t=[...ZA];return[...t.splice(e),...t]}function Qa(e){switch(e){case 0:return"january";case 1:return"february";case 2:return"march";case 3:return"april";case 4:return"may";case 5:return"june";case 6:return"july";case 7:return"august";case 8:return"september";case 9:return"october";case 10:return"november";case 11:return"december"}}function Bp(e){switch(e){case 0:return"sunday";case 1:return"monday";case 2:return"tuesday";case 3:return"wednesday";case 4:return"thursday";case 5:return"friday";case 6:return"saturday"}}var ke={DatePicker:"Polaris-DatePicker",MonthLayout:"Polaris-DatePicker__MonthLayout",MonthContainer:"Polaris-DatePicker__MonthContainer",Month:"Polaris-DatePicker__Month","Month-current":"Polaris-DatePicker__Month--current",DayCell:"Polaris-DatePicker__DayCell","DayCell-inRange":"Polaris-DatePicker__DayCell--inRange",Day:"Polaris-DatePicker__Day","Day-today":"Polaris-DatePicker__Day--today","Day-inRange":"Polaris-DatePicker__Day--inRange","Day-selected":"Polaris-DatePicker__Day--selected","Day-disabled":"Polaris-DatePicker__Day--disabled",EmptyDayCell:"Polaris-DatePicker__EmptyDayCell",Weekday:"Polaris-DatePicker__Weekday","Weekday-current":"Polaris-DatePicker__Weekday--current",Header:"Polaris-DatePicker__Header",Title:"Polaris-DatePicker__Title","Day-firstInRange":"Polaris-DatePicker__Day--firstInRange","Day-hasRange":"Polaris-DatePicker__Day--hasRange","Day-hoverRight":"Polaris-DatePicker__Day--hoverRight","Day-lastInRange":"Polaris-DatePicker__Day--lastInRange",Week:"Polaris-DatePicker__Week"};const eP=m.memo(function({label:t,title:r,current:n}){const a=R(ke.Weekday,n&&ke["Weekday-current"]);return l.createElement("th",{"aria-label":t,scope:"col",className:a},r)}),Wp=m.memo(function({day:t,focused:r,onClick:n,onHover:a=Il,onFocus:s=Il,selected:o,inRange:i,inHoveringRange:c,disabled:u,lastDayOfMonth:d,isLastSelectedDay:p,isFirstSelectedDay:f,isHoveringRight:h,rangeIsDifferent:g,weekday:y,selectedAccessibilityLabelPrefix:b}){const v=le(),_=m.useRef(null),A=d||t;if(m.useEffect(()=>{r&&_.current&&_.current.focus()},[r]),!t)return l.createElement("td",{className:ke.EmptyDayCell,onMouseOver:()=>a(A)});const T=n&&!u?n.bind(null,t):Il,k=sr(new Date,t),I=R(ke.DayCell,o&&ke["DayCell-selected"],(i||c)&&!u&&ke["DayCell-inRange"],p&&ke["DayCell-lastInRange"],f&&ke["DayCell-firstInRange"],h&&ke["DayCell-hoverRight"],g&&ke["DayCell-hasRange"]),E=R(ke.Day,o&&ke["Day-selected"],u&&ke["Day-disabled"],k&&ke["Day-today"],(i||c)&&!u&&ke["Day-inRange"],p&&ke["Day-lastInRange"],f&&ke["Day-firstInRange"],h&&ke["Day-hoverRight"],g&&ke["Day-hasRange"]),P=t.getDate(),C=(r||o||k||P===1)&&!u?0:-1,x=[o&&b?`${b} `:"",`${k?v.translate("Polaris.DatePicker.today"):""}`,`${y||""} `,`${v.translate(`Polaris.DatePicker.months.${Qa(t.getMonth())}`)} `,`${P} `,`${t.getFullYear()}`].join("");return l.createElement("td",{className:I},l.createElement("button",{onFocus:()=>s(t),type:"button",ref:_,tabIndex:C,className:E,onMouseOver:()=>a(A),onClick:T,"aria-label":x,"aria-disabled":u,"aria-pressed":o},P))});function Il(){}function Up({focusedDate:e,selected:t,hoverDate:r,disableDatesBefore:n,disableDatesAfter:a,disableSpecificDates:s,allowRange:o,onChange:i=xl,onHover:c=xl,onFocus:u=xl,month:d,year:p,weekStartsOn:f,accessibilityLabelPrefixes:h}){const g=le(),y=o?tP:()=>!1,b=new Date,v=b.getMonth()===d&&b.getFullYear()===p,_=R(ke.Title,v&&ke["Month-current"]),A=m.useMemo(()=>zA(d,p,f),[d,f,p]),T=iy(f).map(x=>l.createElement(eP,{key:x,title:g.translate(`Polaris.DatePicker.daysAbbreviated.${Bp(x)}`),label:C(x),current:v&&new Date().getDay()===x})),k=m.useCallback(x=>{i(XA(o?t:void 0,x))},[o,i,t]),I=m.useMemo(()=>new Date(p,d+1,0),[d,p]);function E(x,$){if(x==null)return l.createElement(Wp,{key:$,onHover:c,lastDayOfMonth:I});const M=n&&Mn(x,n)||a&&os(x,a)||s&&Ja(x,s),w=o&&t&&nP(x,t),S=o&&t&&(!sr(t.start,t.end)&&rP(x,t)||r&&sr(t.start,t.end)&&os(r,t.start)&&sr(x,r)&&!w),O=!(t&&sr(t.start,t.end)),N=r&&Mn(x,r),[H,L]=h;let W;return o&&w||!o&&H?W=H:o&&S&&(W=L),l.createElement(Wp,{selectedAccessibilityLabelPrefix:W,weekday:C($),focused:e!=null&&sr(x,e),day:x,key:$,onFocus:u,onClick:k,onHover:c,selected:t!=null&&JA(x,t),inRange:t!=null&&GA(x,t),disabled:M,inHoveringRange:t!=null&&r!=null&&y(x,t,r),isLastSelectedDay:S,isFirstSelectedDay:w,isHoveringRight:N,rangeIsDifferent:O})}const P=A.map((x,$)=>l.createElement("tr",{className:ke.Week,key:$},x.map(E)));return l.createElement("div",{className:ke.MonthContainer},l.createElement("table",{role:"grid",className:ke.Month},l.createElement("caption",{className:_},g.translate(`Polaris.DatePicker.months.${Qa(d)}`)," ",p),l.createElement("thead",null,l.createElement("tr",{className:ke.WeekHeadings},T)),l.createElement("tbody",null,P)));function C(x){return g.translate(`Polaris.DatePicker.days.${Bp(x)}`)}}function xl(){}function tP(e,t,r){if(e==null)return!1;const{start:n,end:a}=t;return!!(sr(n,a)&&e>n&&e<=r)}function rP(e,t){if(e==null)return!1;const{end:r}=t;return!!(r&&sr(r,e))}function nP(e,t){if(e==null)return!1;const{start:r}=t;return!!(r&&sr(r,e))}function aP({id:e,selected:t,month:r,year:n,allowRange:a,multiMonth:s,disableDatesBefore:o,disableDatesAfter:i,disableSpecificDates:c,weekStartsOn:u=0,dayAccessibilityLabelPrefix:d,onMonthChange:p,onChange:f=sP}){const h=le(),[g,y]=m.useState(void 0),[b,v]=m.useState(void 0);m.useEffect(()=>{v(void 0)},[t]);const _=m.useCallback(Y=>{v(Y)},[]),A=m.useCallback(Y=>{p&&p(Y.getMonth(),Y.getFullYear()),y(Y),v(Y)},[p]),T=m.useCallback(Y=>{const{end:V}=Y;y(V),v(new Date(V)),f(Y)},[f]),k=m.useCallback((Y,V)=>{p&&(v(void 0),p(Y,V))},[p]),I=m.useCallback(Y=>{y(Y)},[]),E=m.useCallback(Y=>{const{key:V}=Y,ue=$l(t),U=b||ue&&ue.start;if(U!=null){if(V==="ArrowUp"){const G=new Date(U);G.setDate(U.getDate()-7),o&&Mn(G,o)||c&&Ja(G,c)||A(G)}if(V==="ArrowDown"){const G=new Date(U);G.setDate(U.getDate()+7),i&&os(G,i)||c&&Ja(G,c)||A(G)}if(V==="ArrowRight"){const G=new Date(U);G.setDate(U.getDate()+1),i&&os(G,i)||c&&Ja(G,c)||A(G)}if(V==="ArrowLeft"){const G=new Date(U);G.setDate(U.getDate()-1),o&&Mn(G,o)||c&&Ja(G,c)||A(G)}}},[i,o,c,b,t,A]),P=Dp(r,n),C=Hp(r),x=Dp(C,P),$=Hp(C),M=QA(r,n),w=YA(r),S=h.translate(`Polaris.DatePicker.months.${Qa(w)}`),O=s?h.translate(`Polaris.DatePicker.months.${Qa($)}`):h.translate(`Polaris.DatePicker.months.${Qa(C)}`),N=s?x:P,H=m.useMemo(()=>$l(t),[t]),L=a?h.translate("Polaris.DatePicker.start"):d,W=h.translate("Polaris.DatePicker.end"),F=[L,W],D=s?l.createElement(Up,{onFocus:_,focusedDate:b,month:C,year:P,selected:H,hoverDate:g,onChange:T,onHover:I,disableDatesBefore:o,disableDatesAfter:i,disableSpecificDates:c,allowRange:a,weekStartsOn:u,accessibilityLabelPrefixes:F}):null,q=R(ke.DatePicker);return l.createElement("div",{id:e,className:q,onKeyDown:oP,onKeyUp:E},l.createElement("div",{className:ke.Header},l.createElement(Ae,{variant:"tertiary",icon:__,accessibilityLabel:h.translate("Polaris.DatePicker.previousMonth",{previousMonthName:S,showPreviousYear:M}),onClick:()=>k(w,M)}),l.createElement(Ae,{variant:"tertiary",icon:Lg,accessibilityLabel:h.translate("Polaris.DatePicker.nextMonth",{nextMonth:O,nextYear:N}),onClick:()=>k(C,P)})),l.createElement("div",{className:ke.MonthLayout},l.createElement(Up,{onFocus:_,focusedDate:b,month:r,year:n,selected:$l(t),hoverDate:g,onChange:T,onHover:I,disableDatesBefore:o,disableDatesAfter:i,disableSpecificDates:c,allowRange:a,weekStartsOn:u,accessibilityLabelPrefixes:F}),D))}function sP(){}function oP(e){const{key:t}=e;(t==="ArrowUp"||t==="ArrowDown"||t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}function $l(e){return e instanceof Date?{start:e,end:e}:e}var Fs={DescriptionList:"Polaris-DescriptionList",Term:"Polaris-DescriptionList__Term",spacingTight:"Polaris-DescriptionList--spacingTight",Description:"Polaris-DescriptionList__Description"};function iP({items:e,gap:t="loose"}){const r=e.reduce((a,{term:s,description:o},i)=>[...a,l.createElement("dt",{key:`dt${i}`,className:Fs.Term},l.createElement(se,{as:"span",variant:"headingSm"},s)),l.createElement("dd",{key:`dd${i}`,className:Fs.Description},o)],[]),n=R(Fs.DescriptionList,t==="tight"&&Fs.spacingTight);return l.createElement("dl",{className:n},r)}var lP={Divider:"Polaris-Divider"};const cP=({borderColor:e="border-secondary",borderWidth:t="025"})=>{const r=e==="transparent"?e:`var(--p-color-${e})`;return l.createElement("hr",{className:lP.Divider,style:{borderBlockStart:`var(--p-border-width-${t}) solid ${r}`}})};var uP="data:image/svg+xml,%3csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' d='M41.87 24a17.87 17.87 0 11-35.74 0 17.87 17.87 0 0135.74 0zm-3.15 18.96a24 24 0 114.24-4.24L59.04 54.8a3 3 0 11-4.24 4.24L38.72 42.96z' fill='%238C9196'/%3e%3c/svg%3e",dP=uP;function Fu({title:e,description:t,withIllustration:r}){const a=le().translate("Polaris.EmptySearchResult.altText"),s=t?l.createElement("p",null,t):null,o=r?l.createElement(on,{alt:a,source:dP,draggable:!1}):null;return l.createElement(ln,{alignment:"center",vertical:!0},o,l.createElement(se,{variant:"headingLg",as:"p"},e),l.createElement(se,{tone:"subdued",as:"span"},s))}var pP={imageContained:"Polaris-EmptyState--imageContained"};function hP({children:e,heading:t,image:r,largeImage:n,imageContained:a,fullWidth:s=!1,action:o,secondaryAction:i,footerContent:c}){const u=R(a&&pP.imageContained),d=n?l.createElement(on,{alt:"",role:"presentation",source:n,className:u,sourceSet:[{source:r,descriptor:"568w"},{source:n,descriptor:"1136w"}],sizes:"(max-width: 568px) 60vw"}):l.createElement(on,{className:u,role:"presentation",alt:"",source:r}),p=i?Wr(i,{}):null,f=c?l.createElement(ne,{paddingBlockStart:"400"},l.createElement(se,{as:"span",alignment:"center",variant:"bodySm"},c)):null,h=o?Wr(o,{variant:"primary",size:"medium"}):null,g=t?l.createElement(ne,{paddingBlockEnd:"150"},l.createElement(se,{variant:"headingMd",as:"p",alignment:"center"},t)):null,y=e?l.createElement(se,{as:"span",alignment:"center",variant:"bodySm"},e):null,b=g||e?l.createElement(ne,{paddingBlockEnd:"400"},g,y):null,v=h||p?l.createElement(ye,{align:"center",gap:"200"},p,h):null,_=b||v||f?l.createElement(ne,{maxWidth:s?"100%":"400px"},l.createElement(ut,{inlineAlign:"center"},b,v,f)):null;return l.createElement(ne,{paddingInlineStart:"0",paddingInlineEnd:"0",paddingBlockStart:"500",paddingBlockEnd:"1600"},l.createElement(ut,{inlineAlign:"center"},d,_))}var An={ExceptionList:"Polaris-ExceptionList",Item:"Polaris-ExceptionList__Item",Icon:"Polaris-ExceptionList__Icon",statusWarning:"Polaris-ExceptionList--statusWarning",statusCritical:"Polaris-ExceptionList--statusCritical",Bullet:"Polaris-ExceptionList__Bullet",Title:"Polaris-ExceptionList__Title",Description:"Polaris-ExceptionList__Description"},fP={Truncate:"Polaris-Truncate"};function ly({children:e}){return l.createElement("span",{className:fP.Truncate},e)}function mP({items:e}){const t=e.map((r,n)=>{const{status:a,icon:s,title:o,description:i,truncate:c=!1}=r,u=R(An.Item,a&&An[St("status",a)]),d=s?l.createElement(pe,{source:s}):l.createElement("span",{className:An.Bullet}),p=o&&l.createElement("span",{className:An.Title},o),f=i&&l.createElement("span",{className:An.Description},i),h=c?ly:m.Fragment;return l.createElement("li",{className:u,key:n},l.createElement("span",{className:An.Icon},d),l.createElement(h,null,p,f))});return l.createElement("ul",{className:An.ExceptionList},t)}var jt={Container:"Polaris-Filters__Container",SearchField:"Polaris-Filters__SearchField",FiltersWrapper:"Polaris-Filters__FiltersWrapper",hideQueryField:"Polaris-Filters--hideQueryField",FiltersInner:"Polaris-Filters__FiltersInner",AddFilter:"Polaris-Filters__AddFilter",FiltersWrapperWithAddButton:"Polaris-Filters__FiltersWrapperWithAddButton",AddFilterActivatorMultiple:"Polaris-Filters__AddFilterActivatorMultiple",FiltersStickyArea:"Polaris-Filters__FiltersStickyArea",ClearAll:"Polaris-Filters__ClearAll",MultiplePinnedFilterClearAll:"Polaris-Filters__MultiplePinnedFilterClearAll"};function gP({onChange:e,onClear:t,onFocus:r,onBlur:n,focused:a,value:s,placeholder:o,disabled:i,borderlessQueryField:c,loading:u,selectedViewName:d}){const p=le(),f=m.useId(),{mdUp:h}=Tr(),g=s&&d&&h?l.createElement(se,{as:"span",variant:"bodyMd",tone:"subdued"},p.translate("Polaris.Filters.searchInView",{viewName:d})):null;function y(v){e(v)}function b(){t?t():e("")}return l.createElement(hn,{id:f,value:s,onChange:v=>y(v??s),onFocus:r,onBlur:n,onClearButtonClick:b,autoComplete:"off",placeholder:o,disabled:i,variant:c?"borderless":"inherit",size:"slim",prefix:h?l.createElement(pe,{source:Ho}):void 0,suffix:g,focused:a,label:o,labelHidden:!0,clearButton:!0,autoSize:!!g,loading:u})}function cy(e,t){const r=l.useRef(e);m.useEffect(()=>{const n=r.current;e!==r.current&&(r.current=e,t(e,n))},[e,t])}var Wt={FilterButton:"Polaris-Filters-FilterPill__FilterButton",focusedFilterButton:"Polaris-Filters-FilterPill--focusedFilterButton",ActiveFilterButton:"Polaris-Filters-FilterPill__ActiveFilterButton",PlainButton:"Polaris-Filters-FilterPill__PlainButton",ToggleButton:"Polaris-Filters-FilterPill__ToggleButton",Label:"Polaris-Filters-FilterPill__Label",clearButton:"Polaris-Filters-FilterPill--clearButton",IconWrapper:"Polaris-Filters-FilterPill__IconWrapper",PopoverWrapper:"Polaris-Filters-FilterPill__PopoverWrapper",ClearButtonWrapper:"Polaris-Filters-FilterPill__ClearButtonWrapper"};function yP({filterKey:e,label:t,filter:r,disabled:n,hideClearButton:a,selected:s,initialActive:o,closeOnChildOverlayClick:i,onRemove:c,onClick:u}){const d=le(),{mdDown:p}=Tr(),f=m.useRef(null),{value:h,setTrue:g,setFalse:y}=Qt(!1),[b,v]=m.useState(o);m.useEffect(()=>{var S,O;const M=f.current;if(!M||!b)return;const w=(S=M.parentElement)==null?void 0:S.parentElement;w&&((O=w.scroll)==null||O.call(w,{left:M.offsetLeft}))},[f,b]);const _=m.useCallback(()=>{r&&v(M=>!M),u&&u(e)},[r,e,u]),A=m.useCallback(()=>{_(),s||c==null||c(e)},[c,s,e,_]),T=()=>{c&&c(e),v(!1)},k=R(Wt.FilterButton,s&&Wt.ActiveFilterButton,b&&Wt.FocusFilterButton,h&&Wt.focusedFilterButton),I=R(Wt.PlainButton,Wt.clearButton),E=R(Wt.PlainButton,Wt.ToggleButton),P=p?"bodyLg":"bodySm",C=l.createElement("div",{className:Wt.Label},l.createElement(se,{variant:P,as:"span"},t)),x=l.createElement("div",{className:k},l.createElement(ye,{gap:"0",wrap:!1},l.createElement(Kt,{onFocus:g,onBlur:y,onClick:_,className:E,type:"button"},l.createElement(ye,{wrap:!1,align:"center",blockAlign:"center",gap:"0"},s?l.createElement(l.Fragment,null,C):l.createElement(l.Fragment,null,C,l.createElement("div",{className:Wt.IconWrapper},l.createElement(pe,{source:ds,tone:"base"}))))),s?l.createElement(Kt,{onClick:T,className:I,type:"button","aria-label":d.translate("Polaris.FilterPill.clear")},l.createElement("div",{className:Wt.IconWrapper},l.createElement(pe,{source:as,tone:"base"}))):null)),$=!a&&l.createElement("div",{className:Wt.ClearButtonWrapper},l.createElement(Ae,{onClick:T,variant:"plain",disabled:!s,textAlign:"left"},d.translate("Polaris.FilterPill.clear")));return n?null:l.createElement("div",{ref:f},l.createElement(dt,{active:b,activator:x,key:e,onClose:A,preferredAlignment:"left",preventCloseOnChildOverlayClick:!i},l.createElement("div",{className:Wt.PopoverWrapper},l.createElement(dt.Section,null,l.createElement(ut,{gap:"100"},r,$)))))}function bP({filters:e,appliedFilters:t,onClearAll:r,disabled:n,hideQueryField:a,disableFilters:s,mountedStateStyles:o,onAddFilterClick:i,closeOnChildOverlayClick:c,children:u}){const d=le(),{mdDown:p}=Tr(),[f,h]=m.useState(!1),g=m.useRef(!1);m.useEffect(()=>{g.current=!0});const y=()=>h(F=>!F),b=()=>{i==null||i(),y()},v=t==null?void 0:t.map(({key:F})=>F),_=e.filter(({pinned:F})=>F).map(({key:F})=>F),A=e.filter(({pinned:F,key:D})=>!!F||(v==null?void 0:v.includes(D))),[T,k]=m.useState(A.map(({key:F})=>F));cy(e.length,()=>{k(A.map(({key:F})=>F))});const I=T.map(F=>e.find(D=>D.key===F)).reduce((F,D)=>D?[...F,D]:F,[]),E=({key:F,onAction:D})=>()=>{setTimeout(()=>{k(q=>[...new Set([...q,F])]),D==null||D(),y()},0)},P=F=>({...F,content:F.label,onAction:E(F)}),C=e.filter(F=>!I.some(({key:D})=>D===F.key)),x=C.filter(F=>!F.section&&!F.hidden).map(P),$=C.filter(F=>F.section).reduce((F,D)=>{const q=P(D),Y=F.findIndex(V=>V.title===D.section);return Y===-1?F.push({title:D.section,items:[q]}):F[Y].items.push(q),F},[]),M=I.length>=1,w=p?"bodyMd":"bodySm",S=l.createElement("div",null,l.createElement(Kt,{type:"button",className:jt.AddFilter,onClick:b,"aria-label":d.translate("Polaris.Filters.addFilter"),disabled:n||x.length===0&&$.length===0||s},l.createElement(se,{variant:w,as:"span"},d.translate("Polaris.Filters.addFilter")," "),l.createElement(ku,null))),O=()=>{k(_),r==null||r()},N=e.some(F=>!F.pinned)||e.length!==T.length,H=I.map(({key:F,...D})=>{const q=t==null?void 0:t.find(({key:V})=>V===F),Y=()=>{k(V=>V.filter(ue=>{const U=ue===F,G=_.includes(ue);return!U||G})),q==null||q.onRemove(F)};return l.createElement(yP,Object.assign({key:F},D,{initialActive:g.current&&!D.pinned&&!q,label:(q==null?void 0:q.label)||D.label,filterKey:F,selected:v==null?void 0:v.includes(F),onRemove:Y,disabled:D.disabled||s,closeOnChildOverlayClick:c}))}),L=N?l.createElement("div",{className:R(jt.AddFilterActivator,M&&jt.AddFilterActivatorMultiple)},l.createElement(dt,{active:f&&!n,activator:S,onClose:y},l.createElement(fn,{actionRole:"menuitem",items:x,sections:$}))):null,W=t!=null&&t.length?l.createElement("div",{className:R(jt.ClearAll,M&&N&&jt.MultiplePinnedFilterClearAll)},l.createElement(Ae,{size:"micro",onClick:O,removeUnderline:!0,variant:"monochromePlain"},d.translate("Polaris.Filters.clearFilters"))):null;return l.createElement("div",{className:R(jt.FiltersWrapper,N&&M&&jt.FiltersWrapperWithAddButton),"aria-live":"polite",style:o},l.createElement("div",{className:R(jt.FiltersInner)},l.createElement("div",{className:R(jt.FiltersStickyArea)},H,L,W)),a?l.createElement(ne,{paddingInlineEnd:"300",paddingBlockStart:"200",paddingBlockEnd:"200"},l.createElement(ye,{align:"start",blockAlign:"center",gap:{xs:"400",md:"300"}},u)):null)}const jc="var(--p-motion-duration-150)",ao="-36px",vP={transition:`opacity ${jc} var(--p-motion-ease)`,opacity:0},EP={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{opacity:0}},_P={transition:`opacity ${jc} var(--p-motion-ease), margin ${jc} var(--p-motion-ease)`,opacity:0,marginTop:ao},SP={entering:{opacity:1,marginTop:0},entered:{opacity:1,marginTop:0},exiting:{opacity:0,marginTop:ao},exited:{opacity:0,marginTop:ao},unmounted:{opacity:0,marginTop:ao}};function uy({queryValue:e,queryPlaceholder:t,focused:r,filters:n,appliedFilters:a,onQueryChange:s,onQueryClear:o,onQueryBlur:i,onQueryFocus:c,onClearAll:u,children:d,disabled:p,hideFilters:f,hideQueryField:h,disableQueryField:g,borderlessQueryField:y,loading:b,disableFilters:v,mountedState:_,onAddFilterClick:A,closeOnChildOverlayClick:T,selectedViewName:k}){const I=f||n.length===0,E=h?null:l.createElement("div",{className:jt.Container},l.createElement(ne,{padding:"200"},l.createElement(ye,{align:"start",blockAlign:"center",gap:{xs:"400",md:"300"}},l.createElement("div",{className:jt.SearchField,style:_?{...vP,...EP[_]}:void 0},l.createElement(gP,{onChange:s,onFocus:c,onBlur:i,onClear:o,value:e,placeholder:t,focused:r,disabled:p||g,borderlessQueryField:y,loading:b,selectedViewName:k})),d))),P=_&&!h?{..._P,...SP[_]}:void 0,C=I?null:l.createElement(bP,{filters:n,appliedFilters:a,onClearAll:u,disabled:p,hideQueryField:h,disableFilters:v,onAddFilterClick:A,closeOnChildOverlayClick:T,mountedStateStyles:P},d);return l.createElement("div",{className:R(jt.Filters,h&&jt.hideQueryField)},E,C)}var jp={FooterHelp:"Polaris-FooterHelp",Text:"Polaris-FooterHelp__Text"};function wP({children:e}){return l.createElement("div",{className:jp.FooterHelp},l.createElement("div",{className:jp.Text},e))}function fs({acceptCharset:e,action:t,autoComplete:r,children:n,encType:a,implicitSubmit:s=!0,method:o="post",name:i,noValidate:c,preventDefault:u=!0,target:d,onSubmit:p}){const f=le(),h=m.useCallback(b=>{u&&(b.preventDefault(),p(b))},[p,u]),g=AP(r),y=s?l.createElement(se,{as:"span",visuallyHidden:!0},l.createElement("button",{type:"submit","aria-hidden":"true",tabIndex:-1},f.translate("Polaris.Common.submit"))):null;return l.createElement("form",{acceptCharset:e,action:t,autoComplete:g,encType:a,method:o,name:i,noValidate:c,target:d,onSubmit:h},y,n)}function AP(e){return e==null?e:e?"on":"off"}var qp={FullscreenBar:"Polaris-FullscreenBar",BackAction:"Polaris-FullscreenBar__BackAction"};function PP({onAction:e,children:t}){const r=le(),n=l.createElement(se,{as:"span",variant:"bodyLg"},r.translate("Polaris.FullscreenBar.back"));return l.createElement("div",{className:qp.FullscreenBar},l.createElement("button",{className:qp.BackAction,onClick:e,"aria-label":r.translate("Polaris.FullscreenBar.accessibilityLabel")},l.createElement(pe,{source:Wg}),n),t)}var CP={Grid:"Polaris-Grid"},ta={Cell:"Polaris-Grid-Cell","Cell-1-column-xs":"Polaris-Grid-Cell--cell_1ColumnXs","Cell-2-column-xs":"Polaris-Grid-Cell--cell_2ColumnXs","Cell-3-column-xs":"Polaris-Grid-Cell--cell_3ColumnXs","Cell-4-column-xs":"Polaris-Grid-Cell--cell_4ColumnXs","Cell-5-column-xs":"Polaris-Grid-Cell--cell_5ColumnXs","Cell-6-column-xs":"Polaris-Grid-Cell--cell_6ColumnXs","Cell-1-column-sm":"Polaris-Grid-Cell--cell_1ColumnSm","Cell-2-column-sm":"Polaris-Grid-Cell--cell_2ColumnSm","Cell-3-column-sm":"Polaris-Grid-Cell--cell_3ColumnSm","Cell-4-column-sm":"Polaris-Grid-Cell--cell_4ColumnSm","Cell-5-column-sm":"Polaris-Grid-Cell--cell_5ColumnSm","Cell-6-column-sm":"Polaris-Grid-Cell--cell_6ColumnSm","Cell-1-column-md":"Polaris-Grid-Cell--cell_1ColumnMd","Cell-2-column-md":"Polaris-Grid-Cell--cell_2ColumnMd","Cell-3-column-md":"Polaris-Grid-Cell--cell_3ColumnMd","Cell-4-column-md":"Polaris-Grid-Cell--cell_4ColumnMd","Cell-5-column-md":"Polaris-Grid-Cell--cell_5ColumnMd","Cell-6-column-md":"Polaris-Grid-Cell--cell_6ColumnMd","Cell-1-column-lg":"Polaris-Grid-Cell--cell_1ColumnLg","Cell-2-column-lg":"Polaris-Grid-Cell--cell_2ColumnLg","Cell-3-column-lg":"Polaris-Grid-Cell--cell_3ColumnLg","Cell-4-column-lg":"Polaris-Grid-Cell--cell_4ColumnLg","Cell-5-column-lg":"Polaris-Grid-Cell--cell_5ColumnLg","Cell-6-column-lg":"Polaris-Grid-Cell--cell_6ColumnLg","Cell-7-column-lg":"Polaris-Grid-Cell--cell_7ColumnLg","Cell-8-column-lg":"Polaris-Grid-Cell--cell_8ColumnLg","Cell-9-column-lg":"Polaris-Grid-Cell--cell_9ColumnLg","Cell-10-column-lg":"Polaris-Grid-Cell--cell_10ColumnLg","Cell-11-column-lg":"Polaris-Grid-Cell--cell_11ColumnLg","Cell-12-column-lg":"Polaris-Grid-Cell--cell_12ColumnLg","Cell-1-column-xl":"Polaris-Grid-Cell--cell_1ColumnXl","Cell-2-column-xl":"Polaris-Grid-Cell--cell_2ColumnXl","Cell-3-column-xl":"Polaris-Grid-Cell--cell_3ColumnXl","Cell-4-column-xl":"Polaris-Grid-Cell--cell_4ColumnXl","Cell-5-column-xl":"Polaris-Grid-Cell--cell_5ColumnXl","Cell-6-column-xl":"Polaris-Grid-Cell--cell_6ColumnXl","Cell-7-column-xl":"Polaris-Grid-Cell--cell_7ColumnXl","Cell-8-column-xl":"Polaris-Grid-Cell--cell_8ColumnXl","Cell-9-column-xl":"Polaris-Grid-Cell--cell_9ColumnXl","Cell-10-column-xl":"Polaris-Grid-Cell--cell_10ColumnXl","Cell-11-column-xl":"Polaris-Grid-Cell--cell_11ColumnXl","Cell-12-column-xl":"Polaris-Grid-Cell--cell_12ColumnXl"};function TP({area:e,column:t,columnSpan:r,row:n,children:a}){const s=R(ta.Cell,(r==null?void 0:r.xs)&&ta[`Cell-${r.xs}-column-xs`],(r==null?void 0:r.sm)&&ta[`Cell-${r.sm}-column-sm`],(r==null?void 0:r.md)&&ta[`Cell-${r.md}-column-md`],(r==null?void 0:r.lg)&&ta[`Cell-${r.lg}-column-lg`],(r==null?void 0:r.xl)&&ta[`Cell-${r.xl}-column-xl`]),o={gridArea:e,"--pc-column-xs":t==null?void 0:t.xs,"--pc-column-sm":t==null?void 0:t.sm,"--pc-column-md":t==null?void 0:t.md,"--pc-column-lg":t==null?void 0:t.lg,"--pc-column-xl":t==null?void 0:t.xl,"--pc-row-xs":n==null?void 0:n.xs,"--pc-row-sm":n==null?void 0:n.sm,"--pc-row-md":n==null?void 0:n.md,"--pc-row-lg":n==null?void 0:n.lg,"--pc-row-xl":n==null?void 0:n.xl};return l.createElement("div",{className:s,style:o},a)}const dy=function({gap:t,areas:r,children:n,columns:a}){const s={"--pc-grid-gap-xs":t==null?void 0:t.xs,"--pc-grid-gap-sm":t==null?void 0:t.sm,"--pc-grid-gap-md":t==null?void 0:t.md,"--pc-grid-gap-lg":t==null?void 0:t.lg,"--pc-grid-gap-xl":t==null?void 0:t.xl,"--pc-grid-columns-xs":a==null?void 0:a.xs,"--pc-grid-columns-sm":a==null?void 0:a.sm,"--pc-grid-columns-md":a==null?void 0:a.md,"--pc-grid-columns-lg":a==null?void 0:a.lg,"--pc-grid-columns-xl":a==null?void 0:a.xl,"--pc-grid-areas-xs":La(r==null?void 0:r.xs),"--pc-grid-areas-sm":La(r==null?void 0:r.sm),"--pc-grid-areas-md":La(r==null?void 0:r.md),"--pc-grid-areas-lg":La(r==null?void 0:r.lg),"--pc-grid-areas-xl":La(r==null?void 0:r.xl)};return l.createElement("div",{className:CP.Grid,style:s},n)};function La(e){if(e)return`'${e==null?void 0:e.join("' '")}'`}dy.Cell=TP;let We;(function(e){e.Default="DEFAULT",e.Filtering="FILTERING",e.EditingColumns="EDITING_COLUMNS"})(We||(We={}));var Gt={IndexFiltersWrapper:"Polaris-IndexFilters__IndexFiltersWrapper",IndexFilters:"Polaris-IndexFilters",IndexFiltersSticky:"Polaris-IndexFilters__IndexFiltersSticky",IndexFiltersStickyFlush:"Polaris-IndexFilters__IndexFiltersStickyFlush",TabsWrapper:"Polaris-IndexFilters__TabsWrapper",SmallScreenTabsWrapper:"Polaris-IndexFilters__SmallScreenTabsWrapper",TabsWrapperLoading:"Polaris-IndexFilters__TabsWrapperLoading",DesktopLoading:"Polaris-IndexFilters__DesktopLoading",TabsLoading:"Polaris-IndexFilters__TabsLoading",ActionWrap:"Polaris-IndexFilters__ActionWrap",Spinner:"Polaris-IndexFilters__Spinner",ButtonWrap:"Polaris-IndexFilters__ButtonWrap"};const RP=250;function kP(e,t,r){const n=typeof window<"u"&&!!window.IntersectionObserver,a={root:null,rootMargin:`${r?"0px":"-56px"} 0px 0px 0px`,threshold:0},[s,o]=m.useState(0),[i,c]=m.useState(!1),u=m.useRef(null),d=m.useRef(null),p=h=>{h.forEach(g=>{c(!g.isIntersecting)})},f=m.useRef(n?new IntersectionObserver(p,a):null);return m.useEffect(()=>{function h(){const y=u.current;if(!y)return{height:0};const v=y.getBoundingClientRect().height;o(v)}h();const g=ir(h,RP,{trailing:!0});return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[u,e]),m.useEffect(()=>{const h=f.current;if(!h)return;const g=d.current;return g&&h.observe(g),()=>{h==null||h.disconnect()}},[d]),{intersectionRef:d,measurerRef:u,isSticky:i&&!t,indexFilteringHeight:s}}function py(){const[e,t]=m.useState(!1),r=m.useCallback(()=>t(!0),[]);return Gn("touchstart",r),e}const Vp=40;function IP({primaryAction:e,cancelAction:t,viewNames:r,disabled:n}){const a=le(),[s,o]=m.useState(""),[i,c]=m.useState(!1),u=m.useRef(null),d=py();m.useEffect(()=>{!u.current||d||i&&lr(u.current)},[i,d]);async function p(){(e==null?void 0:e.type)==="save-as"?f():await(e==null?void 0:e.onAction(""))}function f(){c(!0)}function h(){c(!1)}function g(k){o(k)}async function y(){A||(await(e==null?void 0:e.onAction(s)),h())}const b=m.useMemo(()=>{switch(e==null?void 0:e.type){case"save":return a.translate("Polaris.IndexFilters.UpdateButtons.save");case"save-as":default:return a.translate("Polaris.IndexFilters.UpdateButtons.saveAs")}},[e==null?void 0:e.type,a]),v=l.createElement(Ae,{size:"micro",onClick:p,disabled:(e==null?void 0:e.disabled)||n},b),_=r.some(k=>k.trim().toLowerCase()===s.trim().toLowerCase()),A=_||!s||(e==null?void 0:e.loading)||s.length>Vp,T=t?l.createElement(Ae,{variant:"tertiary",size:"micro",onClick:t.onAction,disabled:n},a.translate("Polaris.IndexFilters.UpdateButtons.cancel")):null;return e?l.createElement(ye,{align:"start",blockAlign:"center",gap:"100"},T,e.type==="save-as"?l.createElement(cr,{activator:l.createElement(ye,null,v),open:i,title:a.translate("Polaris.IndexFilters.UpdateButtons.modal.title"),onClose:h,primaryAction:{onAction:y,content:a.translate("Polaris.IndexFilters.UpdateButtons.modal.save"),disabled:A},secondaryActions:[{onAction:h,content:a.translate("Polaris.IndexFilters.UpdateButtons.modal.cancel")}]},l.createElement(cr.Section,null,l.createElement(fs,{onSubmit:y},l.createElement(hs,null,l.createElement("div",{ref:u},l.createElement(hn,{label:a.translate("Polaris.IndexFilters.UpdateButtons.modal.label"),value:s,onChange:g,autoComplete:"off",maxLength:Vp,showCharacterCount:!0,error:_?a.translate("Polaris.IndexFilters.UpdateButtons.modal.sameName",{name:s}):void 0})))))):v):T}var Ol={DirectionButton:"Polaris-SortButton-DirectionButton","DirectionButton-active":"Polaris-SortButton-DirectionButton__DirectionButton--active",Label:"Polaris-SortButton-DirectionButton__Label"};function Kp({onClick:e,active:t,children:r,direction:n,value:a}){const s=R(Ol.DirectionButton,t&&Ol["DirectionButton-active"]);function o(){e([a])}return l.createElement(Kt,{className:s,onClick:o},l.createElement(pe,{source:n==="asc"?Mg:Ng,tone:"base"}),l.createElement("span",{className:Ol.Label},r))}let Eo;(function(e){e.Asc="asc",e.Desc="desc"})(Eo||(Eo={}));function xP({choices:e,selected:t,onChange:r,disabled:n,onChangeKey:a,onChangeDirection:s}){var _,A,T,k;const o=le(),[i,c]=m.useState(!1),[u,d]=t[0].split(" ");function p(){c(I=>!I)}function f(){c(!1)}function h(I){if(a){const[E]=I[0].split(" ");a(E)}else r(I)}function g(I){if(s){const[,E]=I[0].split(" ");s(E)}else r(I)}const y=m.useMemo(()=>e.reduce((E,P)=>{const C=E.some(M=>M.label===P.label),[,x]=P.value.split(" "),$=x===d;return C?$?E.map(M=>M.label===P.label?P:M):E:[...E,P]},[]),[e,d]),b=e.filter(I=>{const[E]=I.value.split(" ");return E===u}),v=l.createElement(Vt,{content:o.translate("Polaris.IndexFilters.SortButton.tooltip"),preferredPosition:"above",hoverDelay:400},l.createElement(Ae,{size:"slim",icon:Kg,onClick:p,disabled:n,accessibilityLabel:o.translate("Polaris.IndexFilters.SortButton.ariaLabel")}));return l.createElement(dt,{active:i&&!n,activator:v,autofocusTarget:"first-node",onClose:f,preferredAlignment:"right",fluidContent:!0},l.createElement(ne,{minWidth:"148px",paddingInlineStart:"300",paddingInlineEnd:"300",paddingBlockStart:"200",paddingBlockEnd:"200",borderBlockEndWidth:"025",borderColor:"border-secondary"},l.createElement(oy,{title:o.translate("Polaris.IndexFilters.SortButton.title"),choices:y,selected:t,onChange:h})),l.createElement(ne,{paddingInlineStart:"150",paddingInlineEnd:"150",paddingBlockStart:"200",paddingBlockEnd:"200"},l.createElement(Kp,{direction:"asc",active:d===Eo.Asc,onClick:g,value:(_=b==null?void 0:b[0])==null?void 0:_.value},(A=b==null?void 0:b[0])==null?void 0:A.directionLabel),l.createElement(Kp,{direction:"desc",active:d===Eo.Desc,onClick:g,value:(T=b==null?void 0:b[1])==null?void 0:T.value},(k=b==null?void 0:b[1])==null?void 0:k.directionLabel)))}var $P={Container:"Polaris-IndexFilters-Container"};const OP=({children:e})=>l.createElement("div",{className:$P.Container},e);function zp(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}function Gp(e,t,r,n,a){const s=n.reduce((u,d)=>u+d,0),o=e.map((u,d)=>d),i=[],c=[];if(a>s)i.push(...o);else{i.push(t);let u=n[t];o.forEach(d=>{if(d!==t){const p=n[d];if(u+p>=a-r){c.push(d);return}i.push(d),u+=p}})}return{visibleTabs:i,hiddenTabs:c}}var fe={Outer:"Polaris-Tabs__Outer",Wrapper:"Polaris-Tabs__Wrapper",WrapperWithNewButton:"Polaris-Tabs__WrapperWithNewButton",ButtonWrapper:"Polaris-Tabs__ButtonWrapper",Tabs:"Polaris-Tabs",Tab:"Polaris-Tabs__Tab","Tab-active":"Polaris-Tabs__Tab--active","Tab-hasActions":"Polaris-Tabs__Tab--hasActions","Tab-iconOnly":"Polaris-Tabs__Tab--iconOnly",fillSpace:"Polaris-Tabs--fillSpace",TabContainer:"Polaris-Tabs__TabContainer",fitted:"Polaris-Tabs--fitted",titleWithIcon:"Polaris-Tabs--titleWithIcon",List:"Polaris-Tabs__List",Item:"Polaris-Tabs__Item",DisclosureTab:"Polaris-Tabs__DisclosureTab","DisclosureTab-visible":"Polaris-Tabs__DisclosureTab--visible",DisclosureActivator:"Polaris-Tabs__DisclosureActivator",TabsMeasurer:"Polaris-Tabs__TabsMeasurer",NewTab:"Polaris-Tabs__NewTab",ActionListWrap:"Polaris-Tabs__ActionListWrap",Panel:"Polaris-Tabs__Panel","Panel-hidden":"Polaris-Tabs__Panel--hidden"};const Nl=40;function NP({open:e,isModalLoading:t,name:r,onClose:n,onClickPrimaryAction:a,onClickSecondaryAction:s,helpText:o,viewNames:i}){const c=le(),[u,d]=m.useState(r),p=m.useRef(null),f=i==null?void 0:i.some(v=>v.trim().toLowerCase()===u.trim().toLowerCase()),h=t||f||!u||u.length>Nl;m.useEffect(()=>{p.current&&e&&lr(p.current)},[e]),m.useEffect(()=>{e&&d(r.slice(0,Nl))},[r,e]);const g=m.useCallback(v=>{d(v)},[]);async function y(){h||(await a(u),d(""),n())}function b(){s==null||s(),d(r),n()}return l.createElement(cr,{open:e,onClose:n,title:c.translate("Polaris.Tabs.DuplicateModal.title"),primaryAction:{content:c.translate("Polaris.Tabs.DuplicateModal.create"),onAction:y,disabled:h},secondaryActions:[{content:c.translate("Polaris.Tabs.DuplicateModal.cancel"),onAction:b}],instant:!0},l.createElement(cr.Section,null,l.createElement(fs,{onSubmit:y},l.createElement(hs,null,l.createElement("div",{ref:p},l.createElement(hn,{label:c.translate("Polaris.Tabs.DuplicateModal.label"),value:u,onChange:g,autoComplete:"off",helpText:o,maxLength:Nl,showCharacterCount:!0,error:f?c.translate("Polaris.Tabs.DuplicateModal.errors.sameName",{name:u}):void 0}))))))}function LP({open:e,isModalLoading:t,name:r,onClose:n,onClickPrimaryAction:a,onClickSecondaryAction:s,helpText:o,viewNames:i}){const c=le(),[u,d]=m.useState(r),p=m.useRef(null),f=i==null?void 0:i.filter(v=>v!==r).some(v=>v.trim().toLowerCase()===u.trim().toLowerCase()),h=t||f||u===r||!u;m.useEffect(()=>{p.current&&e&&lr(p.current)},[e]),m.useEffect(()=>{e&&d(r)},[r,e]);const g=m.useCallback(v=>{d(v)},[]);async function y(){h||(await a(u),d(""),n())}function b(){s==null||s(),d(r),n()}return l.createElement(cr,{open:e,onClose:n,title:c.translate("Polaris.Tabs.RenameModal.title"),primaryAction:{content:c.translate("Polaris.Tabs.RenameModal.create"),onAction:y,disabled:h},secondaryActions:[{content:c.translate("Polaris.Tabs.RenameModal.cancel"),onAction:b}],instant:!0},l.createElement(cr.Section,null,l.createElement(fs,{onSubmit:y},l.createElement(hs,null,l.createElement("div",{ref:p},l.createElement(hn,{label:c.translate("Polaris.Tabs.RenameModal.label"),value:u,onChange:g,autoComplete:"off",helpText:o,maxLength:40,showCharacterCount:!0,error:f?c.translate("Polaris.Tabs.RenameModal.errors.sameName",{name:u}):void 0}))))))}const _o=m.forwardRef(({content:e,accessibilityLabel:t,badge:r,id:n,panelID:a,url:s,onAction:o,actions:i,disabled:c,isModalLoading:u,icon:d,siblingTabHasFocus:p,measuring:f,focused:h,selected:g,onToggleModal:y,onTogglePopover:b,viewNames:v,tabIndexOverride:_,onFocus:A},T)=>{const k=le(),[I,E]=m.useState(!1),[P,C]=m.useState(null),{mdDown:x}=Tr(),$=m.useRef(g),M=m.useRef(!1),w=m.useRef(null);m.useEffect(()=>{b(I)},[I,b]),m.useEffect(()=>{y(!!P)},[P,y]),m.useEffect(()=>()=>{y(!1),b(!1)},[y,b]),m.useEffect(()=>{if(f)return;(h||document.activeElement&&document.activeElement.id===n)&&g&&a!=null&&!M.current&&(Jp(a),M.current=!0),g&&!$.current&&a!=null?Jp(a):h&&w.current!=null&&P==null&&!c&&lr(w.current),$.current=g},[h,n,e,f,a,g,P,c]);let S;g&&!p&&!f||h&&!f?S=0:S=-1,_!=null&&(S=_);const O=i==null?void 0:i.find(te=>te.type==="rename"),N=i==null?void 0:i.find(te=>te.type==="duplicate"),H=i==null?void 0:i.find(te=>te.type==="delete"),L=m.useCallback(()=>{i!=null&&i.length&&E(te=>!te)},[i]),W=m.useCallback(()=>{c||(g?L():o==null||o())},[g,o,L,c]),F=te=>{C(te)},D=()=>{C(null)},q=m.useCallback(async te=>{var Q;await((Q=O==null?void 0:O.onPrimaryAction)==null?void 0:Q.call(O,te)),setTimeout(()=>{w.current&&lr(w.current)},250)},[O]),Y=m.useCallback(async()=>{var te;await((te=H==null?void 0:H.onPrimaryAction)==null?void 0:te.call(H,e)),D()},[H,e]),V=m.useCallback(async te=>{var Q;await((Q=N==null?void 0:N.onPrimaryAction)==null?void 0:Q.call(N,te))},[N]),ue={rename:{icon:Tu,content:k.translate("Polaris.Tabs.Tab.rename")},duplicate:{icon:Dg,content:k.translate("Polaris.Tabs.Tab.duplicate")},edit:{icon:Bg,content:k.translate("Polaris.Tabs.Tab.edit")},"edit-columns":{icon:Ru,content:k.translate("Polaris.Tabs.Tab.editColumns")},delete:{icon:Hg,content:k.translate("Polaris.Tabs.Tab.delete"),destructive:!0}},U=i==null?void 0:i.map(({type:te,onAction:Q,onPrimaryAction:$e,...Ne})=>{const At=!te.includes("edit");return{...ue[te],...Ne,onAction:()=>{Q==null||Q(e),L(),At&&F(te)}}}),G=m.useCallback(te=>{te.key===" "&&(te.preventDefault(),W())},[W]),me=R(fe.TabContainer,g&&fe.Underline),Me=c||g?void 0:s,Pe=Me?Yt:Kt,Ce=R(fe.Tab,d&&fe["Tab-iconOnly"],I&&fe["Tab-popoverActive"],g&&fe["Tab-active"],g&&(i==null?void 0:i.length)&&fe["Tab-hasActions"]),He=r?l.createElement(sn,{tone:g?void 0:"new"},r):null,De=g&&(i!=null&&i.length)?l.createElement("div",{className:R(fe.IconWrap)},l.createElement(pe,{source:ds})):null,z=l.createElement(Pe,{id:n,className:Ce,tabIndex:S,"aria-selected":g,"aria-controls":a,"aria-label":t,role:_==null?"tab":void 0,disabled:c,url:Me,onFocus:A,onMouseUp:go,onClick:W,onKeyDown:G},l.createElement(ye,{gap:"200",align:"center",blockAlign:"center",wrap:!1},l.createElement(se,{as:"span",variant:x?"bodyLg":"bodySm",fontWeight:"medium"},d??e),He),De),re=!g||!(i!=null&&i.length),Te=O?l.createElement(LP,{name:e,open:P==="rename",onClose:D,onClickPrimaryAction:q,isModalLoading:u,viewNames:v}):null,ce=N?l.createElement(NP,{open:P==="duplicate",name:k.translate("Polaris.Tabs.Tab.copy",{name:e}),onClose:D,onClickPrimaryAction:V,isModalLoading:u,viewNames:v||[]}):null,ge=H?l.createElement(cr,{open:P==="delete",onClose:D,primaryAction:{content:k.translate("Polaris.Tabs.Tab.deleteModal.delete"),onAction:Y,destructive:!0,disabled:u},secondaryActions:[{content:k.translate("Polaris.Tabs.Tab.deleteModal.cancel"),onAction:D}],title:k.translate("Polaris.Tabs.Tab.deleteModal.title"),instant:!0},l.createElement(cr.Section,null,k.translate("Polaris.Tabs.Tab.deleteModal.description",{viewName:e}))):null,xe=re||c?z:l.createElement(l.Fragment,null,l.createElement(dt,{active:I,activator:z,autofocusTarget:"first-node",onClose:L},l.createElement("div",{className:fe.ActionListWrap},l.createElement(fn,{actionRole:"menuitem",items:U}))),Te,ce,ge);return d?xe:l.createElement("li",{className:me,ref:MP([w,T]),role:"presentation"},xe)});_o.displayName="Tab";function Jp(e){const t=document.getElementById(e);t&&t.focus({preventScroll:!0})}function MP(e){return t=>{for(const r of e)r!=null&&(r.current=t)}}const FP=m.memo(function({selected:t,tabs:r,activator:n,tabToFocus:a,siblingTabHasFocus:s,handleMeasurement:o}){const i=m.useRef(null),c=m.useRef(null),u=m.useCallback(()=>{c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{if(!i.current)return;const f=i.current.offsetWidth-20-28,h=i.current.children,y=Array.from(h).map(v=>Math.ceil(v.getBoundingClientRect().width)+4),b=y.pop()||0;o({containerWidth:f,disclosureWidth:b,hiddenTabWidths:y})})},[o]);m.useEffect(()=>{u()},[u,r]),gu(()=>{});const d=r.map((f,h)=>l.createElement(_o,{measuring:!0,key:`$${f.id}Hidden`,id:`${f.id}Measurer`,siblingTabHasFocus:s,focused:h===a,selected:h===t,url:f.url,content:f.content,onTogglePopover:Xp,onToggleModal:Xp})),p=R(fe.Tabs,fe.TabsMeasurer);return Gn("resize",u),l.createElement("div",{className:p,ref:i},d,n)});function Xp(){}function Yp({hidden:e,id:t,tabID:r,children:n}){const a=R(fe.Panel,e&&fe["Panel-hidden"]);return l.createElement("div",{className:a,id:t,role:"tabpanel","aria-labelledby":r,tabIndex:-1},n)}const HP=m.memo(function({id:t,focused:r,children:n,url:a,accessibilityLabel:s,onClick:o=DP}){const i=m.useRef(null);m.useEffect(()=>{i.current&&i.current instanceof HTMLElement&&r&&i.current.focus()},[i,r]);const c=R(fe.Item),u={id:t,ref:i,onClick:o,className:c,"aria-selected":!1,"aria-label":s},d=a?l.createElement(Yt,Object.assign({},u,{url:a}),n):l.createElement("button",Object.assign({},u,{ref:i,type:"button"}),n);return l.createElement("li",null,d)});function DP(){}function BP({focusIndex:e,disclosureTabs:t,onClick:r=Qp,onKeyPress:n=Qp}){const a=t.map(({id:s,content:o,...i},c)=>l.createElement(HP,Object.assign({key:s},i,{id:s,focused:c===e,onClick:r.bind(null,s)}),o));return l.createElement("ul",{className:fe.List,onKeyDown:WP,onKeyUp:n},a)}function Qp(){}function WP(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}const Zp=40;function UP({activator:e,open:t,onClose:r,onClickPrimaryAction:n,onClickSecondaryAction:a,viewNames:s}){const o=le(),[i,c]=m.useState(""),[u,d]=m.useState(!1),p=m.useRef(null),f=py(),h=s.some(_=>_.trim().toLowerCase()===i.trim().toLowerCase()),g=!i||h||u||i.length>Zp;m.useEffect(()=>{if(!(!p.current||f)&&t){lr(p.current);const _=setTimeout(()=>{p.current&&lr(p.current)},50);return()=>clearTimeout(_)}},[t,f]);const y=m.useCallback(_=>{c(_)},[]);async function b(){h||g||(d(!0),await n(i),d(!1),c(""),r())}function v(){a==null||a(),c(""),r()}return l.createElement(cr,{activator:e,open:t,onClose:r,title:o.translate("Polaris.Tabs.CreateViewModal.title"),primaryAction:{content:o.translate("Polaris.Tabs.CreateViewModal.create"),onAction:b,disabled:g},secondaryActions:[{content:o.translate("Polaris.Tabs.CreateViewModal.cancel"),onAction:v}]},l.createElement(cr.Section,null,l.createElement(fs,{onSubmit:b},l.createElement(hs,null,l.createElement("div",{ref:p},l.createElement(hn,{label:o.translate("Polaris.Tabs.CreateViewModal.label"),value:i,onChange:y,autoComplete:"off",maxLength:Zp,showCharacterCount:!0,error:h?o.translate("Polaris.Tabs.CreateViewModal.errors.sameName",{name:i}):void 0}))))))}const jP="create-new-view",hy=({tabs:e,children:t,selected:r,newViewAccessibilityLabel:n,canCreateNewView:a,disabled:s,onCreateNewView:o,onSelect:i,fitted:c,disclosureText:u})=>{const d=le(),{mdDown:p}=Tr(),f=m.useRef(null),h=m.useRef(null),g=m.useRef(null),[y,b]=m.useReducer((J,ee)=>({...J,...ee}),{disclosureWidth:0,containerWidth:1/0,tabWidths:[],visibleTabs:[],hiddenTabs:[],showDisclosure:!1,tabToFocus:-1,isNewViewModalActive:!1,modalSubmitted:!1,isTabsFocused:!1,isTabPopoverOpen:!1,isTabModalOpen:!1}),{tabToFocus:v,visibleTabs:_,hiddenTabs:A,showDisclosure:T,isNewViewModalActive:k,modalSubmitted:I,disclosureWidth:E,tabWidths:P,containerWidth:C,isTabsFocused:x,isTabModalOpen:$,isTabPopoverOpen:M}=y,w=zp($),S=zp(M);m.useEffect(()=>{w&&!$?b({isTabsFocused:!0,tabToFocus:r}):S&&!M&&!$&&b({isTabsFocused:!0,tabToFocus:r})},[S,M,w,$,r,v]);const O=m.useCallback(J=>b({isTabPopoverOpen:J}),[]),N=m.useCallback(J=>b({isTabModalOpen:J}),[]),H=()=>{b({isNewViewModalActive:!1})},L=async J=>{if(!o)return!1;const ee=await(o==null?void 0:o(J));return ee&&b({modalSubmitted:!0}),ee},W=()=>{b({isNewViewModalActive:!0})},F=m.useCallback(J=>{const ee=e.find(Oe=>Oe.id===J);if(ee==null)return null;const ve=e.indexOf(ee);i==null||i(ve)},[e,i]),D=m.useCallback((J,ee)=>{const ve=()=>{var Ze;F(J.id),(Ze=J.onAction)==null||Ze.call(J)},Oe=e.map(({content:Ze})=>Ze),Je=J.panelID||`${J.id}-panel`;return l.createElement(_o,Object.assign({},J,{key:`${ee}-${J.id}`,id:J.id,panelID:t?Je:void 0,disabled:s||J.disabled,siblingTabHasFocus:v>-1,focused:ee===v,selected:ee===r,onAction:ve,accessibilityLabel:J.accessibilityLabel,url:J.url,content:J.content,onToggleModal:N,onTogglePopover:O,viewNames:Oe,ref:ee===r?g:null}))},[s,F,e,t,r,v,N,O]),q=m.useCallback(J=>{const ee=J.target,ve=ee.classList.contains(fe.Item),Oe=ee.closest("[data-tabs-focus-catchment]")||ve;ee.classList.contains(fe.DisclosureActivator)||!Oe||b({isTabsFocused:!0})},[]),Y=m.useCallback(J=>{var kt,Pt,st;const ee=J.target,ve=J.relatedTarget,Oe=(kt=ve==null?void 0:ve.closest)==null?void 0:kt.call(ve,`.${fe.Tabs}`),Je=(st=(Pt=ee==null?void 0:ee.classList)==null?void 0:Pt.contains)==null?void 0:st.call(Pt,fe.Tab),Ze=ve==null?void 0:ve.classList.contains(fe.Item);if(!ve&&!$&&!Je&&!Ze){b({tabToFocus:-1});return}if(!Oe&&!$&&!Je&&!Ze){b({tabToFocus:-1});return}b({isTabsFocused:!1})},[$]),V=J=>{if(M||$||k)return;const{key:ee}=J;(ee==="ArrowLeft"||ee==="ArrowRight")&&(J.preventDefault(),J.stopPropagation())};m.useEffect(()=>{const{visibleTabs:J,hiddenTabs:ee}=Gp(e,r,E,P,C);b({visibleTabs:J,hiddenTabs:ee})},[C,E,e,r,P,b]);const ue=m.useCallback(()=>{var ee;const J=(ee=g.current)==null?void 0:ee.querySelector(`.${fe["Tab-active"]}`);J&&Ce(J.offsetLeft)},[]);m.useEffect(()=>{p&&ue()},[ue,r,p]),m.useEffect(()=>{x&&!T&&b({tabToFocus:r})},[x,r,b,T]);const U=J=>{const{showDisclosure:ee,visibleTabs:ve,hiddenTabs:Oe,tabToFocus:Je,isNewViewModalActive:Ze}=y;if($||M||Ze)return;const kt=J.key,Pt=ee||p?ve.concat(Oe):[...ve];let st=Pt.indexOf(Je);kt==="ArrowRight"&&(st+=1,st===Pt.length&&(st=0)),kt==="ArrowLeft"&&(st===-1||st===0?st=Pt.length-1:st-=1);const he=Pt[st];he!=null&&b({tabToFocus:he})},G=()=>{b({showDisclosure:!T,tabToFocus:A[0]})},me=()=>{b({showDisclosure:!1})},Me=m.useCallback(J=>{const{hiddenTabWidths:ee,containerWidth:ve,disclosureWidth:Oe}=J,{visibleTabs:Je,hiddenTabs:Ze}=Gp(e,r,Oe,ee,ve);b({visibleTabs:Je,hiddenTabs:Ze,disclosureWidth:Oe,containerWidth:ve,tabWidths:ee})},[e,r,b]),Pe=J=>{F(J),me(),b({isTabsFocused:!0})},Ce=J=>{setTimeout(()=>{var ee,ve;if(f.current&&typeof f.current.scroll=="function"){const Oe=((ee=h==null?void 0:h.current)==null?void 0:ee.offsetLeft)||0;(ve=f==null?void 0:f.current)==null||ve.scroll({left:J-Oe})}},0)},He=n||d.translate("Polaris.Tabs.newViewAccessibilityLabel"),De=p?[..._,...A]:_,z=De.sort((J,ee)=>J-ee).filter(J=>e[J]).map(J=>D(e[J],J)),re=_.length<e.length&&!p,Te=R(fe.Tabs,c&&fe.fitted,re&&fe.fillSpace),ce=R(fe.Wrapper,a&&fe.WrapperWithNewButton),ge=R(fe.DisclosureTab,re&&fe["DisclosureTab-visible"]),xe=R(fe.DisclosureActivator),te=l.createElement(l.Fragment,null,l.createElement(se,{as:"span",variant:"bodySm",fontWeight:"medium"},u??d.translate("Polaris.Tabs.toggleTabsLabel")),l.createElement("div",{className:R(fe.IconWrap,re&&T&&fe["IconWrap-open"])},l.createElement(pe,{source:ds,tone:"subdued"}))),$e=l.createElement(Kt,{type:"button",className:xe,onClick:G,"aria-label":u??d.translate("Polaris.Tabs.toggleTabsLabel"),disabled:s},te),Ne=A.map(J=>e[J]),At=e.map(({content:J})=>J),pr=l.createElement(FP,{tabToFocus:v,activator:$e,selected:r,tabs:e,siblingTabHasFocus:v>-1,handleMeasurement:Me}),zt=l.createElement(_o,{id:jP,content:He,actions:[],onAction:W,onFocus:()=>{I&&b({tabToFocus:r,modalSubmitted:!1})},icon:l.createElement(pe,{source:ku,accessibilityLabel:He}),disabled:s,onTogglePopover:O,onToggleModal:N,tabIndexOverride:0}),Zt=t?e.map((J,ee)=>r===ee?l.createElement(Yp,{id:e[ee].panelID||`${e[ee].id}-panel`,tabID:e[ee].id,key:e[ee].id},t):l.createElement(Yp,{id:e[ee].panelID||`${e[ee].id}-panel`,tabID:e[ee].id,key:e[ee].id,hidden:!0})):null;return l.createElement("div",{className:fe.Outer},l.createElement(ne,{padding:{md:"200"}},pr,l.createElement("div",{className:ce,ref:f},l.createElement("div",{className:fe.ButtonWrapper,ref:h},l.createElement("ul",{role:z.length>0?"tablist":void 0,className:Te,onFocus:q,onBlur:Y,onKeyDown:V,onKeyUp:U,"data-tabs-focus-catchment":!0},z,p||De.length===0?null:l.createElement("li",{className:ge,role:"presentation"},l.createElement(dt,{preferredPosition:"below",preferredAlignment:"left",activator:$e,active:re&&T,onClose:me,autofocusTarget:"first-node"},l.createElement(BP,{focusIndex:A.indexOf(v),disclosureTabs:Ne,onClick:Pe,onKeyPress:U})))),a&&De.length>0?l.createElement("div",{className:fe.NewTab},l.createElement(UP,{open:k,onClose:H,onClickPrimaryAction:L,viewNames:At,activator:s?zt:l.createElement("div",null,l.createElement(Vt,{content:d.translate("Polaris.Tabs.newViewTooltip"),preferredPosition:"above",hoverDelay:400},zt))})):null))),Zt)};function qP({onClick:e,label:t,disabled:r,tooltipContent:n,style:a,hideFilters:s,hideQueryField:o}){const i=l.createElement(ye,{gap:"0"},o?null:l.createElement(pe,{source:Ho,tone:"base"}),s?null:l.createElement(pe,{source:Ug,tone:"base"})),c=l.createElement("div",{style:a},l.createElement(Ae,{size:"slim",onClick:e,disabled:r,icon:i,accessibilityLabel:t})),u=l.createElement(se,{as:"span",variant:"bodyMd",alignment:"center"},n);return l.createElement(Vt,{content:u,preferredPosition:"above",hoverDelay:400},c)}function VP({onClick:e,disabled:t}){const r=le(),n=l.createElement(se,{as:"span",variant:"bodyMd",alignment:"center"},r.translate("Polaris.IndexFilters.EditColumnsButton.tooltip"));return l.createElement(Vt,{content:n,preferredPosition:"above",hoverDelay:400},l.createElement(Ae,{size:"slim",onClick:e,disabled:t,icon:Ru,accessibilityLabel:r.translate("Polaris.IndexFilters.EditColumnsButton.accessibilityLabel")}))}const KP=["INPUT","SELECT","TEXTAREA"],qc=150,Ll={transition:`opacity ${qc}ms var(--p-motion-ease)`,opacity:0},Ml={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{opacity:0}};function zP({tabs:e,selected:t,onSelect:r,onSort:n,onSortKeyChange:a,onSortDirectionChange:s,onAddFilterClick:o,sortOptions:i,sortSelected:c,queryValue:u="",queryPlaceholder:d,primaryAction:p,cancelAction:f,filters:h,appliedFilters:g,onClearAll:y,onQueryChange:b,onQueryFocus:v,onQueryClear:_,onEditStart:A,disabled:T,disableQueryField:k,hideFilters:I,loading:E,mode:P,setMode:C,disableStickyMode:x,isFlushWhenSticky:$=!1,canCreateNewView:M=!0,onCreateNewView:w,filteringAccessibilityLabel:S,filteringAccessibilityTooltip:O,hideQueryField:N,closeOnChildOverlayClick:H,disableKeyboardShortcuts:L,showEditColumnsButton:W,autoFocusSearchField:F=!0}){const D=le(),{mdDown:q}=Tr(),Y=m.useRef(null),V=m.useRef(null),{value:ue,setFalse:U,setTrue:G}=Qt(P===We.Filtering&&F);cy(P,he=>{he===We.Filtering&&F?G():U()}),Gn("keydown",he=>{var _n;if(L||N&&I)return;const{key:vn}=he,En=(_n=document==null?void 0:document.activeElement)==null?void 0:_n.tagName;if(P!==We.Default&&he.key==="Escape"&&Je(),vn==="f"&&P===We.Default){if(En&&KP.includes(En))return;st(),he.preventDefault()}});const{intersectionRef:Me,measurerRef:Pe,indexFilteringHeight:Ce,isSticky:He}=kP(P,!!x,$),De=e.map(({content:he})=>he),z=m.useCallback(he=>{n==null||n(he)},[n]),re=m.useCallback(he=>{b(he)},[b]),ce=((he,jr)=>m.useCallback(async vn=>{await(he==null?void 0:he(vn))&&(C(We.Default),jr==null||jr())},[he,jr]))(p==null?void 0:p.onAction),ge=m.useCallback(()=>{var he;(he=f==null?void 0:f.onAction)==null||he.call(f),C(We.Default)},[f,C]),xe=m.useMemo(()=>p?{...p,onAction:ce}:void 0,[ce,p]),te=m.useMemo(()=>f?{...f,onAction:ge}:void 0,[f,ge]),Q=m.useCallback(he=>{C(he),A==null||A(he)},[A,C]),$e=m.useMemo(()=>te||xe?l.createElement(IP,{primaryAction:xe,cancelAction:te,viewNames:De,disabled:T}):null,[xe,te,T,De]),Ne=m.useMemo(()=>i!=null&&i.length?l.createElement(xP,{choices:i,selected:c,onChange:z,onChangeKey:a,onChangeDirection:s,disabled:T}):null,[z,s,a,i,c,T]);function At(){Q(We.EditingColumns)}const pr=W?l.createElement(VP,{onClick:At,disabled:T}):null,zt=(p==null?void 0:p.loading)||(f==null?void 0:f.loading);function Zt(){Q(We.Filtering)}const J=L?"Polaris.IndexFilters.searchFilterTooltip":"Polaris.IndexFilters.searchFilterTooltipWithShortcut",ee=O||D.translate(J),ve=S||D.translate("Polaris.IndexFilters.searchFilterAccessibilityLabel"),Oe=E||zt;function Je(){f==null||f.onAction(),C(We.Default)}function Ze(){_==null||_()}function kt(){U()}function Pt(){G(),v==null||v()}function st(){P===We.Default&&Q(We.Filtering)}return l.createElement("div",{className:Gt.IndexFiltersWrapper,style:{height:Ce}},l.createElement("div",{ref:Me}),l.createElement("div",{className:R(Gt.IndexFilters,He&&Gt.IndexFiltersSticky,He&&$&&Gt.IndexFiltersStickyFlush),ref:Pe},l.createElement(Mc,{nodeRef:Y,in:P!==We.Filtering,timeout:qc},he=>l.createElement("div",{ref:Y},P!==We.Filtering?l.createElement(OP,null,l.createElement(ye,{align:"start",blockAlign:"center",gap:{xs:"0",md:"200"},wrap:!1},l.createElement("div",{className:R(Gt.TabsWrapper,q&&Gt.SmallScreenTabsWrapper,Oe&&Gt.TabsWrapperLoading)},l.createElement("div",{className:Gt.TabsInner,style:{...Ll,...Ml[he]}},l.createElement(hy,{tabs:e,selected:t,onSelect:r,disabled:!!(P!==We.Default||T),canCreateNewView:M,onCreateNewView:w})),Oe&&q&&l.createElement("div",{className:Gt.TabsLoading},l.createElement(ya,{size:"small"}))),l.createElement("div",{className:Gt.ActionWrap},Oe&&!q&&l.createElement("div",{className:Gt.DesktopLoading},Oe?l.createElement(ya,{size:"small"}):null),P===We.Default?l.createElement(l.Fragment,null,I&&N?null:l.createElement(qP,{onClick:Zt,label:ve,tooltipContent:ee,disabled:T,hideFilters:I,hideQueryField:N,style:{...Ll,...Ml[he]}}),pr,Ne):null,P===We.EditingColumns?$e:null))):null)),l.createElement(Mc,{nodeRef:V,in:P===We.Filtering,timeout:qc},he=>l.createElement("div",{ref:V},P===We.Filtering?l.createElement(uy,{queryValue:u,queryPlaceholder:d,onQueryChange:re,onQueryClear:Ze,onQueryFocus:Pt,onQueryBlur:kt,onAddFilterClick:o,filters:h,appliedFilters:g,onClearAll:y,disableFilters:T,hideFilters:I,hideQueryField:N,disableQueryField:T||k,loading:E||zt,focused:ue,mountedState:q?void 0:he,borderlessQueryField:!0,closeOnChildOverlayClick:H},l.createElement("div",{className:Gt.ButtonWrap},l.createElement(ye,{gap:"200",align:"start",blockAlign:"center"},l.createElement("div",{style:{...Ll,...Ml[he]}},$e),Ne))):null))))}function GP(e=We.Default){const[t,r]=m.useState(e);return{mode:t,setMode:r}}var B={IndexTable:"Polaris-IndexTable",IndexTableWrapper:"Polaris-IndexTable__IndexTableWrapper","IndexTableWrapper-scrollBarHidden":"Polaris-IndexTable__IndexTableWrapper--scrollBarHidden",IndexTableWrapperWithSelectAllActions:"Polaris-IndexTable__IndexTableWrapperWithSelectAllActions","LoadingContainer-enter":"Polaris-IndexTable__LoadingContainer--enter","LoadingContainer-enter-active":"Polaris-IndexTable--loadingContainerEnterActive","LoadingContainer-exit":"Polaris-IndexTable__LoadingContainer--exit","LoadingContainer-exit-active":"Polaris-IndexTable--loadingContainerExitActive",LoadingPanel:"Polaris-IndexTable__LoadingPanel",LoadingPanelRow:"Polaris-IndexTable__LoadingPanelRow",LoadingPanelText:"Polaris-IndexTable__LoadingPanelText",Table:"Polaris-IndexTable__Table","Table-scrolling":"Polaris-IndexTable__Table--scrolling","TableCell-first":"Polaris-IndexTable__TableCell--first",TableCell:"Polaris-IndexTable__TableCell","TableHeading-first":"Polaris-IndexTable__TableHeading--first","TableHeading-second":"Polaris-IndexTable__TableHeading--second","Table-sticky":"Polaris-IndexTable__Table--sticky","Table-unselectable":"Polaris-IndexTable__Table--unselectable",TableRow:"Polaris-IndexTable__TableRow","TableRow-unclickable":"Polaris-IndexTable__TableRow--unclickable",toneSuccess:"Polaris-IndexTable--toneSuccess","TableRow-child":"Polaris-IndexTable__TableRow--child",toneWarning:"Polaris-IndexTable--toneWarning",toneCritical:"Polaris-IndexTable--toneCritical",toneSubdued:"Polaris-IndexTable--toneSubdued","TableRow-subheader":"Polaris-IndexTable__TableRow--subheader","TableRow-selected":"Polaris-IndexTable__TableRow--selected","TableRow-hovered":"Polaris-IndexTable__TableRow--hovered","TableRow-disabled":"Polaris-IndexTable__TableRow--disabled",ZebraStriping:"Polaris-IndexTable__ZebraStriping",TableHeading:"Polaris-IndexTable__TableHeading","TableHeading-flush":"Polaris-IndexTable__TableHeading--flush","TableHeading-align-center":"Polaris-IndexTable--tableHeadingAlignCenter","TableHeading-align-end":"Polaris-IndexTable--tableHeadingAlignEnd","TableHeading-extra-padding-right":"Polaris-IndexTable--tableHeadingExtraPaddingRight","TableHeading-sortable":"Polaris-IndexTable__TableHeading--sortable",TableHeadingSortButton:"Polaris-IndexTable__TableHeadingSortButton",TableHeadingSortIcon:"Polaris-IndexTable__TableHeadingSortIcon","TableHeadingSortButton-heading-align-end":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEnd","TableHeadingSortButton-heading-align-end-currently-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndCurrentlySorted","TableHeadingSortIcon-heading-align-end":"Polaris-IndexTable--tableHeadingSortIconHeadingAlignEnd","TableHeadingSortButton-heading-align-end-previously-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndPreviouslySorted","right-aligned-sort-button-slide-out":"Polaris-IndexTable--rightAlignedSortButtonSlideOut","reveal-right-aligned-sort-button-icon":"Polaris-IndexTable--revealRightAlignedSortButtonIcon",TableHeadingUnderline:"Polaris-IndexTable__TableHeadingUnderline",TableHeadingTooltipUnderlinePlaceholder:"Polaris-IndexTable__TableHeadingTooltipUnderlinePlaceholder","TableHeadingSortIcon-visible":"Polaris-IndexTable__TableHeadingSortIcon--visible",TableHeadingSortSvg:"Polaris-IndexTable__TableHeadingSortSvg",SortableTableHeadingWithCustomMarkup:"Polaris-IndexTable__SortableTableHeadingWithCustomMarkup",SortableTableHeaderWrapper:"Polaris-IndexTable__SortableTableHeaderWrapper",ColumnHeaderCheckboxWrapper:"Polaris-IndexTable__ColumnHeaderCheckboxWrapper",FirstStickyHeaderElement:"Polaris-IndexTable__FirstStickyHeaderElement","TableHeading-unselectable":"Polaris-IndexTable__TableHeading--unselectable","TableCell-flush":"Polaris-IndexTable__TableCell--flush","Table-sticky-scrolling":"Polaris-IndexTable--tableStickyScrolling","TableHeading-last":"Polaris-IndexTable__TableHeading--last","Table-sticky-last":"Polaris-IndexTable--tableStickyLast","Table-sortable":"Polaris-IndexTable__Table--sortable",StickyTable:"Polaris-IndexTable__StickyTable",StickyTableHeader:"Polaris-IndexTable__StickyTableHeader","StickyTableHeader-isSticky":"Polaris-IndexTable__StickyTableHeader--isSticky",StickyTableColumnHeader:"Polaris-IndexTable__StickyTableColumnHeader",StickyTableHeadings:"Polaris-IndexTable__StickyTableHeadings","StickyTableHeading-second":"Polaris-IndexTable__StickyTableHeading--second",unselectable:"Polaris-IndexTable--unselectable","StickyTableHeading-second-scrolling":"Polaris-IndexTable--stickyTableHeadingSecondScrolling",ScrollLeft:"Polaris-IndexTable__ScrollLeft",ScrollRight:"Polaris-IndexTable__ScrollRight","ScrollRight-onboarding":"Polaris-IndexTable__ScrollRight--onboarding",SelectAllActionsWrapper:"Polaris-IndexTable__SelectAllActionsWrapper",SelectAllActionsWrapperWithPagination:"Polaris-IndexTable__SelectAllActionsWrapperWithPagination",SelectAllActionsWrapperSticky:"Polaris-IndexTable__SelectAllActionsWrapperSticky",SelectAllActionsWrapperAtEnd:"Polaris-IndexTable__SelectAllActionsWrapperAtEnd",SelectAllActionsWrapperAtEndAppear:"Polaris-IndexTable__SelectAllActionsWrapperAtEndAppear",BulkActionsWrapper:"Polaris-IndexTable__BulkActionsWrapper",BulkActionsWrapperVisible:"Polaris-IndexTable__BulkActionsWrapperVisible",PaginationWrapper:"Polaris-IndexTable__PaginationWrapper",PaginationWrapperScrolledPastTop:"Polaris-IndexTable__PaginationWrapperScrolledPastTop",ScrollBarContainer:"Polaris-IndexTable__ScrollBarContainer",ScrollBarContainerWithPagination:"Polaris-IndexTable__ScrollBarContainerWithPagination",ScrollBarContainerScrolledPastTop:"Polaris-IndexTable__ScrollBarContainerScrolledPastTop",ScrollBarContainerWithSelectAllActions:"Polaris-IndexTable__ScrollBarContainerWithSelectAllActions",ScrollBarContainerSelectAllActionsSticky:"Polaris-IndexTable__ScrollBarContainerSelectAllActionsSticky",scrollBarContainerCondensed:"Polaris-IndexTable--scrollBarContainerCondensed",scrollBarContainerHidden:"Polaris-IndexTable--scrollBarContainerHidden",ScrollBar:"Polaris-IndexTable__ScrollBar",disableTextSelection:"Polaris-IndexTable--disableTextSelection",EmptySearchResultWrapper:"Polaris-IndexTable__EmptySearchResultWrapper",condensedRow:"Polaris-IndexTable--condensedRow",CondensedList:"Polaris-IndexTable__CondensedList",HeaderWrapper:"Polaris-IndexTable__HeaderWrapper","StickyTable-condensed":"Polaris-IndexTable__StickyTable--condensed","StickyTableHeader-condensed":"Polaris-IndexTable__StickyTableHeader--condensed",ScrollBarContent:"Polaris-IndexTable__ScrollBarContent"};const Fr="All";let Ke;(function(e){e.All="all",e.Page="page",e.Multi="multi",e.Single="single",e.Range="range"})(Ke||(Ke={}));const fy=m.createContext(void 0),my=m.createContext(void 0),gy=m.createContext(void 0);function yy(){const e=m.useContext(my);if(!e)throw new Error("Missing IndexProvider context");return e}function JP(){const e=m.useContext(gy);if(!e)throw new Error("Missing IndexProvider context");return e}function by(){const e=m.useContext(fy);if(!e)throw new Error("Missing IndexProvider context");return e}function XP({selectedItemsCount:e,itemCount:t,hasMoreItems:r,resourceName:n}){const a=le(),s=!!e,o=e==="All"||e>0,i={singular:a.translate("Polaris.IndexProvider.defaultItemSingular"),plural:a.translate("Polaris.IndexProvider.defaultItemPlural")},c=n||i,u=h(),d=g(),p=y();let f="indeterminate";return!e||e===0?f=void 0:(e===Fr||e===t)&&(f=!0),{paginatedSelectAllText:u,bulkActionsLabel:d,bulkActionsAccessibilityLabel:p,resourceName:c,selectMode:o,bulkSelectState:f,selectable:s};function h(){if(!(!s||!r)&&e===Fr)return a.translate("Polaris.IndexProvider.allItemsSelected",{itemsLength:t,resourceNamePlural:c.plural.toLocaleLowerCase()})}function g(){const b=e===Fr?`${t}+`:e;return a.translate("Polaris.IndexProvider.selected",{selectedItemsCount:b})}function y(){const b=t,v=e===b;return b===1&&v?a.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllSingle",{resourceNameSingular:c.singular}):b===1?a.translate("Polaris.IndexProvider.a11yCheckboxSelectAllSingle",{resourceNameSingular:c.singular}):v?a.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllMultiple",{itemsLength:t,resourceNamePlural:c.plural}):a.translate("Polaris.IndexProvider.a11yCheckboxSelectAllMultiple",{itemsLength:t,resourceNamePlural:c.plural})}}function YP({onSelectionChange:e=()=>{}}){const t=m.useRef(null);return m.useCallback((n,a,s,o)=>{const i=t.current;if(Ke.Multi&&typeof o=="number"&&(t.current=o),n===Ke.Single||n===Ke.Multi&&(typeof i!="number"||typeof o!="number"))e(Ke.Single,a,s);else if(n===Ke.Multi){const c=Math.min(i,o),u=Math.max(i,o);e(n,a,[c,u])}else n===Ke.Page||n===Ke.All?e(n,a):n===Ke.Range&&e(Ke.Range,a,s)},[e])}function QP({children:e,resourceName:t,loading:r,onSelectionChange:n,selectedItemsCount:a=0,itemCount:s,hasMoreItems:o,condensed:i,selectable:c=!0}){const{paginatedSelectAllText:u,bulkActionsLabel:d,bulkActionsAccessibilityLabel:p,resourceName:f,selectMode:h,bulkSelectState:g}=XP({selectedItemsCount:a,itemCount:s,hasMoreItems:o,resourceName:t}),y=YP({onSelectionChange:n}),b=m.useMemo(()=>({itemCount:s,selectMode:h&&c,selectable:c,resourceName:f,loading:r,paginatedSelectAllText:u,hasMoreItems:o,bulkActionsLabel:d,bulkActionsAccessibilityLabel:p,bulkSelectState:g,selectedItemsCount:a,condensed:i}),[s,h,c,f,r,u,o,d,p,g,a,i]),v=m.useMemo(()=>({selectable:c,selectMode:h&&c,condensed:i}),[i,h,c]);return l.createElement(fy.Provider,{value:b},l.createElement(gy.Provider,{value:v},l.createElement(my.Provider,{value:y},e)))}const ZP=m.memo(function({children:t,className:r,flush:n,colSpan:a,headers:s,scope:o,as:i="td",id:c}){const u=R(r,B.TableCell,n&&B["TableCell-flush"]);return l.createElement(i,{id:c,colSpan:a,headers:s,scope:o,className:u},t)});var eh={TableCellContentContainer:"Polaris-IndexTable-Checkbox__TableCellContentContainer",Wrapper:"Polaris-IndexTable-Checkbox__Wrapper"};const Xo=m.createContext({}),vy=m.createContext(void 0),Ey={scrollableContainer:null,canScrollLeft:!1,canScrollRight:!1},_y=m.createContext(Ey),eC=m.memo(function({accessibilityLabel:t}){const r=le(),{resourceName:n}=by(),{itemId:a,selected:s,disabled:o,onInteraction:i}=m.useContext(Xo),c=R(eh.Wrapper),u=t||r.translate("Polaris.IndexTable.selectItem",{resourceName:n.singular});return l.createElement(tC,null,l.createElement("div",{className:eh.TableCellContentContainer},l.createElement("div",{className:c,onClick:i,onKeyUp:rC},l.createElement(mn,{id:`Select-${a}`,label:u,labelHidden:!0,checked:s,disabled:o}))))});function tC({children:e}){const{position:t}=m.useContext(Xo),r=m.useRef(null),n=m.useCallback(ir(()=>{if(t!==0||!r.current)return;const{width:s}=r.current.getBoundingClientRect();nS("--pc-checkbox-offset",`${s}px`)}),[t]);m.useEffect(()=>{n()},[n]),m.useEffect(()=>{if(r.current)return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[n]);const a=R(B.TableCell,B["TableCell-first"]);return l.createElement("td",{className:a,ref:r},e)}function rC(){}const nC=m.memo(function({children:t,selected:r,id:n,position:a,tone:s,disabled:o,selectionRange:i,rowType:c="data",accessibilityLabel:u,onNavigation:d,onClick:p}){const{selectable:f,selectMode:h,condensed:g}=JP(),y=yy(),{value:b,setTrue:v,setFalse:_}=Qt(!1),A=m.useCallback(w=>{w.stopPropagation();let S=Ke.Single;if("key"in w&&w.key!==" "||!y)return;w.nativeEvent.shiftKey?S=Ke.Multi:i&&(S=Ke.Range),y(S,!r,i??n,a)},[n,y,r,i,a]),T=m.useMemo(()=>({itemId:n,selected:r,position:a,onInteraction:A,disabled:o}),[n,r,o,a,A]),k=m.useRef(null),I=m.useRef(!1),E=m.useRef(null),P=m.useCallback(w=>{E.current=w;const S=w==null?void 0:w.querySelector("[data-primary-link]");S&&(k.current=S)},[]),C=R(B.TableRow,c==="subheader"&&B["TableRow-subheader"],c==="child"&&B["TableRow-child"],f&&g&&B.condensedRow,r&&B["TableRow-selected"],b&&!g&&B["TableRow-hovered"],o&&B["TableRow-disabled"],s&&B[St("tone",s)],!f&&!k.current&&B["TableRow-unclickable"]);let x;(!o&&f||k.current)&&(x=w=>{if(c!=="subheader"&&!(!E.current||I.current)){if(w.stopPropagation(),w.preventDefault(),p){p();return}if(k.current&&!h){I.current=!0;const{ctrlKey:S,metaKey:O}=w.nativeEvent;if(d&&d(n),(S||O)&&k.current instanceof HTMLAnchorElement){I.current=!1,window.open(k.current.href,"_blank");return}k.current.dispatchEvent(new MouseEvent(w.type,w.nativeEvent))}else I.current=!1,A(w)}});const $=g?"li":"tr",M=f?l.createElement(eC,{accessibilityLabel:u}):null;return l.createElement(Xo.Provider,{value:T},l.createElement(vy.Provider,{value:b},l.createElement($,{key:n,id:n,className:C,onMouseEnter:v,onMouseLeave:_,onClick:x,ref:P},M,t)))});function th(e,t){return e?Array.from(e.querySelectorAll(t)):[]}var aC={ScrollContainer:"Polaris-IndexTable-ScrollContainer"};function sC({children:e,scrollableContainerRef:t,onScroll:r}){m.useEffect(()=>{t.current&&t.current.dispatchEvent(new Event("scroll"))},[t]);const[n,a]=m.useState(Ey),s=m.useCallback(ir(()=>{if(!t.current)return;const o=t.current.scrollWidth-t.current.offsetWidth,i=t.current.scrollLeft>0,c=t.current.scrollLeft<o;r(i,c),a({scrollableContainer:t.current,canScrollLeft:i,canScrollRight:c})},40,{trailing:!0,leading:!0,maxWait:40}),[r,t]);return l.createElement(_y.Provider,{value:n},l.createElement("div",{className:aC.ScrollContainer,ref:t,onScroll:s},e))}const oC=4,iC=300;function lC({headings:e,bulkActions:t=[],promotedBulkActions:r=[],children:n,emptyState:a,sort:s,paginatedSelectAllActionText:o,lastColumnSticky:i=!1,sortable:c,sortDirection:u,defaultSortDirection:d="descending",sortColumnIndex:p,onSort:f,sortToggleLabels:h,hasZebraStriping:g,pagination:y,...b}){const v=Do(),{loading:_,bulkSelectState:A,resourceName:T,bulkActionsAccessibilityLabel:k,selectMode:I,selectable:E=b.selectable,paginatedSelectAllText:P,itemCount:C,hasMoreItems:x,selectedItemsCount:$,condensed:M}=by(),w=yy(),S=le(),{value:O,toggle:N}=Qt(!1),H=m.useRef({top:0,left:0}),L=m.useRef([]),W=m.useRef(null),F=m.useRef(null),D=m.useRef(null),q=m.useRef(null),Y=m.useRef(null),[V,ue]=m.useState(!1),[U,G]=m.useState(null),[me,Me]=m.useState(!1),Pe=m.useRef([]),Ce=m.useRef([]),He=m.useRef(null),De=m.useRef(null),z=m.useRef(null),re=m.useRef(null),Te=m.useRef(null),ce=m.useRef(!1),ge=m.useRef(!1),xe=m.useRef(p),te=m.useRef(!1),Q=m.useRef(0),$e=m.useRef(!1);$!==Q.current&&(te.current=!0,Q.current=$),!$e.current&&$!==0&&($e.current=!0);const Ne=m.useCallback(K=>{K!==null&&!V&&ue(!0),D.current=K},[V]),At=m.useCallback(()=>{w($===Fr?Ke.Page:Ke.All,!0)},[w,$]),pr=m.useCallback(()=>E?M?L.current[0].offsetWidth:L.current[0].offsetWidth+L.current[1].offsetWidth:L.current[0].offsetWidth,[M,E]),zt=m.useMemo(()=>ir(()=>{if(!F.current||!W.current)return;const K=W.current.getBoundingClientRect();H.current={top:K.top,left:K.left},L.current=Pe.current.map(ie=>({offsetWidth:ie.offsetWidth||0,offsetLeft:ie.offsetLeft||0})),Pe.current.length!==0&&(E&&Pe.current.length>1&&(Pe.current[1].style.left=`${L.current[0].offsetWidth}px`),Ce.current.forEach((ie,Fe)=>{var Ct,Dt;let ht=0;Fe===0&&(!cC()||!E)?ht=pr():E&&L.current.length>Fe?ht=((Ct=L.current[Fe])==null?void 0:Ct.offsetWidth)||0:!E&&L.current.length>=Fe&&(ht=((Dt=L.current[Fe-1])==null?void 0:Dt.offsetWidth)||0),ie.style.minWidth=`${ht}px`}))}),[pr,E]),Zt=m.useCallback(()=>{var K,ie;re.current&&F.current&&V&&(re.current.style.setProperty("--pc-index-table-scroll-bar-content-width",`${F.current.offsetWidth-oC}px`),Me(((K=Te.current)==null?void 0:K.offsetWidth)===((ie=F.current)==null?void 0:ie.offsetWidth)))},[V]),J=m.useCallback(ir(Zt,iC,{trailing:!0}),[Zt]),[ee,ve]=m.useState(!0),Oe=m.useCallback(ir(()=>{if(!i||!F.current||!W.current)return;const K=F.current.getBoundingClientRect(),ie=W.current.getBoundingClientRect();ve(K.width>ie.width)}),[i]);m.useEffect(()=>{Oe()},[Oe]);const[Je,Ze]=m.useState(!0),kt=m.useCallback(()=>{if(!W.current||!Pe.current.length)return;const K=W.current.getBoundingClientRect(),ie=E?Pe.current[0].getBoundingClientRect().width:0,Fe=Pe.current[E?1:0].getBoundingClientRect().width,ht=E?Pe.current.length>2:1,Ct=i&&ht?Pe.current[Pe.current.length-1].getBoundingClientRect().width:0;Ze(K.width>Fe+ie+Ct+100)},[i,E]);m.useEffect(()=>{V&&kt()},[kt,V]);const Pt=m.useCallback(()=>{var K;(K=re.current)==null||K.style.setProperty("--pc-index-table-scroll-bar-content-width","0px"),zt(),J(),Oe(),kt()},[zt,J,Oe,kt]),st=m.useCallback((K,ie)=>{!W.current||!re.current||(ce.current||(ge.current=!0,re.current.scrollLeft=W.current.scrollLeft),ce.current=!1,z.current&&(z.current.scrollLeft=W.current.scrollLeft),(K&&!O||!K&&O)&&N(),ve(ie))},[O,N]),he=m.useCallback(()=>{!W.current||!re.current||(ge.current||(ce.current=!0,W.current.scrollLeft=re.current.scrollLeft),ge.current=!1)},[]);Ym(()=>{Pe.current=th(F.current,"[data-index-table-heading]"),Ce.current=th(He.current,"[data-index-table-sticky-heading]"),zt()},[e,zt,De,V]),m.useEffect(()=>{Zt(),G(M?q.current:F.current)},[V,Zt,M]);const jr=e.map(t0).reduce((K,ie)=>K.concat(ie),[]),vn=L.current&&L.current.length>0?{minWidth:pr()}:void 0,En=l.createElement("div",{className:R(B.TableHeading,E&&B["TableHeading-first"],e[0].flush&&B["TableHeading-flush"]),key:Fl(e[0]),style:vn,"data-index-table-sticky-heading":!0},l.createElement(ln,{spacing:"none",wrap:!1,alignment:"center"},E&&l.createElement("div",{className:B.FirstStickyHeaderElement,ref:De},sp()),E&&l.createElement("div",{className:B["StickyTableHeading-second-scrolling"]},$s(e[0],0)),!E&&l.createElement("div",{className:R(B.FirstStickyHeaderElement),ref:De},$s(e[0],0)))),_n=e.map(a0),[dl,pl]=m.useState($===Fr?`${C}+`:$);m.useEffect(()=>{($===Fr||$>0)&&pl($===Fr?`${C}+`:$)},[$,C]);const hl=S.translate("Polaris.IndexTable.selected",{selectedItemsCount:dl}),fl=m.useCallback(()=>{w(Ke.Page,!A||A==="indeterminate")},[A,w]),ml=s0(),gl={enter:B["LoadingContainer-enter"],enterActive:B["LoadingContainer-enter-active"],exit:B["LoadingContainer-exit"],exitActive:B["LoadingContainer-exit-active"]},ae=l.createElement(vu,{in:_,classNames:gl,timeout:parseInt(v.motion["motion-duration-100"],10),nodeRef:Y,appear:!0,unmountOnExit:!0},l.createElement("div",{className:B.LoadingPanel,ref:Y},l.createElement("div",{className:B.LoadingPanelRow},l.createElement(ya,{size:"small"}),l.createElement("span",{className:B.LoadingPanelText},S.translate("Polaris.IndexTable.resourceLoadingAccessibilityLabel",{resourceNamePlural:T.plural.toLocaleLowerCase()}))))),Ie=R(B.StickyTable,M&&B["StickyTable-condensed"]),Xe=!M||$,kr=Xe?r:[],Ht=Xe?t:[],xs=l.createElement("div",{className:Ie,role:"presentation"},l.createElement(_u,{boundingElement:U},K=>{const ie=R(B.StickyTableHeader,K&&B["StickyTableHeader-isSticky"]),Fe=R(B.BulkActionsWrapper,I&&B.BulkActionsWrapperVisible,M&&B["StickyTableHeader-condensed"],K&&B["StickyTableHeader-isSticky"]),ht=Xe&&!M?l.createElement("div",{className:Fe},l.createElement(Lu,{selectMode:I,onToggleAll:fl,paginatedSelectAllText:P,paginatedSelectAllAction:ml,accessibilityLabel:k,selected:A,promotedActions:kr,actions:Ht,onSelectModeToggle:M?o0:void 0,label:hl,buttonSize:"micro"})):null,Ct=M?l.createElement("div",{className:R(B.HeaderWrapper,(!E||M)&&B.unselectable)},ae,s):l.createElement("div",{className:ie,ref:He},ae,l.createElement("div",{className:B.StickyTableColumnHeader},En),l.createElement("div",{className:B.StickyTableHeadings,ref:z},_n));return l.createElement(l.Fragment,null,Ct,ht)})),Oa=R(B.ScrollBarContainer,y&&B.ScrollBarContainerWithPagination,M&&B.scrollBarContainerCondensed,me&&B.scrollBarContainerHidden),yl=R(F.current&&V&&B.ScrollBarContent),zE=C>0?l.createElement(pp,{onMount:Zt},l.createElement("div",{className:Oa,ref:Te},l.createElement("div",{onScroll:he,className:B.ScrollBar,ref:re},l.createElement("div",{className:yl})))):null,GE=c==null?void 0:c.some(K=>K),JE=R(B.Table,O&&B["Table-scrolling"],I&&B.disableTextSelection,!E&&B["Table-unselectable"],Je&&B["Table-sticky"],GE&&B["Table-sortable"],Je&&i&&B["Table-sticky-last"],Je&&i&&ee&&B["Table-sticky-scrolling"],g&&B.ZebraStriping),XE=a||l.createElement(Fu,{title:S.translate("Polaris.IndexTable.emptySearchTitle",{resourceNamePlural:T.plural}),description:S.translate("Polaris.IndexTable.emptySearchDescription"),withIllustration:!0}),ap=l.createElement(l.Fragment,null,l.createElement(ar,{event:"resize",handler:Pt}),l.createElement(pp,null,xs)),YE=R(B.CondensedList,g&&B.ZebraStriping),QE=M?l.createElement(l.Fragment,null,ap,l.createElement("ul",{"data-selectmode":!!I,className:YE,ref:q},n)):l.createElement(l.Fragment,null,ap,l.createElement(sC,{scrollableContainerRef:W,onScroll:st},l.createElement("table",{ref:F,className:JE},l.createElement("thead",null,l.createElement("tr",{className:B.HeadingRow},jr)),l.createElement("tbody",{ref:Ne},n)))),ZE=C>0?QE:l.createElement("div",{className:B.EmptySearchResultWrapper},XE),e0=y?l.createElement("div",{className:B.PaginationWrapper},l.createElement(yu,Object.assign({type:"table"},y))):null;return l.createElement(l.Fragment,null,l.createElement("div",{className:B.IndexTable},l.createElement("div",{className:B.IndexTableWrapper},!M&&ae,ZE,zE,e0)));function t0(K,ie){const Fe=ie===0,ht=ie===e.length-1,Ct=c==null?void 0:c.some(Ns=>Ns===!0),Dt=K.alignment||"start",hr=R(B.TableHeading,Dt==="center"&&B["TableHeading-align-center"],Dt==="end"&&B["TableHeading-align-end"],Ct&&B["TableHeading-sortable"],Fe&&B["TableHeading-second"],ht&&!K.hidden&&B["TableHeading-last"],!E&&B["TableHeading-unselectable"],K.flush&&B["TableHeading-flush"]),bl=E!==!1&&Fe&&L.current&&L.current.length>0?{left:L.current[0].offsetWidth}:void 0,Os=l.createElement("th",{id:K.id,className:hr,key:Fl(K),"data-index-table-heading":!0,style:bl},$s(K,ie));if(ie!==0||!E)return Os;const vl=R(B.TableHeading,Ct&&B["TableHeading-sortable"],ie===0&&B["TableHeading-first"]);return[l.createElement("th",{className:vl,key:`${K}-${ie}`,"data-index-table-heading":!0},sp()),Os]}function sp(){return l.createElement("div",{className:B.ColumnHeaderCheckboxWrapper},l.createElement(mn,{label:S.translate("Polaris.IndexTable.selectAllLabel",{resourceNamePlural:T.plural}),labelHidden:!0,onChange:n0,checked:A}))}function r0(K,ie){te.current=!1,$e.current=!1,xe.current=p,f==null||f(K,ie)}function $s(K,ie){let Fe;const ht={width:K.tooltipWidth??"default",activatorWrapper:"div",dismissOnMouseOut:!0,persistOnClick:K.tooltipPersistsOnClick},Ct={...ht,padding:"400",borderRadius:"200",content:K.tooltipContent,preferredPosition:"above"};K.new?Fe=l.createElement(ln,{wrap:!1,alignment:"center"},l.createElement("span",null,K.title),l.createElement(sn,{tone:"new"},S.translate("Polaris.IndexTable.onboardingBadgeText"))):K.hidden?Fe=l.createElement(se,{as:"span",visuallyHidden:!0},K.title):Fe=K.title;const Dt={"--pc-index-table-heading-extra-padding-right":K.paddingBlockEnd?`var(--p-space-${K.paddingBlockEnd})`:"0"};if(c!=null&&c[ie]){const hr=ie===p,bl=!hr&&ie===xe.current,Os=te.current||!$e.current&&$!==0,vl=u==="ascending";let Na=K.defaultSortDirection??d,Ns=Na==="ascending"?hp:fp;hr&&(Na=vl?"descending":"ascending",Ns=u==="ascending"?hp:fp);const op=l.createElement("span",{className:R(B.TableHeadingSortIcon,(K==null?void 0:K.alignment)==="end"&&B["TableHeadingSortIcon-heading-align-end"],hr&&B["TableHeadingSortIcon-visible"])},l.createElement(Ns,{focusable:"false","aria-hidden":"true",className:B.TableHeadingSortSvg})),ip={onClick:()=>r0(ie,Na),className:R(B.TableHeadingSortButton,!hr&&(K==null?void 0:K.alignment)==="end"&&B["TableHeadingSortButton-heading-align-end"],hr&&(K==null?void 0:K.alignment)==="end"&&B["TableHeadingSortButton-heading-align-end-currently-sorted"],bl&&!Os&&(K==null?void 0:K.alignment)==="end"&&B["TableHeadingSortButton-heading-align-end-previously-sorted"]),tabIndex:I?-1:0},lp=l.createElement(Kt,ip,op,l.createElement("span",{className:R(h&&I&&K.tooltipContent&&B.TableHeadingTooltipUnderlinePlaceholder)},Fe));if(!h||I)return l.createElement("div",{className:B.SortableTableHeadingWithCustomMarkup},lp);const i0=hr?u:Na,cp=h[ie][i0];if(!K.tooltipContent)return l.createElement("div",{style:Dt,className:R(K.paddingBlockEnd&&B["TableHeading-extra-padding-right"])},l.createElement(Vt,Object.assign({},ht,{content:cp,preferredPosition:"above"}),lp));if(K.tooltipContent)return l.createElement("div",{className:R(B.SortableTableHeadingWithCustomMarkup,K.paddingBlockEnd&&B["TableHeading-extra-padding-right"]),style:Dt},l.createElement(Kt,ip,l.createElement(Vt,Ct,l.createElement("span",{className:B.TableHeadingUnderline},Fe)),l.createElement(Vt,Object.assign({},ht,{content:cp,preferredPosition:"above"}),op)))}return K.tooltipContent?l.createElement("div",{style:Dt,className:R(K.paddingBlockEnd&&B["TableHeading-extra-padding-right"])},l.createElement(Vt,Object.assign({},Ct,{activatorWrapper:"span"}),l.createElement("span",{className:R(B.TableHeadingUnderline,B.SortableTableHeaderWrapper)},Fe))):l.createElement("div",{style:Dt,className:R(K.paddingBlockEnd&&B["TableHeading-extra-padding-right"])},Fe)}function n0(K){w(Ke.Page,K)}function a0(K,ie){const Fe=E?ie+1:ie,ht=L.current&&L.current.length>Fe?{minWidth:L.current[Fe].offsetWidth}:void 0,Ct=K.alignment||"start",Dt=$s(K,ie),hr=R(B.TableHeading,K.flush&&B["TableHeading-flush"],Ct==="center"&&B["TableHeading-align-center"],Ct==="end"&&B["TableHeading-align-end"],ie===0&&B["StickyTableHeading-second"],ie===0&&!E&&B.unselectable);return l.createElement("div",{className:hr,key:Fl(K),style:ht,"data-index-table-sticky-heading":!0},Dt)}function s0(){if(!E||!x)return;const K=o??S.translate("Polaris.IndexTable.selectAllItems",{itemsLength:C,resourceNamePlural:T.plural.toLocaleLowerCase()});return{content:$===Fr?S.translate("Polaris.IndexTable.undo"):K,onAction:At}}function o0(){w(Ke.All,!1)}}const cC=()=>typeof window>"u"?!1:window.innerWidth<parseFloat(Qm(Zm.breakpoints["breakpoints-sm"])??"");function Fl(e){return e.id?e.id:typeof e.title=="string"?e.title:""}function Hu({children:e,selectable:t=!0,itemCount:r,selectedItemsCount:n=0,resourceName:a,loading:s,hasMoreItems:o,condensed:i,onSelectionChange:c,...u}){return l.createElement(l.Fragment,null,l.createElement(QP,{selectable:t&&!i,itemCount:r,selectedItemsCount:n,resourceName:a,loading:s,hasMoreItems:o,condensed:i,onSelectionChange:c},l.createElement(lC,u,e)))}Hu.Cell=ZP;Hu.Row=nC;var uC={Code:"Polaris-InlineCode__Code"};const dC=({children:e})=>l.createElement("code",{className:uC.Code},e);var rh={KeyboardKey:"Polaris-KeyboardKey",small:"Polaris-KeyboardKey--small"};function pC({children:e="",size:t}){const r=!t&&e.length>1?e.toLowerCase():e.toUpperCase(),n=R(rh.KeyboardKey,t&&rh[t]);return l.createElement("kbd",{className:n},r)}var Nn={Layout:"Polaris-Layout",Section:"Polaris-Layout__Section","Section-fullWidth":"Polaris-Layout__Section--fullWidth","Section-oneHalf":"Polaris-Layout__Section--oneHalf","Section-oneThird":"Polaris-Layout__Section--oneThird",AnnotatedSection:"Polaris-Layout__AnnotatedSection",AnnotationWrapper:"Polaris-Layout__AnnotationWrapper",AnnotationContent:"Polaris-Layout__AnnotationContent",Annotation:"Polaris-Layout__Annotation"},nh={TextContainer:"Polaris-TextContainer",spacingTight:"Polaris-TextContainer--spacingTight",spacingLoose:"Polaris-TextContainer--spacingLoose"};function Du({spacing:e,children:t}){const r=R(nh.TextContainer,e&&nh[St("spacing",e)]);return l.createElement("div",{className:r},t)}function hC({children:e,title:t,description:r,id:n}){const a=typeof r=="string"?l.createElement(se,{as:"p",variant:"bodyMd"},r):r;return l.createElement("div",{className:Nn.AnnotatedSection},l.createElement("div",{className:Nn.AnnotationWrapper},l.createElement("div",{className:Nn.Annotation},l.createElement(Du,{spacing:"tight"},l.createElement(se,{id:n,variant:"headingMd",as:"h2"},t),a&&l.createElement(ne,{color:"text-secondary"},a))),l.createElement("div",{className:Nn.AnnotationContent},e)))}function Sy({children:e,variant:t}){const r=R(Nn.Section,Nn[`Section-${t}`]);return l.createElement("div",{className:r},e)}const Bu=function({sectioned:t,children:r}){const n=t?l.createElement(Sy,null,r):r;return l.createElement("div",{className:Nn.Layout},n)};Bu.AnnotatedSection=hC;Bu.Section=Sy;var Be={LegacyFilters:"Polaris-LegacyFilters",LegacyFiltersContainer:"Polaris-LegacyFilters__LegacyFiltersContainer",LegacyFiltersContainerHeader:"Polaris-LegacyFilters__LegacyFiltersContainerHeader",LegacyFiltersDesktopContainerContent:"Polaris-LegacyFilters__LegacyFiltersDesktopContainerContent",LegacyFiltersMobileContainerContent:"Polaris-LegacyFilters__LegacyFiltersMobileContainerContent",LegacyFiltersContainerFooter:"Polaris-LegacyFilters__LegacyFiltersContainerFooter",LegacyFiltersMobileContainerFooter:"Polaris-LegacyFilters__LegacyFiltersMobileContainerFooter",EmptyFooterState:"Polaris-LegacyFilters__EmptyFooterState",FilterTriggerContainer:"Polaris-LegacyFilters__FilterTriggerContainer",FilterTrigger:"Polaris-LegacyFilters__FilterTrigger",FilterTriggerTitle:"Polaris-LegacyFilters__FilterTriggerTitle",AppliedFilterBadgeContainer:"Polaris-LegacyFilters__AppliedFilterBadgeContainer",open:"Polaris-LegacyFilters--open",FilterTriggerLabelContainer:"Polaris-LegacyFilters__FilterTriggerLabelContainer",first:"Polaris-LegacyFilters--first",last:"Polaris-LegacyFilters--last",FilterNodeContainer:"Polaris-LegacyFilters__FilterNodeContainer",SearchIcon:"Polaris-LegacyFilters__SearchIcon",Backdrop:"Polaris-LegacyFilters__Backdrop",HelpText:"Polaris-LegacyFilters__HelpText",TagsContainer:"Polaris-LegacyFilters__TagsContainer"};const Wu=m.createContext({});var Ut={ConnectedFilterControl:"Polaris-LegacyFilters-ConnectedFilterControl",CenterContainer:"Polaris-LegacyFilters-ConnectedFilterControl__CenterContainer",right:"Polaris-LegacyFilters-ConnectedFilterControl--right",Item:"Polaris-LegacyFilters-ConnectedFilterControl__Item","Item-focused":"Polaris-LegacyFilters-ConnectedFilterControl__Item--focused",ProxyButtonContainer:"Polaris-LegacyFilters-ConnectedFilterControl__ProxyButtonContainer",RightContainer:"Polaris-LegacyFilters-ConnectedFilterControl__RightContainer",MoreFiltersButtonContainer:"Polaris-LegacyFilters-ConnectedFilterControl__MoreFiltersButtonContainer",queryFieldHidden:"Polaris-LegacyFilters-ConnectedFilterControl--queryFieldHidden",RightContainerWithoutMoreFilters:"Polaris-LegacyFilters-ConnectedFilterControl__RightContainerWithoutMoreFilters",onlyButtonVisible:"Polaris-LegacyFilters-ConnectedFilterControl--onlyButtonVisible",Wrapper:"Polaris-LegacyFilters-ConnectedFilterControl__Wrapper",AuxiliaryContainer:"Polaris-LegacyFilters-ConnectedFilterControl__AuxiliaryContainer"};function Hl({children:e}){const{value:t,setTrue:r,setFalse:n}=Qt(!1),a=R(Ut.Item,t&&Ut["Item-focused"]);return l.createElement("div",{onBlur:n,onFocus:r,className:a},e)}const fC=150;class mC extends m.Component{constructor(...t){super(...t),this.state={availableWidth:0,proxyButtonsWidth:{}},this.container=m.createRef(),this.proxyButtonContainer=m.createRef(),this.moreFiltersButtonContainer=m.createRef(),this.handleResize=ir(()=>{this.measureProxyButtons(),this.measureAvailableWidth()},40,{leading:!0,trailing:!0,maxWait:40})}componentDidMount(){this.handleResize()}render(){const{children:t,rightPopoverableActions:r,rightAction:n,auxiliary:a,forceShowMorefiltersButton:s=!0,queryFieldHidden:o}=this.props,i=r!=null?this.getActionsToRender(r):[],c=R(Ut.ConnectedFilterControl,r&&Ut.right),u=s||r&&r.length!==i.length,d=R(Ut.RightContainer,!u&&Ut.RightContainerWithoutMoreFilters,o&&Ut.queryFieldHidden),p=i.length>0?l.createElement("div",{className:d},this.popoverFrom(i)):null,f=R(Ut.MoreFiltersButtonContainer,i.length===0&&Ut.onlyButtonVisible),h=n?l.createElement("div",{ref:this.moreFiltersButtonContainer,className:f},u&&l.createElement(Hl,null,n)):null,g=r?l.createElement("div",{className:Ut.ProxyButtonContainer,ref:this.proxyButtonContainer,"aria-hidden":!0},r.map(b=>l.createElement("div",{key:b.key,"data-key":b.key},this.activatorButtonFrom(b,{proxy:!0})))):null,y=a?l.createElement("div",{className:Ut.AuxiliaryContainer},a):null;return l.createElement(l.Fragment,null,g,l.createElement("div",{className:Ut.Wrapper},l.createElement("div",{className:c,ref:this.container},t?l.createElement("div",{className:Ut.CenterContainer},l.createElement(Hl,null,t)):null,p,h,l.createElement(ar,{event:"resize",handler:this.handleResize})),y))}measureProxyButtons(){if(this.proxyButtonContainer.current){const t={};this.proxyButtonContainer.current&&Array.from(this.proxyButtonContainer.current.children).forEach(n=>{const a=n.getBoundingClientRect().width+78,s=n instanceof HTMLElement&&n.dataset.key;s&&(t[s]=a)}),this.setState({proxyButtonsWidth:t})}}measureAvailableWidth(){if(this.container.current&&this.moreFiltersButtonContainer.current){const t=this.container.current.getBoundingClientRect().width,r=this.moreFiltersButtonContainer.current.getBoundingClientRect().width,n=0,a=this.props.queryFieldHidden?0:fC,s=t-a-r-n;this.setState({availableWidth:s})}}getActionsToRender(t){let r=this.state.availableWidth;const n=[];for(let a=0;r>0&&a<t.length;a++){const s=t[a],o=this.state.proxyButtonsWidth[s.key];if(o<=r)n.push(s),r-=o;else break}return n}activatorButtonFrom(t,r){const n=r!=null&&r.proxy?void 0:`Activator-${t.key}`;return l.createElement(Ae,{onClick:t.onAction,disclosure:!0,disabled:this.props.disabled||t.disabled,id:n,size:"large"},t.content)}popoverFrom(t){return t.map(r=>l.createElement(Hl,{key:r.key},l.createElement(dt,{active:r.popoverOpen,activator:this.activatorButtonFrom(r),onClose:r.onAction,preferredAlignment:"left",sectioned:!0},r.popoverContent)))}}function gC({children:e,hidden:t}){return t?l.createElement(se,{as:"span",visuallyHidden:!0},e):l.createElement(l.Fragment,null,e)}var It={Tag:"Polaris-Tag",disabled:"Polaris-Tag--disabled",clickable:"Polaris-Tag--clickable",linkable:"Polaris-Tag--linkable",removable:"Polaris-Tag--removable",TagText:"Polaris-Tag__TagText",Button:"Polaris-Tag__Button",Link:"Polaris-Tag__Link",LinkText:"Polaris-Tag__LinkText",segmented:"Polaris-Tag--segmented",sizeLarge:"Polaris-Tag--sizeLarge",overlay:"Polaris-Tag--overlay"};function wy({children:e,disabled:t=!1,onClick:r,onRemove:n,accessibilityLabel:a,url:s,size:o}){const i=le(),c=n&&s,u=R(It.Tag,t&&It.disabled,r&&It.clickable,n&&It.removable,s&&!t&&It.linkable,c&&It.segmented,o&&It[St("size",o)]);if(r)return l.createElement("button",{type:"button",disabled:t,className:u,onClick:r},e);let d=a;d||(d=typeof e=="string"?e:void 0);const p=i.translate("Polaris.Tag.ariaLabel",{children:d||""}),f=n?l.createElement("button",{type:"button","aria-label":p,className:R(It.Button,c&&It.segmented),onClick:n,onMouseUp:go,disabled:t},l.createElement(pe,{source:as})):null,h=s&&!t?l.createElement("a",{className:R(It.Link,c&&It.segmented),href:s},l.createElement("span",{title:d,className:It.LinkText},e)):l.createElement("span",{title:d,className:It.TagText},e);return l.createElement("span",{className:u,"aria-disabled":t},h,o==="large"&&l.createElement("span",{className:It.overlay}),f)}var tt={Sheet:"Polaris-Sheet",Container:"Polaris-Sheet__Container",Bottom:"Polaris-Sheet__Bottom",enterBottom:"Polaris-Sheet--enterBottom",enterBottomActive:"Polaris-Sheet--enterBottomActive",exitBottom:"Polaris-Sheet--exitBottom",exitBottomActive:"Polaris-Sheet--exitBottomActive",Right:"Polaris-Sheet__Right",enterRight:"Polaris-Sheet--enterRight",enterRightActive:"Polaris-Sheet--enterRightActive",exitRight:"Polaris-Sheet--exitRight",exitRightActive:"Polaris-Sheet--exitRightActive"};const yC={enter:R(tt.Bottom,tt.enterBottom),enterActive:R(tt.Bottom,tt.enterBottomActive),exit:R(tt.Bottom,tt.exitBottom),exitActive:R(tt.Bottom,tt.exitBottomActive)},bC={enter:R(tt.Right,tt.enterRight),enterActive:R(tt.Right,tt.enterRightActive),exit:R(tt.Right,tt.exitRight),exitActive:R(tt.Right,tt.exitRightActive)};function Vc({children:e,open:t,onClose:r,onEntered:n,onExit:a,accessibilityLabel:s,activator:o}){const i=Do(),{isNavigationCollapsed:c}=ps(),u=m.useRef(null),d=m.useRef(null),p=m.useCallback(()=>{r();const h=o&&ah(o)?o&&o.current:d.current;h&&requestAnimationFrame(()=>lr(h))},[o,r]);m.useEffect(()=>{},[]);const f=o&&!ah(o)?l.createElement("div",{ref:d},o):null;return l.createElement(l.Fragment,null,f,l.createElement(eg,{idPrefix:"sheet"},l.createElement(vu,{nodeRef:u,classNames:c?yC:bC,timeout:parseInt(i.motion["motion-duration-300"],10),in:t,mountOnEnter:!0,unmountOnExit:!0,onEntered:n,onExit:a},l.createElement("div",Object.assign({className:tt.Container},S_.props,w_.props,{ref:u}),l.createElement(sg,{trapping:t},l.createElement("div",{role:"dialog","aria-modal":!0,tabIndex:-1,className:tt.Sheet,"aria-label":s},e)))),l.createElement(ha,{keyCode:$t.Escape,handler:p}),t&&l.createElement(og,{transparent:!0,onClick:p})))}function ah(e){return Object.prototype.hasOwnProperty.call(e,"current")}var Er;(function(e){e.Filter="Filter",e.Shortcut="Shortcut"})(Er||(Er={}));class Ay extends m.Component{constructor(...t){super(...t),this.state={open:!1,readyForFocus:!1},this.moreFiltersButtonContainer=m.createRef(),this.moreFiltersDoneButtonContainer=m.createRef(),this.focusNode=m.createRef(),this.closeFilters=()=>{this.setState({open:!1},()=>{this.moreFiltersButtonContainer.current&&lr(this.moreFiltersButtonContainer.current,!1)})},this.toggleFilters=()=>{this.state.open===!0?this.closeFilters():this.openFilters()},this.setReadyForFocus=r=>()=>{this.setState({readyForFocus:r})},this.handleClearAll=()=>{this.props.onClearAll(),this.moreFiltersDoneButtonContainer.current&&lr(this.moreFiltersDoneButtonContainer.current,!1)}}render(){const{filters:t,queryValue:r,onQueryBlur:n,onQueryChange:a,onQueryFocus:s,focused:o,onClearAll:i,appliedFilters:c,onQueryClear:u,queryPlaceholder:d,children:p,disabled:f=!1,helpText:h,hideTags:g,hideQueryField:y,disableQueryField:b=!1,i18n:v,mediaQuery:{isNavigationCollapsed:_}}=this.props,{resourceName:A}=this.context,{open:T,readyForFocus:k}=this.state,I=T?l.createElement(l.Fragment,null,l.createElement(Eu,null),l.createElement("div",{className:Be.Backdrop,onClick:this.closeFilters})):null,E=t.map((U,G)=>{const me=this.state[`${U.key}${Er.Filter}`]===!0,Me=me?P_:ds,Pe=R(Be.FilterTriggerContainer,me&&Be.open,G===0&&Be.first,t.length!==1&&G===t.length-1&&Be.last),Ce=this.getAppliedFilterContent(U.key),He=Ce?l.createElement("div",{className:Be.AppliedFilterBadgeContainer},l.createElement(sn,{tone:"new"},Ce)):null,De=`${U.key}Collapsible`,z=R(Be.FilterTrigger);return l.createElement("div",{key:U.key,className:Pe},l.createElement("button",{onClick:()=>this.toggleFilter(U.key),className:z,id:`${U.key}ToggleButton`,type:"button","aria-controls":De,"aria-expanded":me},l.createElement("div",{className:Be.FilterTriggerLabelContainer},l.createElement("h3",{className:Be.FilterTriggerTitle},l.createElement(se,{as:"span",tone:this.props.disabled||U.disabled?"subdued":void 0},U.label)),l.createElement("span",{className:Be.FilterTriggerIcon},l.createElement(pe,{source:Me,tone:"base"}))),He),l.createElement(Jo,{id:De,open:me,onAnimationEnd:this.setReadyForFocus(!0)},l.createElement("div",{className:Be.FilterNodeContainer},l.createElement(ig,{disabled:!me||!k||!T,root:this.focusNode},this.generateFilterMarkup(U)))))}),P=c?c.length:0,C=g&&P>0?v.translate("Polaris.Filters.moreFiltersWithCount",{count:P}):v.translate("Polaris.Filters.moreFilters"),x=t.length?l.createElement("div",{ref:this.moreFiltersButtonContainer},l.createElement(Ae,{onClick:this.toggleFilters,disabled:f,size:"large"},C)):null,$=A||{singular:v.translate("Polaris.ResourceList.defaultItemSingular"),plural:v.translate("Polaris.ResourceList.defaultItemPlural")},M=this.transformFilters(t),w=l.createElement(mC,{rightPopoverableActions:M,rightAction:x,auxiliary:p,disabled:f,forceShowMorefiltersButton:t.length>M.length,queryFieldHidden:y},y?null:l.createElement(hn,{placeholder:d||v.translate("Polaris.Filters.filter",{resourceName:$.plural}),onChange:a,onBlur:n,onFocus:s,value:r,focused:o,label:d||v.translate("Polaris.Filters.filter",{resourceName:$.plural}),labelHidden:!0,prefix:l.createElement("span",{className:Be.SearchIcon},l.createElement(pe,{source:Ho})),clearButton:!0,onClearButtonClick:u,disabled:f||b,autoComplete:"off"})),S=R(Be.LegacyFiltersContainerHeader),O=l.createElement("div",{className:S},l.createElement(se,{variant:"headingLg",as:"h3"},C),l.createElement(Ae,{icon:as,variant:"plain",accessibilityLabel:v.translate("Polaris.Filters.cancel"),onClick:this.closeFilters})),N=l.createElement("div",{className:S},l.createElement(Ae,{icon:as,variant:"plain",accessibilityLabel:v.translate("Polaris.Filters.cancel"),onClick:this.closeFilters}),l.createElement(se,{variant:"headingLg",as:"h3"},C),l.createElement(Ae,{onClick:this.closeFilters,variant:"primary"},v.translate("Polaris.Filters.done"))),H=R(Be.LegacyFiltersContainerFooter),L=l.createElement("div",{className:H},l.createElement(Ae,{onClick:this.handleClearAll,disabled:!this.hasAppliedFilters()},v.translate("Polaris.Filters.clearAllFilters")),l.createElement("div",{ref:this.moreFiltersDoneButtonContainer},l.createElement(Ae,{onClick:this.closeFilters,variant:"primary"},v.translate("Polaris.Filters.done")))),W=l.createElement("div",{className:Be.LegacyFiltersMobileContainerFooter},this.hasAppliedFilters()?l.createElement(Ae,{onClick:i,fullWidth:!0},v.translate("Polaris.Filters.clearAllFilters")):l.createElement("div",{className:Be.EmptyFooterState},l.createElement(se,{tone:"subdued",as:"span"},l.createElement("p",null,v.translate("Polaris.Filters.noFiltersApplied"))))),F=!c||c.length<1,D=g?null:l.createElement(gC,{hidden:F},l.createElement("div",{className:Be.TagsContainer,"aria-live":"polite"},(c||[]).map(U=>l.createElement(wy,{key:U.key,onRemove:()=>{U.onRemove(U.key)},disabled:f},U.label)))),q=R(Be.LegacyFiltersMobileContainerContent),Y=R(Be.LegacyFiltersDesktopContainerContent),V=_?l.createElement(Vc,{accessibilityLabel:C,open:T,onClose:this.closeFilters,onEntered:this.setReadyForFocus(!0),onExit:this.setReadyForFocus(!1)},N,l.createElement(rs,{className:q,shadow:!0},E,W)):l.createElement(Vc,{accessibilityLabel:C,open:T,onClose:this.closeFilters,onEntered:this.setReadyForFocus(!0),onExit:this.setReadyForFocus(!1)},l.createElement("div",{className:Be.LegacyFiltersContainer},O,l.createElement(rs,{className:Y,shadow:!0},E),L)),ue=h?l.createElement("div",{id:"FiltersHelpText",className:Be.HelpText},l.createElement(se,{tone:"subdued",as:"span"},h)):null;return l.createElement(A_.Provider,{value:!0},l.createElement("div",{className:Be.LegacyFilters},w,V,D,ue,I,l.createElement(ha,{keyCode:$t.Escape,handler:this.closeFilters})))}hasAppliedFilters(){const{appliedFilters:t,queryValue:r}=this.props;return!!(t&&t.length>0)||!!(r&&r!=="")}getAppliedFilterContent(t){const{appliedFilters:r}=this.props;if(!r)return;const n=r.find(a=>a.key===t);return n==null?void 0:n.label}getAppliedFilterRemoveHandler(t){const{appliedFilters:r}=this.props;if(!r)return;const n=r.find(a=>a.key===t);return n==null?void 0:n.onRemove}openFilters(){this.setState({open:!0})}toggleFilter(t){this.state[`${t}${Er.Filter}`]===!0?this.setState({readyForFocus:!1,[`${t}${Er.Filter}`]:!1}):this.setState({readyForFocus:!1,[`${t}${Er.Filter}`]:!0})}openFilterShortcut(t){this.setState({[`${t}${Er.Shortcut}`]:!0})}closeFilterShortcut(t){this.setState({[`${t}${Er.Shortcut}`]:!1})}toggleFilterShortcut(t){this.state[`${t}${Er.Shortcut}`]===!0?this.closeFilterShortcut(t):this.openFilterShortcut(t)}transformFilters(t){const r=[];return vC(t).forEach(n=>{const{key:a,label:s,disabled:o}=n;r.push({popoverContent:this.generateFilterMarkup(n),popoverOpen:!!this.state[`${a}${Er.Shortcut}`],key:a,content:s,disabled:o,onAction:()=>this.toggleFilterShortcut(a)})}),r}generateFilterMarkup(t){const r=this.props.i18n,n=this.getAppliedFilterRemoveHandler(t.key),a=n==null?void 0:()=>{n(t.key)},s=!t.hideClearButton&&l.createElement(Ae,{variant:"plain",disabled:a==null,onClick:a,accessibilityLabel:r.translate("Polaris.Filters.clearLabel",{filterName:t.label})},r.translate("Polaris.Filters.clear"));return l.createElement("div",{ref:this.focusNode},l.createElement(ln,{vertical:!0,spacing:"tight"},t.filter,s))}}Ay.contextType=Wu;function vC(e){return e.filter(t=>t.shortcut===!0)}function EC(e){const t=le(),r=ps();return l.createElement(Ay,Object.assign({},e,{i18n:t,mediaQuery:r}))}function sh(e,t,r,n,a){const s=n.reduce((u,d)=>u+d,0),o=e.map((u,d)=>d),i=[],c=[];if(a>s)i.push(...o);else{i.push(t);let u=n[t];o.forEach(d=>{if(d!==t){const p=n[d];if(u+p>=a-r){c.push(d);return}i.push(d),u+=p}})}return{visibleTabs:i,hiddenTabs:c}}var Se={LegacyTabs:"Polaris-LegacyTabs",fitted:"Polaris-LegacyTabs--fitted",TabContainer:"Polaris-LegacyTabs__TabContainer",Title:"Polaris-LegacyTabs__Title",fillSpace:"Polaris-LegacyTabs--fillSpace",Tab:"Polaris-LegacyTabs__Tab","Tab-selected":"Polaris-LegacyTabs__Tab--selected",titleWithIcon:"Polaris-LegacyTabs--titleWithIcon",Panel:"Polaris-LegacyTabs__Panel","Panel-hidden":"Polaris-LegacyTabs__Panel--hidden",Item:"Polaris-LegacyTabs__Item",DisclosureTab:"Polaris-LegacyTabs__DisclosureTab","DisclosureTab-visible":"Polaris-LegacyTabs__DisclosureTab--visible",DisclosureActivator:"Polaris-LegacyTabs__DisclosureActivator",TabMeasurer:"Polaris-LegacyTabs__TabMeasurer"};function oh({hidden:e,id:t,tabID:r,children:n}){const a=R(Se.Panel,e&&Se["Panel-hidden"]);return l.createElement("div",{className:a,id:t,role:"tabpanel","aria-labelledby":r,tabIndex:-1},n)}function Py({id:e,focused:t,siblingTabHasFocus:r,children:n,onClick:a,selected:s,url:o,panelID:i,measuring:c,accessibilityLabel:u}){const d=m.useRef(s),p=m.useRef(!1),f=m.useRef(null);m.useEffect(()=>{if(c)return;(t||document.activeElement&&document.activeElement.id===e)&&s&&i!=null&&!p.current&&(ih(i),p.current=!0),s&&!d.current&&i!=null?ih(i):t&&f.current!=null&&lr(f.current),d.current=s},[t,e,c,i,s]);const h=a&&a.bind(null,e),g=R(Se.Tab,s&&Se["Tab-selected"]);let y;s&&!r&&!c||t&&!c?y=0:y=-1;const b=R(Se.TabContainer,s&&Se.Underline),v=o?l.createElement(Yt,{id:e,url:o,role:"tab",tabIndex:y,onClick:h,className:g,"aria-selected":s,"aria-controls":i,"aria-label":u,onMouseUp:go},l.createElement("span",{className:Se.Title},n)):l.createElement("button",{id:e,role:"tab",type:"button",tabIndex:y,className:g,onClick:h,"aria-selected":s,"aria-controls":i,"aria-label":u,onMouseUp:go},l.createElement("span",{className:Se.Title},n));return l.createElement("li",{className:b,ref:f,role:"presentation"},v)}function ih(e){const t=document.getElementById(e);t&&t.focus({preventScroll:!0})}const _C=m.memo(function({selected:t,tabs:r,activator:n,tabToFocus:a,siblingTabHasFocus:s,handleMeasurement:o}){const i=m.useRef(null),c=m.useRef(null),u=m.useCallback(()=>{c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{if(!i.current)return;const f=i.current.offsetWidth,h=i.current.children,y=Array.from(h).map(v=>Math.ceil(v.getBoundingClientRect().width)),b=y.pop()||0;o({containerWidth:f,disclosureWidth:b,hiddenTabWidths:y})})},[o]);m.useEffect(()=>{u()},[u,r]),gu(()=>{});const d=r.map((f,h)=>l.createElement(Py,{measuring:!0,key:`${h}${f.id}Hidden`,id:`${f.id}Measurer`,siblingTabHasFocus:s,focused:h===a,selected:h===t,onClick:SC,url:f.url},f.content)),p=R(Se.LegacyTabs,Se.TabMeasurer);return l.createElement("div",{className:p,ref:i},l.createElement(ar,{event:"resize",handler:u}),d,n)});function SC(){}let Cy=class extends m.PureComponent{constructor(...t){super(...t),this.focusedNode=null,this.setFocusedNode=r=>{this.focusedNode=r}}componentDidMount(){const{focusedNode:t}=this,{focused:r}=this.props;t&&t instanceof HTMLElement&&r&&t.focus()}componentDidUpdate(){const{focusedNode:t}=this,{focused:r}=this.props;t&&t instanceof HTMLElement&&r&&t.focus()}render(){const{id:t,panelID:r,children:n,url:a,accessibilityLabel:s,onClick:o=wC}=this.props,i=R(Se.Item),c={id:t,ref:this.setFocusedNode,onClick:o,className:i,"aria-controls":r,"aria-selected":!1,"aria-label":s},u=a?l.createElement(Yt,Object.assign({},c,{url:a}),n):l.createElement("button",Object.assign({},c,{type:"button"}),n);return l.createElement("li",null,u)}};Cy.contextType=bu;function wC(){}function AC({focusIndex:e,disclosureTabs:t,onClick:r=lh,onKeyPress:n=lh}){const a=t.map(({id:s,content:o,...i},c)=>l.createElement(Cy,Object.assign({key:s},i,{id:s,focused:c===e,onClick:r.bind(null,s)}),o));return l.createElement("div",{onKeyDown:PC,onKeyUp:n},l.createElement(ne,{as:"ul",padding:"200"},a))}function lh(){}function PC(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}class CC extends m.PureComponent{constructor(...t){super(...t),this.state={disclosureWidth:0,containerWidth:1/0,tabWidths:[],visibleTabs:[],hiddenTabs:[],showDisclosure:!1,tabToFocus:-1},this.handleKeyPress=r=>{const{tabToFocus:n,visibleTabs:a,hiddenTabs:s,showDisclosure:o}=this.state,i=r.key,c=o?a.concat(s):[...a];let u=c.indexOf(n);i==="ArrowRight"&&(u+=1,u===c.length&&(u=0)),i==="ArrowLeft"&&(u===-1||u===0?u=c.length-1:u-=1),this.setState({tabToFocus:c[u]})},this.renderTabMarkup=(r,n)=>{const{selected:a,children:s}=this.props,{tabToFocus:o}=this.state,i=r.panelID||`${r.id}-panel`;return l.createElement(Py,{key:`${n}-${r.id}`,id:r.id,siblingTabHasFocus:o>-1,focused:n===o,selected:n===a,onClick:this.handleTabClick,panelID:s?i:void 0,accessibilityLabel:r.accessibilityLabel,url:r.url},r.content)},this.handleFocus=r=>{const{selected:n,tabs:a}=this.props,s=r.target;if(s.classList.contains(Se.Tab)||s.classList.contains(Se.Item)){let i=-1;a.every((c,u)=>c.id===s.id?(i=u,!1):!0),this.setState({tabToFocus:i});return}if(s.classList.contains(Se.DisclosureActivator))return;if(!r.relatedTarget){this.setState({tabToFocus:n});return}const o=r.relatedTarget;o instanceof HTMLElement&&!o.classList.contains(Se.Tab)&&!o.classList.contains(Se.Item)&&!o.classList.contains(Se.DisclosureActivator)&&this.setState({tabToFocus:n})},this.handleBlur=r=>{if(r.relatedTarget==null){this.setState({tabToFocus:-1});return}const n=r.relatedTarget;n instanceof HTMLElement&&!n.classList.contains(Se.Tab)&&!n.classList.contains(Se.Item)&&this.setState({tabToFocus:-1})},this.handleDisclosureActivatorClick=()=>{this.setState(({showDisclosure:r})=>({showDisclosure:!r}))},this.handleClose=()=>{this.setState({showDisclosure:!1})},this.handleMeasurement=r=>{const{tabs:n,selected:a}=this.props,{tabToFocus:s}=this.state,{hiddenTabWidths:o,containerWidth:i,disclosureWidth:c}=r,{visibleTabs:u,hiddenTabs:d}=sh(n,a,c,o,i);this.setState({tabToFocus:s===-1?-1:a,visibleTabs:u,hiddenTabs:d,disclosureWidth:c,containerWidth:i,tabWidths:o})},this.handleTabClick=r=>{const{tabs:n,onSelect:a=TC}=this.props,s=n.find(i=>i.id===r);if(s==null)return;const o=n.indexOf(s);a(o)}}static getDerivedStateFromProps(t,r){const{disclosureWidth:n,tabWidths:a,containerWidth:s}=r,{visibleTabs:o,hiddenTabs:i}=sh(t.tabs,t.selected,n,a,s);return{visibleTabs:o,hiddenTabs:i,selected:t.selected}}render(){const{tabs:t,selected:r,fitted:n,children:a,i18n:s,disclosureText:o}=this.props,{tabToFocus:i,visibleTabs:c,hiddenTabs:u,showDisclosure:d}=this.state,p=u.map(E=>t[E]),f=a?t.map((E,P)=>r===P?l.createElement(oh,{id:t[P].panelID||`${t[P].id}-panel`,tabID:t[P].id,key:t[P].id},a):l.createElement(oh,{id:t[P].panelID||`${t[P].id}-panel`,tabID:t[P].id,key:t[P].id,hidden:!0})):null,h=c.sort((E,P)=>E-P).map(E=>this.renderTabMarkup(t[E],E)),g=c.length<t.length,y=!!o,b=R(Se.LegacyTabs,n&&Se.fitted,g&&Se.fillSpace),v=R(Se.DisclosureTab,g&&Se["DisclosureTab-visible"]),_=R(Se.DisclosureActivator,y&&Se.Tab),A=R(Se.Title,y&&Se.titleWithIcon),T=y?l.createElement(l.Fragment,null,o,l.createElement(pe,{source:ds,tone:"subdued"})):l.createElement(pe,{source:us,tone:"subdued"}),k=l.createElement("button",{type:"button",className:_,onClick:this.handleDisclosureActivatorClick,"aria-label":s.translate("Polaris.Tabs.toggleTabsLabel")},l.createElement("span",{className:A},T)),I=o?l.createElement("div",{className:Se.TabContainer},k):k;return l.createElement("div",null,l.createElement(ne,{borderBlockEndWidth:"025",borderColor:"border-secondary",paddingInlineStart:"200",paddingInlineEnd:"200"},l.createElement(_C,{tabToFocus:i,activator:I,selected:r,tabs:t,siblingTabHasFocus:i>-1,handleMeasurement:this.handleMeasurement}),l.createElement("ul",{role:"tablist",className:b,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:RC,onKeyUp:this.handleKeyPress},h,l.createElement("li",{className:v,role:"presentation"},l.createElement(dt,{preferredPosition:"below",activator:I,active:g&&d,onClose:this.handleClose,autofocusTarget:"first-node"},l.createElement(AC,{focusIndex:u.indexOf(i),disclosureTabs:p,onClick:this.handleTabClick,onKeyPress:this.handleKeyPress}))))),f)}}function TC(){}function RC(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}function kC(e){const t=le();return l.createElement(CC,Object.assign({},e,{i18n:t}))}var Dl={Link:"Polaris-Link",monochrome:"Polaris-Link--monochrome",removeUnderline:"Polaris-Link--removeUnderline"};function Ty({url:e,children:t,onClick:r,external:n,target:a,id:s,monochrome:o,removeUnderline:i,accessibilityLabel:c,dataPrimaryLink:u}){return l.createElement(sy.Consumer,null,d=>{const p=o||d,f=R(Dl.Link,p&&Dl.monochrome,i&&Dl.removeUnderline);return e?l.createElement(Yt,{onClick:r,className:f,url:e,external:n,target:a,id:s,"aria-label":c,"data-primary-link":u},t):l.createElement("button",{type:"button",onClick:r,className:f,id:s,"aria-label":c,"data-primary-link":u},t)})}var so={List:"Polaris-List",typeNumber:"Polaris-List--typeNumber",Item:"Polaris-List__Item",spacingLoose:"Polaris-List--spacingLoose"};function IC({children:e}){return l.createElement("li",{className:so.Item},e)}const Ry=function({children:t,gap:r="loose",type:n="bullet"}){const a=R(so.List,r&&so[St("spacing",r)],n&&so[St("type",n)]),s=n==="bullet"?"ul":"ol";return l.createElement(s,{className:a},t)};Ry.Item=IC;var er={MediaCard:"Polaris-MediaCard",portrait:"Polaris-MediaCard--portrait",MediaContainer:"Polaris-MediaCard__MediaContainer",sizeSmall:"Polaris-MediaCard--sizeSmall",InfoContainer:"Polaris-MediaCard__InfoContainer",ActionContainer:"Polaris-MediaCard__ActionContainer",Description:"Polaris-MediaCard__Description"};function xC({title:e,children:t,primaryAction:r,secondaryAction:n,description:a,popoverActions:s=[],portrait:o=!1,size:i="medium",onDismiss:c}){const u=le(),{value:d,toggle:p}=Qt(!1);let f=null;if(e){const P=typeof e=="string"?l.createElement(se,{variant:"headingSm",as:"h2"},e):e;f=l.createElement("div",null,P)}const h=c?l.createElement(Ae,{icon:ag,onClick:c,size:"slim",accessibilityLabel:u.translate("Polaris.MediaCard.dismissButton"),variant:"tertiary"}):null,g=l.createElement(ye,{blockAlign:"center"},l.createElement(Ae,{icon:us,onClick:p,size:"slim",accessibilityLabel:u.translate("Polaris.MediaCard.popoverButton"),variant:"tertiary"})),y=s.length>0?l.createElement(dt,{active:d,activator:g,onClose:p,preferredAlignment:"left",preferredPosition:"below"},l.createElement(fn,{items:s,onActionAnyItem:p})):null,b=r?l.createElement("div",null,Wr(r)):null,v=n?l.createElement("div",null,Wr(n)):null,_=R(er.ActionContainer,o&&er.portrait),A=b||v?l.createElement("div",{className:_},l.createElement(Fn,null,b,v)):null,T=R(er.MediaCard,o&&er.portrait),k=R(er.MediaContainer,o&&er.portrait,i==="small"&&er.sizeSmall),I=R(er.InfoContainer,o&&er.portrait,i==="small"&&er.sizeSmall),E=y||h?l.createElement(ne,{position:"absolute",insetInlineEnd:"500",zIndex:"var(--p-z-index-2)"},l.createElement(ye,{gap:"100",wrap:!1},y,h)):null;return l.createElement(ss,null,l.createElement("div",{className:T},l.createElement("div",{className:k},t),l.createElement("div",{className:I},l.createElement(ne,{padding:"500"},l.createElement(ut,{gap:"200"},l.createElement(ye,{wrap:!1,align:"space-between",gap:"200"},f,E),l.createElement("p",{className:er.Description},a),A)))))}const Uu=m.createContext({location:""});var Z={Navigation:"Polaris-Navigation",UserMenu:"Polaris-Navigation__UserMenu",ContextControl:"Polaris-Navigation__ContextControl",PrimaryNavigation:"Polaris-Navigation__PrimaryNavigation",LogoContainer:"Polaris-Navigation__LogoContainer",hasLogoSuffix:"Polaris-Navigation--hasLogoSuffix",Logo:"Polaris-Navigation__Logo",LogoLink:"Polaris-Navigation__LogoLink",Item:"Polaris-Navigation__Item","Icon-resized":"Polaris-Navigation__Icon--resized",Badge:"Polaris-Navigation__Badge",ItemInnerWrapper:"Polaris-Navigation__ItemInnerWrapper",ItemWrapper:"Polaris-Navigation__ItemWrapper",ItemInnerDisabled:"Polaris-Navigation__ItemInnerDisabled","ItemInnerWrapper-display-actions-on-hover":"Polaris-Navigation--itemInnerWrapperDisplayActionsOnHover",SecondaryActions:"Polaris-Navigation__SecondaryActions","ItemInnerWrapper-selected":"Polaris-Navigation__ItemInnerWrapper--selected",Text:"Polaris-Navigation__Text","ItemInnerWrapper-open":"Polaris-Navigation__ItemInnerWrapper--open","Item-selected":"Polaris-Navigation__Item--selected","Item-child-active":"Polaris-Navigation--itemChildActive","Item-disabled":"Polaris-Navigation__Item--disabled",Icon:"Polaris-Navigation__Icon","ListItem-hasAction":"Polaris-Navigation__ListItem--hasAction",subNavigationActive:"Polaris-Navigation--subNavigationActive",ListItem:"Polaris-Navigation__ListItem",RollupSection:"Polaris-Navigation__RollupSection",SecondaryNavigation:"Polaris-Navigation__SecondaryNavigation","Text-truncated":"Polaris-Navigation__Text--truncated",ItemWithFloatingActions:"Polaris-Navigation__ItemWithFloatingActions",SecondaryAction:"Polaris-Navigation__SecondaryAction",List:"Polaris-Navigation__List","Item-line":"Polaris-Navigation__Item--line","Item-hover-line":"Polaris-Navigation--itemHoverLine","Item-line-pointer":"Polaris-Navigation--itemLinePointer","Item-hover-pointer":"Polaris-Navigation--itemHoverPointer","SecondaryNavigation-noIcon":"Polaris-Navigation__SecondaryNavigation--noIcon",Section:"Polaris-Navigation__Section","Section-fill":"Polaris-Navigation__Section--fill","Section-withSeparator":"Polaris-Navigation__Section--withSeparator",SectionHeading:"Polaris-Navigation__SectionHeading",Action:"Polaris-Navigation__Action",RollupToggle:"Polaris-Navigation__RollupToggle",Indicator:"Polaris-Navigation__Indicator",SecondaryNavigationOpen:"Polaris-Navigation__SecondaryNavigationOpen","snappy-grow":"Polaris-Navigation__snappy--grow"};let ze;(function(e){e[e.MatchForced=0]="MatchForced",e[e.MatchUrl=1]="MatchUrl",e[e.MatchPaths=2]="MatchPaths",e[e.Excluded=3]="Excluded",e[e.NoMatch=4]="NoMatch"})(ze||(ze={}));function $C({ItemComponent:e,icon:t,longestMatch:r,subNavigationItems:n,showExpanded:a,truncateText:s,secondaryNavigationId:o}){const i=m.useId(),{onNavigationDismiss:c}=m.useContext(Uu),[u,d]=m.useState(),p=n.findIndex(h=>fa(h,r)),f=n.findIndex(h=>fa(h,u));return l.createElement("div",{className:R(Z.SecondaryNavigation,a&&Z.SecondaryNavigationOpen,!t&&Z["SecondaryNavigation-noIcon"])},l.createElement(Jo,{id:o||i,open:a,transition:!1},l.createElement("ul",{className:Z.List},n.map((h,g)=>{const{label:y,...b}=h,v=()=>{c==null||c(),h.onClick&&h.onClick!==c&&h.onClick()},_=g<p;return l.createElement(e,Object.assign({key:y},b,{label:y,showVerticalLine:_,showVerticalHoverPointer:g===f,onMouseEnter:h.disabled?void 0:()=>d(h),onMouseLeave:h.disabled?void 0:()=>d(void 0),matches:fa(h,r),onClick:v,truncateText:s}))}))))}const ch=2,OC=1e3;function ju({url:e,icon:t,matchedItemIcon:r,label:n,subNavigationItems:a=[],secondaryAction:s,secondaryActions:o,displayActionsOnHover:i,disabled:c,onClick:u,accessibilityLabel:d,selected:p,badge:f,new:h,matches:g,exactMatch:y,matchPaths:b,excludePaths:v,external:_,onToggleExpandedState:A,expanded:T,shouldResizeIcon:k,truncateText:I,showVerticalLine:E,showVerticalHoverPointer:P,onMouseEnter:C,onMouseLeave:x}){const $=le(),{isNavigationCollapsed:M}=ps(),w=m.useId(),{location:S,onNavigationDismiss:O}=m.useContext(Uu),N=m.useRef(null),[H,L]=m.useState(!1);m.useEffect(()=>{!M&&T&&(A==null||A())},[T,M,A]),Ym(()=>{const Q=N.current;I&&Q&&L(Q.scrollHeight>Q.clientHeight)},[I]);const W=c?-1:0,D=a.filter(Q=>Q.new).length>0?l.createElement("span",{className:Z.Indicator},l.createElement(Ou,{pulse:!0})):null,q=wo({url:e,matches:g,exactMatch:y,matchPaths:b,excludePaths:v},S),Y=a.filter(Q=>{const $e=wo(Q,S);return $e===ze.MatchForced||$e===ze.MatchUrl||$e===ze.MatchPaths}),V=Y.length>0,ue=p??(q===ze.MatchForced||q===ze.MatchUrl||q===ze.MatchPaths),U=ue||V?r??t:t,G=U?l.createElement("div",{className:R(Z.Icon,k&&Z["Icon-resized"])},l.createElement(pe,{source:U})):null;let me=null;h?me=l.createElement(sn,{tone:"new"},$.translate("Polaris.Badge.TONE_LABELS.new")):typeof f=="string"?me=l.createElement(sn,{tone:"new"},f):me=f;const Me=me==null?null:l.createElement("div",{className:Z.Badge},me),Pe=l.createElement("span",{className:R(Z.Text,I&&Z["Text-truncated"]),ref:N},n,D);if(e==null){const Q=R(Z.Item,c&&Z["Item-disabled"],p&&Z["Item-selected"]);return l.createElement("li",{className:Z.ListItem},l.createElement("div",{className:Z.ItemWrapper},l.createElement("div",{className:R(Z.ItemInnerWrapper,c&&Z.ItemInnerDisabled,p&&Z["ItemInnerWrapper-selected"])},l.createElement("button",{type:"button",className:Q,disabled:c,"aria-disabled":c,"aria-label":d,onClick:te(u)},G,Pe,Me))))}const Ce=o||s&&[s];Ce&&Ce.length>ch&&(Ce.length=ch);const He=Ce!=null&&Ce.length?l.createElement("span",{className:Z.SecondaryActions},Ce.map(Q=>l.createElement(NC,Object.assign({key:Q.accessibilityLabel},Q,{tabIndex:W,disabled:c})))):null,De=l.createElement(l.Fragment,null,G,Pe,He?null:Me),z=l.createElement(l.Fragment,null,He?Me:null),re=ue||T||V,Te=R(Z.Item,c&&Z["Item-disabled"],(ue||V)&&Z["Item-selected"],re&&Z.subNavigationActive,V&&Z["Item-child-active"],E&&Z["Item-line"],g&&Z["Item-line-pointer"],P&&Z["Item-hover-pointer"]);let ce=null;if(a.length>0){const Q=Y.sort(({url:$e},{url:Ne})=>Ne.length-$e.length)[0];ce=l.createElement($C,{ItemComponent:ju,icon:U,longestMatch:Q,subNavigationItems:a,showExpanded:re,truncateText:I,secondaryNavigationId:w})}const ge=R(Z.ListItem,!!(Ce&&Ce.length)&&Z["ListItem-hasAction"]),xe=()=>{const Q=l.createElement(Yt,Object.assign({url:e,className:Te,external:_,tabIndex:W,"aria-disabled":c,"aria-label":d,onClick:te(u)},FC(w,a.length>0,re)),De);return H?l.createElement(Vt,{hoverDelay:OC,content:n,preferredPosition:"above"},Q):Q};return l.createElement("li",{className:ge,onMouseEnter:()=>{C==null||C(n)},onMouseLeave:x},l.createElement("div",{className:Z.ItemWrapper},l.createElement("div",{className:R(Z.ItemInnerWrapper,ue&&V&&Z["ItemInnerWrapper-open"]||ue&&!V&&Z["ItemInnerWrapper-selected"],i&&Z["ItemInnerWrapper-display-actions-on-hover"],c&&Z.ItemInnerDisabled)},i&&He&&Me?l.createElement("span",{className:Z.ItemWithFloatingActions},xe(),He):l.createElement(l.Fragment,null,xe(),He),z)),ce);function te(Q){return $e=>{const{currentTarget:Ne}=$e;if(Ne.getAttribute("href")===S&&$e.preventDefault(),a&&a.length>0&&M)$e.preventDefault(),A==null||A();else if(O){O(),Q&&Q!==O&&Q();return}Q&&Q()}}}function NC({url:e,icon:t,accessibilityLabel:r,tooltip:n,onClick:a,disabled:s,tabIndex:o}){const i=e?l.createElement(Yt,{external:!0,url:e,className:Z.SecondaryAction,tabIndex:o,"aria-disabled":s,"aria-label":r,onClick:a},l.createElement(pe,{source:t})):l.createElement(Kt,{className:Z.SecondaryAction,tabIndex:o,disabled:s,accessibilityLabel:r,onClick:a},l.createElement(pe,{source:t}));return n?l.createElement(Vt,n," ",i," "):i}function LC(e,t){const r=wo(e,t),n=e.subNavigationItems&&e.subNavigationItems.filter(o=>{const i=wo(o,t);return i===ze.MatchForced||i===ze.MatchUrl||i===ze.MatchPaths}),a=n&&n.length>0;return r===ze.MatchForced||r===ze.MatchUrl||r===ze.MatchPaths||a}function So(e){const t=e.split("?")[0].split("#")[0];return t.endsWith("/")?t:`${t}/`}function MC(e,t){return So(e)===So(t)}function Bl(e,t){return So(e).startsWith(So(t))}function wo({url:e,matches:t,exactMatch:r,matchPaths:n,excludePaths:a},s){return e==null?ze.NoMatch:t?ze.MatchForced:t===!1||a&&a.some(i=>Bl(s,i))?ze.Excluded:n&&n.some(i=>Bl(s,i))?ze.MatchPaths:(r?MC(s,e):Bl(s,e))?ze.MatchUrl:ze.NoMatch}function FC(e,t,r){return t?{"aria-expanded":r,"aria-controls":e}:void 0}function HC({title:e,fill:t,action:r,items:n,rollup:a,separator:s}){const{value:o,toggle:i,setFalse:c}=Qt(!1),u=m.useRef(null),{isNavigationCollapsed:d}=ps(),[p,f]=m.useState(),h=($,M)=>()=>{$&&$(),u.current&&cancelAnimationFrame(u.current),(!M||!d)&&(u.current=requestAnimationFrame(c))};m.useEffect(()=>()=>{u.current&&cancelAnimationFrame(u.current)});const g=R(Z.Section,s&&Z["Section-withSeparator"],t&&Z["Section-fill"]),y=r&&l.createElement("button",{type:"button",className:Z.Action,"aria-label":r.accessibilityLabel,onClick:r.onClick},l.createElement(pe,{source:r.icon})),b=r&&(r.tooltip?l.createElement(Vt,r.tooltip,y):y),v=e&&l.createElement("li",{className:Z.SectionHeading},l.createElement(se,{as:"span",variant:"bodySm",fontWeight:"medium",tone:"subdued"},e),b),_=n.map(($,M)=>{const{onClick:w,label:S,subNavigationItems:O,...N}=$,H=O!=null&&O.length>0,L=()=>{f(p===M?-1:M)};return l.createElement(ju,Object.assign({key:S},N,{label:S,subNavigationItems:O,onClick:h(w,H),onToggleExpandedState:L,expanded:p===M}))}),A=R(Z.Item,Z.RollupToggle),T=a&&(o?a.hide:a.view),k=a&&n.length>a.after&&l.createElement("div",{className:Z.ListItem,key:"List Item"},l.createElement("div",{className:Z.ItemWrapper},l.createElement("div",{className:Z.ItemInnerWrapper},l.createElement("button",{type:"button",className:A,onClick:i,"aria-label":T},l.createElement("span",{className:Z.Icon},l.createElement(pe,{source:us})))))),I=n.findIndex($=>a?a.activePath===$.url||$.url&&a.activePath.startsWith($.url)||($.subNavigationItems?$.subNavigationItems.some(({url:M})=>a.activePath.startsWith(M)):!1):!1),E=a?_.slice(0,a.after):_,P=a?_.slice(a.after):[];a&&I!==-1&&I>a.after-1&&E.push(...P.splice(I-a.after,1));const C=m.useId(),x=a&&P.length>0&&l.createElement("li",{className:Z.RollupSection},l.createElement(Jo,{id:C,open:o},l.createElement("ul",{className:Z.List},P)),k);return l.createElement("ul",{className:g},v,E,x)}const qu=function({children:t,contextControl:r,location:n,onDismiss:a,ariaLabelledBy:s,logoSuffix:o}){const{logo:i}=Wo(),c=lg(i,104),u=i?l.createElement("div",{className:R(Z.LogoContainer,o&&Z.hasLogoSuffix)},l.createElement(Yt,{url:i.url||"",className:Z.LogoLink,style:{width:c}},l.createElement(on,{source:i.topBarSource||"",alt:i.accessibilityLabel||"",className:Z.Logo,style:{width:c}})),o):null,d=r?l.createElement("div",{className:Z.ContextControl},r):u,p=m.useMemo(()=>({location:n,onNavigationDismiss:a}),[n,a]);return l.createElement(Uu.Provider,{value:p},l.createElement(Fo.Provider,{value:!0},l.createElement("nav",{className:Z.Navigation,"aria-labelledby":s},d,l.createElement(rs,{className:Z.PrimaryNavigation},t))))};qu.Item=ju;qu.Section=HC;function Kc(e,t,r){return e.length!==t.length?!1:e.every((n,a)=>{const s=t[a];return r!=null?r(n,s):n===s})}var ot={Option:"Polaris-OptionList-Option",SingleSelectOption:"Polaris-OptionList-Option__SingleSelectOption",focused:"Polaris-OptionList-Option--focused",active:"Polaris-OptionList-Option--active",disabled:"Polaris-OptionList-Option--disabled",select:"Polaris-OptionList-Option--select",Media:"Polaris-OptionList-Option__Media",Label:"Polaris-OptionList-Option__Label",MultiSelectOption:"Polaris-OptionList-Option__MultiSelectOption",CheckboxLabel:"Polaris-OptionList-Option__CheckboxLabel",verticalAlignTop:"Polaris-OptionList-Option--verticalAlignTop",verticalAlignCenter:"Polaris-OptionList-Option--verticalAlignCenter",verticalAlignBottom:"Polaris-OptionList-Option--verticalAlignBottom",Icon:"Polaris-OptionList-Option__Icon",Checkbox:"Polaris-OptionList-Option__Checkbox"};function DC({label:e,value:t,id:r,select:n,active:a,allowMultiple:s,disabled:o,media:i,onClick:c,section:u,index:d,verticalAlign:p,onPointerEnter:f,onFocus:h}){const{value:g,toggle:y}=Qt(!1),b=m.useCallback(()=>{o||c(u,d)},[o,d,c,u]),v=m.useCallback(()=>{o||f(u,d)},[o,f,u,d]),_=m.useCallback(()=>{y(),h(u,d)},[y,h,u,d]),A=i?l.createElement("div",{className:ot.Media},i):null,T=R(ot.SingleSelectOption,g&&ot.focused,o&&ot.disabled,n&&ot.select,a&&ot.active,p&&ot[St("verticalAlign",p)]),k=R(ot.Label,o&&ot.disabled,a&&ot.active,n&&ot.select,p&&ot[St("verticalAlign",p)],s&&ot.CheckboxLabel,s&&ot.MultiSelectOption),I=s?l.createElement("label",{htmlFor:r,className:k},l.createElement("div",{className:ot.Checkbox},l.createElement(mn,{id:r,label:"",ariaDescribedBy:`${r}-label`,value:t,checked:n,disabled:o,onChange:b})),A,l.createElement("span",{id:`${r}-label`},e)):l.createElement("button",{id:r,type:"button",className:T,onClick:b,disabled:o,onFocus:_,onBlur:y,"aria-pressed":a||n},l.createElement(l.Fragment,null,l.createElement(ye,{wrap:!1,blockAlign:BC(p)},A,e),(n||a)&&l.createElement("span",{className:ot.Icon},l.createElement(pe,{source:zo})))),E=a?l.createElement(rs.ScrollTo,null):null;return l.createElement("li",{key:r,className:ot.Option,tabIndex:-1,onPointerEnter:v},E,I)}function BC(e){switch(e){case"top":return"start";case"center":return"center";case"bottom":return"end";default:return"start"}}function WC({options:e,sections:t,title:r,selected:n,allowMultiple:a,role:s,verticalAlign:o,onChange:i,id:c,onPointerEnterOption:u,onFocusOption:d}){const[p,f]=m.useState(uh(e,t,r)),h=m.useId(),g=c??h;aS(()=>{f(uh(e||[],t||[],r))},[e,t,r],UC);const y=m.useCallback((T,k)=>{const I=p[T].options[k].value,E=n.indexOf(I);if(a){const P=E===-1?[I,...n]:[...n.slice(0,E),...n.slice(E+1,n.length)];i(P);return}i([I])},[p,n,a,i]),b=m.useCallback((T,k)=>{if(!u)return;const I=p[T].options[k].value;u(I)},[p,u]),v=m.useCallback((T,k)=>{if(!d)return;const I=p[T].options[k].value;d(I)},[p,d]),A=p.length>0?p.map(({title:T,options:k},I)=>{const E=I===0,P=E?"h2":"h3",C=T?l.createElement(ne,{paddingBlockStart:E?"050":"300",paddingInlineStart:"150",paddingBlockEnd:"100",paddingInlineEnd:"150",borderColor:"border-secondary"},l.createElement(se,{as:P,variant:"headingSm"},T)):null,x=k&&k.map((w,S)=>{const O=n.includes(w.value),N=w.id||`${g}-${I}-${S}`;return l.createElement(DC,Object.assign({key:N},w,{id:N,section:I,index:S,onClick:y,select:O,allowMultiple:a,verticalAlign:o,onPointerEnter:b,onFocus:v}))}),$=l.createElement(ne,{as:"ul",id:`${g}-${I}`,role:s},x),M=E?T?"100":"0":T?"050":"0";return l.createElement(ne,{key:T||`noTitle-${I}`,as:"li",paddingBlockStart:M},l.createElement(ut,{gap:E&&t?void 0:"0"},C,$))}):null;return l.createElement(ne,{as:"ul",role:s,padding:"150"},A)}function uh(e,t,r){if(e==null){const n={options:[],title:r};return t==null?[]:[n,...t]}return t==null?[{title:r,options:e}]:[{title:r,options:e},...t]}function UC(e,t){return Bc(e)&&Bc(t)?Kc(e,t,jC):Kc(e,t)}function jC(e,t){const{options:r}=e,{options:n}=t,a=Kc(r,n),s=e.title===t.title;return a&&s}var qC={PageActions:"Polaris-PageActions"};function VC({primaryAction:e,secondaryActions:t}){let r=null;dp(e)?r=l.createElement(l.Fragment,null,e):e&&(r=ns(e,{variant:"primary"}));let n=null;return C_(t)&&t.length>0?n=l.createElement(Fn,null,ns(t)):dp(t)&&(n=l.createElement(l.Fragment,null,t)),l.createElement("div",{className:qC.PageActions},l.createElement(ln,{distribution:"trailing",spacing:"tight"},n,r))}const KC={isNavigationCollapsed:!1};function zC({strict:e,children:t,i18n:r,link:n,mediaQuery:a,features:s,frame:o,theme:i=N_}){const c=e?m.StrictMode:m.Fragment,u=m.useMemo(()=>new X_(r||{}),[r]),d=m.useMemo(()=>new Y_,[]),p=m.useMemo(()=>new T_,[]),f=GC(o),h=Q_(KC,a);return l.createElement(c,null,l.createElement(R_.Provider,{value:k_(i)},l.createElement(bu.Provider,{value:s},l.createElement(I_.Provider,{value:u},l.createElement(tg.Provider,{value:d},l.createElement(x_.Provider,{value:p},l.createElement($_.Provider,{value:n},l.createElement(O_.Provider,{value:h},l.createElement(ng,null,l.createElement(Z_,null,l.createElement(eS,null,l.createElement(cg.Provider,{value:f},t))))))))))))}function ra(){}function GC({logo:e=void 0,showToast:t=ra,hideToast:r=ra,toastMessages:n=[],setContextualSaveBar:a=ra,removeContextualSaveBar:s=ra,startLoading:o=ra,stopLoading:i=ra}={}){return{logo:e,showToast:t,hideToast:r,toastMessages:n,setContextualSaveBar:a,removeContextualSaveBar:s,startLoading:o,stopLoading:i}}var qr={ProgressBar:"Polaris-ProgressBar",sizeSmall:"Polaris-ProgressBar--sizeSmall",sizeMedium:"Polaris-ProgressBar--sizeMedium",sizeLarge:"Polaris-ProgressBar--sizeLarge",toneHighlight:"Polaris-ProgressBar--toneHighlight",tonePrimary:"Polaris-ProgressBar--tonePrimary",toneSuccess:"Polaris-ProgressBar--toneSuccess",toneCritical:"Polaris-ProgressBar--toneCritical",Indicator:"Polaris-ProgressBar__Indicator",IndicatorAppearActive:"Polaris-ProgressBar__IndicatorAppearActive",IndicatorAppearDone:"Polaris-ProgressBar__IndicatorAppearDone",Progress:"Polaris-ProgressBar__Progress",Label:"Polaris-ProgressBar__Label"};function JC({progress:e=0,size:t="medium",tone:r="highlight",animated:n=!0,ariaLabelledBy:a}){const s=Do(),o=le(),i=m.useRef(null),c=R(qr.ProgressBar,t&&qr[St("size",t)],r&&qr[St("tone",r)]);o.translate(e<0?"Polaris.ProgressBar.negativeWarningMessage":"Polaris.ProgressBar.exceedWarningMessage",{progress:e});const u=XC(e),d=n?s.motion["motion-duration-500"]:s.motion["motion-duration-0"];return l.createElement("div",{className:c},l.createElement("progress",{"aria-labelledby":a,className:qr.Progress,value:u,max:"100"}),l.createElement(vu,{in:!0,appear:!0,timeout:parseInt(d,10),nodeRef:i,classNames:{appearActive:qr.IndicatorAppearActive,appearDone:qr.IndicatorAppearDone}},l.createElement("div",{ref:i,className:qr.Indicator,style:{"--pc-progress-bar-duration":d,"--pc-progress-bar-percent":u/100}},l.createElement("span",{className:qr.Label},u,"%"))))}function XC(e,t){let r;return e<0?r=0:e>100?r=100:r=e,r}var ky={RangeSlider:"Polaris-RangeSlider"},qe={DualThumb:"Polaris-RangeSlider-DualThumb",TrackWrapper:"Polaris-RangeSlider-DualThumb__TrackWrapper",disabled:"Polaris-RangeSlider-DualThumb--disabled",Track:"Polaris-RangeSlider-DualThumb__Track",error:"Polaris-RangeSlider-DualThumb--error","Track--dashed":"Polaris-RangeSlider-DualThumb--trackDashed",Thumbs:"Polaris-RangeSlider-DualThumb__Thumbs",Prefix:"Polaris-RangeSlider-DualThumb__Prefix",Suffix:"Polaris-RangeSlider-DualThumb__Suffix",Output:"Polaris-RangeSlider-DualThumb__Output",OutputBubble:"Polaris-RangeSlider-DualThumb__OutputBubble"},lt;(function(e){e[e.Lower=0]="Lower",e[e.Upper=1]="Upper"})(lt||(lt={}));class Iy extends m.Component{constructor(...t){super(...t),this.state={value:Wl(this.props.value,this.props.min,this.props.max,this.props.step),trackWidth:0,trackLeft:0},this.track=m.createRef(),this.trackWrapper=m.createRef(),this.thumbLower=m.createRef(),this.thumbUpper=m.createRef(),this.setTrackPosition=ir(()=>{if(this.track.current){const{width:n,left:a}=this.track.current.getBoundingClientRect(),s=n-16,o=a+16/2,i=this.props.max-this.props.min,c=this.props.min/i*s;this.setState({trackWidth:s,trackLeft:o-c})}},40,{leading:!0,trailing:!0,maxWait:40}),this.handleMouseDownThumbLower=r=>{r.button!==0||this.props.disabled||(Hs(this.handleMouseMoveThumbLower),r.stopPropagation())},this.handleMouseMoveThumbLower=r=>{const n=this.state.value[1];this.setValue([this.actualXPosition(r.clientX),n],lt.Upper)},this.handleTouchStartThumbLower=r=>{this.props.disabled||(Ds(this.handleTouchMoveThumbLower),r.stopPropagation())},this.handleTouchMoveThumbLower=r=>{r.preventDefault();const n=this.state.value[1];this.setValue([this.actualXPosition(r.touches[0].clientX),n],lt.Upper)},this.handleMouseDownThumbUpper=r=>{r.button!==0||this.props.disabled||(Hs(this.handleMouseMoveThumbUpper),r.stopPropagation())},this.handleMouseMoveThumbUpper=r=>{const n=this.state.value[0];this.setValue([n,this.actualXPosition(r.clientX)],lt.Lower)},this.handleTouchStartThumbUpper=r=>{this.props.disabled||(Ds(this.handleTouchMoveThumbUpper),r.stopPropagation())},this.handleTouchMoveThumbUpper=r=>{r.preventDefault();const n=this.state.value[0];this.setValue([n,this.actualXPosition(r.touches[0].clientX)],lt.Lower)},this.handleKeypressLower=r=>{if(this.props.disabled)return;const{incrementValueLower:n,decrementValueLower:a}=this,o={[$t.UpArrow]:n,[$t.RightArrow]:n,[$t.DownArrow]:a,[$t.LeftArrow]:a}[r.keyCode];o!=null&&(r.preventDefault(),r.stopPropagation(),o())},this.handleKeypressUpper=r=>{if(this.props.disabled)return;const{incrementValueUpper:n,decrementValueUpper:a}=this,o={[$t.UpArrow]:n,[$t.RightArrow]:n,[$t.DownArrow]:a,[$t.LeftArrow]:a}[r.keyCode];o!=null&&(r.preventDefault(),r.stopPropagation(),o())},this.incrementValueLower=()=>{this.setValue([this.state.value[0]+this.props.step,this.state.value[1]],lt.Upper)},this.decrementValueLower=()=>{this.setValue([this.state.value[0]-this.props.step,this.state.value[1]],lt.Upper)},this.incrementValueUpper=()=>{this.setValue([this.state.value[0],this.state.value[1]+this.props.step],lt.Lower)},this.decrementValueUpper=()=>{this.setValue([this.state.value[0],this.state.value[1]-this.props.step],lt.Lower)},this.dispatchValue=()=>{const{onChange:r,id:n}=this.props,{value:a}=this.state;r(a,n)},this.setValue=(r,n)=>{const{props:{min:a,max:s,step:o},state:{value:i}}=this,c=Wl(r,a,s,o,n);Ul(c,i)===!1&&this.setState({value:c},this.dispatchValue)},this.handleMouseDownTrack=r=>{if(r.button!==0||this.props.disabled)return;r.preventDefault();const n=this.actualXPosition(r.clientX),{value:a}=this.state,s=Math.abs(a[0]-n),o=Math.abs(a[1]-n);s<=o?(this.setValue([n,a[1]],lt.Upper),Hs(this.handleMouseMoveThumbLower),this.thumbLower.current!=null&&this.thumbLower.current.focus()):(this.setValue([a[0],n],lt.Lower),Hs(this.handleMouseMoveThumbUpper),this.thumbUpper.current!=null&&this.thumbUpper.current.focus())},this.handleTouchStartTrack=r=>{if(this.props.disabled)return;r.preventDefault();const n=this.actualXPosition(r.touches[0].clientX),{value:a}=this.state,s=Math.abs(a[0]-n),o=Math.abs(a[1]-n);s<=o?(this.setValue([n,a[1]],lt.Upper),Ds(this.handleTouchMoveThumbLower),this.thumbLower.current!=null&&this.thumbLower.current.focus()):(this.setValue([a[0],n],lt.Lower),Ds(this.handleTouchMoveThumbUpper),this.thumbUpper.current!=null&&this.thumbUpper.current.focus())},this.actualXPosition=r=>{if(this.track.current){const{min:n,max:a}=this.props,{trackLeft:s,trackWidth:o}=this.state;return(r-s)/o*(a-n)}else return 0}}static getDerivedStateFromProps(t,r){const{min:n,step:a,max:s,value:o,onChange:i,id:c}=t,{prevValue:u}=r;if(Ul(u,o))return null;const d=Wl(o,n,s,a);return Ul(o,d)||i(d,c),{prevValue:o,value:d}}componentDidMount(){this.setTrackPosition(),this.trackWrapper.current!=null&&this.trackWrapper.current.addEventListener("touchstart",this.handleTouchStartTrack,{passive:!1})}componentWillUnmount(){this.trackWrapper.current!=null&&this.trackWrapper.current.removeEventListener("touchstart",this.handleTouchStartTrack)}render(){const{id:t,min:r,max:n,prefix:a,suffix:s,disabled:o,output:i,error:c,onFocus:u,onBlur:d,label:p,labelAction:f,labelHidden:h,helpText:g}=this.props,{value:y}=this.state,b=t,v=`${t}Upper`,_=[];c&&_.push(`${t}Error`);const A=_.length?_.join(" "):void 0,T=R(qe.TrackWrapper,c&&qe.error,o&&qe.disabled),k=R(qe.Thumbs,qe.ThumbLower,o&&qe.disabled),I=R(qe.Thumbs,qe.ThumbUpper,o&&qe.disabled),E=this.state.trackWidth,P=n-r,C=r/P*E,x=y[0]/P*E-C,$=y[1]/P*E-C,M=R(qe.Output,qe.OutputLower),w=!o&&i?l.createElement("output",{htmlFor:b,className:M,style:{left:`${x}px`}},l.createElement("div",{className:qe.OutputBubble},l.createElement(se,{as:"span",variant:"headingSm",alignment:"center"},y[0]))):null,S=R(qe.Output,qe.OutputUpper),O=!o&&i?l.createElement("output",{htmlFor:v,className:S,style:{left:`${$}px`}},l.createElement("div",{className:qe.OutputBubble},l.createElement(se,{as:"span",variant:"headingSm",alignment:"center"},y[1]))):null,N={"--pc-range-slider-progress-lower":`${x}px`,"--pc-range-slider-progress-upper":`${$}px`},H=a&&l.createElement("div",{className:qe.Prefix},a),L=s&&l.createElement("div",{className:qe.Suffix},s);return l.createElement(l.Fragment,null,l.createElement(Bo,{id:t,label:p,error:c,action:f,labelHidden:h,helpText:g},l.createElement("div",{className:R(qe.DualThumb,ky.RangeSlider)},H,l.createElement("div",{className:T,onMouseDown:this.handleMouseDownTrack,ref:this.trackWrapper},l.createElement("div",{className:qe.Track,style:N,ref:this.track}),l.createElement("div",{className:qe["Track--dashed"]}),l.createElement("div",{id:b,className:k,style:{left:`${x}px`},role:"slider","aria-disabled":o,"aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":y[0],"aria-invalid":!!c,"aria-describedby":A,"aria-labelledby":mo(t),onFocus:u,onBlur:d,tabIndex:0,onKeyDown:this.handleKeypressLower,onMouseDown:this.handleMouseDownThumbLower,onTouchStart:this.handleTouchStartThumbLower,ref:this.thumbLower}),w,l.createElement("div",{id:v,className:I,style:{left:`${$}px`},role:"slider","aria-disabled":o,"aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":y[1],"aria-invalid":!!c,"aria-describedby":A,"aria-labelledby":mo(t),onFocus:u,onBlur:d,tabIndex:0,onKeyDown:this.handleKeypressUpper,onMouseDown:this.handleMouseDownThumbUpper,onTouchStart:this.handleTouchStartThumbUpper,ref:this.thumbUpper}),O),L)),l.createElement(ar,{event:"resize",handler:this.setTrackPosition}))}}Iy.contextType=bu;function Hs(e){document.addEventListener("mousemove",e),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",e)},{once:!0})}function Ds(e){const t=()=>{document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t),document.removeEventListener("touchcancel",t)};document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t,{once:!0}),document.addEventListener("touchcancel",t,{once:!0})}function Wl(e,t,r,n,a=lt.Upper){let s=u(p(e[1])),o=d(p(e[0]));const i=s-n,c=o+n;return a===lt.Upper&&o>i?o=i:a===lt.Lower&&s<c&&(s=c),[o,s];function u(f){const h=t+n;return f<h?h:f>r?r:f}function d(f){const h=r-n;return f<t?t:f>h?h:f}function p(f){return Math.round(f/n)*n}}function Ul(e,t){return e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1]}var xr={SingleThumb:"Polaris-RangeSlider-SingleThumb",disabled:"Polaris-RangeSlider-SingleThumb--disabled",InputWrapper:"Polaris-RangeSlider-SingleThumb__InputWrapper",Prefix:"Polaris-RangeSlider-SingleThumb__Prefix",Suffix:"Polaris-RangeSlider-SingleThumb__Suffix",Input:"Polaris-RangeSlider-SingleThumb__Input",error:"Polaris-RangeSlider-SingleThumb--error",Output:"Polaris-RangeSlider-SingleThumb__Output",OutputBubble:"Polaris-RangeSlider-SingleThumb__OutputBubble"};function YC(e){return Math.sign(e)===1?-Math.abs(e):Math.sign(e)===-1?Math.abs(e):0}function QC(e){const{id:t,error:r,helpText:n,value:a,min:s,max:o,disabled:i,output:c,prefix:u,suffix:d,label:p,labelAction:f,labelHidden:h,step:g,onBlur:y,onFocus:b}=e,v=_t(a,s,o),_=[];r&&_.push(`${t}Error`),n&&_.push(rg(t));const A=_.length?_.join(" "):void 0,T=(v-s)*100/(o-s),k=YC((T-50)/100),I={"--pc-range-slider-min":s,"--pc-range-slider-max":o,"--pc-range-slider-current":v,"--pc-range-slider-progress":`${T}%`,"--pc-range-slider-output-factor":`${k}`},E=!i&&c&&l.createElement("output",{htmlFor:t,className:xr.Output},l.createElement("div",{className:xr.OutputBubble},l.createElement(se,{as:"span",variant:"headingSm",alignment:"center"},v))),P=u&&l.createElement("div",{className:xr.Prefix},u),C=d&&l.createElement("div",{className:xr.Suffix},d),x=R(xr.SingleThumb,ky.RangeSlider,r&&xr.error,i&&xr.disabled);return l.createElement(Bo,{id:t,label:p,error:r,action:f,labelHidden:h,helpText:n},l.createElement("div",{className:x,style:I},P,l.createElement("div",{className:xr.InputWrapper},l.createElement("input",{type:"range",className:xr.Input,id:t,name:t,min:s,max:o,step:g,value:v,disabled:i,onChange:$,onFocus:b,onBlur:y,"aria-valuemin":s,"aria-valuemax":o,"aria-valuenow":v,"aria-invalid":!!r,"aria-describedby":A}),E),C));function $(M){const{onChange:w}=e;w&&w(parseFloat(M.currentTarget.value),t)}}function ZC({min:e=0,max:t=100,step:r=1,value:n,...a}){const o={id:m.useId(),min:e,max:t,step:r,...a};return eT(n)?l.createElement(Iy,Object.assign({value:n},o)):l.createElement(QC,Object.assign({value:n},o))}function eT(e){return Array.isArray(e)}var Ve={ResourceItem:"Polaris-ResourceItem",Actions:"Polaris-ResourceItem__Actions",ItemWrapper:"Polaris-ResourceItem__ItemWrapper",CheckboxWrapper:"Polaris-ResourceItem__CheckboxWrapper",focusedInner:"Polaris-ResourceItem--focusedInner",focused:"Polaris-ResourceItem--focused",selected:"Polaris-ResourceItem--selected",Link:"Polaris-ResourceItem__Link",Button:"Polaris-ResourceItem__Button",selectable:"Polaris-ResourceItem--selectable",disabled:"Polaris-ResourceItem--disabled",ListItem:"Polaris-ResourceItem__ListItem",hasBulkActions:"Polaris-ResourceItem--hasBulkActions"};const rr="All";class tT extends m.Component{constructor(...t){super(...t),this.state={actionsMenuVisible:!1,focused:!1,focusedInner:!1,selected:dh(this.props.id,this.props.context.selectedItems)},this.node=null,this.overlayRef=m.createRef(),this.buttonOverlay=m.createRef(),this.setNode=r=>{this.node=r},this.handleFocus=r=>{r.target===this.buttonOverlay.current||this.node&&r.target===this.overlayRef.current?this.setState({focused:!0,focusedInner:!1}):this.node&&this.node.contains(r.target)&&this.setState({focused:!0,focusedInner:!0})},this.handleBlur=({relatedTarget:r})=>{this.node&&r instanceof Element&&this.node.contains(r)||this.setState({focused:!1,focusedInner:!1})},this.handleMouseOut=()=>{this.state.focused&&this.setState({focused:!1,focusedInner:!1}),this.props.onMouseOut&&this.props.onMouseOut()},this.handleLargerSelectionArea=r=>{na(r),this.handleSelection(!this.state.selected,r.nativeEvent.shiftKey)},this.handleSelection=(r,n)=>{const{id:a,sortOrder:s,context:{onSelectionChange:o}}=this.props;a==null||o==null||(this.setState({focused:r,focusedInner:r}),o(r,a,s,n))},this.handleClick=r=>{na(r);const{id:n,onClick:a,url:s,context:{selectMode:o}}=this.props,{ctrlKey:i,metaKey:c}=r.nativeEvent,u=this.node&&this.node.querySelector("a");if(o){this.handleLargerSelectionArea(r);return}if(u!==r.target){if(a&&a(n),s&&(i||c)){window.open(s,"_blank");return}s&&u&&u.click()}},this.handleKeyUp=r=>{const{disabled:n,onClick:a=rT,context:{selectMode:s}}=this.props,{key:o}=r;o==="Enter"&&this.props.url&&!s&&!n&&a()},this.handleActionsClick=()=>{this.setState(({actionsMenuVisible:r})=>({actionsMenuVisible:!r}))},this.handleCloseRequest=()=>{this.setState({actionsMenuVisible:!1})}}static getDerivedStateFromProps(t,r){const n=dh(t.id,t.context.selectedItems);return r.selected===n?null:{selected:n}}shouldComponentUpdate(t,r){const{children:n,context:{selectedItems:a,...s},...o}=t,{children:i,context:{selectedItems:c,...u},...d}=this.props,p=t.context.selectMode;return!fa(this.state,r)||this.props.context.selectMode!==p||!t.context.selectMode&&(!fa(d,o)||!fa(u,s))}render(){const{children:t,url:r,external:n,media:a,shortcutActions:s,ariaControls:o,ariaExpanded:i,persistActions:c=!1,accessibilityLabel:u,name:d,context:{selectable:p,selectMode:f,hasBulkActions:h,loading:g,resourceName:y},i18n:b,verticalAlignment:v,dataHref:_,breakpoints:A,onMouseOver:T,disabled:k}=this.props,{actionsMenuVisible:I,focused:E,focusedInner:P,selected:C}=this.state;let x=null,$=null;if(p){const F=d||u||b.translate("Polaris.Common.checkbox");$=l.createElement("div",{className:Ve.CheckboxWrapper,onClick:na,onChange:this.handleLargerSelectionArea},l.createElement(hh,null,D=>l.createElement(mn,{id:D,label:F,labelHidden:!0,checked:C,disabled:g||k,bleedInlineStart:"300",bleedInlineEnd:"300",bleedBlockStart:"300",bleedBlockEnd:"300",fill:!0,labelClassName:Ve.CheckboxLabel})))}(a||p)&&(x=l.createElement(ye,{gap:"300",blockAlign:a&&p?"center":ph(v)},$,a));const M=R(Ve.ResourceItem,E&&Ve.focused,p&&Ve.selectable,C&&Ve.selected,f&&Ve.selectMode,c&&Ve.persistActions,P&&Ve.focusedInner,k&&Ve.disabled),w=R(Ve.ListItem,E&&!P&&Ve.focused,h&&Ve.hasBulkActions,C&&Ve.selected,p&&Ve.selectable);let S=null,O=null;if(s&&!g)if(c){S=A!=null&&A.lgUp?l.createElement("div",{className:Ve.Actions,onClick:na},l.createElement(Fn,null,ns(s,{variant:"tertiary"}))):null;const F=d?b.translate("Polaris.ResourceList.Item.actionsDropdownLabel",{accessibilityLabel:d}):b.translate("Polaris.ResourceList.Item.actionsDropdown");O=!f&&(A!=null&&A.lgDown)?l.createElement("div",{onClick:na},l.createElement(dt,{activator:l.createElement(Ae,{accessibilityLabel:F,onClick:this.handleActionsClick,variant:"tertiary",icon:us}),onClose:this.handleCloseRequest,active:I},l.createElement(fn,{items:s}))):null}else A!=null&&A.lgUp&&(S=l.createElement("div",{className:Ve.Actions,onClick:na},l.createElement(ne,{position:"absolute",insetBlockStart:"400",insetInlineEnd:"500"},l.createElement(Fn,{variant:"segmented"},ns(s,{size:"slim"})))));const N=l.createElement(ne,{id:this.props.id,position:"relative",paddingInlineStart:"300",paddingInlineEnd:"300",paddingBlockStart:"300",paddingBlockEnd:"300",zIndex:"var(--pc-resource-item-content-stacking-order)"},l.createElement(Fc,{columns:{xs:"1fr auto"}},l.createElement(Fc,{columns:{xs:a||p?"auto 1fr":"1fr"},gap:"300"},x,l.createElement(ye,{blockAlign:ph(v)},l.createElement(ne,{width:"100%",padding:"0"},t))),S,O)),H=g?-1:0,L=u||b.translate("Polaris.ResourceList.Item.viewItem",{itemName:d||y&&y.singular||""}),W=r?l.createElement(hh,null,F=>l.createElement(Yt,{"aria-describedby":this.props.id,"aria-label":L,className:Ve.Link,url:r,external:n,tabIndex:H,id:F,ref:this.overlayRef})):l.createElement("button",{className:Ve.Button,"aria-label":L,"aria-controls":o,"aria-expanded":i,onClick:this.handleClick,tabIndex:H,ref:this.buttonOverlay});return l.createElement("li",{className:w,"data-href":_},l.createElement("div",{className:Ve.ItemWrapper},l.createElement("div",{ref:this.setNode,className:M,onClick:k?()=>{}:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyUp:this.handleKeyUp,onMouseOver:T,onMouseOut:this.handleMouseOut,"data-href":r},k?null:W,N)))}}function rT(){}function na(e){e.stopPropagation()}function dh(e,t){return!!(t&&(Array.isArray(t)&&t.includes(e)||t===rr))}function xy(e){const t=Tr();return l.createElement(tT,Object.assign({},e,{breakpoints:t,context:m.useContext(Wu),i18n:le()}))}function ph(e){switch(e){case"leading":return"start";case"trailing":return"end";case"center":return"center";case"fill":return"stretch";case"baseline":return"baseline";default:return"start"}}function hh(e){const t=m.useId();return e.children(t)}var Re={FiltersWrapper:"Polaris-ResourceList__FiltersWrapper",ResourceListWrapper:"Polaris-ResourceList__ResourceListWrapper",ResourceList:"Polaris-ResourceList",HeaderOuterWrapper:"Polaris-ResourceList__HeaderOuterWrapper",BulkActionsWrapper:"Polaris-ResourceList__BulkActionsWrapper","HeaderWrapper-disabled":"Polaris-ResourceList__HeaderWrapper--disabled","HeaderWrapper-overlay":"Polaris-ResourceList__HeaderWrapper--overlay",HeaderWrapper:"Polaris-ResourceList__HeaderWrapper","HeaderWrapper-isSticky":"Polaris-ResourceList__HeaderWrapper--isSticky",HeaderContentWrapper:"Polaris-ResourceList__HeaderContentWrapper","HeaderWrapper-inSelectMode":"Polaris-ResourceList__HeaderWrapper--inSelectMode",SortWrapper:"Polaris-ResourceList__SortWrapper",AlternateToolWrapper:"Polaris-ResourceList__AlternateToolWrapper","HeaderWrapper-hasSelect":"Polaris-ResourceList__HeaderWrapper--hasSelect","HeaderWrapper-hasAlternateTool":"Polaris-ResourceList__HeaderWrapper--hasAlternateTool","HeaderWrapper-hasSort":"Polaris-ResourceList__HeaderWrapper--hasSort",HeaderTitleWrapper:"Polaris-ResourceList__HeaderTitleWrapper",SelectAllActionsWrapper:"Polaris-ResourceList__SelectAllActionsWrapper",SelectAllActionsWrapperSticky:"Polaris-ResourceList__SelectAllActionsWrapperSticky",SelectAllActionsWrapperAtEnd:"Polaris-ResourceList__SelectAllActionsWrapperAtEnd",SelectAllActionsWrapperAtEndAppear:"Polaris-ResourceList__SelectAllActionsWrapperAtEndAppear",BulkActionsWrapperVisible:"Polaris-ResourceList__BulkActionsWrapperVisible",PaginationWrapper:"Polaris-ResourceList__PaginationWrapper",CheckableButtonWrapper:"Polaris-ResourceList__CheckableButtonWrapper",SelectButtonWrapper:"Polaris-ResourceList__SelectButtonWrapper",EmptySearchResultWrapper:"Polaris-ResourceList__EmptySearchResultWrapper",ItemWrapper:"Polaris-ResourceList__ItemWrapper","ItemWrapper-isLoading":"Polaris-ResourceList__ItemWrapper--isLoading",SpinnerContainer:"Polaris-ResourceList__SpinnerContainer",LoadingOverlay:"Polaris-ResourceList__LoadingOverlay",DisabledPointerEvents:"Polaris-ResourceList__DisabledPointerEvents",disableTextSelection:"Polaris-ResourceList--disableTextSelection"},gr={Select:"Polaris-Select",disabled:"Polaris-Select--disabled",error:"Polaris-Select--error",Backdrop:"Polaris-Select__Backdrop",Input:"Polaris-Select__Input",Content:"Polaris-Select__Content",InlineLabel:"Polaris-Select__InlineLabel",Icon:"Polaris-Select__Icon",SelectedOption:"Polaris-Select__SelectedOption",Prefix:"Polaris-Select__Prefix",hover:"Polaris-Select--hover",toneMagic:"Polaris-Select--toneMagic"};const fh="";function $y({options:e,label:t,labelAction:r,labelHidden:n,labelInline:a,disabled:s,helpText:o,placeholder:i,id:c,name:u,value:d=fh,error:p,onChange:f,onFocus:h,onBlur:g,requiredIndicator:y,tone:b}){const{value:v,toggle:_}=Qt(!1),A=m.useId(),T=c??A,k=a?!0:n,I=R(gr.Select,p&&gr.error,b&&gr[St("tone",b)],s&&gr.disabled),E=m.useCallback(L=>{_(),h==null||h(L)},[h,_]),P=m.useCallback(L=>{_(),g==null||g(L)},[g,_]),C=f?L=>f(L.currentTarget.value,T):void 0,x=[];o&&x.push(rg(T)),p&&x.push(`${T}Error`);let M=(e||[]).map(nT);i&&(M=[{label:i,value:fh,disabled:!0},...M]);const w=a&&l.createElement(ne,{paddingInlineEnd:"100"},l.createElement(se,{as:"span",tone:b&&b==="magic"&&!v?"magic-subdued":"subdued",truncate:!0},t)),S=aT(M,d),O=S.prefix&&l.createElement("div",{className:gr.Prefix},S.prefix),N=l.createElement("div",{className:gr.Content,"aria-hidden":!0,"aria-disabled":s},w,O,l.createElement("span",{className:gr.SelectedOption},S.label),l.createElement("span",{className:gr.Icon},l.createElement(pe,{source:L_}))),H=M.map(oT);return l.createElement(Bo,{id:T,label:t,error:p,action:r,labelHidden:k,helpText:o,requiredIndicator:y,disabled:s},l.createElement("div",{className:I},l.createElement("select",{id:T,name:u,value:d,className:gr.Input,disabled:s,onFocus:E,onBlur:P,onChange:C,"aria-invalid":!!p,"aria-describedby":x.length?x.join(" "):void 0,"aria-required":y},H),N,l.createElement("div",{className:gr.Backdrop})))}function mh(e){return typeof e=="string"}function Vu(e){return typeof e=="object"&&"options"in e&&e.options!=null}function gh(e){return{label:e,value:e}}function nT(e){if(mh(e))return gh(e);if(Vu(e)){const{title:t,options:r}=e;return{title:t,options:r.map(n=>mh(n)?gh(n):n)}}return e}function aT(e,t){const r=sT(e);let n=r.find(a=>t===a.value);return n===void 0&&(n=r.find(a=>!a.hidden)),n||{value:"",label:""}}function sT(e){let t=[];return e.forEach(r=>{Vu(r)?t=t.concat(r.options):t.push(r)}),t}function yh(e){const{value:t,label:r,prefix:n,key:a,...s}=e;return l.createElement("option",Object.assign({key:a??t,value:t},s),r)}function oT(e){if(Vu(e)){const{title:t,options:r}=e;return l.createElement("optgroup",{label:t,key:t},r.map(yh))}return yh(e)}const iT=28,lT=45;function bh(e,t){return e.map((r,n)=>t(r,n))}const Ma=()=>typeof window>"u"?!1:window.innerWidth<parseFloat(Qm(Zm.breakpoints["breakpoints-sm"])??"");function cT(e,t){return Object.prototype.hasOwnProperty.call(e,"id")?e.id:t.toString()}function Oy({items:e,filterControl:t,flushFilters:r,emptyState:n,emptySearchState:a,resourceName:s,promotedBulkActions:o,bulkActions:i,selectedItems:c=[],isFiltered:u,selectable:d,hasMoreItems:p,loading:f,headerContent:h,showHeader:g,totalItemsCount:y,sortValue:b,sortOptions:v,alternateTool:_,onSortChange:A,onSelectionChange:T,renderItem:k,idForItem:I=cT,resolveItemId:E,pagination:P}){const C=le(),[x,$]=m.useState(!!(c&&c.length>0)),[M,w]=m.useState(0),[S,O]=m.useState(),[N,H]=m.useState(Ma()),L=m.useReducer((ae=0)=>ae+1,0)[1],W=m.useRef(null),F=M_(()=>({singular:C.translate("Polaris.ResourceList.defaultItemSingular"),plural:C.translate("Polaris.ResourceList.defaultItemPlural")})),D=m.useRef(null),q=ae=>{$(ae),!ae&&T&&T([])},Y=ir(()=>{const ae=Ma();c&&c.length===0&&x&&!ae&&q(!1),N!==ae&&H(ae)},50,{leading:!0,trailing:!0,maxWait:50});Gn("resize",Y);const V=!!(o&&o.length>0||i&&i.length>0||d)&&!N,ue=m.useMemo(()=>{let ae="indeterminate";return!c||Array.isArray(c)&&c.length===0?ae=!1:(c===rr||Array.isArray(c)&&c.length===e.length)&&(ae=!0),ae},[e.length,c]),U=s||F.current,G=()=>{const ae=e.length,Ie=!f&&(!y&&ae===1||y===1)?U.singular:U.plural;return f?C.translate("Polaris.ResourceList.loading",{resource:Ie}):y?C.translate("Polaris.ResourceList.showingTotalCount",{itemsCount:ae,totalItemsCount:y,resource:Ie}):h||C.translate("Polaris.ResourceList.showing",{itemsCount:ae,resource:Ie})},[me,Me]=m.useState(c===rr?`${e.length}+`:c.length);m.useEffect(()=>{(c===rr||c.length>0)&&Me(c===rr?`${e.length}+`:c.length)},[c,e.length]);const Pe=C.translate("Polaris.ResourceList.selected",{selectedItemsCount:me}),Ce=m.useMemo(()=>{const ae=c.length,Ie=e.length,Xe=ae===Ie;return Ie===1&&Xe?C.translate("Polaris.ResourceList.a11yCheckboxDeselectAllSingle",{resourceNameSingular:U.singular}):Ie===1?C.translate("Polaris.ResourceList.a11yCheckboxSelectAllSingle",{resourceNameSingular:U.singular}):Xe?C.translate("Polaris.ResourceList.a11yCheckboxDeselectAllMultiple",{itemsLength:e.length,resourceNamePlural:U.plural}):C.translate("Polaris.ResourceList.a11yCheckboxSelectAllMultiple",{itemsLength:e.length,resourceNamePlural:U.plural})},[C,e.length,U.singular,U.plural,c.length]),He=m.useMemo(()=>{if(!(!V||!p)&&c===rr)return C.translate(u?"Polaris.ResourceList.allFilteredItemsSelected":"Polaris.ResourceList.allItemsSelected",{itemsLength:e.length,resourceNamePlural:U.plural})},[p,C,u,V,e,U.plural,c]),De=m.useCallback(()=>{const ae=c===rr?bh(e,I):rr;T&&T(ae)},[I,e,T,c]),z=m.useMemo(()=>!V||!p?void 0:{content:c===rr?C.translate("Polaris.Common.undo"):C.translate(u?"Polaris.ResourceList.selectAllFilteredItems":"Polaris.ResourceList.selectAllItems",{itemsLength:e.length,resourceNamePlural:U.plural}),onAction:De},[De,p,C,u,V,e.length,U.plural,c]),re={title:C.translate("Polaris.ResourceList.emptySearchResultTitle",{resourceNamePlural:U.plural}),description:C.translate("Polaris.ResourceList.emptySearchResultDescription")},Te=m.useCallback(()=>{if(D.current!=null){if(typeof window>"u")return;const ae=D.current.getBoundingClientRect(),Ie=Math.max(document.documentElement?document.documentElement.clientHeight:0,window.innerHeight||0),Xe=Ie-ae.height,kr=e.length===1?iT:lT,Ht=Xe>0?(ae.height-kr)/2:(Ie-ae.top-kr)/2;w(Ht)}},[D,e.length]),ce=e.length>0;m.useEffect(()=>{f&&Te()},[f,Te]),m.useEffect(()=>{c&&c.length>0&&!x&&$(!0),(!c||c.length===0)&&!Ma()&&$(!1)},[c,x]),m.useEffect(()=>{L()},[L,e]);const ge=(ae,Ie)=>{const Xe=I(ae,Ie);return k(ae,Xe,Ie)},xe=(ae,Ie,Xe)=>{const kr=Math.min(ae,Ie),Ht=Math.max(ae,Ie);return e.slice(kr,Ht+1).map(Xe)},te=(ae,Ie,Xe,kr)=>{if(c==null||T==null)return;let Ht=c===rr?bh(e,I):[...c];Xe!==void 0&&O(Xe);const xs=S;let Oa=[Ie];if(kr&&xs!=null&&Xe!==void 0&&E&&(Oa=xe(xs,Xe,E)),Ht=[...new Set([...Ht,...Oa])],!ae)for(const yl of Oa)Ht.splice(Ht.indexOf(yl),1);Ht.length===0&&!Ma()?q(!1):Ht.length>0&&q(!0),T&&T(Ht)},Q=()=>{let ae;Array.isArray(c)&&c.length===e.length||c===rr?ae=[]:ae=e.map((Ie,Xe)=>I(Ie,Xe)),ae.length===0&&!Ma()?q(!1):ae.length>0&&q(!0),T&&T(ae),setTimeout(()=>{var Ie;(Ie=W==null?void 0:W.current)==null||Ie.focus()},0)},$e=R(Re.BulkActionsWrapper,x&&Re.BulkActionsWrapperVisible),Ne=V?l.createElement("div",{className:$e},l.createElement(Lu,{selectMode:x,onSelectModeToggle:q,label:Pe,paginatedSelectAllAction:z,paginatedSelectAllText:He,promotedActions:o,actions:i,disabled:f,accessibilityLabel:Ce,selected:ue,onToggleAll:Q,ref:W,buttonSize:"medium"})):null,At=t?l.createElement("div",{className:R(!r&&Re.FiltersWrapper)},t):null,pr=v&&v.length>0&&!_?l.createElement("div",{className:Re.SortWrapper},l.createElement($y,{label:C.translate("Polaris.ResourceList.sortingLabel"),labelInline:!N,labelHidden:N,options:v,onChange:A,value:b,disabled:x})):null,zt=_&&!pr?l.createElement("div",{className:Re.AlternateToolWrapper},_):null,Zt=l.createElement("div",{className:Re.HeaderTitleWrapper},G()),J=V?l.createElement("div",{className:Re.SelectButtonWrapper},l.createElement(Ae,{disabled:x,icon:Fg,onClick:()=>q(!0)},C.translate("Polaris.ResourceList.selectButtonText"))):null,ee=V?l.createElement("div",{className:Re.CheckableButtonWrapper},l.createElement(Nu,{accessibilityLabel:Ce,label:G(),onToggleAll:Q,disabled:f,ref:W,selected:ue})):null,ve=V||v&&v.length>0||_,Oe=f?l.createElement("div",{className:Re["HeaderWrapper-overlay"]}):null,Je=n&&!ce&&!f,Ze=!Je&&t&&!ce&&!f,kt=!Je&&g!==!1&&!Ze&&(g||ve)&&D.current&&l.createElement("div",{className:Re.HeaderOuterWrapper},l.createElement(_u,{boundingElement:D.current},ae=>{const Ie=R(Re.HeaderWrapper,v&&v.length>0&&!_&&Re["HeaderWrapper-hasSort"],_&&Re["HeaderWrapper-hasAlternateTool"],V&&Re["HeaderWrapper-hasSelect"],f&&Re["HeaderWrapper-disabled"],V&&x&&Ne&&Re["HeaderWrapper-inSelectMode"],ae&&Re["HeaderWrapper-isSticky"]);return l.createElement("div",{className:Ie},Oe,l.createElement("div",{className:Re.HeaderContentWrapper},Zt,ee,zt,pr,J),Ne)})),Pt=Ze?a||l.createElement("div",{className:Re.EmptySearchResultWrapper},l.createElement(Fu,Object.assign({},re,{withIllustration:!0}))):null,st=Je?n:null,vn={paddingTop:`${M>0?M:8}px`},En=e.length<2?"small":"large",_n=f?l.createElement(l.Fragment,null,l.createElement("li",{className:Re.SpinnerContainer,style:vn},l.createElement(ya,{size:En,accessibilityLabel:"Items are loading"})),l.createElement("li",{className:Re.LoadingOverlay})):null,dl=R(Re.ItemWrapper,f&&Re["ItemWrapper-isLoading"]),pl=f&&!ce?l.createElement("div",{className:dl,tabIndex:-1},_n):null,hl=R(Re.ResourceList,f&&Re.disabledPointerEvents,x&&Re.disableTextSelection),fl=ce?l.createElement("ul",{className:hl,ref:D,"aria-live":"polite","aria-busy":f},_n,m.Children.toArray(e.map(ge))):null,ml=P?l.createElement("div",{className:Re.PaginationWrapper},l.createElement(yu,Object.assign({type:"table"},P))):null,gl={selectable:V,selectedItems:c,selectMode:x,hasBulkActions:!!i,resourceName:U,loading:f,onSelectionChange:te};return l.createElement(Wu.Provider,{value:gl},At,l.createElement("div",{className:Re.ResourceListWrapper},kt,fl,Pt,st,pl,ml))}Oy.Item=xy;var aa={SelectAllActions:"Polaris-SelectAllActions","SelectAllActions-not-sticky":"Polaris-SelectAllActions--selectAllActionsNotSticky","SelectAllActions-entering":"Polaris-SelectAllActions__SelectAllActions--entering","SelectAllActions-exiting":"Polaris-SelectAllActions__SelectAllActions--exiting","SelectAllActions-hasPagination":"Polaris-SelectAllActions__SelectAllActions--hasPagination","SelectAllActions-exited":"Polaris-SelectAllActions__SelectAllActions--exited","SelectAllActions-entered":"Polaris-SelectAllActions__SelectAllActions--entered",PaginatedSelectAll:"Polaris-SelectAllActions__PaginatedSelectAll",AllAction:"Polaris-SelectAllActions__AllAction"};const uT=m.forwardRef(function({label:t,selectMode:r,paginatedSelectAllText:n,paginatedSelectAllAction:a,disabled:s,isSticky:o,hasPagination:i,accessibilityLabel:c,selected:u,onToggleAll:d},p){const f=m.useRef(null),h=a?l.createElement(Kt,{className:aa.AllAction,onClick:a.onAction,size:"slim",disabled:s},a.content):null,g=n&&a,y=h?l.createElement("div",{className:aa.PaginatedSelectAll},h):null,v={accessibilityLabel:c,label:g?n:t,selected:u,onToggleAll:d,disabled:s,ariaLive:g?"polite":void 0,ref:p},_=c&&d?l.createElement(Nu,v):null;return l.createElement(Mc,{timeout:0,in:r,key:"markup",nodeRef:f},T=>{const k=R(aa.SelectAllActions,i&&aa["SelectAllActions-hasPagination"],!o&&aa["SelectAllActions-not-sticky"],T&&aa[`SelectAllActions-${T}`]);return l.createElement("div",{className:k,ref:f},l.createElement(ne,{background:"bg-surface-secondary",borderBlockStartWidth:"025",borderColor:"border",width:"100%",paddingBlockStart:"300",paddingBlockEnd:"300",paddingInlineStart:"300",paddingInlineEnd:"400"},l.createElement(ye,{gap:"200",align:"start",blockAlign:"center"},_,l.createElement(se,{as:"span",variant:"bodySm",fontWeight:"medium"},g?n:t),y)))})});function dT({enabled:e,action:t,children:r}){const n=m.useId(),a=t?Wr(t,{role:"switch",ariaChecked:e?"true":"false",size:"slim"}):null;return l.createElement(ss,{sectioned:!0},l.createElement(zg,{action:a},l.createElement("label",{htmlFor:n},r)))}var vh={SkeletonBodyTextContainer:"Polaris-SkeletonBodyText__SkeletonBodyTextContainer",SkeletonBodyText:"Polaris-SkeletonBodyText"};function pT({lines:e=3}){const t=[];for(let r=0;r<e;r++)t.push(l.createElement("div",{className:vh.SkeletonBodyText,key:r}));return l.createElement("div",{className:vh.SkeletonBodyTextContainer},t)}var Eh={DisplayText:"Polaris-SkeletonDisplayText__DisplayText",sizeSmall:"Polaris-SkeletonDisplayText--sizeSmall",sizeMedium:"Polaris-SkeletonDisplayText--sizeMedium",sizeLarge:"Polaris-SkeletonDisplayText--sizeLarge",sizeExtraLarge:"Polaris-SkeletonDisplayText--sizeExtraLarge"};function hT({size:e="medium",maxWidth:t}){const r=R(Eh.DisplayText,e&&Eh[St("size",e)]),n={"--pc-skeleton-display-text-max-width":t??void 0};return l.createElement("div",{className:r,style:F_(n)})}var _h={Title:"Polaris-SkeletonPage__Title",SkeletonTitle:"Polaris-SkeletonPage__SkeletonTitle"};function fT({children:e,fullWidth:t,narrowWidth:r,primaryAction:n,title:a="",backAction:s}){const o=le(),i=a?l.createElement("h1",{className:_h.Title},a):l.createElement("div",{className:_h.SkeletonTitle},l.createElement(ne,{background:"bg-fill-tertiary",minWidth:"120px",minHeight:"28px",borderRadius:"100"})),c=n?l.createElement(ne,{id:"SkeletonPage-PrimaryAction",borderRadius:"100",background:"bg-fill-tertiary",minHeight:"2.25rem",minWidth:"6.25rem"}):null,u=s?l.createElement(ne,{borderRadius:"100",background:"bg-fill-tertiary",minHeight:"2.25rem",minWidth:"2.25rem",maxWidth:"2.25rem"}):null;return l.createElement(ut,{gap:"400",inlineAlign:"center"},l.createElement(ne,Object.assign({width:"100%",padding:"0",paddingInlineStart:{sm:"600"},paddingInlineEnd:{sm:"600"},maxWidth:"var(--pc-skeleton-page-max-width)","aria-label":o.translate("Polaris.SkeletonPage.loadingLabel"),role:"status"},r&&{maxWidth:"var(--pc-skeleton-page-max-width-narrow)"},t&&{maxWidth:"none"}),l.createElement(ut,null,l.createElement(ne,{paddingBlockStart:{xs:"400",md:"500"},paddingBlockEnd:{xs:"400",md:"500"},paddingInlineStart:{xs:"400",sm:"0"},paddingInlineEnd:{xs:"400",sm:"0"},width:"100%"},l.createElement(ye,{gap:"400",align:"space-between",blockAlign:"center"},l.createElement(ye,{gap:"400"},u,l.createElement(ne,{paddingBlockStart:"100",paddingBlockEnd:"100"},i)),c)),l.createElement(ne,{paddingBlockEnd:"200",width:"100%"},e))))}var Bs={Tabs:"Polaris-SkeletonTabs__Tabs",Tab:"Polaris-SkeletonTabs__Tab",TabText:"Polaris-SkeletonTabs__TabText",fitted:"Polaris-SkeletonTabs--fitted"};function mT({count:e=2,fitted:t=!1}){return l.createElement("div",{className:R(Bs.Tabs,t&&Bs.fitted)},[...Array(e).keys()].map(r=>l.createElement("div",{key:r,className:R(Bs.Tab)},l.createElement("div",{className:Bs.TabText}))))}var Sh={SkeletonThumbnail:"Polaris-SkeletonThumbnail",sizeExtraSmall:"Polaris-SkeletonThumbnail--sizeExtraSmall",sizeSmall:"Polaris-SkeletonThumbnail--sizeSmall",sizeMedium:"Polaris-SkeletonThumbnail--sizeMedium",sizeLarge:"Polaris-SkeletonThumbnail--sizeLarge"};function gT({size:e="medium"}){const t=R(Sh.SkeletonThumbnail,e&&Sh[St("size",e)]);return l.createElement("div",{className:t})}var ft={TopBar:"Polaris-TopBar",Container:"Polaris-TopBar__Container",LogoDisplayControl:"Polaris-TopBar__LogoDisplayControl",LogoDisplayContainer:"Polaris-TopBar__LogoDisplayContainer",LogoContainer:"Polaris-TopBar__LogoContainer",hasLogoSuffix:"Polaris-TopBar--hasLogoSuffix",Logo:"Polaris-TopBar__Logo",LogoLink:"Polaris-TopBar__LogoLink",ContextControl:"Polaris-TopBar__ContextControl",NavigationIcon:"Polaris-TopBar__NavigationIcon",focused:"Polaris-TopBar--focused",IconWrapper:"Polaris-TopBar__IconWrapper",LeftContent:"Polaris-TopBar__LeftContent",Search:"Polaris-TopBar__Search",RightContent:"Polaris-TopBar__RightContent",SecondaryMenu:"Polaris-TopBar__SecondaryMenu"},Ws={Search:"Polaris-TopBar-Search",SearchContent:"Polaris-TopBar-Search__SearchContent",visible:"Polaris-TopBar-Search--visible",Results:"Polaris-TopBar-Search__Results"},wh={SearchDismissOverlay:"Polaris-TopBar-SearchDismissOverlay",visible:"Polaris-TopBar-SearchDismissOverlay--visible"};function yT({onDismiss:e,visible:t}){const r=m.useRef(null),n=m.useCallback(({target:a})=>{a===r.current&&e!=null&&e()},[e]);return l.createElement(l.Fragment,null,t?l.createElement(Eu,null):null,l.createElement("div",{ref:r,className:R(wh.SearchDismissOverlay,t&&wh.visible),onClick:n}))}function bT({visible:e,children:t,onDismiss:r,overlayVisible:n=!1}){if(t==null)return null;const a=e?l.createElement(yT,{onDismiss:r,visible:n}):null;return l.createElement(l.Fragment,null,a,l.createElement("div",{className:R(Ws.Search,e&&Ws.visible)},l.createElement("div",{className:Ws.SearchContent},l.createElement("div",{className:Ws.Results},t))))}var Pn={SearchField:"Polaris-TopBar-SearchField",focused:"Polaris-TopBar-SearchField--focused",Input:"Polaris-TopBar-SearchField__Input",Backdrop:"Polaris-TopBar-SearchField__Backdrop",BackdropShowFocusBorder:"Polaris-TopBar-SearchField__BackdropShowFocusBorder",Icon:"Polaris-TopBar-SearchField__Icon",Clear:"Polaris-TopBar-SearchField__Clear"};function vT({value:e,focused:t,active:r,placeholder:n,onChange:a,onFocus:s,onBlur:o,onCancel:i,showFocusBorder:c}){const u=le(),[d,p]=m.useState(!1),f=m.useRef(null),h=m.useId(),g=m.useCallback(({currentTarget:T})=>{a(T.value)},[a]),y=m.useCallback(()=>s&&s(),[s]),b=m.useCallback(()=>o&&o(),[o]),v=m.useCallback(()=>{i&&i(),f.current&&(f.current.value="",a(""),f.current.focus())},[i,a]);m.useEffect(()=>{f.current&&(t?f.current.focus():f.current.blur())},[t]);const _=e!==""&&l.createElement("button",{type:"button","aria-label":u.translate("Polaris.TopBar.SearchField.clearButtonLabel"),className:Pn.Clear,onClick:v,onBlur:()=>{p(!1),v()},onFocus:()=>{y(),p(!0)}},l.createElement(pe,{source:H_})),A=R(Pn.SearchField,(t||r||d)&&Pn.focused);return l.createElement("div",{className:A,onFocus:y,onBlur:b},l.createElement(se,{as:"span",visuallyHidden:!0},l.createElement("label",{htmlFor:h},u.translate("Polaris.TopBar.SearchField.search"))),l.createElement("input",{id:h,className:Pn.Input,placeholder:n,type:"search",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",ref:f,value:e,onChange:g,onKeyDown:ET}),l.createElement("span",{className:Pn.Icon},l.createElement(pe,{source:Ho})),_,l.createElement("div",{className:R(Pn.Backdrop,c&&Pn.BackdropShowFocusBorder)}))}function ET(e){e.key==="Enter"&&e.preventDefault()}var Ah={Details:"Polaris-TopBar-UserMenu__Details",Message:"Polaris-TopBar-UserMenu__Message"},Ph={MessageIndicatorWrapper:"Polaris-MessageIndicator__MessageIndicatorWrapper",MessageIndicator:"Polaris-MessageIndicator"};function _T({children:e,active:t}){const r=t&&l.createElement("div",{className:Ph.MessageIndicator});return l.createElement("div",{className:Ph.MessageIndicatorWrapper},r,e)}var Us={ActivatorWrapper:"Polaris-TopBar-Menu__ActivatorWrapper",Activator:"Polaris-TopBar-Menu__Activator","Activator-userMenu":"Polaris-TopBar-Menu__Activator--userMenu",Section:"Polaris-TopBar-Menu__Section"},ST={Section:"Polaris-Menu-Message__Section"};function wT({title:e,description:t,action:r,link:n,badge:a}){const s=a&&l.createElement(sn,{tone:a.tone},a.content),{to:o,content:i}=n,{onClick:c,content:u}=r;return l.createElement("div",{className:ST.Section},l.createElement(dt.Section,null,l.createElement(ln,{vertical:!0,spacing:"tight"},l.createElement(Du,null,l.createElement(se,{variant:"headingMd",as:"h2"},e,s),l.createElement("p",null,t)),l.createElement(Ty,{url:o},i),l.createElement(Ae,{variant:"plain",onClick:c},u))))}function Ny(e){const{actions:t,onOpen:r,onClose:n,open:a,activatorContent:s,message:o,accessibilityLabel:i,customWidth:c,userMenu:u}=e,d=o&&o.badge&&{content:o.badge.content,tone:o.badge.tone},p=o&&l.createElement(wT,{title:o.title,description:o.description,action:{onClick:o.action.onClick,content:o.action.content},link:{to:o.link.to,content:o.link.content},badge:d});return l.createElement(dt,{activator:l.createElement("div",{className:Us.ActivatorWrapper},l.createElement("button",{type:"button",className:R(Us.Activator,u&&Us["Activator-userMenu"]),onClick:r,"aria-label":i},s)),active:a,onClose:n,fixed:!0,fullHeight:!0,preferredAlignment:"right"},l.createElement("div",{className:Us.MenuItems},l.createElement(ne,{width:c},l.createElement(fn,{actionRole:"menuitem",onActionAnyItem:n,sections:t}),p)))}function AT({name:e,detail:t,avatar:r,initials:n,actions:a,message:s,onToggle:o,open:i,accessibilityLabel:c,customActivator:u,customWidth:d}){const p=!!s,f=u||l.createElement(l.Fragment,null,l.createElement("span",{className:Ah.Details},l.createElement(se,{as:"p",alignment:"start",fontWeight:"medium",truncate:!0},e),l.createElement("span",{className:Ah.Message},l.createElement(se,{as:"p",variant:"bodySm",alignment:"start",tone:"subdued",truncate:!0},t))),l.createElement(_T,{active:p},l.createElement(Iu,{size:"md",initials:n&&n.replace(" ",""),source:r,name:e})));return l.createElement(Ny,{activatorContent:f,open:i,onOpen:o,onClose:o,actions:a,message:s,accessibilityLabel:c,customWidth:d,userMenu:!0})}const Yo=function({showNavigationToggle:t,userMenu:r,searchResults:n,searchField:a,secondaryMenu:s,searchResultsVisible:o,searchResultsOverlayVisible:i=!1,onNavigationToggle:c,onSearchResultsDismiss:u,contextControl:d,logoSuffix:p}){const f=le(),{logo:h}=Wo(),{value:g,setTrue:y,setFalse:b}=Qt(!1),v=R(ft.NavigationIcon,g&&ft.focused),_=t?l.createElement("button",{type:"button",className:v,onClick:c,onFocus:y,onBlur:b,"aria-label":f.translate("Polaris.TopBar.toggleMenuLabel")},l.createElement("div",{className:ft.IconWrapper},l.createElement(pe,{source:jg}))):null,A=lg(h,104);let T;if(d)T=l.createElement("div",{className:ft.ContextControl},d);else if(h){const I=R(ft.LogoContainer,t||a?ft.LogoDisplayControl:ft.LogoDisplayContainer,p&&ft.hasLogoSuffix);T=l.createElement("div",{className:I},l.createElement(Yt,{url:h.url||"",className:ft.LogoLink,style:{width:A}},l.createElement(on,{source:h.topBarSource||"",alt:h.accessibilityLabel||"",className:ft.Logo,style:{width:A}})),p)}const k=a?l.createElement(l.Fragment,null,a,l.createElement(bT,{visible:o,onDismiss:u,overlayVisible:i},n)):null;return l.createElement("div",{className:ft.TopBar},l.createElement("div",{className:ft.Container},l.createElement("div",{className:ft.LeftContent},_,T),l.createElement("div",{className:ft.Search},k),l.createElement("div",{className:ft.RightContent},l.createElement("div",{className:ft.SecondaryMenu},s),r)))};Yo.Menu=Ny;Yo.SearchField=vT;Yo.UserMenu=AT;function PT({content:e,onAction:t,...r},n,a){return l.createElement(Kt,Object.assign({key:a,onClick:t},r,n),e)}const zc=60,Gc=zc*60;function Ch(e){return e>9?String(e):`0${e}`}function Ku(e){return{hours:Math.floor(e/Gc),minutes:Math.floor(e%Gc/zc),seconds:e%zc}}function CT(e){const{hours:t,minutes:r,seconds:n}=Ku(e),a=e>Gc,s=a?`${t}:`:"",o=`${a?Ch(r):r}:`,i=`${Ch(n)}`;return`${s}${o}${i}`}function TT(e){const{hours:t,minutes:r,seconds:n}=Ku(e);let a="Polaris.VideoThumbnail.playButtonA11yLabel.duration";return t?(a+=`.hours.${t>1?"other":"one"}`,n?r>1?a+=`${n>1?".minutesAndSeconds":".minutesAndSecond"}`:r===1?a+=`${n>1?".minuteAndSeconds":".minuteAndSecond"}`:a+=`${n>1?".andSeconds":".andSecond"}`:r?a+=`${r>1?".andMinutes":".andMinute"}`:a+=".only"):r?(a+=`.minutes.${r>1?"other":"one"}`,n?a+=`${n>1?".andSeconds":".andSecond"}`:a+=".only"):n&&(a+=n>1?".seconds.other":".seconds.one"),a}var $r={Thumbnail:"Polaris-VideoThumbnail__Thumbnail",ThumbnailContainer:"Polaris-VideoThumbnail__ThumbnailContainer",PlayButton:"Polaris-VideoThumbnail__PlayButton",Timestamp:"Polaris-VideoThumbnail__Timestamp",PlayIcon:"Polaris-VideoThumbnail__PlayIcon",Progress:"Polaris-VideoThumbnail__Progress",Indicator:"Polaris-VideoThumbnail__Indicator",ProgressBar:"Polaris-VideoThumbnail__ProgressBar",Label:"Polaris-VideoThumbnail__Label"};function RT({thumbnailUrl:e,videoLength:t=0,videoProgress:r=0,showVideoProgress:n=!1,accessibilityLabel:a,onClick:s,onBeforeStartPlaying:o}){const i=le(),{isNavigationCollapsed:c}=ps();let u;if(a)u=a;else if(t){const{hours:f,minutes:h,seconds:g}=Ku(t);u=i.translate("Polaris.VideoThumbnail.playButtonA11yLabel.defaultWithDuration",{duration:i.translate(TT(t),{hourCount:f,minuteCount:h,secondCount:g})})}else u=i.translate("Polaris.VideoThumbnail.playButtonA11yLabel.default");const d=t?l.createElement("div",{className:$r.Timestamp},l.createElement(ln,{alignment:"center",spacing:"extraTight"},l.createElement("span",{className:$r.PlayIcon},l.createElement(pe,{source:Vg})),l.createElement(se,{variant:c?"bodyLg":"bodyMd",as:"p",fontWeight:"semibold"},CT(t)))):null;let p=null;if(n){const f=kT(t,r),h=Math.round(f*100);p=l.createElement("div",{className:$r.Progress},l.createElement("progress",{className:$r.ProgressBar,value:h,max:"100"}),l.createElement("div",{className:$r.Indicator,style:{transform:`scaleX(${f})`}},l.createElement("span",{className:$r.Label},h,"%")))}return l.createElement("div",{className:$r.ThumbnailContainer},l.createElement("div",{className:$r.Thumbnail,style:{backgroundImage:`url(${e})`}}),l.createElement("button",{type:"button",className:$r.PlayButton,"aria-label":u,onClick:s,onMouseEnter:o,onFocus:o,onTouchStart:o},d),p)}function kT(e,t){if(t>e,t>0&&e>0){const r=parseFloat((t/e).toFixed(2));return r>1?1:r}return 0}function IT(){return m.useContext(vy)}function xT(){const{selected:e}=m.useContext(Xo);return e}function $T(){return m.useContext(_y)}const OT=Object.freeze(Object.defineProperty({__proto__:null,AccountConnection:zw,ActionList:fn,ActionMenu:D_,AppProvider:tS,get AutoSelection(){return en},Autocomplete:ay,Avatar:Iu,Backdrop:og,Badge:sn,get BadgeProgressValue(){return B_},get BadgeStatusValue(){return W_},Banner:hA,Bleed:Jm,BlockStack:ut,Box:ne,Breadcrumbs:U_,Button:Ae,ButtonGroup:Fn,CalloutCard:PA,Card:Gm,Checkbox:mn,ChoiceList:oy,Collapsible:Jo,ColorPicker:qA,Combobox:Go,Connected:j_,ContextualSaveBar:VA,DATA_ATTRIBUTE:q_,DEFAULT_LOCALE:Mw,DEFAULT_TOAST_DURATION:sS,DEFAULT_TOAST_DURATION_WITH_ACTION:oS,DataTable:pS,DatePicker:aP,DescriptionList:iP,Divider:cP,DropZone:hS,EmptySearchResult:Fu,EmptyState:hP,EventListener:ar,ExceptionList:mP,Filters:uy,Focus:ig,FooterHelp:wP,Form:fs,FormLayout:hs,Frame:iS,FrameContext:cg,FullscreenBar:PP,Grid:dy,INDEX_TABLE_SELECT_ALL_ITEMS:Fr,Icon:pe,Image:on,IndexFilters:zP,get IndexFiltersMode(){return We},IndexTable:Hu,get IndexTableSelectionType(){return Ke},Indicator:Ou,InlineCode:dC,InlineError:Xm,InlineGrid:Fc,InlineStack:ye,get Key(){return $t},KeyboardKey:pC,KeypressListener:ha,Label:V_,Labelled:Bo,Layout:Bu,LegacyCard:ss,LegacyFilters:EC,LegacyStack:ln,LegacyTabs:kC,Link:Ty,List:Ry,Listbox:vt,Loading:lS,MediaCard:xC,Modal:cr,Navigation:qu,OptionList:WC,Page:K_,PageActions:VC,Pagination:yu,PolarisTestProvider:zC,Popover:dt,get PopoverCloseSource(){return z_},Portal:eg,PortalsManager:ng,PositionedOverlay:G_,ProgressBar:JC,RadioButton:ug,RangeSlider:ZC,ResourceItem:xy,ResourceList:Oy,SUPPORTED_LOCALES:Fw,ScrollLock:Eu,Scrollable:rs,Select:$y,SelectAllActions:uT,SettingToggle:dT,Sheet:Vc,SkeletonBodyText:pT,SkeletonDisplayText:hT,SkeletonPage:fT,SkeletonTabs:mT,SkeletonThumbnail:gT,Spinner:ya,Sticky:_u,Tabs:hy,Tag:wy,Text:se,TextContainer:Du,TextField:hn,Thumbnail:fS,Toast:cS,Tooltip:Vt,TopBar:Yo,TrapFocus:sg,Truncate:ly,UnstableBulkActions:Lu,UnstyledButton:Kt,UnstyledLink:Yt,VideoThumbnail:RT,_SECRET_INTERNAL_SCROLL_LOCK_MANAGER_CONTEXT:tg,_SECRET_INTERNAL_WITHIN_CONTENT_CONTEXT:Fo,buttonFrom:Wr,buttonsFrom:ns,errorTextID:mu,hexToRgb:jw,hsbToHex:Dw,hsbToRgb:Ko,hslToRgb:Bw,isNavigationItemActive:LC,labelID:mo,rgbString:kg,rgbToHex:Ig,rgbToHsb:Ww,rgbToHsl:Uw,rgbaString:Hw,unstyledButtonFrom:PT,useBreakpoints:Tr,useEphemeralPresenceManager:J_,useEventListener:Gn,useFrame:Wo,useIndexResourceState:qw,useIndexTableContainerScroll:$T,useIndexTableRowHovered:IT,useIndexTableRowSelected:xT,useSetIndexFiltersMode:GP,useTheme:Do},Symbol.toStringTag,{value:"Module"}));var Ly={},Ur={},Jc=function(e,t){return Jc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Jc(e,t)};function My(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Jc(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ao=function(){return Ao=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ao.apply(this,arguments)};function Fy(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Hy(e,t,r,n){var a=arguments.length,s=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function Dy(e,t){return function(r,n){t(r,n,e)}}function NT(e,t,r,n,a,s){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var i=n.kind,c=i==="getter"?"get":i==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),p,f=!1,h=r.length-1;h>=0;h--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(v||null))};var b=(0,r[h])(i==="accessor"?{get:d.get,set:d.set}:d[c],g);if(i==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(p=o(b.get))&&(d.get=p),(p=o(b.set))&&(d.set=p),(p=o(b.init))&&a.unshift(p)}else(p=o(b))&&(i==="field"?a.unshift(p):d[c]=p)}u&&Object.defineProperty(u,n.name,d),f=!0}function LT(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function MT(e){return typeof e=="symbol"?e:"".concat(e)}function FT(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function By(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Wy(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function i(d){try{u(n.next(d))}catch(p){o(p)}}function c(d){try{u(n.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):a(d.value).then(i,c)}u((n=n.apply(e,t||[])).next())})}function Uy(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Qo=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function jy(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Qo(t,e,r)}function Po(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function zu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,s=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function qy(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zu(arguments[t]));return e}function Vy(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,a++)n[a]=s[o];return n}function Ky(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function ba(e){return this instanceof ba?(this.v=e,this):new ba(e)}function zy(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(f){n[f]&&(a[f]=function(h){return new Promise(function(g,y){s.push([f,h,g,y])>1||i(f,h)})})}function i(f,h){try{c(n[f](h))}catch(g){p(s[0][3],g)}}function c(f){f.value instanceof ba?Promise.resolve(f.value.v).then(u,d):p(s[0][2],f)}function u(f){i("next",f)}function d(f){i("throw",f)}function p(f,h){f(h),s.shift(),s.length&&i(s[0][0],s[0][1])}}function Gy(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,s){t[a]=e[a]?function(o){return(r=!r)?{value:ba(e[a](o)),done:!1}:s?s(o):o}:s}}function Jy(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Po=="function"?Po(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(i,c){o=e[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(u){s({value:u,done:i})},o)}}function Xy(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var HT=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function Yy(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Qo(t,e,r);return HT(t,e),t}function Qy(e){return e&&e.__esModule?e:{default:e}}function Zy(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function eb(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function tb(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function rb(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var DT=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function nb(e){function t(n){e.error=e.hasError?new DT(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(s){return t(s),r()})}catch(s){t(s)}}if(e.hasError)throw e.error}return r()}const BT={__extends:My,__assign:Ao,__rest:Fy,__decorate:Hy,__param:Dy,__metadata:By,__awaiter:Wy,__generator:Uy,__createBinding:Qo,__exportStar:jy,__values:Po,__read:zu,__spread:qy,__spreadArrays:Vy,__spreadArray:Ky,__await:ba,__asyncGenerator:zy,__asyncDelegator:Gy,__asyncValues:Jy,__makeTemplateObject:Xy,__importStar:Yy,__importDefault:Qy,__classPrivateFieldGet:Zy,__classPrivateFieldSet:eb,__classPrivateFieldIn:tb,__addDisposableResource:rb,__disposeResources:nb},WT=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:rb,get __assign(){return Ao},__asyncDelegator:Gy,__asyncGenerator:zy,__asyncValues:Jy,__await:ba,__awaiter:Wy,__classPrivateFieldGet:Zy,__classPrivateFieldIn:tb,__classPrivateFieldSet:eb,__createBinding:Qo,__decorate:Hy,__disposeResources:nb,__esDecorate:NT,__exportStar:jy,__extends:My,__generator:Uy,__importDefault:Qy,__importStar:Yy,__makeTemplateObject:Xy,__metadata:By,__param:Dy,__propKey:MT,__read:zu,__rest:Fy,__runInitializers:LT,__setFunctionName:FT,__spread:qy,__spreadArray:Ky,__spreadArrays:Vy,__values:Po,default:BT},Symbol.toStringTag,{value:"Module"})),de=pn(WT);var jl={},Fa={},tr={},j={};Object.defineProperty(j,"__esModule",{value:!0});j.FeatureDeprecatedError=j.BillingError=j.InvalidRequestError=j.UnsupportedClientType=j.MissingRequiredArgument=j.SessionStorageError=j.MissingWebhookCallbackError=j.InvalidWebhookError=j.InvalidSession=j.CookieNotFound=j.BotActivityDetected=j.InvalidOAuthError=j.GraphqlQueryError=j.RestResourceError=j.HttpThrottlingError=j.HttpInternalError=j.HttpRetriableError=j.HttpResponseError=j.HttpMaxRetriesError=j.HttpRequestError=j.PrivateAppError=j.SafeCompareError=j.InvalidDeliveryMethodError=j.MissingJwtTokenError=j.InvalidJwtError=j.InvalidHostError=j.InvalidShopError=j.InvalidHmacError=j.ShopifyError=void 0;const UT=de;class Le extends Error{constructor(...t){super(...t),Object.setPrototypeOf(this,new.target.prototype)}}j.ShopifyError=Le;class jT extends Le{}j.InvalidHmacError=jT;class qT extends Le{}j.InvalidShopError=qT;class VT extends Le{}j.InvalidHostError=VT;class KT extends Le{}j.InvalidJwtError=KT;class zT extends Le{}j.MissingJwtTokenError=zT;class GT extends Le{}j.InvalidDeliveryMethodError=GT;class JT extends Le{}j.SafeCompareError=JT;class XT extends Le{}j.PrivateAppError=XT;class YT extends Le{}j.HttpRequestError=YT;class QT extends Le{}j.HttpMaxRetriesError=QT;class ab extends Le{constructor({message:t,code:r,statusText:n,body:a,headers:s}){super(t),this.response={code:r,statusText:n,body:a,headers:s}}}j.HttpResponseError=ab;class Gu extends ab{}j.HttpRetriableError=Gu;class ZT extends Gu{}j.HttpInternalError=ZT;class e1 extends Gu{constructor(t){var{retryAfter:r}=t,n=UT.__rest(t,["retryAfter"]);super(n),this.response.retryAfter=r}}j.HttpThrottlingError=e1;class t1 extends Le{}j.RestResourceError=t1;class r1 extends Le{constructor({message:t,response:r,headers:n,body:a}){super(t),this.response=r,this.headers=n,this.body=a}}j.GraphqlQueryError=r1;class n1 extends Le{}j.InvalidOAuthError=n1;class a1 extends Le{}j.BotActivityDetected=a1;class s1 extends Le{}j.CookieNotFound=s1;class o1 extends Le{}j.InvalidSession=o1;class sb extends Le{constructor({message:t,response:r}){super(t),this.response=r}}j.InvalidWebhookError=sb;class i1 extends sb{}j.MissingWebhookCallbackError=i1;class l1 extends Le{}j.SessionStorageError=l1;class c1 extends Le{}j.MissingRequiredArgument=c1;class u1 extends Le{}j.UnsupportedClientType=u1;class d1 extends Le{}j.InvalidRequestError=d1;class p1 extends Le{constructor({message:t,errorData:r}){super(t),this.message=t,this.errorData=r}}j.BillingError=p1;class h1 extends Le{}j.FeatureDeprecatedError=h1;var Vr={},Th;function ob(){if(Th)return Vr;Th=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.crypto=Vr.setCrypto=void 0;let e;try{Vr.crypto=e=crypto}catch{}function t(r){Vr.crypto=e=r}return Vr.setCrypto=t,Vr}var Ha={},Rh;function Zo(){if(Rh)return Ha;Rh=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.HashFormat=void 0;var e;return function(t){t.Base64="base64",t.Hex="hex"}(e||(Ha.HashFormat=e={})),Ha}var kh;function ib(){if(kh)return tr;kh=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.hashString=tr.asBase64=tr.asHex=tr.createSHA256HMAC=void 0;const e=de,t=j,r=ob(),n=Zo();function a(u,d,p=n.HashFormat.Base64){return e.__awaiter(this,void 0,void 0,function*(){const f=typeof(r.crypto===null||r.crypto===void 0?void 0:r.crypto.webcrypto)>"u"?r.crypto:r.crypto.webcrypto,h=new TextEncoder,g=yield f.subtle.importKey("raw",h.encode(u),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),y=yield f.subtle.sign("HMAC",g,h.encode(d));return p===n.HashFormat.Base64?i(y):s(y)})}tr.createSHA256HMAC=a;function s(u){return[...new Uint8Array(u)].map(d=>d.toString(16).padStart(2,"0")).join("")}tr.asHex=s;const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(u){let d="";const p=new Uint8Array(u);for(let f=0;f<p.length;){const h=p[f++],g=p[f++],y=p[f++],b=h>>2,v=(h&3)<<4|g>>4;let _=(g&15)<<2|y>>6,A=y&63;isNaN(g)&&(_=64),isNaN(y)&&(A=64),d+=o[b]+o[v]+o[_]+o[A]}return d}tr.asBase64=i;function c(u,d){const p=new TextEncoder().encode(u);switch(d){case n.HashFormat.Base64:return i(p);case n.HashFormat.Hex:return s(p);default:throw new t.ShopifyError(`Unrecognized hash format '${d}'`)}}return tr.hashString=c,tr}var Da={},Ih;function lb(){if(Ih)return Da;Ih=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.splitN=void 0;function e(t,r,n){const a=t.split(r),s=Math.min(Math.abs(n),a.length);return[...a.slice(0,s-1),a.slice(s-1).join(r)]}return Da.splitN=e,Da}var Ye={},xh;function cb(){if(xh)return Ye;xh=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.flatHeaders=Ye.removeHeader=Ye.canonicalizeHeaders=Ye.addHeader=Ye.setHeader=Ye.getHeader=Ye.getHeaders=Ye.canonicalizeHeaderName=void 0;function e(u){return u.replace(/(^|-)(\w+)/g,(d,p,f)=>p+f.slice(0,1).toUpperCase()+f.slice(1).toLowerCase())}Ye.canonicalizeHeaderName=e;function t(u,d){const p=[];if(!u)return p;const f=e(d);for(const[h,g]of Object.entries(u))e(h)===f&&(Array.isArray(g)?p.push(...g):p.push(g));return p}Ye.getHeaders=t;function r(u,d){var p;if(u)return(p=t(u,d))===null||p===void 0?void 0:p[0]}Ye.getHeader=r;function n(u,d,p){o(u),u[e(d)]=[p]}Ye.setHeader=n;function a(u,d,p){o(u);const f=e(d);let h=u[f];h?Array.isArray(h)||(h=[h]):h=[],u[f]=h,h.push(p)}Ye.addHeader=a;function s(u){return typeof u=="number"?u.toString():u}function o(u){for(const[d,p]of Object.entries(u)){const f=e(d);u[f]||(u[f]=[]),Array.isArray(u[f])||(u[f]=[s(u[f])]),d!==f&&(delete u[d],u[f].push(...[p].flat().map(h=>s(h))))}return u}Ye.canonicalizeHeaders=o;function i(u,d){o(u);const p=e(d);delete u[p]}Ye.removeHeader=i;function c(u){return Object.entries(u).flatMap(([d,p])=>Array.isArray(p)?p.map(f=>[d,f]):[[d,p]])}return Ye.flatHeaders=c,Ye}var $h;function f1(){if($h)return Fa;$h=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.Cookies=void 0;const e=de,t=ib(),r=lb(),n=cb();class a{static parseCookies(o){const i=o.filter(u=>u.trim().length>0).map(u=>{const[d,...p]=u.split(";"),[f,h]=(0,r.splitN)(d,"=",2).map(g=>g.trim());return[f,Object.assign({name:f,value:h},Object.fromEntries(p.map(g=>(0,r.splitN)(g,"=",2).map(y=>y.trim()))))]}),c=Object.fromEntries(i);for(const u of Object.values(c))typeof u.expires=="string"&&(u.expires=new Date(u.expires));return c}static encodeCookie(o){let i="";return i+=`${o.name}=${o.value};`,i+=Object.entries(o).filter(([c])=>!["name","value","expires"].includes(c)).map(([c,u])=>`${c}=${u}`).join("; "),o.expires&&(i+=";",i+=`expires=${o.expires.toUTCString()}`),i}constructor(o,i,{keys:c=[]}={}){var u,d;this.response=i,this.receivedCookieJar={},this.outgoingCookieJar={},this.keys=[],c&&(this.keys=c);const p=(u=(0,n.getHeader)(o.headers,"Cookie"))!==null&&u!==void 0?u:"";this.receivedCookieJar=a.parseCookies(p.split(";"));const f=(d=(0,n.getHeaders)(i.headers,"Set-Cookie"))!==null&&d!==void 0?d:[];this.outgoingCookieJar=a.parseCookies(f)}toHeaders(){return Object.values(this.outgoingCookieJar).map(o=>a.encodeCookie(o))}updateHeader(){this.response.headers||(this.response.headers={}),(0,n.removeHeader)(this.response.headers,"Set-Cookie"),this.toHeaders().map(o=>(0,n.addHeader)(this.response.headers,"Set-Cookie",o))}get(o){var i;return(i=this.receivedCookieJar[o])===null||i===void 0?void 0:i.value}deleteCookie(o){this.set(o,"",{path:"/",expires:new Date(0)})}getAndVerify(o){return e.__awaiter(this,void 0,void 0,function*(){const i=this.get(o);if(i&&(yield this.isSignedCookieValid(o)))return i})}get canSign(){var o;return((o=this.keys)===null||o===void 0?void 0:o.length)>0}set(o,i,c={}){this.outgoingCookieJar[o]=Object.assign(Object.assign({},c),{name:o,value:i}),this.updateHeader()}setAndSign(o,i,c={}){return e.__awaiter(this,void 0,void 0,function*(){if(!this.canSign)throw Error("No keys provided for signing.");this.set(o,i,c);const u=`${o}.sig`,d=yield(0,t.createSHA256HMAC)(this.keys[0],i);this.set(u,d,c),this.updateHeader()})}isSignedCookieValid(o){return e.__awaiter(this,void 0,void 0,function*(){const i=`${o}.sig`;if(!this.get(o)||!this.get(i))return this.deleteCookie(i),this.deleteCookie(o),!1;const c=this.get(o),u=this.get(i);return(yield Promise.all(this.keys.map(p=>(0,t.createSHA256HMAC)(p,c)))).includes(u)?!0:(this.deleteCookie(i),this.deleteCookie(o),!1)})}}return Fa.Cookies=a,Fa}var ql={},Oh;function m1(){return Oh||(Oh=1,Object.defineProperty(ql,"__esModule",{value:!0})),ql}var Nh;function Jn(){return Nh||(Nh=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.setAbstractConvertHeadersFunc=e.abstractConvertHeaders=e.setAbstractConvertResponseFunc=e.abstractConvertResponse=e.setAbstractConvertIncomingResponseFunc=e.abstractConvertIncomingResponse=e.setAbstractConvertRequestFunc=e.abstractConvertRequest=e.setAbstractFetchFunc=e.abstractFetch=e.isOK=void 0;const t=de;t.__exportStar(f1(),e),t.__exportStar(cb(),e),t.__exportStar(lb(),e),t.__exportStar(m1(),e);function r(h){return h.statusCode>=200&&h.statusCode<=299}e.isOK=r;let n=()=>{throw new Error("Missing adapter implementation for 'abstractFetch' - make sure to import the appropriate adapter for your platform")};e.abstractFetch=n;function a(h){e.abstractFetch=h}e.setAbstractFetchFunc=a;let s=()=>{throw new Error("Missing adapter implementation for 'abstractConvertRequest' - make sure to import the appropriate adapter for your platform")};e.abstractConvertRequest=s;function o(h){e.abstractConvertRequest=h}e.setAbstractConvertRequestFunc=o;let i=()=>Promise.resolve({});e.abstractConvertIncomingResponse=i;function c(h){e.abstractConvertIncomingResponse=h}e.setAbstractConvertIncomingResponseFunc=c;let u=()=>{throw new Error("Missing adapter implementation for 'abstractConvertResponse' - make sure to import the appropriate adapter for your platform")};e.abstractConvertResponse=u;function d(h){e.abstractConvertResponse=h}e.setAbstractConvertResponseFunc=d;let p=()=>{throw new Error("Missing adapter implementation for 'abstractConvertHeaders' - make sure to import the appropriate adapter for your platform")};e.abstractConvertHeaders=p;function f(h){e.abstractConvertHeaders=h}e.setAbstractConvertHeadersFunc=f}(jl)),jl}var Vl={},Lh;function ei(){return Lh||(Lh=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=de;t.__exportStar(Zo(),e),t.__exportStar(ob(),e),t.__exportStar(ib(),e)}(Vl)),Vl}var Ju={},Kl={},Mh;function g1(){return Mh||(Mh=1,Object.defineProperty(Kl,"__esModule",{value:!0})),Kl}var Kr={},Fh;function y1(){if(Fh)return Kr;Fh=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.setAbstractRuntimeString=Kr.abstractRuntimeString=void 0;let e=()=>{throw new Error("Missing adapter implementation for 'abstractRuntimeString' - make sure to import the appropriate adapter for your platform")};Kr.abstractRuntimeString=e;function t(r){Kr.abstractRuntimeString=r}return Kr.setAbstractRuntimeString=t,Kr}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=de;t.__exportStar(g1(),e),t.__exportStar(y1(),e)})(Ju);(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=de;t.__exportStar(Jn(),e),t.__exportStar(ei(),e),t.__exportStar(Ju,e)})(Ur);var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.webApiRuntimeString=wr.webApiConvertResponse=wr.webApiConvertHeaders=wr.webApiConvertRequest=void 0;const Xu=de,ub=Ur;function b1(e){var t;return Xu.__awaiter(this,void 0,void 0,function*(){const r=e.rawRequest,n={};for(const[a,s]of r.headers.entries())(0,ub.addHeader)(n,a,s);return{headers:n,method:(t=r.method)!==null&&t!==void 0?t:"GET",url:new URL(r.url).toString()}})}wr.webApiConvertRequest=b1;function db(e,t){return Xu.__awaiter(this,void 0,void 0,function*(){const r=new Headers;return(0,ub.flatHeaders)(e??{}).forEach(([n,a])=>r.append(n,a)),Promise.resolve(r)})}wr.webApiConvertHeaders=db;function v1(e,t){var r;return Xu.__awaiter(this,void 0,void 0,function*(){return new Response(e.body,{status:e.statusCode,statusText:e.statusText,headers:yield db((r=e.headers)!==null&&r!==void 0?r:{})})})}wr.webApiConvertResponse=v1;function E1(){return"Web API"}wr.webApiRuntimeString=E1;const ms=Ur,ti=wr;(0,ms.setAbstractFetchFunc)(fetch);(0,ms.setAbstractConvertRequestFunc)(ti.webApiConvertRequest);(0,ms.setAbstractConvertResponseFunc)(ti.webApiConvertResponse);(0,ms.setAbstractConvertHeadersFunc)(ti.webApiConvertHeaders);(0,ms.setAbstractRuntimeString)(ti.webApiRuntimeString);var Ft={},ri={},Qe={};const pb=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,Co=e=>{if(typeof e!="string")throw new TypeError("Invalid argument expected string");const t=e.match(pb);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},Hh=e=>e==="*"||e==="x"||e==="X",Dh=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},_1=(e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t],S1=(e,t)=>{if(Hh(e)||Hh(t))return 0;const[r,n]=_1(Dh(e),Dh(t));return r>n?1:r<n?-1:0},ua=(e,t)=>{for(let r=0;r<Math.max(e.length,t.length);r++){const n=S1(e[r]||"0",t[r]||"0");if(n!==0)return n}return 0},hb=(e,t)=>{const r=Co(e),n=Co(t),a=r.pop(),s=n.pop(),o=ua(r,n);return o!==0?o:a&&s?ua(a.split("."),s.split(".")):a||s?a?-1:1:0},fb=(e,t,r)=>{w1(r);const n=hb(e,t);return mb[r].includes(n)},mb={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},Bh=Object.keys(mb),w1=e=>{if(typeof e!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof e}`);if(Bh.indexOf(e)===-1)throw new Error(`Invalid operator, expected one of ${Bh.join("|")}`)},oo=(e,t)=>{if(t=t.replace(/([><=]+)\s+/g,"$1"),t.includes("||"))return t.split("||").some(b=>oo(e,b));if(t.includes(" - ")){const[b,v]=t.split(" - ",2);return oo(e,`>=${b} <=${v}`)}else if(t.includes(" "))return t.trim().replace(/\s{2,}/g," ").split(" ").every(b=>oo(e,b));const r=t.match(/^([<>=~^]+)/),n=r?r[1]:"=";if(n!=="^"&&n!=="~")return fb(e,t,n);const[a,s,o,,i]=Co(e),[c,u,d,,p]=Co(t),f=[a,s,o],h=[c,u??"x",d??"x"];if(p&&(!i||ua(f,h)!==0||ua(i.split("."),p.split("."))===-1))return!1;const g=h.findIndex(b=>b!=="0")+1,y=n==="~"?2:g>1?g:1;return!(ua(f.slice(0,y),h.slice(0,y))!==0||ua(f.slice(y),h.slice(y))===-1)},A1=e=>typeof e=="string"&&/^[v\d]/.test(e)&&pb.test(e),P1=e=>typeof e=="string"&&/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.test(e),C1=Object.freeze(Object.defineProperty({__proto__:null,compare:fb,compareVersions:hb,satisfies:oo,validate:A1,validateStrict:P1},Symbol.toStringTag,{value:"Module"})),T1=pn(C1);var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.BillingReplacementBehavior=_e.BillingInterval=_e.privacyTopics=_e.ClientType=_e.ShopifyHeader=_e.LATEST_API_VERSION=_e.LIBRARY_NAME=_e.ApiVersion=_e.LogSeverity=void 0;var Wh;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"})(Wh||(_e.LogSeverity=Wh={}));var Xc;(function(e){e.October22="2022-10",e.January23="2023-01",e.April23="2023-04",e.July23="2023-07",e.October23="2023-10",e.January24="2024-01",e.Unstable="unstable"})(Xc||(_e.ApiVersion=Xc={}));_e.LIBRARY_NAME="Shopify API Library";_e.LATEST_API_VERSION=Xc.January24;var Uh;(function(e){e.AccessToken="X-Shopify-Access-Token",e.ApiVersion="X-Shopify-API-Version",e.Domain="X-Shopify-Shop-Domain",e.Hmac="X-Shopify-Hmac-Sha256",e.Topic="X-Shopify-Topic",e.SubTopic="X-Shopify-Sub-Topic",e.WebhookId="X-Shopify-Webhook-Id",e.StorefrontPrivateToken="Shopify-Storefront-Private-Token",e.StorefrontSDKVariant="X-SDK-Variant",e.StorefrontSDKVersion="X-SDK-Version"})(Uh||(_e.ShopifyHeader=Uh={}));var jh;(function(e){e.Rest="rest",e.Graphql="graphql"})(jh||(_e.ClientType=jh={}));_e.privacyTopics=["CUSTOMERS_DATA_REQUEST","CUSTOMERS_REDACT","SHOP_REDACT"];var qh;(function(e){e.OneTime="ONE_TIME",e.Every30Days="EVERY_30_DAYS",e.Annual="ANNUAL",e.Usage="USAGE"})(qh||(_e.BillingInterval=qh={}));var Vh;(function(e){e.ApplyImmediately="APPLY_IMMEDIATELY",e.ApplyOnNextBillingCycle="APPLY_ON_NEXT_BILLING_CYCLE",e.Standard="STANDARD"})(Vh||(_e.BillingReplacementBehavior=Vh={}));var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.SHOPIFY_API_LIBRARY_VERSION=void 0;Aa.SHOPIFY_API_LIBRARY_VERSION="9.5.0";var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.log=void 0;const js=_e;function R1(e){return function(t,r,n={}){if(t>e.logger.level)return;const a=[];e.logger.timestamps&&a.push(`${new Date().toISOString().slice(0,-5)}Z`);let s=n.package||"shopify-api";switch(delete n.package,t){case js.LogSeverity.Debug:s=`${s}/DEBUG`;break;case js.LogSeverity.Info:s=`${s}/INFO`;break;case js.LogSeverity.Warning:s=`${s}/WARNING`;break;case js.LogSeverity.Error:s=`${s}/ERROR`;break}a.push(s);const o=[];Object.entries(n).forEach(([c,u])=>{o.push(`${c}: ${u}`)});let i="";o.length>0&&(i=` | {${o.join(", ")}}`),e.logger.log(t,`[${a.join("] [")}] ${r}${i}`)}}ni.log=R1;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.logger=void 0;const qs=de,k1=T1,Xa=_e,I1=j,x1=Aa,$1=ni;function O1(e){const t=(0,$1.log)(e);return{log:t,debug:(r,n={})=>qs.__awaiter(this,void 0,void 0,function*(){return t(Xa.LogSeverity.Debug,r,n)}),info:(r,n={})=>qs.__awaiter(this,void 0,void 0,function*(){return t(Xa.LogSeverity.Info,r,n)}),warning:(r,n={})=>qs.__awaiter(this,void 0,void 0,function*(){return t(Xa.LogSeverity.Warning,r,n)}),error:(r,n={})=>qs.__awaiter(this,void 0,void 0,function*(){return t(Xa.LogSeverity.Error,r,n)}),deprecated:N1(t)}}Qe.logger=O1;function N1(e){return function(t,r){if((0,k1.compare)(x1.SHOPIFY_API_LIBRARY_VERSION,t,">="))throw new I1.FeatureDeprecatedError(`Feature was deprecated in version ${t}`);return e(Xa.LogSeverity.Warning,`[Deprecated | ${t}] ${r}`)}}Object.defineProperty(ri,"__esModule",{value:!0});ri.loadRestResources=void 0;const L1=Qe;function M1({resources:e,config:t,RestClient:r}){const n=Object.keys(e)[0];return t.apiVersion!==e[n].apiVersion&&(0,L1.logger)(t).warning(`Loading REST resources for API version ${e[n].apiVersion}, which doesn't match the default ${t.apiVersion}`),Object.fromEntries(Object.entries(e).map(([a,s])=>{class o extends s{}return o.setClassProperties({Client:r,config:t}),Object.entries(o.hasOne).map(([i,c])=>{c.setClassProperties({Client:r,config:t})}),Object.entries(o.hasMany).map(([i,c])=>{c.setClassProperties({Client:r,config:t})}),Reflect.defineProperty(o,"name",{value:a}),[a,o]}))}ri.loadRestResources=M1;var ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.logDisabledFutureFlags=void 0;function F1(e,t){var r;if(!e._logDisabledFutureFlags)return;const n=(a,s)=>t.info(`Future flag ${a} is disabled.

  ${s}
`);!((r=e.future)===null||r===void 0)&&r.v10_lineItemBilling||n("v10_lineItemBilling","Enable this flag to use the new billing API, that supports multiple line items per plan.")}ai.logDisabledFutureFlags=F1;var si={},gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.AuthScopes=void 0;class Lr{constructor(t){let r=[];typeof t=="string"?r=t.split(new RegExp(`${Lr.SCOPE_DELIMITER}\\s*`)):Array.isArray(t)?r=t:t&&(r=Array.from(t.expandedScopes)),r=r.map(o=>o.trim()).filter(o=>o.length);const n=this.getImpliedScopes(r),a=new Set(r),s=new Set(n);this.compressedScopes=new Set([...a].filter(o=>!s.has(o))),this.expandedScopes=new Set([...a,...s])}has(t){let r;return t instanceof Lr?r=t:r=new Lr(t),r.toArray().filter(n=>!this.expandedScopes.has(n)).length===0}equals(t){let r;return t instanceof Lr?r=t:r=new Lr(t),this.compressedScopes.size===r.compressedScopes.size&&this.toArray().filter(n=>!r.has(n)).length===0}toString(){return this.toArray().join(Lr.SCOPE_DELIMITER)}toArray(){return[...this.compressedScopes]}getImpliedScopes(t){return t.reduce((r,n)=>{const a=n.match(/^(unauthenticated_)?write_(.*)$/);return a&&r.push(`${a[1]?a[1]:""}read_${a[2]}`),r},[])}}gs.AuthScopes=Lr;Lr.SCOPE_DELIMITER=",";Object.defineProperty(si,"__esModule",{value:!0});si.validateConfig=void 0;const H1=de,D1=j,da=_e,zl=gs,B1=Qe;function W1(e){var t;const r={apiKey:"",apiSecretKey:"",scopes:new zl.AuthScopes([]),hostName:"",hostScheme:"https",apiVersion:da.LATEST_API_VERSION,isEmbeddedApp:!0,isCustomStoreApp:!1,logger:{log:j1,level:da.LogSeverity.Info,httpRequests:!1,timestamps:!1},future:{},_logDisabledFutureFlags:!0},n=["apiSecretKey","hostName"];(!("isCustomStoreApp"in e)||!e.isCustomStoreApp)&&(n.push("apiKey"),n.push("scopes")),"isCustomStoreApp"in e&&e.isCustomStoreApp&&(!("adminApiAccessToken"in e)||((t=e.adminApiAccessToken)===null||t===void 0?void 0:t.length)===0)&&n.push("adminApiAccessToken");const a=[];if(n.forEach(g=>{U1(e[g])||a.push(g)}),a.length)throw new D1.ShopifyError(`Cannot initialize Shopify API Library. Missing values for: ${a.join(", ")}`);const{hostScheme:s,isCustomStoreApp:o,adminApiAccessToken:i,userAgentPrefix:c,logger:u,privateAppStorefrontAccessToken:d,customShopDomains:p,billing:f}=e,h=H1.__rest(e,["hostScheme","isCustomStoreApp","adminApiAccessToken","userAgentPrefix","logger","privateAppStorefrontAccessToken","customShopDomains","billing"]);return Object.assign(r,h,{hostName:e.hostName.replace(/\/$/,""),scopes:e.scopes instanceof zl.AuthScopes?e.scopes:new zl.AuthScopes(e.scopes),hostScheme:s??r.hostScheme,isCustomStoreApp:o??r.isCustomStoreApp,adminApiAccessToken:i??r.adminApiAccessToken,userAgentPrefix:c??r.userAgentPrefix,logger:Object.assign(Object.assign({},r.logger),u||{}),privateAppStorefrontAccessToken:d??r.privateAppStorefrontAccessToken,customShopDomains:p??r.customShopDomains,billing:f??r.billing}),r.isCustomStoreApp&&e.adminApiAccessToken===e.apiSecretKey&&(0,B1.logger)(r).warning("adminApiAccessToken is set to the same value as apiSecretKey. adminApiAccessToken should be set to the Admin API access token for custom store apps; apiSecretKey should be set to the custom store app's API secret key."),r}si.validateConfig=W1;function U1(e){return e==null?!1:typeof e=="string"||Array.isArray(e)?e.length>0:!0}function j1(e,t){switch(e){case da.LogSeverity.Debug:console.debug(t);break;case da.LogSeverity.Info:console.log(t);break;case da.LogSeverity.Warning:console.warn(t);break;case da.LogSeverity.Error:console.error(t);break}}var oi={},gn={},Dn={};const ii="GraphQL Client",Kh=0,zh=3,gb="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",yb="Response returned unexpected Content-Type:",bb="An unknown error has occurred. The API did not return a data object or any errors in its response.",Yc={json:"application/json",multipart:"multipart/mixed"},Gh="X-SDK-Variant",Jh="X-SDK-Version",q1="shopify-graphql-client",V1="0.10.3",vb=1e3,K1=[429,503],Eb=/@(defer)\b/i,Xh=`\r
`,z1=/boundary="?([^=";]+)"?/i,Yh=Xh+Xh;function nn(e,t=ii){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function Pa(e){return e instanceof Error?e.message:JSON.stringify(e)}function _b(e){return e instanceof Error&&e.cause?e.cause:void 0}function Sb(e){return e.flatMap(({errors:t})=>t??[])}function To({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<Kh||t>zh))throw new Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than ${Kh} or greater than ${zh}`)}function Nt(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function wb(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:wb(e,n)}function Ab(e,t){return Object.keys(t||{}).reduce((r,n)=>(typeof t[n]=="object"||Array.isArray(t[n]))&&e[n]?(r[n]=Ab(e[n],t[n]),r):(r[n]=t[n],r),Array.isArray(e)?[...e]:{...e})}function Pb([e,...t]){return t.reduce(Ab,{...e})}function Cb({clientLogger:e,customFetchApi:t=fetch,client:r=ii,defaultRetryWaitTime:n=vb,retriableCodes:a=K1}){const s=async(o,i,c)=>{const u=i+1,d=c+1;let p;try{if(p=await t(...o),e({type:"HTTP-Response",content:{requestParams:o,response:p}}),!p.ok&&a.includes(p.status)&&u<=d)throw new Error;return p}catch(f){if(u<=d){const h=p==null?void 0:p.headers.get("Retry-After");return await G1(h?parseInt(h,10):n),e({type:"HTTP-Retry",content:{requestParams:o,lastResponse:p,retryAttempt:i,maxRetries:c}}),s(o,u,c)}throw new Error(nn(`${c>0?`Attempted maximum number of ${c} network retries. Last message - `:""}${Pa(f)}`,r))}};return s}async function G1(e){return new Promise(t=>setTimeout(t,e))}function J1({headers:e,url:t,customFetchApi:r=fetch,retries:n=0,logger:a}){To({client:ii,retries:n});const s={headers:e,url:t,retries:n},o=X1(a),i=Cb({customFetchApi:r,clientLogger:o,defaultRetryWaitTime:vb}),c=Y1(i,s),u=Q1(c),d=sR(c);return{config:s,fetch:c,request:u,requestStream:d}}function X1(e){return t=>{e&&e(t)}}async function Tb(e){const{errors:t,data:r,extensions:n}=await e.json();return{...Nt("data",r),...Nt("extensions",n),...t||!r?{errors:{networkStatusCode:e.status,message:nn(t?gb:bb),...Nt("graphQLErrors",t),response:e}}:{}}}function Y1(e,{url:t,headers:r,retries:n}){return async(a,s={})=>{const{variables:o,headers:i,url:c,retries:u}=s,d=JSON.stringify({query:a,variables:o});To({client:ii,retries:u});const p=Object.entries({...r,...i}).reduce((h,[g,y])=>(h[g]=Array.isArray(y)?y.join(", "):y.toString(),h),{});return!p[Gh]&&!p[Jh]&&(p[Gh]=q1,p[Jh]=V1),e([c??t,{method:"POST",headers:p,body:d}],1,u??n)}}function Q1(e){return async(...t)=>{if(Eb.test(t[0]))throw new Error(nn("This operation will result in a streamable response - use requestStream() instead."));try{const r=await e(...t),{status:n,statusText:a}=r,s=r.headers.get("content-type")||"";return r.ok?s.includes(Yc.json)?Tb(r):{errors:{networkStatusCode:n,message:nn(`${yb} ${s}`),response:r}}:{errors:{networkStatusCode:n,message:nn(a),response:r}}}catch(r){return{errors:{message:Pa(r)}}}}}async function*Z1(e){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(const r of e.body)yield t.decode(r);else{const r=e.body.getReader();let n;try{for(;!(n=await r.read()).done;)yield t.decode(n.value)}finally{r.cancel()}}}function eR(e,t){return{async*[Symbol.asyncIterator](){try{let r="";for await(const n of e)if(r+=n,r.indexOf(t)>-1){const a=r.lastIndexOf(t),o=r.slice(0,a).split(t).filter(i=>i.trim().length>0).map(i=>i.slice(i.indexOf(Yh)+Yh.length).trim());o.length>0&&(yield o),r=r.slice(a+t.length),r.trim()==="--"&&(r="")}}catch(r){throw new Error(`Error occured while processing stream payload - ${Pa(r)}`)}}}}function tR(e){return{async*[Symbol.asyncIterator](){yield{...await Tb(e),hasNext:!1}}}}function rR(e){return e.map(t=>{try{return JSON.parse(t)}catch(r){throw new Error(`Error in parsing multipart response - ${Pa(r)}`)}}).map(t=>{const{data:r,incremental:n,hasNext:a,extensions:s,errors:o}=t;if(!n)return{data:r||{},...Nt("errors",o),...Nt("extensions",s),hasNext:a};const i=n.map(({data:c,path:u,errors:d})=>({data:c&&u?wb(u,c):{},...Nt("errors",d)}));return{data:i.length===1?i[0].data:Pb([...i.map(({data:c})=>c)]),...Nt("errors",Sb(i)),hasNext:a}})}function nR(e,t){if(e.length>0)throw new Error(gb,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(bb)}function aR(e,t){var i;const r=(t??"").match(z1),n=`--${r?r[1]:"-"}`;if(!((i=e.body)!=null&&i.getReader)&&!e.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:e});const a=Z1(e);let s={},o;return{async*[Symbol.asyncIterator](){var c;try{let u=!0;for await(const d of eR(a,n)){const p=rR(d);o=((c=p.find(h=>h.extensions))==null?void 0:c.extensions)??o;const f=Sb(p);s=Pb([s,...p.map(({data:h})=>h)]),u=p.slice(-1)[0].hasNext,nR(f,s),yield{...Nt("data",s),...Nt("extensions",o),hasNext:u}}if(u)throw new Error("Response stream terminated unexpectedly")}catch(u){const d=_b(u);yield{...Nt("data",s),...Nt("extensions",o),errors:{message:nn(Pa(u)),networkStatusCode:e.status,...Nt("graphQLErrors",d==null?void 0:d.graphQLErrors),response:e},hasNext:!1}}}}}function sR(e){return async(...t)=>{if(!Eb.test(t[0]))throw new Error(nn("This operation does not result in a streamable response - use request() instead."));try{const r=await e(...t),{statusText:n}=r;if(!r.ok)throw new Error(n,{cause:r});const a=r.headers.get("content-type")||"";switch(!0){case a.includes(Yc.json):return tR(r);case a.includes(Yc.multipart):return aR(r,a);default:throw new Error(`${yb} ${a}`,{cause:r})}}catch(r){return{async*[Symbol.asyncIterator](){const n=_b(r);yield{errors:{message:nn(Pa(r)),...Nt("networkStatusCode",n==null?void 0:n.status),...Nt("response",n)},hasNext:!1}}}}}}function Rb({client:e,storeDomain:t}){try{if(!t||typeof t!="string")throw new Error;const r=t.trim(),n=r.match(/^https?:/)?r:`https://${r}`,a=new URL(n);return a.protocol="https",a.origin}catch{throw new Error(`${e}: a valid store domain ("${t}") must be provided`)}}function li({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){const a=`${e}: the provided apiVersion ("${r}")`,s=`Currently supported API versions: ${t.join(", ")}`;if(!r||typeof r!="string")throw new Error(`${a} is invalid. ${s}`);const o=r.trim();t.includes(o)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${a} is likely deprecated or not supported. ${s}`))}function Ro(e){const t=e*3-2;return t===10?t:`0${t}`}function Gl(e,t,r){const n=t-r;return n<=0?`${e-1}-${Ro(n+4)}`:`${e}-${Ro(n)}`}function oR(){const e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${Ro(n)}`}}function kb(){const{year:e,quarter:t,version:r}=oR(),n=t===4?`${e+1}-01`:`${e}-${Ro(t+1)}`;return[Gl(e,t,3),Gl(e,t,2),Gl(e,t,1),r,n,"unstable"]}function iR(e){return t=>({...t??{},...e.headers})}function lR({getHeaders:e,getApiUrl:t}){return(r,n)=>{const a=[r];if(n&&Object.keys(n).length>0){const{variables:s,apiVersion:o,headers:i,retries:c}=n;a.push({...s?{variables:s}:{},...i?{headers:e(i)}:{},...o?{url:t(o)}:{},...c?{retries:c}:{}})}return a}}const ko="application/json",Ib="0.2.8",xb="X-Shopify-Access-Token",qt="Admin API Client",cR=[429,500,503],uR=1e3;function $b(e){if(!e)throw new Error(`${qt}: an access token must be provided`)}function Ob(){if(typeof window<"u")throw new Error(`${qt}: this client should not be used in the browser`)}function dR({storeDomain:e,apiVersion:t,accessToken:r,userAgentPrefix:n,retries:a=0,customFetchApi:s,logger:o}){const i=kb(),c=Rb({client:qt,storeDomain:e}),u={client:qt,currentSupportedApiVersions:i,logger:o};Ob(),li({client:qt,currentSupportedApiVersions:i,apiVersion:t,logger:o}),$b(r);const d=pR(c,t,u),p={storeDomain:c,apiVersion:t,accessToken:r,headers:{"Content-Type":ko,Accept:ko,[xb]:r,"User-Agent":`${n?`${n} | `:""}${qt} v${Ib}`},apiUrl:d(),userAgentPrefix:n},f=J1({headers:p.headers,url:p.apiUrl,retries:a,customFetchApi:s,logger:o}),h=iR(p),g=hR(p,d),y=lR({getHeaders:h,getApiUrl:g});return Object.freeze({config:p,getHeaders:h,getApiUrl:g,fetch:(...v)=>f.fetch(...y(...v)),request:(...v)=>f.request(...y(...v))})}function pR(e,t,r){return n=>{n&&li({...r,apiVersion:n});const a=(n??t).trim();return`${e}/admin/api/${a}/graphql.json`}}function hR(e,t){return r=>r?t(r):e.apiUrl}var pa;(function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Delete="DELETE"})(pa||(pa={}));function fR({storeDomain:e,apiVersion:t,accessToken:r,userAgentPrefix:n,logger:a,customFetchApi:s=fetch,retries:o=0,scheme:i="https",defaultRetryTime:c=uR,formatPaths:u=!0}){const d=kb(),p=Rb({client:qt,storeDomain:e}).replace("https://",`${i}://`),f={client:qt,currentSupportedApiVersions:d,logger:a};Ob(),li({client:qt,currentSupportedApiVersions:d,apiVersion:t,logger:a}),$b(r),To({client:qt,retries:o});const h=mR(p,t,f,u),g=gR(a),y=Cb({customFetchApi:s,clientLogger:g,defaultRetryWaitTime:c,client:qt,retriableCodes:cR}),b=async(v,{method:_,data:A,headers:T,searchParams:k,retries:I=0,apiVersion:E})=>{To({client:qt,retries:I});const P=h(v,k??{},E),C=Qh(T??{}),x=[...C["user-agent"]?[C["user-agent"]]:[],...n?[n]:[],`${qt} v${Ib}`].join(" | "),$=Qh({"Content-Type":ko,...C,Accept:ko,[xb]:r,"User-Agent":x}),M=A&&typeof A!="string"?JSON.stringify(A):A;return y([P,{method:_,headers:$,...M?{body:M}:void 0}],1,I??o)};return{get:(v,_)=>b(v,{method:pa.Get,..._}),put:(v,_)=>b(v,{method:pa.Put,..._}),post:(v,_)=>b(v,{method:pa.Post,..._}),delete:(v,_)=>b(v,{method:pa.Delete,..._})}}function mR(e,t,r,n=!0){return(a,s,o)=>{o&&li({...r,apiVersion:o});function i(f,h,g){if(Array.isArray(g)){g.forEach(y=>i(f,`${h}[]`,y));return}else if(typeof g=="object"){Object.entries(g).forEach(([y,b])=>i(f,`${h}[${y}]`,b));return}f.append(h,String(g))}const c=(o??t).trim();let u=a.replace(/^\//,"");n&&(u.startsWith("admin")||(u=`admin/api/${c}/${u}`),u.endsWith(".json")||(u=`${u}.json`));const d=new URLSearchParams;if(s)for(const[f,h]of Object.entries(s))i(d,f,h);const p=d.toString()?`?${d.toString()}`:"";return`${e}/${u}${p}`}}function gR(e){return t=>{e&&e(t)}}function Qh(e){const t={};for(const[r,n]of Object.entries(e))t[r.toLowerCase()]=Array.isArray(n)?n.join(", "):String(n);return t}const yR=Object.freeze(Object.defineProperty({__proto__:null,createAdminApiClient:dR,createAdminRestApiClient:fR},Symbol.toStringTag,{value:"Module"})),Nb=pn(yR);var Jt={},Lb={},Mb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Method=void 0,function(s){s.Get="GET",s.Post="POST",s.Put="PUT",s.Patch="PATCH",s.Delete="DELETE",s.Head="HEAD",s.Options="OPTIONS",s.Connect="CONNECT"}(e.Method||(e.Method={})),e.StatusCode=void 0,function(s){s[s.Continue=100]="Continue",s[s.SwitchingProtocols=101]="SwitchingProtocols",s[s.Ok=200]="Ok",s[s.Created=201]="Created",s[s.Accepted=202]="Accepted",s[s.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",s[s.NoContent=204]="NoContent",s[s.ResetContent=205]="ResetContent",s[s.PartialContent=206]="PartialContent",s[s.MultipleChoices=300]="MultipleChoices",s[s.MovedPermanently=301]="MovedPermanently",s[s.Found=302]="Found",s[s.SeeOther=303]="SeeOther",s[s.NotModified=304]="NotModified",s[s.UseProxy=305]="UseProxy",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.PaymentRequired=402]="PaymentRequired",s[s.Forbidden=403]="Forbidden",s[s.NotFound=404]="NotFound",s[s.MethodNotAllowed=405]="MethodNotAllowed",s[s.NotAcceptable=406]="NotAcceptable",s[s.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",s[s.RequestTimeout=408]="RequestTimeout",s[s.Conflict=409]="Conflict",s[s.Gone=410]="Gone",s[s.LengthRequired=411]="LengthRequired",s[s.PreconditionFailed=412]="PreconditionFailed",s[s.RequestEntityTooLarge=413]="RequestEntityTooLarge",s[s.RequestUriTooLong=414]="RequestUriTooLong",s[s.UnsupportedMediaType=415]="UnsupportedMediaType",s[s.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",s[s.ExpectationFailed=417]="ExpectationFailed",s[s.ImATeapot=418]="ImATeapot",s[s.UnprocessableEntity=422]="UnprocessableEntity",s[s.TooManyRequests=429]="TooManyRequests",s[s.InternalServerError=500]="InternalServerError",s[s.NotImplemented=501]="NotImplemented",s[s.BadGateway=502]="BadGateway",s[s.ServiceUnavailable=503]="ServiceUnavailable",s[s.GatewayTimeout=504]="GatewayTimeout",s[s.HttpVersionNotSupported=505]="HttpVersionNotSupported"}(e.StatusCode||(e.StatusCode={})),e.Header=void 0,function(s){s.Accept="Accept",s.AcceptEncoding="Accept-Encoding",s.AcceptLanguage="Accept-Language",s.AccessControlAllowCredentials="Access-Control-Allow-Credentials",s.AccessControlAllowHeaders="Access-Control-Allow-Headers",s.AccessControlAllowMethods="Access-Control-Allow-Methods",s.AccessControlAllowOrigin="Access-Control-Allow-Origin",s.AccessControlExposeHeaders="Access-Control-Expose-Headers",s.AccessControlMaxAge="Access-Control-Max-Age",s.AccessControlRequestHeaders="Access-Control-Request-Headers",s.AccessControlRequestMethod="Access-Control-Request-Method",s.Authorization="Authorization",s.CacheControl="Cache-Control",s.CacheStatus="Cache-Status",s.Connection="Connection",s.ContentDisposition="Content-Disposition",s.ContentEncoding="Content-Encoding",s.ContentLength="Content-Length",s.ContentSecurityPolicy="Content-Security-Policy",s.ContentSecurityPolicyReportOnly="Content-Security-Policy-Report-Only",s.ContentType="Content-Type",s.ContentTypeOptions="X-Content-Type-Options",s.Cookie="Cookie",s.DownloadOptions="X-Download-Options",s.ETag="ETag",s.Forwarded="Forwarded",s.ForwardedFor="X-Forwarded-For",s.ForwardedHost="X-Forwarded-Host",s.ForwardedProtocol="X-Forwarded-Proto",s.FrameOptions="X-Frame-Options",s.Host="Host",s.IfNoneMatch="If-None-Match",s.Location="Location",s.Origin="Origin",s.ReferrerPolicy="Referrer-Policy",s.ServerTiming="Server-Timing",s.StrictTransportSecurity="Strict-Transport-Security",s.TimingAllowOrigin="Timing-Allow-Origin",s.Trailer="Trailer",s.TransferEncoding="Transfer-Encoding",s.UserAgent="User-Agent",s.WwwAuthenticate="WWW-Authenticate",s.XhrRedirectedTo="X-XHR-Redirected-To",s.XhrReferer="X-XHR-Referer",s.XssProtecton="X-XSS-Protection",s.XContentTypeOptions="X-Content-Type-Options",s.XDownloadOptions="X-Download-Options",s.XForwardedFor="X-Forwarded-For",s.XForwardedHost="X-Forwarded-Host",s.XForwardedProto="X-Forwarded-Proto",s.XFrameOptions="X-Frame-Options",s.XXhrRedirectedTo="X-XHR-Redirected-To",s.XXhrReferer="X-XHR-Referer",s.XXssProtecton="X-XSS-Protection",s.XXssProtection="X-XSS-Protection"}(e.Header||(e.Header={})),e.CspDirective=void 0,function(s){s.ChildSrc="child-src",s.ConnectSrc="connect-src",s.DefaultSrc="default-src",s.FontSrc="font-src",s.FrameSrc="frame-src",s.ImgSrc="img-src",s.ManifestSrc="manifest-src",s.MediaSrc="media-src",s.ObjectSrc="object-src",s.PrefetchSrc="prefetch-src",s.ScriptSrc="script-src",s.StyleSrc="style-src",s.WebrtcSrc="webrtc-src",s.WorkerSrc="worker-src",s.BaseUri="base-uri",s.PluginTypes="plugin-types",s.Sandbox="sandbox",s.FormAction="form-action",s.FrameAncestors="frame-ancestors",s.ReportUri="report-uri",s.BlockAllMixedContent="block-all-mixed-content",s.RequireSriFor="require-sri-for",s.UpgradeInsecureRequests="upgrade-insecure-requests"}(e.CspDirective||(e.CspDirective={})),e.CspSandboxAllow=void 0,function(s){s.Forms="allow-forms",s.SameOrigin="allow-same-origin",s.Scripts="allow-scripts",s.Popups="allow-popups",s.Modals="allow-modals",s.OrientationLock="allow-orientation-lock",s.PointerLock="allow-pointer-lock",s.Presentation="allow-presentation",s.PopupsToEscapeSandbox="allow-popups-to-escape-sandbox",s.TopNavigation="allow-top-navigation"}(e.CspSandboxAllow||(e.CspSandboxAllow={})),e.SpecialSource=void 0,function(s){s.Any="*",s.Self="'self'",s.UnsafeInline="'unsafe-inline'",s.UnsafeEval="'unsafe-eval'",s.None="'none'",s.StrictDynamic="'strict-dynamic'",s.ReportSample="'report-sample'",s.Data="data:",s.Blob="blob:",s.FileSystem="filesystem:"}(e.SpecialSource||(e.SpecialSource={})),e.SriAsset=void 0,function(s){s.Script="script",s.Style="style"}(e.SriAsset||(e.SriAsset={})),e.HashAlgorithm=void 0,function(s){s.Sha256="sha256",s.Sha384="sha384",s.Sha512="sha512"}(e.HashAlgorithm||(e.HashAlgorithm={})),e.ResponseType=void 0,function(s){s.Informational="1xx",s.Success="2xx",s.Redirection="3xx",s.ClientError="4xx",s.ServerError="5xx",s.Unknown="Unknown"}(e.ResponseType||(e.ResponseType={}));function t(s){return s>=100&&s<200?e.ResponseType.Informational:s>=200&&s<300?e.ResponseType.Success:s>=300&&s<400?e.ResponseType.Redirection:s>=400&&s<500?e.ResponseType.ClientError:s>=500&&s<600?e.ResponseType.ServerError:e.ResponseType.Unknown}function r(s){return`'nonce-${s}'`}function n(s,o){return`'${s}-${o}'`}e.CacheControl=void 0,function(s){s.NoCache="no-cache",s.NoStore="no-store",s.MustRevalidate="must-revalidate",s.MaxAge="max-age"}(e.CacheControl||(e.CacheControl={}));const a=`${e.CacheControl.NoCache},${e.CacheControl.NoStore},${e.CacheControl.MustRevalidate},${e.CacheControl.MaxAge}=0`;e.getResponseType=t,e.hashSource=n,e.noCache=a,e.nonceSource=r})(Mb);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Mb;Object.defineProperty(e,"CacheControl",{enumerable:!0,get:function(){return t.CacheControl}}),Object.defineProperty(e,"CspDirective",{enumerable:!0,get:function(){return t.CspDirective}}),Object.defineProperty(e,"CspSandboxAllow",{enumerable:!0,get:function(){return t.CspSandboxAllow}}),Object.defineProperty(e,"HashAlgorithm",{enumerable:!0,get:function(){return t.HashAlgorithm}}),Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return t.Header}}),Object.defineProperty(e,"Method",{enumerable:!0,get:function(){return t.Method}}),Object.defineProperty(e,"ResponseType",{enumerable:!0,get:function(){return t.ResponseType}}),Object.defineProperty(e,"SpecialSource",{enumerable:!0,get:function(){return t.SpecialSource}}),Object.defineProperty(e,"SriAsset",{enumerable:!0,get:function(){return t.SriAsset}}),Object.defineProperty(e,"StatusCode",{enumerable:!0,get:function(){return t.StatusCode}}),e.getResponseType=t.getResponseType,e.hashSource=t.hashSource,e.noCache=t.noCache,e.nonceSource=t.nonceSource})(Lb);var Yu=Lb;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.throwFailedRequest=Jt.clientLoggerFactory=Jt.getUserAgent=void 0;const bR=de,Jl=Yu,sa=bR.__importStar(j),vR=_e,ER=Aa,io=Ur,Xl=Qe;function _R(e){let t=`${vR.LIBRARY_NAME} v${ER.SHOPIFY_API_LIBRARY_VERSION} | ${(0,io.abstractRuntimeString)()}`;return e.userAgentPrefix&&(t=`${e.userAgentPrefix} | ${t}`),t}Jt.getUserAgent=_R;function SR(e){return t=>{if(e.logger.httpRequests)switch(t.type){case"HTTP-Response":{const r=t.content;(0,Xl.logger)(e).debug("Received response for HTTP request",{requestParams:JSON.stringify(r.requestParams),response:JSON.stringify(r.response)});break}case"HTTP-Retry":{const r=t.content;(0,Xl.logger)(e).debug("Retrying HTTP request",{requestParams:JSON.stringify(r.requestParams),retryAttempt:r.retryAttempt,maxRetries:r.maxRetries,response:JSON.stringify(r.lastResponse)});break}default:{(0,Xl.logger)(e).debug(`HTTP request event: ${t.content}`);break}}}}Jt.clientLoggerFactory=SR;function wR(e,t,r){var n,a,s;const o=(0,io.canonicalizeHeaders)(Object.fromEntries((n=t.headers.entries())!==null&&n!==void 0?n:[]));if(t.status===Jl.StatusCode.Ok&&e.errors.graphQLErrors)throw new sa.GraphqlQueryError({message:(s=(a=e.errors.graphQLErrors)===null||a===void 0?void 0:a[0].message)!==null&&s!==void 0?s:"GraphQL operation failed",response:t,headers:o,body:e});const i=[];e.errors&&i.push(JSON.stringify(e.errors,null,2));const c=(0,io.getHeader)(o,"x-request-id");c&&i.push(`If you report this error, please include this id: ${c}`);const u=i.length?`:
${i.join(`
`)}`:"",d=t.status,p=t.statusText;switch(!0){case t.status===Jl.StatusCode.TooManyRequests:{if(r)throw new sa.HttpMaxRetriesError("Attempted the maximum number of retries for HTTP request.");{const f=(0,io.getHeader)(o,"Retry-After");throw new sa.HttpThrottlingError({message:`Shopify is throttling requests ${u}`,code:d,statusText:p,body:e,headers:o,retryAfter:f?parseFloat(f):void 0})}}case t.status>=Jl.StatusCode.InternalServerError:throw r?new sa.HttpMaxRetriesError("Attempted the maximum number of retries for HTTP request."):new sa.HttpInternalError({message:`Shopify internal error${u}`,code:d,statusText:p,body:e,headers:o});default:throw new sa.HttpResponseError({message:`Received an error response (${t.status} ${t.statusText}) from Shopify${u}`,code:d,statusText:p,body:e,headers:o})}}Jt.throwFailedRequest=wR;Object.defineProperty(Dn,"__esModule",{value:!0});Dn.graphqlClientClass=Dn.GraphqlClient=void 0;const Qc=de,AR=Nb,Zh=Qe,ef=Qc.__importStar(j),PR=Ur,Yl=Jt;class Fb{constructor(t){var r,n;const a=this.graphqlClass().config;if(!a.isCustomStoreApp&&!t.session.accessToken)throw new ef.MissingRequiredArgument("Missing access token when creating GraphQL client");if(t.apiVersion){const s=t.apiVersion===a.apiVersion?`Admin client has a redundant API version override to the default ${t.apiVersion}`:`Admin client overriding default API version ${a.apiVersion} with ${t.apiVersion}`;(0,Zh.logger)(a).debug(s)}this.session=t.session,this.apiVersion=t.apiVersion,this.client=(0,AR.createAdminApiClient)({accessToken:(r=a.adminApiAccessToken)!==null&&r!==void 0?r:this.session.accessToken,apiVersion:(n=this.apiVersion)!==null&&n!==void 0?n:a.apiVersion,storeDomain:this.session.shop,customFetchApi:PR.abstractFetch,logger:(0,Yl.clientLoggerFactory)(a),userAgentPrefix:(0,Yl.getUserAgent)(a)})}query(t){var r;return Qc.__awaiter(this,void 0,void 0,function*(){if((0,Zh.logger)(this.graphqlClass().config).deprecated("10.0.0",`The query method is deprecated, and was replaced with the request method.
See the migration guide: https://github.com/Shopify/shopify-api-js/blob/main/packages/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.`),typeof t.data=="string"&&t.data.length===0||Object.entries(t.data).length===0)throw new ef.MissingRequiredArgument("Query missing.");let n,a;typeof t.data=="string"?n=t.data:(n=t.data.query,a=t.data.variables);const s=Object.fromEntries(Object.entries((r=t==null?void 0:t.extraHeaders)!==null&&r!==void 0?r:{}).map(([i,c])=>[i,Array.isArray(c)?c.join(", "):c.toString()]));return{body:yield this.request(n,{headers:s,retries:t.tries?t.tries-1:void 0,variables:a}),headers:{}}})}request(t,r){var n;return Qc.__awaiter(this,void 0,void 0,function*(){const a=yield this.client.request(t,Object.assign({apiVersion:this.apiVersion||this.graphqlClass().config.apiVersion},r));if(a.errors){const s=a.errors.response;(0,Yl.throwFailedRequest)(a,s,((n=r==null?void 0:r.retries)!==null&&n!==void 0?n:0)>0)}return a})}graphqlClass(){return this.constructor}}Dn.GraphqlClient=Fb;function CR({config:e}){class t extends Fb{}return t.config=e,Reflect.defineProperty(t,"name",{value:"GraphqlClient"}),t}Dn.graphqlClientClass=CR;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.restClientClass=Bn.RestClient=void 0;const Rn=de,TR=Nb,zr=Yu,Ql=Jt,Ba=Ur,tf=Rn.__importStar(j),rf=Qe;class Ar{constructor({session:t,apiVersion:r}){var n;this.loggedDeprecations={};const a=this.restClass().config;if(!a.isCustomStoreApp&&!t.accessToken)throw new tf.MissingRequiredArgument("Missing access token when creating REST client");if(r){const o=r===a.apiVersion?`REST client has a redundant API version override to the default ${r}`:`REST client overriding default API version ${a.apiVersion} with ${r}`;(0,rf.logger)(a).debug(o)}const s=(n=a.adminApiAccessToken)!==null&&n!==void 0?n:a.apiSecretKey;this.session=t,this.apiVersion=r??a.apiVersion,this.client=(0,TR.createAdminRestApiClient)({scheme:a.hostScheme,storeDomain:t.shop,apiVersion:r??a.apiVersion,accessToken:a.isCustomStoreApp?s:t.accessToken,customFetchApi:Ba.abstractFetch,logger:(0,Ql.clientLoggerFactory)(a),userAgentPrefix:(0,Ql.getUserAgent)(a),defaultRetryTime:this.restClass().RETRY_WAIT_TIME,formatPaths:this.restClass().formatPaths})}get(t){return Rn.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:zr.Method.Get},t))})}post(t){return Rn.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:zr.Method.Post},t))})}put(t){return Rn.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:zr.Method.Put},t))})}delete(t){return Rn.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:zr.Method.Delete},t))})}request(t){var r,n,a;return Rn.__awaiter(this,void 0,void 0,function*(){const s={headers:Object.assign(Object.assign({},t.extraHeaders),t.type?{"Content-Type":t.type.toString()}:{}),retries:t.tries?t.tries-1:void 0,searchParams:t.query};let o;switch(t.method){case zr.Method.Get:o=yield this.client.get(t.path,s);break;case zr.Method.Put:o=yield this.client.put(t.path,Object.assign(Object.assign({},s),{data:t.data}));break;case zr.Method.Post:o=yield this.client.post(t.path,Object.assign(Object.assign({},s),{data:t.data}));break;case zr.Method.Delete:o=yield this.client.delete(t.path,s);break;default:throw new tf.InvalidRequestError(`Unsupported request method '${t.method}'`)}const i=yield o.json(),c=(0,Ba.canonicalizeHeaders)(Object.fromEntries(o.headers.entries()));o.ok||(0,Ql.throwFailedRequest)(i,o,((r=t.tries)!==null&&r!==void 0?r:1)>1);const u={body:i,headers:c};yield this.logDeprecations({method:t.method,url:t.path,headers:s.headers,body:t.data?JSON.stringify(t.data):void 0},u);const d=o.headers.get("Link");if(d!==void 0){const p={limit:!((n=t.query)===null||n===void 0)&&n.limit?(a=t.query)===null||a===void 0?void 0:a.limit.toString():Ar.DEFAULT_LIMIT};if(d){const f=d.split(", ");for(const h of f){const g=h.match(Ar.LINK_HEADER_REGEXP);if(!g)continue;const y=g[2],b=new URL(g[1]),v=b.searchParams.get("fields"),_=b.searchParams.get("page_info");if(!p.fields&&v&&(p.fields=v.split(",")),_)switch(y){case"previous":p.previousPageUrl=g[1],p.prevPage=this.buildRequestParams(g[1]);break;case"next":p.nextPageUrl=g[1],p.nextPage=this.buildRequestParams(g[1]);break}}}u.pageInfo=p}return u})}restClass(){return this.constructor}buildRequestParams(t){const r="^/admin/api/[^/]+/(.*).json$",n=new URL(t);return{path:n.pathname.replace(new RegExp(r),"$1"),query:Object.fromEntries(n.searchParams.entries())}}logDeprecations(t,r){return Rn.__awaiter(this,void 0,void 0,function*(){const n=this.restClass().config,a=(0,Ba.getHeader)(r.headers,"X-Shopify-API-Deprecated-Reason");if(a){const s={message:a,path:t.url};t.body&&(s.body=`${t.body.substring(0,100)}...`);const o=yield(0,Ba.createSHA256HMAC)(n.apiSecretKey,JSON.stringify(s),Ba.HashFormat.Hex);if(!Object.keys(this.loggedDeprecations).includes(o)||Date.now()-this.loggedDeprecations[o]>=Ar.DEPRECATION_ALERT_DELAY){this.loggedDeprecations[o]=Date.now();const i=new Error().stack,c=`API Deprecation Notice ${new Date().toLocaleString()} : ${JSON.stringify(s)}  -  Stack Trace: ${i}`;yield(0,rf.logger)(n).warning(c)}}})}}Bn.RestClient=Ar;Ar.LINK_HEADER_REGEXP=/<([^<]+)>; rel="([^"]+)"/;Ar.DEFAULT_LIMIT="50";Ar.RETRY_WAIT_TIME=1e3;Ar.DEPRECATION_ALERT_DELAY=3e5;function RR(e){const{config:t,formatPaths:r}=e;class n extends Ar{}return n.config=t,n.formatPaths=r===void 0?!0:r,Reflect.defineProperty(n,"name",{value:"RestClient"}),n}Bn.restClientClass=RR;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RestClient=e.restClientClass=e.GraphqlClient=e.graphqlClientClass=void 0;var t=Dn;Object.defineProperty(e,"graphqlClientClass",{enumerable:!0,get:function(){return t.graphqlClientClass}}),Object.defineProperty(e,"GraphqlClient",{enumerable:!0,get:function(){return t.GraphqlClient}});var r=Bn;Object.defineProperty(e,"restClientClass",{enumerable:!0,get:function(){return r.restClientClass}}),Object.defineProperty(e,"RestClient",{enumerable:!0,get:function(){return r.RestClient}})})(gn);var Hb={},va={};const ci="GraphQL Client",nf=0,af=3,Db="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",Bb="Response returned unexpected Content-Type:",Wb="An unknown error has occurred. The API did not return a data object or any errors in its response.",Zc={json:"application/json",multipart:"multipart/mixed"},sf="X-SDK-Variant",of="X-SDK-Version",kR="shopify-graphql-client",IR="0.10.3",Ub=1e3,xR=[429,503],jb=/@(defer)\b/i,lf=`\r
`,$R=/boundary="?([^=";]+)"?/i,cf=lf+lf;function an(e,t=ci){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function Ca(e){return e instanceof Error?e.message:JSON.stringify(e)}function qb(e){return e instanceof Error&&e.cause?e.cause:void 0}function Vb(e){return e.flatMap(({errors:t})=>t??[])}function Kb({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<nf||t>af))throw new Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than ${nf} or greater than ${af}`)}function Lt(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function zb(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:zb(e,n)}function Gb(e,t){return Object.keys(t||{}).reduce((r,n)=>(typeof t[n]=="object"||Array.isArray(t[n]))&&e[n]?(r[n]=Gb(e[n],t[n]),r):(r[n]=t[n],r),Array.isArray(e)?[...e]:{...e})}function Jb([e,...t]){return t.reduce(Gb,{...e})}function OR({clientLogger:e,customFetchApi:t=fetch,client:r=ci,defaultRetryWaitTime:n=Ub,retriableCodes:a=xR}){const s=async(o,i,c)=>{const u=i+1,d=c+1;let p;try{if(p=await t(...o),e({type:"HTTP-Response",content:{requestParams:o,response:p}}),!p.ok&&a.includes(p.status)&&u<=d)throw new Error;return p}catch(f){if(u<=d){const h=p==null?void 0:p.headers.get("Retry-After");return await NR(h?parseInt(h,10):n),e({type:"HTTP-Retry",content:{requestParams:o,lastResponse:p,retryAttempt:i,maxRetries:c}}),s(o,u,c)}throw new Error(an(`${c>0?`Attempted maximum number of ${c} network retries. Last message - `:""}${Ca(f)}`,r))}};return s}async function NR(e){return new Promise(t=>setTimeout(t,e))}function LR({headers:e,url:t,customFetchApi:r=fetch,retries:n=0,logger:a}){Kb({client:ci,retries:n});const s={headers:e,url:t,retries:n},o=MR(a),i=OR({customFetchApi:r,clientLogger:o,defaultRetryWaitTime:Ub}),c=FR(i,s),u=HR(c),d=VR(c);return{config:s,fetch:c,request:u,requestStream:d}}function MR(e){return t=>{e&&e(t)}}async function Xb(e){const{errors:t,data:r,extensions:n}=await e.json();return{...Lt("data",r),...Lt("extensions",n),...t||!r?{errors:{networkStatusCode:e.status,message:an(t?Db:Wb),...Lt("graphQLErrors",t),response:e}}:{}}}function FR(e,{url:t,headers:r,retries:n}){return async(a,s={})=>{const{variables:o,headers:i,url:c,retries:u}=s,d=JSON.stringify({query:a,variables:o});Kb({client:ci,retries:u});const p=Object.entries({...r,...i}).reduce((h,[g,y])=>(h[g]=Array.isArray(y)?y.join(", "):y.toString(),h),{});return!p[sf]&&!p[of]&&(p[sf]=kR,p[of]=IR),e([c??t,{method:"POST",headers:p,body:d}],1,u??n)}}function HR(e){return async(...t)=>{if(jb.test(t[0]))throw new Error(an("This operation will result in a streamable response - use requestStream() instead."));try{const r=await e(...t),{status:n,statusText:a}=r,s=r.headers.get("content-type")||"";return r.ok?s.includes(Zc.json)?Xb(r):{errors:{networkStatusCode:n,message:an(`${Bb} ${s}`),response:r}}:{errors:{networkStatusCode:n,message:an(a),response:r}}}catch(r){return{errors:{message:Ca(r)}}}}}async function*DR(e){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(const r of e.body)yield t.decode(r);else{const r=e.body.getReader();let n;try{for(;!(n=await r.read()).done;)yield t.decode(n.value)}finally{r.cancel()}}}function BR(e,t){return{async*[Symbol.asyncIterator](){try{let r="";for await(const n of e)if(r+=n,r.indexOf(t)>-1){const a=r.lastIndexOf(t),o=r.slice(0,a).split(t).filter(i=>i.trim().length>0).map(i=>i.slice(i.indexOf(cf)+cf.length).trim());o.length>0&&(yield o),r=r.slice(a+t.length),r.trim()==="--"&&(r="")}}catch(r){throw new Error(`Error occured while processing stream payload - ${Ca(r)}`)}}}}function WR(e){return{async*[Symbol.asyncIterator](){yield{...await Xb(e),hasNext:!1}}}}function UR(e){return e.map(t=>{try{return JSON.parse(t)}catch(r){throw new Error(`Error in parsing multipart response - ${Ca(r)}`)}}).map(t=>{const{data:r,incremental:n,hasNext:a,extensions:s,errors:o}=t;if(!n)return{data:r||{},...Lt("errors",o),...Lt("extensions",s),hasNext:a};const i=n.map(({data:c,path:u,errors:d})=>({data:c&&u?zb(u,c):{},...Lt("errors",d)}));return{data:i.length===1?i[0].data:Jb([...i.map(({data:c})=>c)]),...Lt("errors",Vb(i)),hasNext:a}})}function jR(e,t){if(e.length>0)throw new Error(Db,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(Wb)}function qR(e,t){var i;const r=(t??"").match($R),n=`--${r?r[1]:"-"}`;if(!((i=e.body)!=null&&i.getReader)&&!e.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:e});const a=DR(e);let s={},o;return{async*[Symbol.asyncIterator](){var c;try{let u=!0;for await(const d of BR(a,n)){const p=UR(d);o=((c=p.find(h=>h.extensions))==null?void 0:c.extensions)??o;const f=Vb(p);s=Jb([s,...p.map(({data:h})=>h)]),u=p.slice(-1)[0].hasNext,jR(f,s),yield{...Lt("data",s),...Lt("extensions",o),hasNext:u}}if(u)throw new Error("Response stream terminated unexpectedly")}catch(u){const d=qb(u);yield{...Lt("data",s),...Lt("extensions",o),errors:{message:an(Ca(u)),networkStatusCode:e.status,...Lt("graphQLErrors",d==null?void 0:d.graphQLErrors),response:e},hasNext:!1}}}}}function VR(e){return async(...t)=>{if(!jb.test(t[0]))throw new Error(an("This operation does not result in a streamable response - use request() instead."));try{const r=await e(...t),{statusText:n}=r;if(!r.ok)throw new Error(n,{cause:r});const a=r.headers.get("content-type")||"";switch(!0){case a.includes(Zc.json):return WR(r);case a.includes(Zc.multipart):return qR(r,a);default:throw new Error(`${Bb} ${a}`,{cause:r})}}catch(r){return{async*[Symbol.asyncIterator](){const n=qb(r);yield{errors:{message:an(Ca(r)),...Lt("networkStatusCode",n==null?void 0:n.status),...Lt("response",n)},hasNext:!1}}}}}}function KR({client:e,storeDomain:t}){try{if(!t||typeof t!="string")throw new Error;const r=t.trim(),n=r.match(/^https?:/)?r:`https://${r}`,a=new URL(n);return a.protocol="https",a.origin}catch{throw new Error(`${e}: a valid store domain ("${t}") must be provided`)}}function Yb({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){const a=`${e}: the provided apiVersion ("${r}")`,s=`Currently supported API versions: ${t.join(", ")}`;if(!r||typeof r!="string")throw new Error(`${a} is invalid. ${s}`);const o=r.trim();t.includes(o)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${a} is likely deprecated or not supported. ${s}`))}function Io(e){const t=e*3-2;return t===10?t:`0${t}`}function Zl(e,t,r){const n=t-r;return n<=0?`${e-1}-${Io(n+4)}`:`${e}-${Io(n)}`}function zR(){const e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${Io(n)}`}}function GR(){const{year:e,quarter:t,version:r}=zR(),n=t===4?`${e+1}-01`:`${e}-${Io(t+1)}`;return[Zl(e,t,3),Zl(e,t,2),Zl(e,t,1),r,n,"unstable"]}function JR(e){return t=>({...t??{},...e.headers})}function XR({getHeaders:e,getApiUrl:t}){return(r,n)=>{const a=[r];if(n&&Object.keys(n).length>0){const{variables:s,apiVersion:o,headers:i,retries:c}=n;a.push({...s?{variables:s}:{},...i?{headers:e(i)}:{},...o?{url:t(o)}:{},...c?{retries:c}:{}})}return a}}const uf="application/json",YR="storefront-api-client",QR="0.3.3",ZR="X-Shopify-Storefront-Access-Token",ek="Shopify-Storefront-Private-Token",tk="X-SDK-Variant",rk="X-SDK-Version",nk="X-SDK-Variant-Source",is="Storefront API Client";function ak(e){if(e&&typeof window<"u")throw new Error(`${is}: private access tokens and headers should only be used in a server-to-server implementation. Use the public API access token in nonserver environments.`)}function sk(e,t){if(!e&&!t)throw new Error(`${is}: a public or private access token must be provided`);if(e&&t)throw new Error(`${is}: only provide either a public or private access token`)}function ok({storeDomain:e,apiVersion:t,publicAccessToken:r,privateAccessToken:n,clientName:a,retries:s=0,customFetchApi:o,logger:i}){const c=GR(),u=KR({client:is,storeDomain:e}),d={client:is,currentSupportedApiVersions:c,logger:i};Yb({...d,apiVersion:t}),sk(r,n),ak(n);const p=ik(u,t,d),f={storeDomain:u,apiVersion:t,...r?{publicAccessToken:r}:{privateAccessToken:n},headers:{"Content-Type":uf,Accept:uf,[tk]:YR,[rk]:QR,...a?{[nk]:a}:{},...r?{[ZR]:r}:{[ek]:n}},apiUrl:p(),clientName:a},h=LR({headers:f.headers,url:f.apiUrl,retries:s,customFetchApi:o,logger:i}),g=JR(f),y=lk(f,p),b=XR({getHeaders:g,getApiUrl:y});return Object.freeze({config:f,getHeaders:g,getApiUrl:y,fetch:(..._)=>h.fetch(...b(..._)),request:(..._)=>h.request(...b(..._)),requestStream:(..._)=>h.requestStream(...b(..._))})}function ik(e,t,r){return n=>{n&&Yb({...r,apiVersion:n});const a=(n??t).trim();return`${e}/api/${a}/graphql.json`}}function lk(e,t){return r=>r?t(r):e.apiUrl}const ck=Object.freeze(Object.defineProperty({__proto__:null,createStorefrontApiClient:ok},Symbol.toStringTag,{value:"Module"})),uk=pn(ck);Object.defineProperty(va,"__esModule",{value:!0});va.storefrontClientClass=va.StorefrontClient=void 0;const eu=de,dk=uk,df=Qe,pf=eu.__importStar(j),hf=j,pk=Ur,ec=Jt;class Qb{constructor(t){var r;const n=this.storefrontClass().config;if(!n.isCustomStoreApp&&!t.session.accessToken)throw new pf.MissingRequiredArgument("Missing access token when creating GraphQL client");if(t.apiVersion){const s=t.apiVersion===n.apiVersion?`Storefront client has a redundant API version override to the default ${t.apiVersion}`:`Storefront client overriding default API version ${n.apiVersion} with ${t.apiVersion}`;(0,df.logger)(n).debug(s)}let a;if(n.isCustomStoreApp){if(a=n.privateAppStorefrontAccessToken,!a)throw new hf.MissingRequiredArgument("Custom store apps must set the privateAppStorefrontAccessToken property to call the Storefront API.")}else if(a=t.session.accessToken,!a)throw new hf.MissingRequiredArgument("Session missing access token.");this.session=t.session,this.apiVersion=t.apiVersion,this.client=(0,dk.createStorefrontApiClient)({privateAccessToken:a,apiVersion:(r=this.apiVersion)!==null&&r!==void 0?r:n.apiVersion,storeDomain:this.session.shop,customFetchApi:pk.abstractFetch,logger:(0,ec.clientLoggerFactory)(n),clientName:(0,ec.getUserAgent)(n)})}query(t){var r;return eu.__awaiter(this,void 0,void 0,function*(){if((0,df.logger)(this.storefrontClass().config).deprecated("10.0.0",`The query method is deprecated, and was replaced with the request method.
See the migration guide: https://github.com/Shopify/shopify-api-js/blob/main/packages/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.`),typeof t.data=="string"&&t.data.length===0||Object.entries(t.data).length===0)throw new pf.MissingRequiredArgument("Query missing.");let n,a;typeof t.data=="string"?n=t.data:(n=t.data.query,a=t.data.variables);const s=Object.fromEntries(Object.entries((r=t==null?void 0:t.extraHeaders)!==null&&r!==void 0?r:{}).map(([i,c])=>[i,Array.isArray(c)?c.join(", "):c.toString()]));return{body:yield this.request(n,{headers:s,retries:t.tries?t.tries-1:void 0,variables:a}),headers:{}}})}request(t,r){var n;return eu.__awaiter(this,void 0,void 0,function*(){const a=yield this.client.request(t,Object.assign({apiVersion:this.apiVersion||this.storefrontClass().config.apiVersion},r));if(a.errors){const s=a.errors.response;(0,ec.throwFailedRequest)(a,s,((n=r==null?void 0:r.retries)!==null&&n!==void 0?n:0)>0)}return a})}storefrontClass(){return this.constructor}}va.StorefrontClient=Qb;function hk(e){const{config:t}=e;class r extends Qb{}return r.config=t,Reflect.defineProperty(r,"name",{value:"StorefrontClient"}),r}va.storefrontClientClass=hk;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.storefrontClientClass=e.StorefrontClient=void 0;var t=va;Object.defineProperty(e,"StorefrontClient",{enumerable:!0,get:function(){return t.StorefrontClient}}),Object.defineProperty(e,"storefrontClientClass",{enumerable:!0,get:function(){return t.storefrontClientClass}})})(Hb);var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.graphqlProxy=void 0;const Zb=de,ff=Zb.__importStar(j),fk=gn;function mk(e){return({session:t,rawBody:r})=>Zb.__awaiter(this,void 0,void 0,function*(){if(!t.accessToken)throw new ff.InvalidSession("Cannot proxy query. Session not authenticated.");const n=(0,fk.graphqlClientClass)({config:e}),a=new n({session:t});let s,o;if(typeof r=="string"?s=r:(s=r.query,o=r.variables),!s)throw new ff.MissingRequiredArgument("Query missing.");return{body:yield a.request(s,{variables:o}),headers:{}}})}ui.graphqlProxy=mk;Object.defineProperty(oi,"__esModule",{value:!0});oi.clientClasses=void 0;const mf=gn,gk=Hb,yk=ui;function bk(e){return{Rest:(0,mf.restClientClass)({config:e}),Graphql:(0,mf.graphqlClientClass)({config:e}),Storefront:(0,gk.storefrontClientClass)({config:e}),graphqlProxy:(0,yk.graphqlProxy)(e)}}oi.clientClasses=bk;var di={},Ea={},Qu=Object.defineProperty,vk=Object.getOwnPropertyDescriptor,Ek=Object.getOwnPropertyNames,_k=Object.prototype.hasOwnProperty,Sk=(e,t)=>{for(var r in t)Qu(e,r,{get:t[r],enumerable:!0})},wk=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ek(t))!_k.call(e,a)&&a!==r&&Qu(e,a,{get:()=>t[a],enumerable:!(n=vk(t,a))||n.enumerable});return e},Ak=e=>wk(Qu({},"__esModule",{value:!0}),e),ev={};Sk(ev,{createIsbot:()=>xk,createIsbotFromList:()=>$k,isbot:()=>Ik,isbotMatch:()=>Ok,isbotMatches:()=>Nk,isbotNaive:()=>kk,isbotPattern:()=>Lk,isbotPatterns:()=>Mk,list:()=>pi,pattern:()=>rv});var Pk=Ak(ev),Ck=" daum[ /]| deusu/| yadirectfetcher|(?:^| )site|(?:^|[^g])news|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bot(?:[^\\w]|_|$)|(?<! ya(?:yandex)?)search|(?<!(?:lib))http|(?<![hg]m)score|@[a-z]|\\(at\\)[a-z]|\\[at\\][a-z]|^12345|^<|^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)|^[^ ]{50,}$|^active|^ad muncher|^amaya|^anglesharp/|^avsdevicesdk/|^bidtellect/|^biglotron|^bot|^btwebclient/|^clamav[ /]|^client/|^cobweb/|^coccoc|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^facebook|^fdm[ /]\\d|^getright/|^gozilla/|^hatena|^hobbit|^hotzonu|^hwcdn/|^jeode/|^jetty/|^jigsaw|^linkdex|^metauri|^microsoft bits|^movabletype|^mozilla/\\d\\.\\d \\(compatible;?\\)$|^mozilla/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^nuclei|^offline explorer|^php|^postman|^postrank|^python|^rank|^read|^reed|^rest|^serf|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^tumblr/|^user-agent:|^valid|^venus/fedoraplanet|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|^{{.*}}$|adbeat\\.com|appinsights|archive|ask jeeves/teoma|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check|chrome-lighthouse|chromeframe|classifier|cloud|crawl|cryptoapi|dareboost|datanyze|dataprovider|dejaclick|dmbrowser|download|evc-batch/|feed|firephp|freesafeip|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|inspect|iplabel|ips-agent|java(?!;)|library|mail\\.ru/|manager|monitor|neustar wpm|nutch|offbyone|optimize|pageburst|parser|perl|phantom|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reader|reputation|resolver|retriever|rexx;|rigor|robot|rss|scan|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|stumbleupon\\.com|supercleaner|synapse|synthetic|torrent|trace|transcoder|twingly recon|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|wordpress|zgrab",Tk=new RegExp(" daum[ /]| deusu\\/| yadirectfetcher|(?:^| )site|(?:^|[^g])news|(?<! (?:channel\\/|google\\/))google(?!(app|\\/google| pixel))|(?<! cu)bot(?:[^\\w]|_|$)|(?<! ya(?:yandex)?)search|(?<!(?:lib))http|(?<![hg]m)score|@[a-z]|\\(at\\)[a-z]|\\[at\\][a-z]|^12345|^<|^[\\w \\.\\-\\(?:\\):]+(?:\\/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)|^[^ ]{50,}$|^active|^ad muncher|^amaya|^anglesharp\\/|^avsdevicesdk\\/|^bidtellect\\/|^biglotron|^bot|^btwebclient\\/|^clamav[ /]|^client\\/|^cobweb\\/|^coccoc|^custom|^ddg[_-]android|^discourse|^dispatch\\/\\d|^downcast\\/|^duckduckgo|^facebook|^fdm[ /]\\d|^getright\\/|^gozilla\\/|^hatena|^hobbit|^hotzonu|^hwcdn\\/|^jeode\\/|^jetty\\/|^jigsaw|^linkdex|^metauri|^microsoft bits|^movabletype|^mozilla\\/\\d\\.\\d \\(compatible;?\\)$|^mozilla\\/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^nuclei|^offline explorer|^php|^postman|^postrank|^python|^rank|^read|^reed|^rest|^serf|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor\\/|^tumblr\\/|^user-agent:|^valid|^venus\\/fedoraplanet|^w3c|^webbandit\\/|^webcopier|^wget|^whatsapp|^xenu link sleuth|^yahoo|^yandex|^zdm\\/\\d|^zoom marketplace\\/|^{{.*}}$|adbeat\\.com|appinsights|archive|ask jeeves\\/teoma|bit\\.ly\\/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check|chrome-lighthouse|chromeframe|classifier|cloud|crawl|cryptoapi|dareboost|datanyze|dataprovider|dejaclick|dmbrowser|download|evc-batch\\/|feed|firephp|freesafeip|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|inspect|iplabel|ips-agent|java(?!;)|library|mail\\.ru\\/|manager|monitor|neustar wpm|nutch|offbyone|optimize|pageburst|parser|perl|phantom|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reader|reputation|resolver|retriever|rexx;|rigor|robot|rss|scan|scrape|server|sogou|sparkler\\/|speedcurve|spider|splash|statuscake|stumbleupon\\.com|supercleaner|synapse|synthetic|torrent|trace|transcoder|twingly recon|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms\\/|wordpress|zgrab","i"),Rk=[" daum[ /]"," deusu/"," yadirectfetcher","(?:^| )site","(?:^|[^g])news","(?<! (?:channel/|google/))google(?!(app|/google| pixel))","(?<! cu)bot(?:[^\\w]|_|$)","(?<! ya(?:yandex)?)search","(?<!(?:lib))http","(?<![hg]m)score","@[a-z]","\\(at\\)[a-z]","\\[at\\][a-z]","^12345","^<","^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)","^[^ ]{50,}$","^active","^ad muncher","^amaya","^anglesharp/","^avsdevicesdk/","^bidtellect/","^biglotron","^bot","^btwebclient/","^clamav[ /]","^client/","^cobweb/","^coccoc","^custom","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^facebook","^fdm[ /]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^jeode/","^jetty/","^jigsaw","^linkdex","^metauri","^microsoft bits","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^mozilla/\\d\\.\\d \\w*$","^navermailapp","^netsurf","^nuclei","^offline explorer","^php","^postman","^postrank","^python","^rank","^read","^reed","^rest","^serf","^snapchat","^space bison","^svn","^swcd ","^taringa","^thumbor/","^tumblr/","^user-agent:","^valid","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zoom marketplace/","^{{.*}}$","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","classifier","cloud","crawl","cryptoapi","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","firephp","freesafeip","gomezagent","headless","httrack","hubspot marketing grader","hydra","ibisbrowser","images","inspect","iplabel","ips-agent","java(?!;)","library","mail\\.ru/","manager","monitor","neustar wpm","nutch","offbyone","optimize","pageburst","parser","perl","phantom","pingdom","powermarks","preview","proxy","ptst[ /]\\d","reader","reputation","resolver","retriever","rexx;","rigor","robot","rss","scan","scrape","server","sogou","sparkler/","speedcurve","spider","splash","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","torrent","trace","transcoder","twingly recon","url","virtuoso","wappalyzer","webglance","webkit2png","whatcms/","wordpress","zgrab"],tv=/bot|spider|crawl|http|lighthouse/i,rv=Tk,pi=Rk,kk=e=>!!e&&tv.test(e),Vs;function Ik(e){if(typeof Vs>"u")try{Vs=new RegExp(Ck,"i")}catch{Vs=tv}return!!e&&Vs.test(e)}var xk=e=>t=>!!t&&e.test(t),$k=e=>{const t=new RegExp(e.join("|"),"i");return r=>!!r&&t.test(r)},Ok=e=>{var t;return((t=e==null?void 0:e.match(rv))==null?void 0:t[0])??null},Nk=e=>pi.map(t=>{var r;return(r=e==null?void 0:e.match(new RegExp(t,"i")))==null?void 0:r[0]}).filter(Boolean),Lk=e=>e?pi.find(t=>new RegExp(t,"i").test(e))??null:null,Mk=e=>e?pi.filter(t=>new RegExp(t,"i").test(e)):[],Ks={},gf;function nv(){if(gf)return Ks;gf=1,Object.defineProperty(Ks,"__esModule",{value:!0});class e{static stringify(r){return!r||Object.keys(r).length===0?"":new e().putAll(r).stringify()}constructor(){this.processedQuery=new URLSearchParams}putAll(r){return Object.entries(r).forEach(([n,a])=>this.put(n,a)),this}put(r,n){Array.isArray(n)?this.putArray(r,n):(n==null?void 0:n.constructor)===Object?this.putObject(r,n):this.putSimple(r,n)}putArray(r,n){n.forEach(a=>this.processedQuery.append(`${r}[]`,`${a}`))}putObject(r,n){Object.entries(n).forEach(([a,s])=>{this.processedQuery.append(`${r}[${a}]`,`${s}`)})}putSimple(r,n){this.processedQuery.append(r,`${n}`)}stringify(r=!1){const n=this.processedQuery.toString();return r?n:`?${n}`}}return Ks.default=e,Ks}var Et={},Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.safeCompare=void 0;const Fk=de,Hk=Fk.__importStar(j),Dk=(e,t)=>{if(typeof e==typeof t){const r=new TextEncoder,n=r.encode(JSON.stringify(e)),a=r.encode(JSON.stringify(t));if(n.length===a.length)return Bk(n,a)}else throw new Hk.SafeCompareError(`Mismatched data types provided: ${typeof e} and ${typeof t}`);return!1};Ta.safeCompare=Dk;function Bk(e,t){const r=new Uint8Array(e),n=new Uint8Array(t);let a=0;for(let s=0;s<r.length;s++)a|=r[s]^n[s];return a===0}var Cn={},yf;function Ra(){if(yf)return Cn;yf=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.ValidationErrorReason=Cn.HmacValidationType=void 0;var e;return function(t){t.Flow="flow",t.Webhook="webhook",t.FulfillmentService="fulfillment_service"}(e||(Cn.HmacValidationType=e={})),Cn.ValidationErrorReason={MissingBody:"missing_body",InvalidHmac:"invalid_hmac",MissingHmac:"missing_hmac"},Cn}Object.defineProperty(Et,"__esModule",{value:!0});Et.validateHmacFromRequestFactory=Et.getCurrentTimeInSec=Et.validateHmacString=Et.validateHmac=Et.generateLocalHmac=void 0;const Pr=de,av=Qe,Wk=_e,bf=Jn(),sv=ei(),ov=Zo(),tu=Pr.__importStar(j),iv=Ta,Uk=Pr.__importDefault(nv()),tc=Ra(),jk=90;function qk(e){const t=new Uk.default;return Object.keys(e).sort((r,n)=>r.localeCompare(n)).forEach(r=>t.put(r,e[r])),t.stringify(!0)}function Vk(e){return Object.entries(e).sort(([t],[r])=>t.localeCompare(r)).reduce((t,[r,n])=>`${t}${r}=${Array.isArray(n)?n.join(","):n}`,"")}function lv(e){return(t,r="admin")=>Pr.__awaiter(this,void 0,void 0,function*(){const n=Pr.__rest(t,["hmac","signature"]),a=r==="admin"?qk(n):Vk(n);return(0,sv.createSHA256HMAC)(e.apiSecretKey,a,ov.HashFormat.Hex)})}Et.generateLocalHmac=lv;function Kk(e){return(t,{signator:r}={signator:"admin"})=>Pr.__awaiter(this,void 0,void 0,function*(){if(r==="admin"&&!t.hmac)throw new tu.InvalidHmacError("Query does not contain an HMAC value.");if(r==="appProxy"&&!t.signature)throw new tu.InvalidHmacError("Query does not contain a signature value.");Gk(t);const n=r==="appProxy"?t.signature:t.hmac,a=yield lv(e)(t,r);return(0,iv.safeCompare)(n,a)})}Et.validateHmac=Kk;function cv(e,t,r,n){return Pr.__awaiter(this,void 0,void 0,function*(){const a=yield(0,sv.createSHA256HMAC)(e.apiSecretKey,t,n);return(0,iv.safeCompare)(r,a)})}Et.validateHmacString=cv;function uv(){return Math.trunc(Date.now()/1e3)}Et.getCurrentTimeInSec=uv;function zk(e){return function(r){var{type:n,rawBody:a}=r,s=Pr.__rest(r,["type","rawBody"]);return Pr.__awaiter(this,void 0,void 0,function*(){const o=yield(0,bf.abstractConvertRequest)(s);if(!a.length)return rc(tc.ValidationErrorReason.MissingBody,n,e);const i=(0,bf.getHeader)(o.headers,Wk.ShopifyHeader.Hmac);return i?(yield cv(e,a,i,ov.HashFormat.Base64))?Jk(n,e):rc(tc.ValidationErrorReason.InvalidHmac,n,e):rc(tc.ValidationErrorReason.MissingHmac,n,e)})}}Et.validateHmacFromRequestFactory=zk;function Gk(e){if(Math.abs(uv()-Number(e.timestamp))>jk)throw new tu.InvalidHmacError("HMAC timestamp is outside of the tolerance range")}function rc(e,t,r){return Pr.__awaiter(this,void 0,void 0,function*(){return yield(0,av.logger)(r).debug(`${t} request is not valid`,{reason:e}),{valid:!1,reason:e}})}function Jk(e,t){return Pr.__awaiter(this,void 0,void 0,function*(){return yield(0,av.logger)(t).debug(`${e} request is valid`),{valid:!0}})}var Cr={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.decodeHost=void 0;function Xk(e){return atob(e)}ys.decodeHost=Xk;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.legacyUrlToShopAdminUrl=Wn.shopAdminUrlToLegacyUrl=void 0;function Yk(e){const t=dv(e);if(!(t.split(".")[0]==="admin"))return null;const n=new RegExp("admin\\..+/store/([^/]+)"),a=t.match(n);if(a&&a.length===2){const s=a[1];return t.includes("spin.dev/store/")?Zk(t):`${s}.myshopify.com`}else return null}Wn.shopAdminUrlToLegacyUrl=Yk;function Qk(e){const t=dv(e),r=new RegExp("(.+)\\.myshopify\\.com$"),n=t.match(r);return n&&n.length===2?`admin.shopify.com/store/${n[1]}`:t.endsWith("spin.dev")?eI(t):null}Wn.legacyUrlToShopAdminUrl=Qk;function Zk(e){const t=new RegExp("admin\\.web\\.(.+\\.spin\\.dev)/store/(.+)"),r=e.match(t);if(r&&r.length===3){const n=r[1];return`${r[2]}.shopify.${n}`}else return null}function eI(e){const t=new RegExp("(.+)\\.shopify\\.(.+\\.spin\\.dev)"),r=e.match(t);if(r&&r.length===3){const n=r[1];return`admin.web.${r[2]}/store/${n}`}else return null}function dv(e){return e.replace(/^https?:\/\//,"").replace(/\/$/,"")}Object.defineProperty(Cr,"__esModule",{value:!0});Cr.sanitizeHost=Cr.sanitizeShop=void 0;const pv=j,tI=ys,rI=Wn;function nI(e){return(t,r=!1)=>{let n=t;const a=["myshopify\\.com","shopify\\.com","myshopify\\.io"];e.customShopDomains&&a.push(...e.customShopDomains.map(u=>typeof u=="string"?u:u.source));const s=new RegExp(`^[a-zA-Z0-9][a-zA-Z0-9-_]*\\.(${a.join("|")})[/]*$`);new RegExp(`^admin\\.(${a.join("|")})/store/([a-zA-Z0-9][a-zA-Z0-9-_]*)$`).test(n)&&(n=(0,rI.shopAdminUrlToLegacyUrl)(n)||"");const c=s.test(n)?n:null;if(!c&&r)throw new pv.InvalidShopError("Received invalid shop argument");return c}}Cr.sanitizeShop=nI;function aI(){return(e,t=!1)=>{let n=/^[0-9a-zA-Z+/]+={0,2}$/.test(e)?e:null;if(n){const{hostname:a}=new URL(`https://${(0,tI.decodeHost)(n)}`),s=["myshopify\\.com","shopify\\.com","myshopify\\.io","spin\\.dev"];new RegExp(`\\.(${s.join("|")})$`).test(a)||(n=null)}if(!n&&t)throw new pv.InvalidHostError("Received invalid host argument");return n}}Cr.sanitizeHost=aI;var nc={},ac={},vf;function sI(){return vf||(vf=1,Object.defineProperty(ac,"__esModule",{value:!0})),ac}var sc={},Ef;function oI(){return Ef||(Ef=1,Object.defineProperty(sc,"__esModule",{value:!0})),sc}var _f;function Zu(){return _f||(_f=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphqlClient=e.DataType=void 0;const t=de;t.__exportStar(sI(),e),t.__exportStar(oI(),e);var r;(function(a){a.JSON="application/json",a.GraphQL="application/graphql",a.URLEncoded="application/x-www-form-urlencoded"})(r||(e.DataType=r={}));var n=Dn;Object.defineProperty(e,"GraphqlClient",{enumerable:!0,get:function(){return n.GraphqlClient}})}(nc)),nc}var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.fetchRequestFactory=void 0;const iI=de,lI=Qe,cI=_e,uI=Ur;function dI(e){return function(r,n){return iI.__awaiter(this,void 0,void 0,function*(){const a=(0,lI.logger)(e),s=e.logger.httpRequests&&e.logger.level===cI.LogSeverity.Debug;s&&a.debug("Making HTTP request",Object.assign({method:(n==null?void 0:n.method)||"GET",url:r},(n==null?void 0:n.body)&&{body:n==null?void 0:n.body}));const o=yield(0,uI.abstractFetch)(r,n);return s&&a.debug("HTTP request completed",{method:(n==null?void 0:n.method)||"GET",url:r,status:o.status}),o})}}bs.fetchRequestFactory=dI;var cn={};Object.defineProperty(cn,"__esModule",{value:!0});cn.STATE_COOKIE_NAME=cn.SESSION_COOKIE_NAME=void 0;cn.SESSION_COOKIE_NAME="shopify_app_session";cn.STATE_COOKIE_NAME="shopify_app_state";var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.nonce=void 0;const oc=ei();function pI(){return(oc.crypto.getRandomValues?oc.crypto.getRandomValues(new Uint8Array(15)):oc.crypto.randomBytes(15)).map(n=>n%10).join("")}vs.nonce=pI;var Es={},hv={},hi={},fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.default=fI;let zs;const hI=new Uint8Array(16);function fI(){if(!zs&&(zs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zs(hI)}var yn={},Xn={},mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.default=void 0;var mI=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;mi.default=mI;Object.defineProperty(Xn,"__esModule",{value:!0});Xn.default=void 0;var gI=yI(mi);function yI(e){return e&&e.__esModule?e:{default:e}}function bI(e){return typeof e=="string"&&gI.default.test(e)}var vI=bI;Xn.default=vI;Object.defineProperty(yn,"__esModule",{value:!0});yn.default=void 0;yn.unsafeStringify=fv;var EI=_I(Xn);function _I(e){return e&&e.__esModule?e:{default:e}}const it=[];for(let e=0;e<256;++e)it.push((e+256).toString(16).slice(1));function fv(e,t=0){return it[e[t+0]]+it[e[t+1]]+it[e[t+2]]+it[e[t+3]]+"-"+it[e[t+4]]+it[e[t+5]]+"-"+it[e[t+6]]+it[e[t+7]]+"-"+it[e[t+8]]+it[e[t+9]]+"-"+it[e[t+10]]+it[e[t+11]]+it[e[t+12]]+it[e[t+13]]+it[e[t+14]]+it[e[t+15]]}function SI(e,t=0){const r=fv(e,t);if(!(0,EI.default)(r))throw TypeError("Stringified UUID is invalid");return r}var wI=SI;yn.default=wI;Object.defineProperty(hi,"__esModule",{value:!0});hi.default=void 0;var AI=CI(fi),PI=yn;function CI(e){return e&&e.__esModule?e:{default:e}}let Sf,ic,lc=0,cc=0;function TI(e,t,r){let n=t&&r||0;const a=t||new Array(16);e=e||{};let s=e.node||Sf,o=e.clockseq!==void 0?e.clockseq:ic;if(s==null||o==null){const f=e.random||(e.rng||AI.default)();s==null&&(s=Sf=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),o==null&&(o=ic=(f[6]<<8|f[7])&16383)}let i=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:cc+1;const u=i-lc+(c-cc)/1e4;if(u<0&&e.clockseq===void 0&&(o=o+1&16383),(u<0||i>lc)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");lc=i,cc=c,ic=o,i+=122192928e5;const d=((i&268435455)*1e4+c)%4294967296;a[n++]=d>>>24&255,a[n++]=d>>>16&255,a[n++]=d>>>8&255,a[n++]=d&255;const p=i/4294967296*1e4&268435455;a[n++]=p>>>8&255,a[n++]=p&255,a[n++]=p>>>24&15|16,a[n++]=p>>>16&255,a[n++]=o>>>8|128,a[n++]=o&255;for(let f=0;f<6;++f)a[n+f]=s[f];return t||(0,PI.unsafeStringify)(a)}var RI=TI;hi.default=RI;var gi={},un={},_s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.default=void 0;var kI=II(Xn);function II(e){return e&&e.__esModule?e:{default:e}}function xI(e){if(!(0,kI.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var $I=xI;_s.default=$I;Object.defineProperty(un,"__esModule",{value:!0});un.URL=un.DNS=void 0;un.default=FI;var OI=yn,NI=LI(_s);function LI(e){return e&&e.__esModule?e:{default:e}}function MI(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}const mv="6ba7b810-9dad-11d1-80b4-00c04fd430c8";un.DNS=mv;const gv="6ba7b811-9dad-11d1-80b4-00c04fd430c8";un.URL=gv;function FI(e,t,r){function n(a,s,o,i){var c;if(typeof a=="string"&&(a=MI(a)),typeof s=="string"&&(s=(0,NI.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+a.length);if(u.set(s),u.set(a,s.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){i=i||0;for(let d=0;d<16;++d)o[i+d]=u[d];return o}return(0,OI.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=mv,n.URL=gv,n}var yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.default=void 0;function HI(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return DI(BI(WI(e),e.length*8))}function DI(e){const t=[],r=e.length*32,n="0123456789abcdef";for(let a=0;a<r;a+=8){const s=e[a>>5]>>>a%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(o)}return t}function yv(e){return(e+64>>>9<<4)+14+1}function BI(e,t){e[t>>5]|=128<<t%32,e[yv(t)-1]=t;let r=1732584193,n=-271733879,a=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const i=r,c=n,u=a,d=s;r=mt(r,n,a,s,e[o],7,-680876936),s=mt(s,r,n,a,e[o+1],12,-389564586),a=mt(a,s,r,n,e[o+2],17,606105819),n=mt(n,a,s,r,e[o+3],22,-1044525330),r=mt(r,n,a,s,e[o+4],7,-176418897),s=mt(s,r,n,a,e[o+5],12,1200080426),a=mt(a,s,r,n,e[o+6],17,-1473231341),n=mt(n,a,s,r,e[o+7],22,-45705983),r=mt(r,n,a,s,e[o+8],7,1770035416),s=mt(s,r,n,a,e[o+9],12,-1958414417),a=mt(a,s,r,n,e[o+10],17,-42063),n=mt(n,a,s,r,e[o+11],22,-1990404162),r=mt(r,n,a,s,e[o+12],7,1804603682),s=mt(s,r,n,a,e[o+13],12,-40341101),a=mt(a,s,r,n,e[o+14],17,-1502002290),n=mt(n,a,s,r,e[o+15],22,1236535329),r=gt(r,n,a,s,e[o+1],5,-165796510),s=gt(s,r,n,a,e[o+6],9,-1069501632),a=gt(a,s,r,n,e[o+11],14,643717713),n=gt(n,a,s,r,e[o],20,-373897302),r=gt(r,n,a,s,e[o+5],5,-701558691),s=gt(s,r,n,a,e[o+10],9,38016083),a=gt(a,s,r,n,e[o+15],14,-660478335),n=gt(n,a,s,r,e[o+4],20,-405537848),r=gt(r,n,a,s,e[o+9],5,568446438),s=gt(s,r,n,a,e[o+14],9,-1019803690),a=gt(a,s,r,n,e[o+3],14,-187363961),n=gt(n,a,s,r,e[o+8],20,1163531501),r=gt(r,n,a,s,e[o+13],5,-1444681467),s=gt(s,r,n,a,e[o+2],9,-51403784),a=gt(a,s,r,n,e[o+7],14,1735328473),n=gt(n,a,s,r,e[o+12],20,-1926607734),r=yt(r,n,a,s,e[o+5],4,-378558),s=yt(s,r,n,a,e[o+8],11,-2022574463),a=yt(a,s,r,n,e[o+11],16,1839030562),n=yt(n,a,s,r,e[o+14],23,-35309556),r=yt(r,n,a,s,e[o+1],4,-1530992060),s=yt(s,r,n,a,e[o+4],11,1272893353),a=yt(a,s,r,n,e[o+7],16,-155497632),n=yt(n,a,s,r,e[o+10],23,-1094730640),r=yt(r,n,a,s,e[o+13],4,681279174),s=yt(s,r,n,a,e[o],11,-358537222),a=yt(a,s,r,n,e[o+3],16,-722521979),n=yt(n,a,s,r,e[o+6],23,76029189),r=yt(r,n,a,s,e[o+9],4,-640364487),s=yt(s,r,n,a,e[o+12],11,-421815835),a=yt(a,s,r,n,e[o+15],16,530742520),n=yt(n,a,s,r,e[o+2],23,-995338651),r=bt(r,n,a,s,e[o],6,-198630844),s=bt(s,r,n,a,e[o+7],10,1126891415),a=bt(a,s,r,n,e[o+14],15,-1416354905),n=bt(n,a,s,r,e[o+5],21,-57434055),r=bt(r,n,a,s,e[o+12],6,1700485571),s=bt(s,r,n,a,e[o+3],10,-1894986606),a=bt(a,s,r,n,e[o+10],15,-1051523),n=bt(n,a,s,r,e[o+1],21,-2054922799),r=bt(r,n,a,s,e[o+8],6,1873313359),s=bt(s,r,n,a,e[o+15],10,-30611744),a=bt(a,s,r,n,e[o+6],15,-1560198380),n=bt(n,a,s,r,e[o+13],21,1309151649),r=bt(r,n,a,s,e[o+4],6,-145523070),s=bt(s,r,n,a,e[o+11],10,-1120210379),a=bt(a,s,r,n,e[o+2],15,718787259),n=bt(n,a,s,r,e[o+9],21,-343485551),r=tn(r,i),n=tn(n,c),a=tn(a,u),s=tn(s,d)}return[r,n,a,s]}function WI(e){if(e.length===0)return[];const t=e.length*8,r=new Uint32Array(yv(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function tn(e,t){const r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function UI(e,t){return e<<t|e>>>32-t}function bi(e,t,r,n,a,s){return tn(UI(tn(tn(t,e),tn(n,s)),a),r)}function mt(e,t,r,n,a,s,o){return bi(t&r|~t&n,e,t,a,s,o)}function gt(e,t,r,n,a,s,o){return bi(t&n|r&~n,e,t,a,s,o)}function yt(e,t,r,n,a,s,o){return bi(t^r^n,e,t,a,s,o)}function bt(e,t,r,n,a,s,o){return bi(r^(t|~n),e,t,a,s,o)}var jI=HI;yi.default=jI;Object.defineProperty(gi,"__esModule",{value:!0});gi.default=void 0;var qI=bv(un),VI=bv(yi);function bv(e){return e&&e.__esModule?e:{default:e}}const KI=(0,qI.default)("v3",48,VI.default);var zI=KI;gi.default=zI;var vi={},Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.default=void 0;const GI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var JI={randomUUID:GI};Ei.default=JI;Object.defineProperty(vi,"__esModule",{value:!0});vi.default=void 0;var wf=vv(Ei),XI=vv(fi),YI=yn;function vv(e){return e&&e.__esModule?e:{default:e}}function QI(e,t,r){if(wf.default.randomUUID&&!t&&!e)return wf.default.randomUUID();e=e||{};const n=e.random||(e.rng||XI.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let a=0;a<16;++a)t[r+a]=n[a];return t}return(0,YI.unsafeStringify)(n)}var ZI=QI;vi.default=ZI;var _i={},Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.default=void 0;function ex(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function uc(e,t){return e<<t|e>>>32-t}function tx(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const o=unescape(encodeURIComponent(e));e=[];for(let i=0;i<o.length;++i)e.push(o.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,a=Math.ceil(n/16),s=new Array(a);for(let o=0;o<a;++o){const i=new Uint32Array(16);for(let c=0;c<16;++c)i[c]=e[o*64+c*4]<<24|e[o*64+c*4+1]<<16|e[o*64+c*4+2]<<8|e[o*64+c*4+3];s[o]=i}s[a-1][14]=(e.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(e.length-1)*8&4294967295;for(let o=0;o<a;++o){const i=new Uint32Array(80);for(let h=0;h<16;++h)i[h]=s[o][h];for(let h=16;h<80;++h)i[h]=uc(i[h-3]^i[h-8]^i[h-14]^i[h-16],1);let c=r[0],u=r[1],d=r[2],p=r[3],f=r[4];for(let h=0;h<80;++h){const g=Math.floor(h/20),y=uc(c,5)+ex(g,u,d,p)+f+t[g]+i[h]>>>0;f=p,p=d,d=uc(u,30)>>>0,u=c,c=y}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+d>>>0,r[3]=r[3]+p>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var rx=tx;Si.default=rx;Object.defineProperty(_i,"__esModule",{value:!0});_i.default=void 0;var nx=Ev(un),ax=Ev(Si);function Ev(e){return e&&e.__esModule?e:{default:e}}const sx=(0,nx.default)("v5",80,ax.default);var ox=sx;_i.default=ox;var wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.default=void 0;var ix="00000000-0000-0000-0000-000000000000";wi.default=ix;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.default=void 0;var lx=cx(Xn);function cx(e){return e&&e.__esModule?e:{default:e}}function ux(e){if(!(0,lx.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var dx=ux;Ai.default=dx;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.default}});var t=d(hi),r=d(gi),n=d(vi),a=d(_i),s=d(wi),o=d(Ai),i=d(Xn),c=d(yn),u=d(_s);function d(p){return p&&p.__esModule?p:{default:p}}})(hv);var Wa={},Af;function ed(){if(Af)return Wa;Af=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.Session=void 0;const e=j,t=gs,r=["id","shop","state","isOnline","scope","accessToken","expires","onlineAccessInfo"];class n{static fromPropertyArray(s){if(!Array.isArray(s))throw new e.InvalidSession("The parameter is not an array: a Session cannot be created from this object.");const o=Object.fromEntries(s.filter(([i,c])=>c!=null).map(([i,c])=>{switch(i.toLowerCase()){case"isonline":return["isOnline",c];case"accesstoken":return["accessToken",c];case"onlineaccessinfo":return["onlineAccessInfo",c];default:return[i.toLowerCase(),c]}}).map(([i,c])=>{switch(i){case"isOnline":return typeof c=="string"?[i,c.toString().toLowerCase()==="true"]:typeof c=="number"?[i,!!c]:[i,c];case"scope":return[i,c.toString()];case"expires":return[i,c?new Date(Number(c)):void 0];case"onlineAccessInfo":return[i,{associated_user:{id:Number(c)}}];default:return[i,c]}}));return Object.setPrototypeOf(o,n.prototype),o}constructor(s){Object.assign(this,s)}isActive(s){return!this.isScopeChanged(s)&&!!this.accessToken&&!this.isExpired()}isScopeChanged(s){return!(s instanceof t.AuthScopes?s:new t.AuthScopes(s)).equals(this.scope)}isExpired(s=0){return!!(this.expires&&this.expires.getTime()-s<Date.now())}toObject(){const s={id:this.id,shop:this.shop,state:this.state,isOnline:this.isOnline};return this.scope&&(s.scope=this.scope),this.expires&&(s.expires=this.expires),this.accessToken&&(s.accessToken=this.accessToken),this.onlineAccessInfo&&(s.onlineAccessInfo=this.onlineAccessInfo),s}equals(s){if(!s||!(this.id===s.id&&this.shop===s.shop&&this.state===s.state&&this.isOnline===s.isOnline))return!1;const i=this.toPropertyArray();i.sort(([u],[d])=>u<d?-1:1);const c=s.toPropertyArray();return c.sort(([u],[d])=>u<d?-1:1),JSON.stringify(i)===JSON.stringify(c)}toPropertyArray(){return Object.entries(this).filter(([s,o])=>r.includes(s)&&o!==void 0&&o!==null).map(([s,o])=>{var i;switch(s){case"expires":return[s,o?o.getTime():void 0];case"onlineAccessInfo":return[s,(i=o==null?void 0:o.associated_user)===null||i===void 0?void 0:i.id];default:return[s,o]}})}}return Wa.Session=n,Wa}var or={},ka={};const oe=crypto,Mt=e=>e instanceof CryptoKey,_v=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await oe.subtle.digest(r,t))},je=new TextEncoder,Xt=new TextDecoder,xo=2**32;function Rr(...e){const t=e.reduce((a,{length:s})=>a+s,0),r=new Uint8Array(t);let n=0;for(const a of e)r.set(a,n),n+=a.length;return r}function px(e,t){return Rr(je.encode(e),new Uint8Array([0]),t)}function ru(e,t,r){if(t<0||t>=xo)throw new RangeError(`value must be >= 0 and <= ${xo-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],r)}function Sv(e){const t=Math.floor(e/xo),r=e%xo,n=new Uint8Array(8);return ru(n,t,0),ru(n,r,4),n}function td(e){const t=new Uint8Array(4);return ru(t,e),t}function dc(e){return Rr(td(e.length),e)}async function hx(e,t,r){const n=Math.ceil((t>>3)/32),a=new Uint8Array(n*32);for(let s=0;s<n;s++){const o=new Uint8Array(4+e.length+r.length);o.set(td(s+1)),o.set(e,4),o.set(r,4+e.length),a.set(await _v("sha256",o),s*32)}return a.slice(0,t>>3)}const rd=e=>{let t=e;typeof t=="string"&&(t=je.encode(t));const r=32768,n=[];for(let a=0;a<t.length;a+=r)n.push(String.fromCharCode.apply(null,t.subarray(a,a+r)));return btoa(n.join(""))},Ge=e=>rd(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),wv=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},nt=e=>{let t=e;t instanceof Uint8Array&&(t=Xt.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return wv(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class pt extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)==null||r.call(Error,this,this.constructor)}}class xt extends pt{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}}class nu extends pt{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}}class $o extends pt{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Ee extends pt{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class ls extends pt{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class X extends pt{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class we extends pt{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Ot extends pt{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class Av extends pt{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class Pi extends pt{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class nd extends pt{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class Pv extends pt{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class Cv extends pt{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class ad extends pt{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const fx=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:$o,JOSEError:pt,JOSENotSupported:Ee,JWEDecryptionFailed:ls,JWEInvalid:X,JWKInvalid:Av,JWKSInvalid:Pi,JWKSMultipleMatchingKeys:Pv,JWKSNoMatchingKey:nd,JWKSTimeout:Cv,JWSInvalid:we,JWSSignatureVerificationFailed:ad,JWTClaimValidationFailed:xt,JWTExpired:nu,JWTInvalid:Ot},Symbol.toStringTag,{value:"Module"})),Ci=oe.getRandomValues.bind(oe);function Tv(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Ee(`Unsupported JWE Algorithm: ${e}`)}}const Rv=e=>Ci(new Uint8Array(Tv(e)>>3)),kv=(e,t)=>{if(t.length<<3!==Tv(e))throw new X("Invalid Initialization Vector length")},Oo=(e,t)=>{const r=e.byteLength<<3;if(r!==t)throw new X(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)},mx=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const r=e.length;let n=0,a=-1;for(;++a<r;)n|=e[a]^t[a];return n===0};function ct(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function rn(e,t){return e.name===t}function lo(e){return parseInt(e.name.slice(4),10)}function gx(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Iv(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function yx(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!rn(e.algorithm,"HMAC"))throw ct("HMAC");const n=parseInt(t.slice(2),10);if(lo(e.algorithm.hash)!==n)throw ct(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!rn(e.algorithm,"RSASSA-PKCS1-v1_5"))throw ct("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(lo(e.algorithm.hash)!==n)throw ct(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!rn(e.algorithm,"RSA-PSS"))throw ct("RSA-PSS");const n=parseInt(t.slice(2),10);if(lo(e.algorithm.hash)!==n)throw ct(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw ct("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!rn(e.algorithm,"ECDSA"))throw ct("ECDSA");const n=gx(t);if(e.algorithm.namedCurve!==n)throw ct(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Iv(e,r)}function dn(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!rn(e.algorithm,"AES-GCM"))throw ct("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw ct(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!rn(e.algorithm,"AES-KW"))throw ct("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw ct(n,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw ct("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!rn(e.algorithm,"PBKDF2"))throw ct("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!rn(e.algorithm,"RSA-OAEP"))throw ct("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(lo(e.algorithm.hash)!==n)throw ct(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Iv(e,r)}function xv(e,t,...r){var n;if(r.length>2){const a=r.pop();e+=`one of type ${r.join(", ")}, or ${a}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&(n=t.constructor)!=null&&n.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const wt=(e,...t)=>xv("Key must be ",e,...t);function $v(e,t,...r){return xv(`Key for the ${e} algorithm must be `,t,...r)}const Ov=e=>Mt(e),Ue=["CryptoKey"];async function bx(e,t,r,n,a,s){if(!(t instanceof Uint8Array))throw new TypeError(wt(t,"Uint8Array"));const o=parseInt(e.slice(1,4),10),i=await oe.subtle.importKey("raw",t.subarray(o>>3),"AES-CBC",!1,["decrypt"]),c=await oe.subtle.importKey("raw",t.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),u=Rr(s,n,r,Sv(s.length<<3)),d=new Uint8Array((await oe.subtle.sign("HMAC",c,u)).slice(0,o>>3));let p;try{p=mx(a,d)}catch{}if(!p)throw new ls;let f;try{f=new Uint8Array(await oe.subtle.decrypt({iv:n,name:"AES-CBC"},i,r))}catch{}if(!f)throw new ls;return f}async function vx(e,t,r,n,a,s){let o;t instanceof Uint8Array?o=await oe.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(dn(t,e,"decrypt"),o=t);try{return new Uint8Array(await oe.subtle.decrypt({additionalData:s,iv:n,name:"AES-GCM",tagLength:128},o,Rr(r,a)))}catch{throw new ls}}const Nv=async(e,t,r,n,a,s)=>{if(!Mt(t)&&!(t instanceof Uint8Array))throw new TypeError(wt(t,...Ue,"Uint8Array"));if(!n)throw new X("JWE Initialization Vector missing");if(!a)throw new X("JWE Authentication Tag missing");switch(kv(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&Oo(t,parseInt(e.slice(-3),10)),bx(e,t,r,n,a,s);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&Oo(t,parseInt(e.slice(1,4),10)),vx(e,t,r,n,a,s);default:throw new Ee("Unsupported JWE Content Encryption Algorithm")}},Ss=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const n of t){const a=Object.keys(n);if(!r||r.size===0){r=new Set(a);continue}for(const s of a){if(r.has(s))return!1;r.add(s)}}return!0};function Ex(e){return typeof e=="object"&&e!==null}function at(e){if(!Ex(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const Ti=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function Lv(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function Mv(e,t,r){if(Mt(e))return dn(e,t,r),e;if(e instanceof Uint8Array)return oe.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw new TypeError(wt(e,...Ue,"Uint8Array"))}const au=async(e,t,r)=>{const n=await Mv(t,e,"wrapKey");Lv(n,e);const a=await oe.subtle.importKey("raw",r,...Ti);return new Uint8Array(await oe.subtle.wrapKey("raw",a,n,"AES-KW"))},su=async(e,t,r)=>{const n=await Mv(t,e,"unwrapKey");Lv(n,e);const a=await oe.subtle.unwrapKey("raw",r,n,"AES-KW",...Ti);return new Uint8Array(await oe.subtle.exportKey("raw",a))};async function Fv(e,t,r,n,a=new Uint8Array(0),s=new Uint8Array(0)){if(!Mt(e))throw new TypeError(wt(e,...Ue));if(dn(e,"ECDH"),!Mt(t))throw new TypeError(wt(t,...Ue));dn(t,"ECDH","deriveBits");const o=Rr(dc(je.encode(r)),dc(a),dc(s),td(n));let i;e.algorithm.name==="X25519"?i=256:e.algorithm.name==="X448"?i=448:i=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const c=new Uint8Array(await oe.subtle.deriveBits({name:e.algorithm.name,public:e},t,i));return hx(c,n,o)}async function _x(e){if(!Mt(e))throw new TypeError(wt(e,...Ue));return oe.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function Hv(e){if(!Mt(e))throw new TypeError(wt(e,...Ue));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function Sx(e){if(!(e instanceof Uint8Array)||e.length<8)throw new X("PBES2 Salt Input must be 8 or more octets")}function wx(e,t){if(e instanceof Uint8Array)return oe.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(Mt(e))return dn(e,t,"deriveBits","deriveKey"),e;throw new TypeError(wt(e,...Ue,"Uint8Array"))}async function Dv(e,t,r,n){Sx(e);const a=px(t,e),s=parseInt(t.slice(13,16),10),o={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:a},i={length:s,name:"AES-KW"},c=await wx(n,t);if(c.usages.includes("deriveBits"))return new Uint8Array(await oe.subtle.deriveBits(o,c,s));if(c.usages.includes("deriveKey"))return oe.subtle.deriveKey(o,c,i,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const Ax=async(e,t,r,n=2048,a=Ci(new Uint8Array(16)))=>{const s=await Dv(a,e,n,t);return{encryptedKey:await au(e.slice(-6),s,r),p2c:n,p2s:Ge(a)}},Px=async(e,t,r,n,a)=>{const s=await Dv(a,e,n,t);return su(e.slice(-6),s,r)};function No(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Ee(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const Ri=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},Cx=async(e,t,r)=>{if(!Mt(t))throw new TypeError(wt(t,...Ue));if(dn(t,e,"encrypt","wrapKey"),Ri(e,t),t.usages.includes("encrypt"))return new Uint8Array(await oe.subtle.encrypt(No(e),t,r));if(t.usages.includes("wrapKey")){const n=await oe.subtle.importKey("raw",r,...Ti);return new Uint8Array(await oe.subtle.wrapKey("raw",n,t,No(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},Tx=async(e,t,r)=>{if(!Mt(t))throw new TypeError(wt(t,...Ue));if(dn(t,e,"decrypt","unwrapKey"),Ri(e,t),t.usages.includes("decrypt"))return new Uint8Array(await oe.subtle.decrypt(No(e),t,r));if(t.usages.includes("unwrapKey")){const n=await oe.subtle.unwrapKey("raw",r,t,No(e),...Ti);return new Uint8Array(await oe.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function sd(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Ee(`Unsupported JWE Algorithm: ${e}`)}}const In=e=>Ci(new Uint8Array(sd(e)>>3)),Bv=(e,t)=>{const r=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${r}
-----END ${t}-----`},Wv=async(e,t,r)=>{if(!Mt(r))throw new TypeError(wt(r,...Ue));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==e)throw new TypeError(`key is not a ${e} key`);return Bv(rd(new Uint8Array(await oe.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},Rx=e=>Wv("public","spki",e),kx=e=>Wv("private","pkcs8",e),Jr=(e,t,r=0)=>{r===0&&(t.unshift(t.length),t.unshift(6));const n=e.indexOf(t[0],r);if(n===-1)return!1;const a=e.subarray(n,n+t.length);return a.length!==t.length?!1:a.every((s,o)=>s===t[o])||Jr(e,t,n+1)},Pf=e=>{switch(!0){case Jr(e,[42,134,72,206,61,3,1,7]):return"P-256";case Jr(e,[43,129,4,0,34]):return"P-384";case Jr(e,[43,129,4,0,35]):return"P-521";case Jr(e,[43,101,110]):return"X25519";case Jr(e,[43,101,111]):return"X448";case Jr(e,[43,101,112]):return"Ed25519";case Jr(e,[43,101,113]):return"Ed448";default:throw new Ee("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},Uv=async(e,t,r,n,a)=>{let s,o;const i=new Uint8Array(atob(r.replace(e,"")).split("").map(u=>u.charCodeAt(0))),c=t==="spki";switch(n){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},o=c?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},o=c?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},o=c?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":s={name:"ECDSA",namedCurve:"P-256"},o=c?["verify"]:["sign"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},o=c?["verify"]:["sign"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},o=c?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const u=Pf(i);s=u.startsWith("P-")?{name:"ECDH",namedCurve:u}:{name:u},o=c?[]:["deriveBits"];break}case"EdDSA":s={name:Pf(i)},o=c?["verify"]:["sign"];break;default:throw new Ee('Invalid or unsupported "alg" (Algorithm) value')}return oe.subtle.importKey(t,i,s,(a==null?void 0:a.extractable)??!1,o)},Ix=(e,t,r)=>Uv(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r),jv=(e,t,r)=>Uv(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r);function Cf(e){const t=[];let r=0;for(;r<e.length;){const n=qv(e.subarray(r));t.push(n),r+=n.byteLength}return t}function qv(e){let t=0,r=e[0]&31;if(t++,r===31){for(r=0;e[t]>=128;)r=r*128+e[t]-128,t++;r=r*128+e[t]-128,t++}let n=0;if(e[t]<128)n=e[t],t++;else if(n===128){for(n=0;e[t+n]!==0||e[t+n+1]!==0;){if(n>e.byteLength)throw new TypeError("invalid indefinite form length");n++}const s=t+n+2;return{byteLength:s,contents:e.subarray(t,t+n),raw:e.subarray(0,s)}}else{const s=e[t]&127;t++,n=0;for(let o=0;o<s;o++)n=n*256+e[t],t++}const a=t+n;return{byteLength:a,contents:e.subarray(t,a),raw:e.subarray(0,a)}}function xx(e){const t=Cf(Cf(qv(e).contents)[0].contents);return rd(t[t[0].raw[0]===160?6:5].raw)}function $x(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=wv(t);return Bv(xx(r),"PUBLIC KEY")}const Ox=(e,t,r)=>{let n;try{n=$x(e)}catch(a){throw new TypeError("Failed to parse the X.509 certificate",{cause:a})}return jv(n,t,r)};function Nx(e){let t,r;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Ee('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new Ee('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new Ee('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Ee('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const Lx=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:r}=Nx(e),n=[t,e.ext??!1,e.key_ops??r],a={...e};return delete a.alg,delete a.use,oe.subtle.importKey("jwk",a,...n)},Mx=Lx;async function Fx(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return jv(e,t,r)}async function Hx(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return Ox(e,t,r)}async function Dx(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return Ix(e,t,r)}async function ki(e,t){if(!at(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return nt(e.k);case"RSA":if(e.oth!==void 0)throw new Ee('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Mx({...e,alg:t});default:throw new Ee('Unsupported "kty" (Key Type) Parameter value')}}const Bx=(e,t)=>{if(!(t instanceof Uint8Array)){if(!Ov(t))throw new TypeError($v(e,t,...Ue,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${Ue.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},Wx=(e,t,r)=>{if(!Ov(t))throw new TypeError($v(e,t,...Ue));if(t.type==="secret")throw new TypeError(`${Ue.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${Ue.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${Ue.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${Ue.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${Ue.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},Ii=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?Bx(e,t):Wx(e,t,r)};async function Ux(e,t,r,n,a){if(!(r instanceof Uint8Array))throw new TypeError(wt(r,"Uint8Array"));const s=parseInt(e.slice(1,4),10),o=await oe.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]),i=await oe.subtle.importKey("raw",r.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await oe.subtle.encrypt({iv:n,name:"AES-CBC"},o,t)),u=Rr(a,n,c,Sv(a.length<<3)),d=new Uint8Array((await oe.subtle.sign("HMAC",i,u)).slice(0,s>>3));return{ciphertext:c,tag:d}}async function jx(e,t,r,n,a){let s;r instanceof Uint8Array?s=await oe.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(dn(r,e,"encrypt"),s=r);const o=new Uint8Array(await oe.subtle.encrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},s,t)),i=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:i}}const Vv=async(e,t,r,n,a)=>{if(!Mt(r)&&!(r instanceof Uint8Array))throw new TypeError(wt(r,...Ue,"Uint8Array"));switch(kv(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Oo(r,parseInt(e.slice(-3),10)),Ux(e,t,r,n,a);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Oo(r,parseInt(e.slice(1,4),10)),jx(e,t,r,n,a);default:throw new Ee("Unsupported JWE Content Encryption Algorithm")}};async function qx(e,t,r,n){const a=e.slice(0,7);n||(n=Rv(a));const{ciphertext:s,tag:o}=await Vv(a,r,t,n,new Uint8Array(0));return{encryptedKey:s,iv:Ge(n),tag:Ge(o)}}async function Vx(e,t,r,n,a){const s=e.slice(0,7);return Nv(s,t,r,n,a,new Uint8Array(0))}async function Kx(e,t,r,n,a){switch(Ii(e,t,"decrypt"),e){case"dir":{if(r!==void 0)throw new X("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(r!==void 0)throw new X("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!at(n.epk))throw new X('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!Hv(t))throw new Ee("ECDH with the provided key is not allowed or not supported by your javascript runtime");const s=await ki(n.epk,e);let o,i;if(n.apu!==void 0){if(typeof n.apu!="string")throw new X('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=nt(n.apu)}catch{throw new X("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new X('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{i=nt(n.apv)}catch{throw new X("Failed to base64url decode the apv")}}const c=await Fv(s,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?sd(n.enc):parseInt(e.slice(-5,-2),10),o,i);if(e==="ECDH-ES")return c;if(r===void 0)throw new X("JWE Encrypted Key missing");return su(e.slice(-6),c,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new X("JWE Encrypted Key missing");return Tx(e,t,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new X("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new X('JOSE Header "p2c" (PBES2 Count) missing or invalid');const s=(a==null?void 0:a.maxPBES2Count)||1e4;if(n.p2c>s)throw new X('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new X('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=nt(n.p2s)}catch{throw new X("Failed to base64url decode the p2s")}return Px(e,t,r,n.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new X("JWE Encrypted Key missing");return su(e,t,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new X("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new X('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new X('JOSE Header "tag" (Authentication Tag) missing or invalid');let s;try{s=nt(n.iv)}catch{throw new X("Failed to base64url decode the iv")}let o;try{o=nt(n.tag)}catch{throw new X("Failed to base64url decode the tag")}return Vx(e,t,r,s,o)}default:throw new Ee('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function ws(e,t,r,n,a){if(a.crit!==void 0&&n.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(o=>typeof o!="string"||o.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;r!==void 0?s=new Map([...Object.entries(r),...t.entries()]):s=t;for(const o of n.crit){if(!s.has(o))throw new Ee(`Extension Header Parameter "${o}" is not recognized`);if(a[o]===void 0)throw new e(`Extension Header Parameter "${o}" is missing`);if(s.get(o)&&n[o]===void 0)throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}const ou=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function od(e,t,r){if(!at(e))throw new X("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new X("JOSE Header missing");if(e.iv!==void 0&&typeof e.iv!="string")throw new X("JWE Initialization Vector incorrect type");if(typeof e.ciphertext!="string")throw new X("JWE Ciphertext missing or incorrect type");if(e.tag!==void 0&&typeof e.tag!="string")throw new X("JWE Authentication Tag incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new X("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new X("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new X("JWE AAD incorrect type");if(e.header!==void 0&&!at(e.header))throw new X("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!at(e.unprotected))throw new X("JWE Per-Recipient Unprotected Header incorrect type");let n;if(e.protected)try{const A=nt(e.protected);n=JSON.parse(Xt.decode(A))}catch{throw new X("JWE Protected Header is invalid")}if(!Ss(n,e.header,e.unprotected))throw new X("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...n,...e.header,...e.unprotected};if(ws(X,new Map,r==null?void 0:r.crit,n,a),a.zip!==void 0)throw new Ee('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:s,enc:o}=a;if(typeof s!="string"||!s)throw new X("missing JWE Algorithm (alg) in JWE Header");if(typeof o!="string"||!o)throw new X("missing JWE Encryption Algorithm (enc) in JWE Header");const i=r&&ou("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&ou("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(i&&!i.has(s)||!i&&s.startsWith("PBES2"))throw new $o('"alg" (Algorithm) Header Parameter value not allowed');if(c&&!c.has(o))throw new $o('"enc" (Encryption Algorithm) Header Parameter value not allowed');let u;if(e.encrypted_key!==void 0)try{u=nt(e.encrypted_key)}catch{throw new X("Failed to base64url decode the encrypted_key")}let d=!1;typeof t=="function"&&(t=await t(n,e),d=!0);let p;try{p=await Kx(s,t,u,a,r)}catch(A){if(A instanceof TypeError||A instanceof X||A instanceof Ee)throw A;p=In(o)}let f,h;if(e.iv!==void 0)try{f=nt(e.iv)}catch{throw new X("Failed to base64url decode the iv")}if(e.tag!==void 0)try{h=nt(e.tag)}catch{throw new X("Failed to base64url decode the tag")}const g=je.encode(e.protected??"");let y;e.aad!==void 0?y=Rr(g,je.encode("."),je.encode(e.aad)):y=g;let b;try{b=nt(e.ciphertext)}catch{throw new X("Failed to base64url decode the ciphertext")}const _={plaintext:await Nv(o,p,b,f,h,y)};if(e.protected!==void 0&&(_.protectedHeader=n),e.aad!==void 0)try{_.additionalAuthenticatedData=nt(e.aad)}catch{throw new X("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(_.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(_.unprotectedHeader=e.header),d?{..._,key:t}:_}async function Kv(e,t,r){if(e instanceof Uint8Array&&(e=Xt.decode(e)),typeof e!="string")throw new X("Compact JWE must be a string or Uint8Array");const{0:n,1:a,2:s,3:o,4:i,length:c}=e.split(".");if(c!==5)throw new X("Invalid Compact JWE");const u=await od({ciphertext:o,iv:s||void 0,protected:n,tag:i||void 0,encrypted_key:a||void 0},t,r),d={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return typeof t=="function"?{...d,key:u.key}:d}async function zx(e,t,r){if(!at(e))throw new X("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(at))throw new X("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new X("JWE Recipients has no members");for(const n of e.recipients)try{return await od({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new ls}const Gx=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:Ge(e)};if(!Mt(e))throw new TypeError(wt(e,...Ue,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:a,...s}=await oe.subtle.exportKey("jwk",e);return s},Jx=Gx;async function Xx(e){return Rx(e)}async function Yx(e){return kx(e)}async function zv(e){return Jx(e)}async function Gv(e,t,r,n,a={}){let s,o,i;switch(Ii(e,r,"encrypt"),e){case"dir":{i=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Hv(r))throw new Ee("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:c,apv:u}=a;let{epk:d}=a;d||(d=(await _x(r)).privateKey);const{x:p,y:f,crv:h,kty:g}=await zv(d),y=await Fv(r,d,e==="ECDH-ES"?t:e,e==="ECDH-ES"?sd(t):parseInt(e.slice(-5,-2),10),c,u);if(o={epk:{x:p,crv:h,kty:g}},g==="EC"&&(o.epk.y=f),c&&(o.apu=Ge(c)),u&&(o.apv=Ge(u)),e==="ECDH-ES"){i=y;break}i=n||In(t);const b=e.slice(-6);s=await au(b,y,i);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{i=n||In(t),s=await Cx(e,r,i);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{i=n||In(t);const{p2c:c,p2s:u}=a;({encryptedKey:s,...o}=await Ax(e,r,i,c,u));break}case"A128KW":case"A192KW":case"A256KW":{i=n||In(t),s=await au(e,r,i);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{i=n||In(t);const{iv:c}=a;({encryptedKey:s,...o}=await qx(e,r,i,c));break}default:throw new Ee('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:i,encryptedKey:s,parameters:o}}const Jv=Symbol();class Lo{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new X("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Ss(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new X("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(ws(X,new Map,r==null?void 0:r.crit,this._protectedHeader,n),n.zip!==void 0)throw new Ee('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:a,enc:s}=n;if(typeof a!="string"||!a)throw new X('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof s!="string"||!s)throw new X('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(a==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(a==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let i;{let g;({cek:i,encryptedKey:o,parameters:g}=await Gv(a,s,t,this._cek,this._keyManagementParameters)),g&&(r&&Jv in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...g}:this.setUnprotectedHeader(g):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...g}:this.setProtectedHeader(g))}this._iv||(this._iv=Rv(s));let c,u,d;this._protectedHeader?u=je.encode(Ge(JSON.stringify(this._protectedHeader))):u=je.encode(""),this._aad?(d=Ge(this._aad),c=Rr(u,je.encode("."),je.encode(d))):c=u;const{ciphertext:p,tag:f}=await Vv(s,this._plaintext,i,this._iv,c),h={ciphertext:Ge(p),iv:Ge(this._iv),tag:Ge(f)};return o&&(h.encrypted_key=Ge(o)),d&&(h.aad=d),this._protectedHeader&&(h.protected=Xt.decode(u)),this._sharedUnprotectedHeader&&(h.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(h.header=this._unprotectedHeader),h}}class Qx{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}class Zx{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){const n=new Qx(this,t,{crit:r==null?void 0:r.crit});return this._recipients.push(n),n}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(){var a,s,o;if(!this._recipients.length)throw new X("at least one recipient must be added");if(this._recipients.length===1){const[i]=this._recipients,c=await new Lo(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(i.unprotectedHeader).encrypt(i.key,{...i.options}),u={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(u.aad=c.aad),c.protected&&(u.protected=c.protected),c.unprotected&&(u.unprotected=c.unprotected),c.encrypted_key&&(u.recipients[0].encrypted_key=c.encrypted_key),c.header&&(u.recipients[0].header=c.header),u}let t;for(let i=0;i<this._recipients.length;i++){const c=this._recipients[i];if(!Ss(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new X("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const u={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:d}=u;if(typeof d!="string"||!d)throw new X('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(d==="dir"||d==="ECDH-ES")throw new X('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof u.enc!="string"||!u.enc)throw new X('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!t)t=u.enc;else if(t!==u.enc)throw new X('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(ws(X,new Map,c.options.crit,this._protectedHeader,u),u.zip!==void 0)throw new Ee('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}const r=In(t),n={ciphertext:"",iv:"",recipients:[],tag:""};for(let i=0;i<this._recipients.length;i++){const c=this._recipients[i],u={};n.recipients.push(u);const p={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+i:void 0;if(i===0){const g=await new Lo(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(r).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:p}).encrypt(c.key,{...c.options,[Jv]:!0});n.ciphertext=g.ciphertext,n.iv=g.iv,n.tag=g.tag,g.aad&&(n.aad=g.aad),g.protected&&(n.protected=g.protected),g.unprotected&&(n.unprotected=g.unprotected),u.encrypted_key=g.encrypted_key,g.header&&(u.header=g.header);continue}const{encryptedKey:f,parameters:h}=await Gv(((a=c.unprotectedHeader)==null?void 0:a.alg)||((s=this._protectedHeader)==null?void 0:s.alg)||((o=this._unprotectedHeader)==null?void 0:o.alg),t,c.key,r,{p2c:p});u.encrypted_key=Ge(f),(c.unprotectedHeader||h)&&(u.header={...c.unprotectedHeader,...h})}return n}}function Xv(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new Ee(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function Yv(e,t,r){if(Mt(t))return yx(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(wt(t,...Ue));return oe.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(wt(t,...Ue,"Uint8Array"))}const e$=async(e,t,r,n)=>{const a=await Yv(e,t,"verify");Ri(e,a);const s=Xv(e,a.algorithm);try{return await oe.subtle.verify(s,a,r,n)}catch{return!1}};async function id(e,t,r){if(!at(e))throw new we("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new we('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new we("JWS Protected Header incorrect type");if(e.payload===void 0)throw new we("JWS Payload missing");if(typeof e.signature!="string")throw new we("JWS Signature missing or incorrect type");if(e.header!==void 0&&!at(e.header))throw new we("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{const y=nt(e.protected);n=JSON.parse(Xt.decode(y))}catch{throw new we("JWS Protected Header is invalid")}if(!Ss(n,e.header))throw new we("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...n,...e.header},s=ws(we,new Map([["b64",!0]]),r==null?void 0:r.crit,n,a);let o=!0;if(s.has("b64")&&(o=n.b64,typeof o!="boolean"))throw new we('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=a;if(typeof i!="string"||!i)throw new we('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=r&&ou("algorithms",r.algorithms);if(c&&!c.has(i))throw new $o('"alg" (Algorithm) Header Parameter value not allowed');if(o){if(typeof e.payload!="string")throw new we("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new we("JWS Payload must be a string or an Uint8Array instance");let u=!1;typeof t=="function"&&(t=await t(n,e),u=!0),Ii(i,t,"verify");const d=Rr(je.encode(e.protected??""),je.encode("."),typeof e.payload=="string"?je.encode(e.payload):e.payload);let p;try{p=nt(e.signature)}catch{throw new we("Failed to base64url decode the signature")}if(!await e$(i,t,p,d))throw new ad;let h;if(o)try{h=nt(e.payload)}catch{throw new we("Failed to base64url decode the payload")}else typeof e.payload=="string"?h=je.encode(e.payload):h=e.payload;const g={payload:h};return e.protected!==void 0&&(g.protectedHeader=n),e.header!==void 0&&(g.unprotectedHeader=e.header),u?{...g,key:t}:g}async function Qv(e,t,r){if(e instanceof Uint8Array&&(e=Xt.decode(e)),typeof e!="string")throw new we("Compact JWS must be a string or Uint8Array");const{0:n,1:a,2:s,length:o}=e.split(".");if(o!==3)throw new we("Invalid Compact JWS");const i=await id({payload:a,protected:n,signature:s},t,r),c={payload:i.payload,protectedHeader:i.protectedHeader};return typeof t=="function"?{...c,key:i.key}:c}async function t$(e,t,r){if(!at(e))throw new we("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(at))throw new we("JWS Signatures missing or incorrect type");for(const n of e.signatures)try{return await id({header:n.header,payload:e.payload,protected:n.protected,signature:n.signature},t,r)}catch{}throw new ad}const Xr=e=>Math.floor(e.getTime()/1e3),Zv=60,eE=Zv*60,ld=eE*24,r$=ld*7,n$=ld*365.25,a$=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Za=e=>{const t=a$.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const r=parseFloat(t[2]),n=t[3].toLowerCase();let a;switch(n){case"sec":case"secs":case"second":case"seconds":case"s":a=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":a=Math.round(r*Zv);break;case"hour":case"hours":case"hr":case"hrs":case"h":a=Math.round(r*eE);break;case"day":case"days":case"d":a=Math.round(r*ld);break;case"week":case"weeks":case"w":a=Math.round(r*r$);break;default:a=Math.round(r*n$);break}return t[1]==="-"||t[4]==="ago"?-a:a},Tf=e=>e.toLowerCase().replace(/^application\//,""),s$=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,cd=(e,t,r={})=>{const{typ:n}=r;if(n&&(typeof e.typ!="string"||Tf(e.typ)!==Tf(n)))throw new xt('unexpected "typ" JWT header value',"typ","check_failed");let a;try{a=JSON.parse(Xt.decode(t))}catch{}if(!at(a))throw new Ot("JWT Claims Set must be a top-level JSON object");const{requiredClaims:s=[],issuer:o,subject:i,audience:c,maxTokenAge:u}=r,d=[...s];u!==void 0&&d.push("iat"),c!==void 0&&d.push("aud"),i!==void 0&&d.push("sub"),o!==void 0&&d.push("iss");for(const g of new Set(d.reverse()))if(!(g in a))throw new xt(`missing required "${g}" claim`,g,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(a.iss))throw new xt('unexpected "iss" claim value',"iss","check_failed");if(i&&a.sub!==i)throw new xt('unexpected "sub" claim value',"sub","check_failed");if(c&&!s$(a.aud,typeof c=="string"?[c]:c))throw new xt('unexpected "aud" claim value',"aud","check_failed");let p;switch(typeof r.clockTolerance){case"string":p=Za(r.clockTolerance);break;case"number":p=r.clockTolerance;break;case"undefined":p=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:f}=r,h=Xr(f||new Date);if((a.iat!==void 0||u)&&typeof a.iat!="number")throw new xt('"iat" claim must be a number',"iat","invalid");if(a.nbf!==void 0){if(typeof a.nbf!="number")throw new xt('"nbf" claim must be a number',"nbf","invalid");if(a.nbf>h+p)throw new xt('"nbf" claim timestamp check failed',"nbf","check_failed")}if(a.exp!==void 0){if(typeof a.exp!="number")throw new xt('"exp" claim must be a number',"exp","invalid");if(a.exp<=h-p)throw new nu('"exp" claim timestamp check failed',"exp","check_failed")}if(u){const g=h-a.iat,y=typeof u=="number"?u:Za(u);if(g-p>y)throw new nu('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(g<0-p)throw new xt('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return a};async function o$(e,t,r){var o;const n=await Qv(e,t,r);if((o=n.protectedHeader.crit)!=null&&o.includes("b64")&&n.protectedHeader.b64===!1)throw new Ot("JWTs MUST NOT use unencoded payload");const s={payload:cd(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return typeof t=="function"?{...s,key:n.key}:s}async function i$(e,t,r){const n=await Kv(e,t,r),a=cd(n.protectedHeader,n.plaintext,r),{protectedHeader:s}=n;if(s.iss!==void 0&&s.iss!==a.iss)throw new xt('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(s.sub!==void 0&&s.sub!==a.sub)throw new xt('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(s.aud!==void 0&&JSON.stringify(s.aud)!==JSON.stringify(a.aud))throw new xt('replicated "aud" claim header parameter mismatch',"aud","mismatch");const o={payload:a,protectedHeader:s};return typeof t=="function"?{...o,key:n.key}:o}class tE{constructor(t){this._flattened=new Lo(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){const n=await this._flattened.encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const l$=async(e,t,r)=>{const n=await Yv(e,t,"sign");Ri(e,n);const a=await oe.subtle.sign(Xv(e,n.algorithm),n,r);return new Uint8Array(a)};class ud{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new we("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Ss(this._protectedHeader,this._unprotectedHeader))throw new we("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},a=ws(we,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,n);let s=!0;if(a.has("b64")&&(s=this._protectedHeader.b64,typeof s!="boolean"))throw new we('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=n;if(typeof o!="string"||!o)throw new we('JWS "alg" (Algorithm) Header Parameter missing or invalid');Ii(o,t,"sign");let i=this._payload;s&&(i=je.encode(Ge(i)));let c;this._protectedHeader?c=je.encode(Ge(JSON.stringify(this._protectedHeader))):c=je.encode("");const u=Rr(c,je.encode("."),i),d=await l$(o,t,u),p={signature:Ge(d),payload:""};return s&&(p.payload=Xt.decode(i)),this._unprotectedHeader&&(p.header=this._unprotectedHeader),this._protectedHeader&&(p.protected=Xt.decode(c)),p}}class rE{constructor(t){this._flattened=new ud(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){const n=await this._flattened.sign(t,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class c${constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class u${constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){const n=new c$(this,t,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new we("at least one signature must be added");const t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){const n=this._signatures[r],a=new ud(this._payload);a.setProtectedHeader(n.protectedHeader),a.setUnprotectedHeader(n.unprotectedHeader);const{payload:s,...o}=await a.sign(n.key,n.options);if(r===0)t.payload=s;else if(t.payload!==s)throw new we("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(o)}return t}}function Tn(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}class dd{constructor(t={}){if(!at(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:Tn("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:Tn("setNotBefore",Xr(t))}:this._payload={...this._payload,nbf:Xr(new Date)+Za(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:Tn("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:Tn("setExpirationTime",Xr(t))}:this._payload={...this._payload,exp:Xr(new Date)+Za(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:Xr(new Date)}:t instanceof Date?this._payload={...this._payload,iat:Tn("setIssuedAt",Xr(t))}:typeof t=="string"?this._payload={...this._payload,iat:Tn("setIssuedAt",Xr(new Date)+Za(t))}:this._payload={...this._payload,iat:Tn("setIssuedAt",t)},this}}class d$ extends dd{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var a;const n=new rE(je.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray((a=this._protectedHeader)==null?void 0:a.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Ot("JWTs MUST NOT use unencoded payload");return n.sign(t,r)}}class p$ extends dd{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){const n=new tE(je.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(t,r)}}const Gr=(e,t)=>{if(typeof e!="string"||!e)throw new Av(`${t} missing or invalid`)};async function nE(e,t){if(!at(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":Gr(e.crv,'"crv" (Curve) Parameter'),Gr(e.x,'"x" (X Coordinate) Parameter'),Gr(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":Gr(e.crv,'"crv" (Subtype of Key Pair) Parameter'),Gr(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":Gr(e.e,'"e" (Exponent) Parameter'),Gr(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":Gr(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new Ee('"kty" (Key Type) Parameter missing or unsupported')}const n=je.encode(JSON.stringify(r));return Ge(await _v(t,n))}async function h$(e,t){t??(t="sha256");const r=await nE(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function f$(e,t){const r={...e,...t==null?void 0:t.header};if(!at(r.jwk))throw new we('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await ki({...r.jwk,ext:!0},r.alg);if(n instanceof Uint8Array||n.type!=="public")throw new we('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function m$(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Ee('Unsupported "alg" value for a JSON Web Key Set')}}function aE(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(g$)}function g$(e){return at(e)}function y$(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class sE{constructor(t){if(this._cached=new WeakMap,!aE(t))throw new Pi("JSON Web Key Set malformed");this._jwks=y$(t)}async getKey(t,r){const{alg:n,kid:a}={...t,...r==null?void 0:r.header},s=m$(n),o=this._jwks.keys.filter(u=>{let d=s===u.kty;if(d&&typeof a=="string"&&(d=a===u.kid),d&&typeof u.alg=="string"&&(d=n===u.alg),d&&typeof u.use=="string"&&(d=u.use==="sig"),d&&Array.isArray(u.key_ops)&&(d=u.key_ops.includes("verify")),d&&n==="EdDSA"&&(d=u.crv==="Ed25519"||u.crv==="Ed448"),d)switch(n){case"ES256":d=u.crv==="P-256";break;case"ES256K":d=u.crv==="secp256k1";break;case"ES384":d=u.crv==="P-384";break;case"ES512":d=u.crv==="P-521";break}return d}),{0:i,length:c}=o;if(c===0)throw new nd;if(c!==1){const u=new Pv,{_cached:d}=this;throw u[Symbol.asyncIterator]=async function*(){for(const p of o)try{yield await Rf(d,p,n)}catch{}},u}return Rf(this._cached,i,n)}}async function Rf(e,t,r){const n=e.get(t)||e.set(t,{}).get(t);if(n[r]===void 0){const a=await ki({...t,ext:!0},r);if(a instanceof Uint8Array||a.type!=="public")throw new Pi("JSON Web Key Set members must be public keys");n[r]=a}return n[r]}function b$(e){const t=new sE(e);return async(r,n)=>t.getKey(r,n)}const v$=async(e,t,r)=>{let n,a,s=!1;typeof AbortController=="function"&&(n=new AbortController,a=setTimeout(()=>{s=!0,n.abort()},t));const o=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(i=>{throw s?new Cv:i});if(a!==void 0&&clearTimeout(a),o.status!==200)throw new pt("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await o.json()}catch{throw new pt("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function E$(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let iu;var no,Wm;(typeof navigator>"u"||!((Wm=(no=navigator.userAgent)==null?void 0:no.startsWith)!=null&&Wm.call(no,"Mozilla/5.0 ")))&&(iu="jose/v5.2.2");class _$ extends sE{constructor(t,r){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:r==null?void 0:r.agent,headers:r==null?void 0:r.headers},this._timeoutDuration=typeof(r==null?void 0:r.timeoutDuration)=="number"?r==null?void 0:r.timeoutDuration:5e3,this._cooldownDuration=typeof(r==null?void 0:r.cooldownDuration)=="number"?r==null?void 0:r.cooldownDuration:3e4,this._cacheMaxAge=typeof(r==null?void 0:r.cacheMaxAge)=="number"?r==null?void 0:r.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(t,r)}catch(n){if(n instanceof nd&&this.coolingDown()===!1)return await this.reload(),super.getKey(t,r);throw n}}async reload(){this._pendingFetch&&E$()&&(this._pendingFetch=void 0);const t=new Headers(this._options.headers);iu&&!t.has("User-Agent")&&(t.set("User-Agent",iu),this._options.headers=Object.fromEntries(t.entries())),this._pendingFetch||(this._pendingFetch=v$(this._url,this._timeoutDuration,this._options).then(r=>{if(!aE(r))throw new Pi("JSON Web Key Set malformed");this._jwks={keys:r.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(r=>{throw this._pendingFetch=void 0,r})),await this._pendingFetch}}function S$(e,t){const r=new _$(e,t);return async(n,a)=>r.getKey(n,a)}class w$ extends dd{encode(){const t=Ge(JSON.stringify({alg:"none"})),r=Ge(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){if(typeof t!="string")throw new Ot("Unsecured JWT must be a string");const{0:n,1:a,2:s,length:o}=t.split(".");if(o!==3||s!=="")throw new Ot("Invalid Unsecured JWT");let i;try{if(i=JSON.parse(Xt.decode(nt(n))),i.alg!=="none")throw new Error}catch{throw new Ot("Invalid Unsecured JWT")}return{payload:cd(i,nt(a),r),header:i}}}const A$=Ge,pd=nt,P$=Object.freeze(Object.defineProperty({__proto__:null,decode:pd,encode:A$},Symbol.toStringTag,{value:"Module"}));function C$(e){let t;if(typeof e=="string"){const r=e.split(".");(r.length===3||r.length===5)&&([t]=r)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const r=JSON.parse(Xt.decode(pd(t)));if(!at(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function T$(e){if(typeof e!="string")throw new Ot("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(r===5)throw new Ot("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Ot("Invalid JWT");if(!t)throw new Ot("JWTs must contain a payload");let n;try{n=pd(t)}catch{throw new Ot("Failed to base64url decode the payload")}let a;try{a=JSON.parse(Xt.decode(n))}catch{throw new Ot("Failed to parse the decoded payload as JSON")}if(!at(a))throw new Ot("Invalid JWT Claims Set");return a}async function R$(e,t){let r,n,a;switch(e){case"HS256":case"HS384":case"HS512":r=parseInt(e.slice(-3),10),n={name:"HMAC",hash:`SHA-${r}`,length:r},a=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r=parseInt(e.slice(-3),10),Ci(new Uint8Array(r>>3));case"A128KW":case"A192KW":case"A256KW":r=parseInt(e.slice(1,4),10),n={name:"AES-KW",length:r},a=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10),n={name:"AES-GCM",length:r},a=["encrypt","decrypt"];break;default:throw new Ee('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return oe.subtle.generateKey(n,(t==null?void 0:t.extractable)??!1,a)}function pc(e){const t=(e==null?void 0:e.modulusLength)??2048;if(typeof t!="number"||t<2048)throw new Ee("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function k$(e,t){let r,n;switch(e){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:pc(t)},n=["sign","verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:pc(t)},n=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:pc(t)},n=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"},n=["sign","verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},n=["sign","verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},n=["sign","verify"];break;case"EdDSA":{n=["sign","verify"];const a=(t==null?void 0:t.crv)??"Ed25519";switch(a){case"Ed25519":case"Ed448":r={name:a};break;default:throw new Ee("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{n=["deriveKey","deriveBits"];const a=(t==null?void 0:t.crv)??"P-256";switch(a){case"P-256":case"P-384":case"P-521":{r={name:"ECDH",namedCurve:a};break}case"X25519":case"X448":r={name:a};break;default:throw new Ee("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Ee('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return oe.subtle.generateKey(r,(t==null?void 0:t.extractable)??!1,n)}async function I$(e,t){return k$(e,t)}async function x$(e,t){return R$(e,t)}const $$="WebCryptoAPI",O$=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:tE,CompactSign:rE,EmbeddedJWK:f$,EncryptJWT:p$,FlattenedEncrypt:Lo,FlattenedSign:ud,GeneralEncrypt:Zx,GeneralSign:u$,SignJWT:d$,UnsecuredJWT:w$,base64url:P$,calculateJwkThumbprint:nE,calculateJwkThumbprintUri:h$,compactDecrypt:Kv,compactVerify:Qv,createLocalJWKSet:b$,createRemoteJWKSet:S$,cryptoRuntime:$$,decodeJwt:T$,decodeProtectedHeader:C$,errors:fx,exportJWK:zv,exportPKCS8:Yx,exportSPKI:Xx,flattenedDecrypt:od,flattenedVerify:id,generalDecrypt:zx,generalVerify:t$,generateKeyPair:I$,generateSecret:x$,importJWK:ki,importPKCS8:Dx,importSPKI:Fx,importX509:Hx,jwtDecrypt:i$,jwtVerify:o$},Symbol.toStringTag,{value:"Module"})),N$=pn(O$);var Ua={},kf;function L$(){if(kf)return Ua;kf=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.getHMACKey=void 0;function e(t){const r=new Uint8Array(t.length);for(let n=0,a=t.length;n<a;n++)r[n]=t.charCodeAt(n);return r}return Ua.getHMACKey=e,Ua}Object.defineProperty(ka,"__esModule",{value:!0});ka.decodeSessionToken=void 0;const hd=de,M$=hd.__importStar(N$),If=hd.__importStar(j),F$=L$(),H$=10;function D$(e){return(t,{checkAudience:r=!0}={})=>hd.__awaiter(this,void 0,void 0,function*(){let n;try{n=(yield M$.jwtVerify(t,(0,F$.getHMACKey)(e.apiSecretKey),{algorithms:["HS256"],clockTolerance:H$})).payload}catch(a){throw new If.InvalidJwtError(`Failed to parse session token '${t}': ${a.message}`)}if(r&&n.aud!==e.apiKey)throw new If.InvalidJwtError("Session token had invalid API key");return n})}ka.decodeSessionToken=D$;Object.defineProperty(or,"__esModule",{value:!0});or.customAppSession=or.getCurrentSessionId=or.getOfflineId=or.getJwtSessionId=void 0;const lu=de,B$=cn,xf=Jn(),fd=Cr,W$=Qe,U$=lu.__importStar(j),j$=ka,q$=ed();function oE(e){return(t,r)=>`${(0,fd.sanitizeShop)(e)(t,!0)}_${r}`}or.getJwtSessionId=oE;function iE(e){return t=>`offline_${(0,fd.sanitizeShop)(e)(t,!0)}`}or.getOfflineId=iE;function V$(e){return function(r){var{isOnline:n}=r,a=lu.__rest(r,["isOnline"]);return lu.__awaiter(this,void 0,void 0,function*(){const s=yield(0,xf.abstractConvertRequest)(a),o=(0,W$.logger)(e);if(e.isEmbeddedApp){o.debug("App is embedded, looking for session id in JWT payload",{isOnline:n});const i=s.headers.Authorization;if(i){const c=(typeof i=="string"?i:i[0]).match(/^Bearer (.+)$/);if(!c)throw o.error("Missing Bearer token in authorization header",{isOnline:n}),new U$.MissingJwtTokenError("Missing Bearer token in authorization header");const u=yield(0,j$.decodeSessionToken)(e)(c[1]),d=u.dest.replace(/^https:\/\//,"");return o.debug("Found valid JWT payload",{shop:d,isOnline:n}),n?oE(e)(d,u.sub):iE(e)(d)}else o.error("Missing Authorization header, was the request made with authenticatedFetch?",{isOnline:n})}else return o.debug("App is not embedded, looking for session id in cookies",{isOnline:n}),new xf.Cookies(s,{},{keys:[e.apiSecretKey]}).getAndVerify(B$.SESSION_COOKIE_NAME)})}}or.getCurrentSessionId=V$;function K$(e){return t=>new q$.Session({id:"",shop:`${(0,fd.sanitizeShop)(e)(t,!0)}`,state:"",isOnline:!1})}or.customAppSession=K$;Object.defineProperty(Es,"__esModule",{value:!0});Es.createSession=void 0;const z$=de,G$=hv,$f=ed(),J$=Qe,Of=or;function X$({config:e,accessTokenResponse:t,shop:r,state:n}){const s=!!t.associated_user;if((0,J$.logger)(e).info("Creating new session",{shop:r,isOnline:s}),s){let o;const i=t,{access_token:c,scope:u}=i,d=z$.__rest(i,["access_token","scope"]),p=new Date(Date.now()+i.expires_in*1e3);return e.isEmbeddedApp?o=(0,Of.getJwtSessionId)(e)(r,`${d.associated_user.id}`):o=(0,G$.v4)(),new $f.Session({id:o,shop:r,state:n,isOnline:s,accessToken:c,scope:u,expires:p,onlineAccessInfo:d})}else return new $f.Session({id:(0,Of.getOfflineId)(e)(r),shop:r,state:n,isOnline:s,accessToken:t.access_token,scope:t.scope})}Es.createSession=X$;Object.defineProperty(Ea,"__esModule",{value:!0});Ea.callback=Ea.begin=void 0;const Un=de,lE=Pk,Y$=Jt,Q$=Un.__importDefault(nv()),co=Un.__importStar(j),Z$=Et,cE=Cr,Zr=Jn(),uE=Qe,Nf=Zu(),eO=bs,uo=cn,tO=vs,rO=Ta,nO=Es,dE=({request:e,log:t,func:r})=>{t.debug(`Possible bot request to auth ${r}: `,{userAgent:e.headers["User-Agent"]})};function aO(e){return t=>Un.__awaiter(this,void 0,void 0,function*(){var{shop:r,callbackPath:n,isOnline:a}=t,s=Un.__rest(t,["shop","callbackPath","isOnline"]);pE(e.isCustomStoreApp,"Cannot perform OAuth for private apps");const o=(0,uE.logger)(e);o.info("Beginning OAuth",{shop:r,isOnline:a,callbackPath:n});const i=yield(0,Zr.abstractConvertRequest)(s),c=yield(0,Zr.abstractConvertIncomingResponse)(s);let u=i.headers["User-Agent"];if(Array.isArray(u)&&(u=u[0]),(0,lE.isbot)(u))return dE({request:i,log:o,func:"begin"}),c.statusCode=410,(0,Zr.abstractConvertResponse)(c,s);const d=new Zr.Cookies(i,c,{keys:[e.apiSecretKey],secure:!0}),p=(0,tO.nonce)();yield d.setAndSign(uo.STATE_COOKIE_NAME,p,{expires:new Date(Date.now()+6e4),sameSite:"lax",secure:!0,path:n});const f={client_id:e.apiKey,scope:e.scopes.toString(),redirect_uri:`${e.hostScheme}://${e.hostName}${n}`,state:p,"grant_options[]":a?"per-user":""},h=new Q$.default;h.putAll(f);const y=`https://${(0,cE.sanitizeShop)(e)(r,!0)}/admin/oauth/authorize${h.stringify()}`;return c.statusCode=302,c.statusText="Found",c.headers=Object.assign(Object.assign(Object.assign({},c.headers),d.response.headers),{Location:y}),o.debug(`OAuth started, redirecting to ${y}`,{shop:r,isOnline:a}),(0,Zr.abstractConvertResponse)(c,s)})}Ea.begin=aO;function sO(e){return function(r){var n=Un.__rest(r,[]);return Un.__awaiter(this,void 0,void 0,function*(){pE(e.isCustomStoreApp,"Cannot perform OAuth for private apps");const a=(0,uE.logger)(e),s=yield(0,Zr.abstractConvertRequest)(n),o=new URL(s.url,`${e.hostScheme}://${e.hostName}`).searchParams,i=o.get("shop"),c={};let u=s.headers["User-Agent"];if(Array.isArray(u)&&(u=u[0]),(0,lE.isbot)(u))throw dE({request:s,log:a,func:"callback"}),new co.BotActivityDetected("Invalid OAuth callback initiated by bot");a.info("Completing OAuth",{shop:i});const d=new Zr.Cookies(s,c,{keys:[e.apiSecretKey],secure:!0}),p=yield d.getAndVerify(uo.STATE_COOKIE_NAME);if(d.deleteCookie(uo.STATE_COOKIE_NAME),!p)throw a.error("Could not find OAuth cookie",{shop:i}),new co.CookieNotFound(`Cannot complete OAuth process. Could not find an OAuth cookie for shop url: ${i}`);const f=Object.fromEntries(o.entries());if(!(yield oO({config:e,query:f,stateFromCookie:p})))throw a.error("Invalid OAuth callback",{shop:i,stateFromCookie:p}),new co.InvalidOAuthError("Invalid OAuth callback.");a.debug("OAuth request is valid, requesting access token",{shop:i});const h={client_id:e.apiKey,client_secret:e.apiSecretKey,code:o.get("code")},g=(0,cE.sanitizeShop)(e)(o.get("shop"),!0),y=yield(0,eO.fetchRequestFactory)(e)(`https://${g}/admin/oauth/access_token`,{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":Nf.DataType.JSON,Accept:Nf.DataType.JSON}});y.ok||(0,Y$.throwFailedRequest)(yield y.json(),y,!1);const b=(0,nO.createSession)({accessTokenResponse:yield y.json(),shop:g,state:p,config:e});return e.isEmbeddedApp||(yield d.setAndSign(uo.SESSION_COOKIE_NAME,b.id,{expires:b.expires,sameSite:"lax",secure:!0,path:"/"})),{headers:yield(0,Zr.abstractConvertHeaders)(d.response.headers,n),session:b}})}}Ea.callback=sO;function oO({config:e,query:t,stateFromCookie:r}){return Un.__awaiter(this,void 0,void 0,function*(){return(yield(0,Z$.validateHmac)(e)(t))&&(0,rO.safeCompare)(t.state,r)})}function pE(e,t){if(e)throw new co.PrivateAppError(t)}var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.buildEmbeddedAppUrl=jn.getEmbeddedAppUrl=void 0;const cu=de,hc=cu.__importStar(j),iO=Jn(),lO=Cr,cO=ys;function uO(e){return t=>cu.__awaiter(this,void 0,void 0,function*(){var r=cu.__rest(t,[]);const n=yield(0,iO.abstractConvertRequest)(r);if(!n)throw new hc.MissingRequiredArgument("getEmbeddedAppUrl requires a request object argument");if(!n.url)throw new hc.InvalidRequestError("Request does not contain a URL");const s=new URL(n.url,`https://${n.headers.host}`).searchParams.get("host");if(typeof s!="string")throw new hc.InvalidRequestError("Request does not contain a host query parameter");return hE(e)(s)})}jn.getEmbeddedAppUrl=uO;function hE(e){return t=>((0,lO.sanitizeHost)()(t,!0),`https://${(0,cO.decodeHost)(t)}/apps/${e.apiKey}`)}jn.buildEmbeddedAppUrl=hE;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.tokenExchange=qn.RequestedTokenType=void 0;const dO=de,pO=Jt,hO=ka,fO=Cr,Lf=Zu(),mO=bs,gO=Es;var Mf;(function(e){e.OnlineAccessToken="urn:shopify:params:oauth:token-type:online-access-token",e.OfflineAccessToken="urn:shopify:params:oauth:token-type:offline-access-token"})(Mf||(qn.RequestedTokenType=Mf={}));const yO="urn:ietf:params:oauth:grant-type:token-exchange",bO="urn:ietf:params:oauth:token-type:id_token";function vO(e){return({shop:t,sessionToken:r,requestedTokenType:n})=>dO.__awaiter(this,void 0,void 0,function*(){yield(0,hO.decodeSessionToken)(e)(r);const a={client_id:e.apiKey,client_secret:e.apiSecretKey,grant_type:yO,subject_token:r,subject_token_type:bO,requested_token_type:n},s=(0,fO.sanitizeShop)(e)(t,!0),o=yield(0,mO.fetchRequestFactory)(e)(`https://${s}/admin/oauth/access_token`,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":Lf.DataType.JSON,Accept:Lf.DataType.JSON}});return o.ok||(0,pO.throwFailedRequest)(yield o.json(),o,!1),{session:(0,gO.createSession)({accessTokenResponse:yield o.json(),shop:s,state:"",config:e})}})}qn.tokenExchange=vO;Object.defineProperty(di,"__esModule",{value:!0});di.shopifyAuth=void 0;const Ff=Ea,EO=vs,_O=Ta,Hf=jn,SO=qn;function wO(e){return{begin:(0,Ff.begin)(e),callback:(0,Ff.callback)(e),nonce:EO.nonce,safeCompare:_O.safeCompare,getEmbeddedAppUrl:(0,Hf.getEmbeddedAppUrl)(e),buildEmbeddedAppUrl:(0,Hf.buildEmbeddedAppUrl)(e),tokenExchange:(0,SO.tokenExchange)(e)}}di.shopifyAuth=wO;var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.shopifySession=void 0;const AO=ka,Gs=or;function PO(e){return{customAppSession:(0,Gs.customAppSession)(e),getCurrentId:(0,Gs.getCurrentSessionId)(e),getOfflineId:(0,Gs.getOfflineId)(e),getJwtSessionId:(0,Gs.getJwtSessionId)(e),decodeSessionToken:(0,AO.decodeSessionToken)(e)}}xi.shopifySession=PO;var $i={},_a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.versionPriorTo=_a.versionCompatible=void 0;const CO=_e;function fE(e){return(t,r=e.apiVersion)=>{if(r===CO.ApiVersion.Unstable)return!0;const n=o=>parseInt(o.replace("-",""),10),a=n(r),s=n(t);return a>=s}}_a.versionCompatible=fE;function TO(e){return(t,r=e.apiVersion)=>!fE(e)(t,r)}_a.versionPriorTo=TO;Object.defineProperty($i,"__esModule",{value:!0});$i.shopifyUtils=void 0;const Df=Cr,RO=Et,Bf=_a,Wf=Wn;function kO(e){return{sanitizeShop:(0,Df.sanitizeShop)(e),sanitizeHost:(0,Df.sanitizeHost)(),validateHmac:(0,RO.validateHmac)(e),versionCompatible:(0,Bf.versionCompatible)(e),versionPriorTo:(0,Bf.versionPriorTo)(e),shopAdminUrlToLegacyUrl:Wf.shopAdminUrlToLegacyUrl,legacyUrlToShopAdminUrl:Wf.legacyUrlToShopAdminUrl}}$i.shopifyUtils=kO;var Oi={},rt={},Or={},Uf;function As(){if(Uf)return Or;Uf=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.WebhookValidationErrorReason=Or.WebhookOperation=Or.DeliveryMethod=void 0;const e=Ra();var t;(function(n){n.Http="http",n.EventBridge="eventbridge",n.PubSub="pubsub"})(t||(Or.DeliveryMethod=t={}));var r;return function(n){n.Create="create",n.Update="update",n.Delete="delete"}(r||(Or.WebhookOperation=r={})),Or.WebhookValidationErrorReason=Object.assign(Object.assign({},e.ValidationErrorReason),{MissingHeaders:"missing_headers"}),Or}Object.defineProperty(rt,"__esModule",{value:!0});rt.addHostToCallbackUrl=rt.handlerIdentifier=rt.getHandlers=rt.getTopicsAdded=rt.addHandlers=rt.topicForStorage=rt.registry=void 0;const mE=j,IO=Qe,po=As();function xO(){return{}}rt.registry=xO;function md(e){return e.toUpperCase().replace(/\/|\./g,"_")}rt.topicForStorage=md;function $O(e,t){return function(n){for(const[a,s]of Object.entries(n)){const o=md(a);if(Array.isArray(s))for(const i of s)jf(e,t,o,i);else jf(e,t,o,s)}}}rt.addHandlers=$O;function OO(e){return function(){return Object.keys(e)}}rt.getTopicsAdded=OO;function NO(e){return function(r){return e[md(r)]||[]}}rt.getHandlers=NO;function uu(e,t){const r=t.deliveryMethod;switch(t.deliveryMethod){case po.DeliveryMethod.Http:return`${r}_${gE(e,t.callbackUrl)}`;case po.DeliveryMethod.EventBridge:return`${r}_${t.arn}`;case po.DeliveryMethod.PubSub:return`${r}_${t.pubSubProject}:${t.pubSubTopic}`;default:throw new mE.InvalidDeliveryMethodError(`Unrecognized delivery method '${t.deliveryMethod}'`)}}rt.handlerIdentifier=uu;function gE(e,t){return t.startsWith("/")?`${e.hostScheme}://${e.hostName}${t}`:t}rt.addHostToCallbackUrl=gE;function jf(e,t,r,n){var a,s;const o=(0,IO.logger)(e);if((a=n.includeFields)===null||a===void 0||a.sort(),(s=n.metafieldNamespaces)===null||s===void 0||s.sort(),!(r in t)){t[r]=[n];return}const i=uu(e,n);for(const c in t[r]){if(!Object.prototype.hasOwnProperty.call(t[r],c))continue;const u=t[r][c],d=uu(e,u);if(i===d)if(n.deliveryMethod===po.DeliveryMethod.Http){o.info(`Detected multiple handlers for '${r}', webhooks.process will call them sequentially`);break}else throw new mE.InvalidDeliveryMethodError(`Can only add multiple handlers when deliveryMethod is Http. Invalid handler: ${JSON.stringify(n)}`)}t[r].push(n)}var yE={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.queryTemplate=void 0;function LO(e,t){let r=e;return Object.entries(t).forEach(([n,a])=>{r=r.replace(`{{${n}}}`,a)}),r}Ni.queryTemplate=LO;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TEMPLATE_MUTATION=e.TEMPLATE_GET_HANDLERS=e.register=void 0;const t=de,r=gn,n=j,a=Qe,s=_e,o=rt,i=Ni,c=As();function u(E,P){return function({session:x}){return t.__awaiter(this,void 0,void 0,function*(){const $=(0,a.logger)(E);$.info("Registering webhooks",{shop:x.shop});const M=Object.keys(P).reduce((S,O)=>(S[O]=[],S),{}),w=yield d(E,x);$.debug(`Existing topics: [${Object.keys(w).join(", ")}]`,{shop:x.shop});for(const S in P)Object.prototype.hasOwnProperty.call(P,S)&&(s.privacyTopics.includes(S)||(M[S]=yield h({config:E,session:x,topic:S,existingHandlers:w[S]||[],handlers:(0,o.getHandlers)(P)(S)}),delete w[S]));for(const S in w){if(!Object.prototype.hasOwnProperty.call(w,S))continue;const O=(0,r.graphqlClientClass)({config:E}),N=new O({session:x});M[S]=yield v({config:E,client:N,topic:S,handlers:w[S],operation:c.WebhookOperation.Delete})}return M})}}e.register=u;function d(E,P){var C,x,$,M,w,S;return t.__awaiter(this,void 0,void 0,function*(){const O=(0,r.graphqlClientClass)({config:E}),N=new O({session:P}),H={};let L,W=null;do{const F=p(W),D=yield N.request(F);(x=(C=D.data)===null||C===void 0?void 0:C.webhookSubscriptions)===null||x===void 0||x.edges.forEach(q=>{const Y=f(q);H[q.node.topic]||(H[q.node.topic]=[]),H[q.node.topic].push(Y)}),W=(M=($=D.data)===null||$===void 0?void 0:$.webhookSubscriptions)===null||M===void 0?void 0:M.pageInfo.endCursor,L=(S=(w=D.data)===null||w===void 0?void 0:w.webhookSubscriptions)===null||S===void 0?void 0:S.pageInfo.hasNextPage}while(L);return H})}function p(E){return(0,i.queryTemplate)(e.TEMPLATE_GET_HANDLERS,{END_CURSOR:JSON.stringify(E)})}function f(E){var P,C;const x=E.node.endpoint;let $;switch(x.__typename){case"WebhookHttpEndpoint":$={deliveryMethod:c.DeliveryMethod.Http,callbackUrl:x.callbackUrl,callback:()=>t.__awaiter(this,void 0,void 0,function*(){})};break;case"WebhookEventBridgeEndpoint":$={deliveryMethod:c.DeliveryMethod.EventBridge,arn:x.arn};break;case"WebhookPubSubEndpoint":$={deliveryMethod:c.DeliveryMethod.PubSub,pubSubProject:x.pubSubProject,pubSubTopic:x.pubSubTopic};break}return $.id=E.node.id,$.includeFields=E.node.includeFields,$.metafieldNamespaces=E.node.metafieldNamespaces,(P=$.includeFields)===null||P===void 0||P.sort(),(C=$.metafieldNamespaces)===null||C===void 0||C.sort(),$}function h({config:E,session:P,topic:C,existingHandlers:x,handlers:$}){return t.__awaiter(this,void 0,void 0,function*(){let M=[];const{toCreate:w,toUpdate:S,toDelete:O}=g(E,x,$),N=(0,r.graphqlClientClass)({config:E}),H=new N({session:P});let L=c.WebhookOperation.Create;return M=M.concat(yield v({config:E,client:H,topic:C,operation:L,handlers:w})),L=c.WebhookOperation.Update,M=M.concat(yield v({config:E,client:H,topic:C,operation:L,handlers:S})),L=c.WebhookOperation.Delete,M=M.concat(yield v({config:E,client:H,topic:C,operation:L,handlers:O})),M})}function g(E,P,C){const x=C.reduce((O,N)=>(O[(0,o.handlerIdentifier)(E,N)]=N,O),{}),$=P.reduce((O,N)=>(O[(0,o.handlerIdentifier)(E,N)]=N,O),{}),M=Object.assign({},x),w={},S={};for(const O in $){if(!Object.prototype.hasOwnProperty.call($,O))continue;const N=$[O],H=x[O];O in x?(delete M[O],y(N,H)||(w[O]=H,w[O].id=N.id)):S[O]=N}return{toCreate:Object.values(M),toUpdate:Object.values(w),toDelete:Object.values(S)}}function y(E,P){const C=b(E.includeFields||[],P.includeFields||[]),x=b(E.metafieldNamespaces||[],P.metafieldNamespaces||[]);return C&&x}function b(E,P){if(E.length!==P.length)return!1;for(let C=0;C<E.length;C++)if(E[C]!==P[C])return!1;return!0}function v({config:E,client:P,topic:C,handlers:x,operation:$}){return t.__awaiter(this,void 0,void 0,function*(){const M=[];for(const w of x)M.push(yield _({config:E,client:P,topic:C,handler:w,operation:$}));return M})}function _({config:E,client:P,topic:C,handler:x,operation:$}){return t.__awaiter(this,void 0,void 0,function*(){let M;(0,a.logger)(E).debug("Running webhook mutation",{topic:C,operation:$});try{const w=A(E,C,x,$),S=yield P.request(w);M={deliveryMethod:x.deliveryMethod,success:I(S,x,$),result:S,operation:$}}catch(w){if(w instanceof n.InvalidDeliveryMethodError)M={deliveryMethod:x.deliveryMethod,success:!1,result:{message:w.message},operation:$};else throw w}return M})}function A(E,P,C,x){const $={};let M;C.id?M=`id: "${C.id}"`:M=`topic: ${P}`;const w={MUTATION_NAME:T(C,x),IDENTIFIER:M,MUTATION_PARAMS:""};if(x!==c.WebhookOperation.Delete){switch(C.deliveryMethod){case c.DeliveryMethod.Http:$.callbackUrl=`"${(0,o.addHostToCallbackUrl)(E,C.callbackUrl)}"`;break;case c.DeliveryMethod.EventBridge:$.arn=`"${C.arn}"`;break;case c.DeliveryMethod.PubSub:$.pubSubProject=`"${C.pubSubProject}"`,$.pubSubTopic=`"${C.pubSubTopic}"`;break;default:throw new n.InvalidDeliveryMethodError(`Unrecognized delivery method '${C.deliveryMethod}'`)}if(C.includeFields&&($.includeFields=JSON.stringify(C.includeFields)),C.metafieldNamespaces&&($.metafieldNamespaces=JSON.stringify(C.metafieldNamespaces)),C.subTopic){const O=`subTopic: "${C.subTopic}",`;w.MUTATION_PARAMS=O}const S=Object.entries($).map(([O,N])=>`${O}: ${N}`).join(", ");w.MUTATION_PARAMS+=`webhookSubscription: {${S}}`}return(0,i.queryTemplate)(e.TEMPLATE_MUTATION,w)}function T(E,P){switch(P){case c.WebhookOperation.Create:return`${k(E)}Create`;case c.WebhookOperation.Update:return`${k(E)}Update`;case c.WebhookOperation.Delete:return"webhookSubscriptionDelete";default:throw new n.ShopifyError(`Unrecognized operation '${P}'`)}}function k(E){switch(E.deliveryMethod){case c.DeliveryMethod.Http:return"webhookSubscription";case c.DeliveryMethod.EventBridge:return"eventBridgeWebhookSubscription";case c.DeliveryMethod.PubSub:return"pubSubWebhookSubscription";default:throw new n.ShopifyError(`Unrecognized delivery method '${E.deliveryMethod}'`)}}function I(E,P,C){const x=T(P,C);return!!(E.data&&E.data[x]&&E.data[x].userErrors.length===0)}e.TEMPLATE_GET_HANDLERS=`query shopifyApiReadWebhookSubscriptions {
  webhookSubscriptions(
    first: 250,
    after: {{END_CURSOR}},
  ) {
    edges {
      node {
        id
        topic
        includeFields
        metafieldNamespaces
        endpoint {
          __typename
          ... on WebhookHttpEndpoint {
            callbackUrl
          }
          ... on WebhookEventBridgeEndpoint {
            arn
          }
          ... on WebhookPubSubEndpoint {
            pubSubProject
            pubSubTopic
          }
        }
      }
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}`,e.TEMPLATE_MUTATION=`
  mutation shopifyApiCreateWebhookSubscription {
    {{MUTATION_NAME}}(
      {{IDENTIFIER}},
      {{MUTATION_PARAMS}}
    ) {
      userErrors {
        field
        message
      }
    }
  }
`})(yE);var Li={},Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.validateFactory=void 0;const qf=de,MO=Qe,FO=Et,fc=Ra(),bE=Jn(),xn=_e,vE=As(),HO=rt,EE={subTopic:xn.ShopifyHeader.SubTopic},DO=Object.assign({apiVersion:xn.ShopifyHeader.ApiVersion,domain:xn.ShopifyHeader.Domain,hmac:xn.ShopifyHeader.Hmac,topic:xn.ShopifyHeader.Topic,webhookId:xn.ShopifyHeader.WebhookId},EE);function BO(e){return function(r){var{rawBody:n}=r,a=qf.__rest(r,["rawBody"]);return qf.__awaiter(this,void 0,void 0,function*(){const s=yield(0,bE.abstractConvertRequest)(a),o=yield(0,FO.validateHmacFromRequestFactory)(e)(Object.assign({type:fc.HmacValidationType.Webhook,rawBody:n},a));return o.valid?WO(s.headers):o.reason===fc.ValidationErrorReason.MissingHmac?{valid:!1,reason:vE.WebhookValidationErrorReason.MissingHeaders,missingHeaders:[xn.ShopifyHeader.Hmac]}:(o.reason===fc.ValidationErrorReason.InvalidHmac&&(yield(0,MO.logger)(e).debug("Webhook HMAC validation failed. Please note that events manually triggered from a store's Notifications settings will fail this validation. To test this, please use the CLI or trigger the actual event in a development store.")),o)})}}Ps.validateFactory=BO;function WO(e){const t=[],n=Object.entries(DO).reduce((a,[s,o])=>{const i=(0,bE.getHeader)(e,o);return i?a[s]=i:s in EE||t.push(o),a},{});return t.length?{valid:!1,reason:vE.WebhookValidationErrorReason.MissingHeaders,missingHeaders:t}:Object.assign(Object.assign(Object.assign({valid:!0},n),n.subTopic?{subTopic:n.subTopic}:{}),{topic:(0,HO.topicForStorage)(n.topic)})}Object.defineProperty(Li,"__esModule",{value:!0});Li.process=void 0;const Sa=de,Tt=Yu,mc=Jn(),_E=Sa.__importStar(j),gd=Qe,ho=As(),UO=Ps,Vf={[Tt.StatusCode.Ok]:"OK",[Tt.StatusCode.BadRequest]:"Bad Request",[Tt.StatusCode.Unauthorized]:"Unauthorized",[Tt.StatusCode.NotFound]:"Not Found",[Tt.StatusCode.InternalServerError]:"Internal Server Error"};function jO(e,t){return function(n){var{rawBody:a}=n,s=Sa.__rest(n,["rawBody"]);return Sa.__awaiter(this,void 0,void 0,function*(){const o={statusCode:Tt.StatusCode.Ok,statusText:Vf[Tt.StatusCode.Ok],headers:{}};yield(0,gd.logger)(e).info("Receiving webhook request");const i=yield(0,UO.validateFactory)(e)(Object.assign({rawBody:a},s));let c="Unknown error while handling webhook";if(i.valid){const d=yield qO(e,t,i,a);o.statusCode=d.statusCode,(0,mc.isOK)(o)||(c=d.errorMessage||c)}else{const d=yield VO(e,i);o.statusCode=d.statusCode,o.statusText=Vf[o.statusCode],c=d.errorMessage}const u=yield(0,mc.abstractConvertResponse)(o,s);if(!(0,mc.isOK)(o))throw new _E.InvalidWebhookError({message:c,response:u});return Promise.resolve(u)})}}Li.process=jO;function qO(e,t,r,n){return Sa.__awaiter(this,void 0,void 0,function*(){const a=(0,gd.logger)(e),s=Sa.__rest(r,["hmac","valid"]);yield a.debug("Webhook request is valid, looking for HTTP handlers to call",s);const o=t[r.topic]||[],i={statusCode:Tt.StatusCode.Ok};let c=!1;for(const u of o)if(u.deliveryMethod===ho.DeliveryMethod.Http){if(!u.callback)throw i.statusCode=Tt.StatusCode.InternalServerError,i.errorMessage="Cannot call webhooks.process with a webhook handler that doesn't have a callback",new _E.MissingWebhookCallbackError({message:i.errorMessage,response:i});c=!0,yield a.debug("Found HTTP handler, triggering it",s);try{yield u.callback(r.topic,r.domain,n,r.webhookId,r.apiVersion,...r!=null&&r.subTopic?r.subTopic:"")}catch(d){i.statusCode=Tt.StatusCode.InternalServerError,i.errorMessage=d.message}}return c||(yield a.debug("No HTTP handlers found",s),i.statusCode=Tt.StatusCode.NotFound,i.errorMessage=`No HTTP webhooks registered for topic ${r.topic}`),i})}function VO(e,t){return Sa.__awaiter(this,void 0,void 0,function*(){const r={statusCode:Tt.StatusCode.InternalServerError,errorMessage:"Unknown error while handling webhook"};switch(t.reason){case ho.WebhookValidationErrorReason.MissingHeaders:r.statusCode=Tt.StatusCode.BadRequest,r.errorMessage=`Missing one or more of the required HTTP headers to process webhooks: [${t.missingHeaders.join(", ")}]`;break;case ho.WebhookValidationErrorReason.MissingBody:r.statusCode=Tt.StatusCode.BadRequest,r.errorMessage="No body was received when processing webhook";break;case ho.WebhookValidationErrorReason.InvalidHmac:r.statusCode=Tt.StatusCode.Unauthorized,r.errorMessage="Could not validate request HMAC";break}return yield(0,gd.logger)(e).debug(`Webhook request is invalid, returning ${r.statusCode}: ${r.errorMessage}`),r})}Object.defineProperty(Oi,"__esModule",{value:!0});Oi.shopifyWebhooks=void 0;const Js=rt,KO=yE,zO=Li,GO=Ps;function JO(e){const t=(0,Js.registry)();return{addHandlers:(0,Js.addHandlers)(e,t),getTopicsAdded:(0,Js.getTopicsAdded)(t),getHandlers:(0,Js.getHandlers)(t),register:(0,KO.register)(e,t),process:(0,zO.process)(e,t),validate:(0,GO.validateFactory)(e)}}Oi.shopifyWebhooks=JO;var Mi={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.check=void 0;const SE=de,XO=gn,YO=j;function QO(e){return function({session:r,plans:n,isTest:a=!0,returnObject:s=!1}){return SE.__awaiter(this,void 0,void 0,function*(){if(!e.billing)throw new YO.BillingError({message:"Attempted to look for purchases without billing configs",errorData:[]});const o=(0,XO.graphqlClientClass)({config:e}),i=new o({session:r}),c=Array.isArray(n)?n:[n];return ZO({plans:c,client:i,isTest:a,returnObject:s})})}}Fi.check=QO;function ZO({plans:e,client:t,isTest:r,returnObject:n}){var a;return SE.__awaiter(this,void 0,void 0,function*(){const s=n?{hasActivePayment:!1,oneTimePurchases:[],appSubscriptions:[]}:!1;let o,i=null;do{if(o=(a=(yield t.request(rN,{variables:{endCursor:i}})).data)===null||a===void 0?void 0:a.currentAppInstallation,n)o.activeSubscriptions.map(u=>{wE({plans:e,isTest:r,subscription:u})&&(s.hasActivePayment=!0,s.appSubscriptions.push(u))}),o.oneTimePurchases.edges.map(u=>{AE({plans:e,isTest:r,purchase:u.node})&&(s.hasActivePayment=!0,s.oneTimePurchases.push(u.node))});else{const u={plans:e,isTest:r,installation:o};if(eN(u)||tN(u))return!0}i=o.oneTimePurchases.pageInfo.endCursor}while(o!=null&&o.oneTimePurchases.pageInfo.hasNextPage);return s})}function wE({plans:e,isTest:t,subscription:r}){return e.includes(r.name)&&(t||!r.test)}function AE({plans:e,isTest:t,purchase:r}){return e.includes(r.name)&&(t||!r.test)&&r.status==="ACTIVE"}function eN({plans:e,isTest:t,installation:r}){return r.activeSubscriptions.some(n=>wE({plans:e,isTest:t,subscription:n}))}function tN({plans:e,isTest:t,installation:r}){return r.oneTimePurchases.edges.some(n=>AE({plans:e,isTest:t,purchase:n.node}))}const rN=`
  query appSubscription($endCursor: String) {
    currentAppInstallation {
      activeSubscriptions {
        id
        name
        test
        lineItems {
          id
          plan {
            pricingDetails {
              ... on AppRecurringPricing {
                price {
                  amount
                  currencyCode
                }
                interval
                discount {
                  durationLimitInIntervals
                  remainingDurationInIntervals
                  priceAfterDiscount {
                    amount
                  }
                  value {
                    ... on AppSubscriptionDiscountAmount {
                      amount {
                        amount
                        currencyCode
                      }
                    }
                    ... on AppSubscriptionDiscountPercentage {
                      percentage
                    }
                  }
                }
              }
              ... on AppUsagePricing {
                balanceUsed {
                  amount
                  currencyCode
                }
                cappedAmount {
                  amount
                  currencyCode
                }
                terms
              }
            }
          }
        }
      }
      oneTimePurchases(first: 250, sortKey: CREATED_AT, after: $endCursor) {
        edges {
          node {
            id
            name
            test
            status
          }
        }
        pageInfo {
          hasNextPage
          endCursor
        }
      }
    }
  }
`;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.request=void 0;const wa=de,es=_e,Vn=j,nN=jn,aN=gn,sN=ei(),oN=Zo();function iN(e){return function(t){var r,{session:n,plan:a,isTest:s=!0,returnUrl:o,returnObject:i=!1}=t,c=wa.__rest(t,["session","plan","isTest","returnUrl","returnObject"]);return wa.__awaiter(this,void 0,void 0,function*(){if(!e.billing||!e.billing[a])throw new Vn.BillingError({message:`Could not find plan ${a} in billing settings`,errorData:[]});const u=Object.assign({},e.billing[a]),d=Object.fromEntries(Object.entries(c).filter(([T,k])=>k!==void 0)),p=n.shop.replace(".myshopify.com",""),f=(0,nN.buildEmbeddedAppUrl)(e)((0,sN.hashString)(`admin.shopify.com/store/${p}`,oN.HashFormat.Base64)),h=`${e.hostScheme}://${e.hostName}?shop=${n.shop}`,g=o||(e.isEmbeddedApp?f:h),y=(0,aN.graphqlClientClass)({config:e}),b=new y({session:n});function v(T){return"lineItems"in T}function _(T){return T.interval===es.BillingInterval.OneTime}let A;if(v(u)){const T=pN(u,d);A=(yield lN({billingConfig:T,plan:a,client:b,returnUrl:g,isTest:s})).appSubscriptionCreate}else if(_(u))A=(yield dN({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:b,returnUrl:g,isTest:s})).appPurchaseOneTimeCreate;else switch(u.interval){case es.BillingInterval.Usage:{A=(yield uN({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:b,returnUrl:g,isTest:s})).appSubscriptionCreate;break}default:A=(yield cN({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:b,returnUrl:g,isTest:s})).appSubscriptionCreate}if(!((r=A.userErrors)===null||r===void 0)&&r.length)throw new Vn.BillingError({message:"Error while billing the store",errorData:A.userErrors});return i?A:A.confirmationUrl})}}Hi.request=iN;function lN({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return wa.__awaiter(this,void 0,void 0,function*(){const s=e.lineItems.map(i=>{if(i.interval===es.BillingInterval.Every30Days||i.interval===es.BillingInterval.Annual){const c={interval:i.interval,price:{amount:i.amount,currencyCode:i.currencyCode}};return i.discount&&(c.discount={durationLimitInIntervals:i.discount.durationLimitInIntervals,value:{amount:i.discount.value.amount,percentage:i.discount.value.percentage}}),{plan:{appRecurringPricingDetails:c}}}else{if(i.interval===es.BillingInterval.Usage)return{plan:{appUsagePricingDetails:{terms:i.terms,cappedAmount:{amount:i.amount,currencyCode:i.currencyCode}}}};throw new Vn.BillingError({message:"Invalid interval provided",errorData:[i]})}}),o=yield r.request(yd,{variables:{name:t,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,returnUrl:n,test:a,lineItems:s}});if(o.errors)throw new Vn.BillingError({message:"Error while billing the store",errorData:o.errors});return o.data})}function cN({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){var s,o,i,c,u;return wa.__awaiter(this,void 0,void 0,function*(){const d=yield r.request(yd,{variables:{name:t,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,returnUrl:n,test:a,lineItems:[{plan:{appRecurringPricingDetails:{interval:e.interval,price:{amount:e.amount,currencyCode:e.currencyCode},discount:{durationLimitInIntervals:(s=e.discount)===null||s===void 0?void 0:s.durationLimitInIntervals,value:{amount:(i=(o=e.discount)===null||o===void 0?void 0:o.value)===null||i===void 0?void 0:i.amount,percentage:(u=(c=e.discount)===null||c===void 0?void 0:c.value)===null||u===void 0?void 0:u.percentage}}}}}]}});if(d.errors)throw new Vn.BillingError({message:"Error while billing the store",errorData:d.errors});return d.data})}function uN({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return wa.__awaiter(this,void 0,void 0,function*(){const s=yield r.request(yd,{variables:{name:t,returnUrl:n,test:a,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,lineItems:[{plan:{appUsagePricingDetails:{terms:e.usageTerms,cappedAmount:{amount:e.amount,currencyCode:e.currencyCode}}}}]}});if(s.errors)throw new Vn.BillingError({message:`Error while billing the store:: ${s.errors}`,errorData:s.errors});return s.data})}function dN({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return wa.__awaiter(this,void 0,void 0,function*(){const s=yield r.request(hN,{variables:{name:t,returnUrl:n,test:a,price:{amount:e.amount,currencyCode:e.currencyCode}}});if(s.errors)throw new Vn.BillingError({message:"Error while billing the store",errorData:s.errors});return s.data})}function pN(e,t){const r=Object.assign(Object.assign({},e),t),n=[];if(e.lineItems&&t.lineItems){for(const a of e.lineItems){let s=!1;for(const o of t.lineItems)if(a.interval===o.interval){n.push(Object.assign(Object.assign({},a),o)),s=!0;break}s||n.push(a)}r.lineItems=n}return r}const yd=`
  mutation test(
    $name: String!
    $lineItems: [AppSubscriptionLineItemInput!]!
    $returnUrl: URL!
    $test: Boolean
    $trialDays: Int
    $replacementBehavior: AppSubscriptionReplacementBehavior
  ) {
    appSubscriptionCreate(
      name: $name
      lineItems: $lineItems
      returnUrl: $returnUrl
      test: $test
      trialDays: $trialDays
      replacementBehavior: $replacementBehavior
    ) {
      appSubscription {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`,hN=`
  mutation test(
    $name: String!
    $price: MoneyInput!
    $returnUrl: URL!
    $test: Boolean
  ) {
    appPurchaseOneTimeCreate(
      name: $name
      price: $price
      returnUrl: $returnUrl
      test: $test
    ) {
      appPurchaseOneTime {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`;var Di={};Object.defineProperty(Di,"__esModule",{value:!0});Di.cancel=void 0;const fN=de,mN=gn,gc=j,gN=`
  mutation appSubscriptionCancel($id: ID!, $prorate: Boolean) {
    appSubscriptionCancel(id: $id, prorate: $prorate) {
      appSubscription {
        id
        name
        test
      }
      userErrors {
        field
        message
      }
    }
  }
`;function yN(e){return function(t){var r,n,a,s,o,i,c;return fN.__awaiter(this,void 0,void 0,function*(){const{session:u,subscriptionId:d,prorate:p=!0}=t,f=(0,mN.graphqlClientClass)({config:e}),h=new f({session:u});try{const g=yield h.request(gN,{variables:{id:d,prorate:p}});if(!((n=(r=g.data)===null||r===void 0?void 0:r.appSubscriptionCancel)===null||n===void 0)&&n.userErrors.length)throw new gc.BillingError({message:"Error while canceling a subscription",errorData:(s=(a=g.data)===null||a===void 0?void 0:a.appSubscriptionCancel)===null||s===void 0?void 0:s.userErrors});return(i=(o=g.data)===null||o===void 0?void 0:o.appSubscriptionCancel)===null||i===void 0?void 0:i.appSubscription}catch(g){throw g instanceof gc.GraphqlQueryError?new gc.BillingError({message:g.message,errorData:(c=g.response)===null||c===void 0?void 0:c.errors}):g}})}}Di.cancel=yN;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.subscriptions=void 0;const bN=de,vN=j,EN=gn,_N=`
query appSubscription {
  currentAppInstallation {
    activeSubscriptions {
      id
      name
      test
      lineItems {
        id
        plan {
          pricingDetails {
            ... on AppRecurringPricing {
              price {
                amount
                currencyCode
              }
              interval
              discount {
                durationLimitInIntervals
                remainingDurationInIntervals
                priceAfterDiscount {
                  amount
                }
                value {
                  ... on AppSubscriptionDiscountAmount {
                    amount {
                      amount
                      currencyCode
                    }
                  }
                  ... on AppSubscriptionDiscountPercentage {
                    percentage
                  }
                }
              }
            }
            ... on AppUsagePricing {
              balanceUsed {
                amount
                currencyCode
              }
              cappedAmount {
                amount
                currencyCode
              }
              terms
            }
          }
        }
      }
    }
  }
}
`;function SN(e){return function({session:t}){var r;return bN.__awaiter(this,void 0,void 0,function*(){if(!e.billing)throw new vN.BillingError({message:"Attempted to look for purchases without billing configs",errorData:[]});const n=(0,EN.graphqlClientClass)({config:e});return(r=(yield new n({session:t}).request(_N)).data)===null||r===void 0?void 0:r.currentAppInstallation})}}Bi.subscriptions=SN;Object.defineProperty(Mi,"__esModule",{value:!0});Mi.shopifyBilling=void 0;const wN=Fi,AN=Hi,PN=Di,CN=Bi;function TN(e){return{check:(0,wN.check)(e),request:(0,AN.request)(e),cancel:(0,PN.cancel)(e),subscriptions:(0,CN.subscriptions)(e)}}Mi.shopifyBilling=TN;var Wi={},Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.validateFactory=void 0;const Kf=de,RN=Ra(),kN=Et;function IN(e){return function(r){var{rawBody:n}=r,a=Kf.__rest(r,["rawBody"]);return Kf.__awaiter(this,void 0,void 0,function*(){return(0,kN.validateHmacFromRequestFactory)(e)(Object.assign({type:RN.HmacValidationType.Flow,rawBody:n},a))})}}Ui.validateFactory=IN;Object.defineProperty(Wi,"__esModule",{value:!0});Wi.shopifyFlow=void 0;const xN=Ui;function $N(e){return{validate:(0,xN.validateFactory)(e)}}Wi.shopifyFlow=$N;var ji={},qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.validateFactory=void 0;const zf=de,ON=Et,NN=Ra();function LN(e){return function(r){var{rawBody:n}=r,a=zf.__rest(r,["rawBody"]);return zf.__awaiter(this,void 0,void 0,function*(){return(0,ON.validateHmacFromRequestFactory)(e)(Object.assign({type:NN.HmacValidationType.FulfillmentService,rawBody:n},a))})}}qi.validateFactory=LN;Object.defineProperty(ji,"__esModule",{value:!0});ji.fulfillmentService=void 0;const MN=qi;function FN(e){return{validate:(0,MN.validateFactory)(e)}}ji.fulfillmentService=FN;var yc={},Gf;function HN(){return Gf||(Gf=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;var t=ed();Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return t.Session}})}(yc)),yc}var bc={},Jf;function DN(){return Jf||(Jf=1,Object.defineProperty(bc,"__esModule",{value:!0})),bc}var vc={},Xf;function BN(){return Xf||(Xf=1,Object.defineProperty(vc,"__esModule",{value:!0})),vc}var Ec={},Yf;function WN(){return Yf||(Yf=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequestedTokenType=void 0,de.__exportStar(cn,e);var r=qn;Object.defineProperty(e,"RequestedTokenType",{enumerable:!0,get:function(){return r.RequestedTokenType}})}(Ec)),Ec}var _c={},Qf;function UN(){return Qf||(Qf=1,Object.defineProperty(_c,"__esModule",{value:!0})),_c}var Sc={},Zf;function jN(){return Zf||(Zf=1,Object.defineProperty(Sc,"__esModule",{value:!0})),Sc}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shopifyApi=void 0;const t=de,r=ri,n=Ju,a=ai,s=si,o=oi,i=di,c=xi,u=$i,d=Oi,p=Mi,f=Qe,h=Aa,g=Bn,y=Wi,b=ji;t.__exportStar(j,e),t.__exportStar(HN(),e),t.__exportStar(DN(),e),t.__exportStar(_e,e),t.__exportStar(BN(),e),t.__exportStar(WN(),e),t.__exportStar(UN(),e),t.__exportStar(Zu(),e),t.__exportStar(jN(),e),t.__exportStar(As(),e),t.__exportStar(Ra(),e);function v(_){var{future:A,restResources:T}=_,k=t.__rest(_,["future","restResources"]);const I=Object.assign(Object.assign({},k),{future:A,restResources:T}),E=(0,s.validateConfig)(I),P={config:E,clients:(0,o.clientClasses)(E),auth:(0,i.shopifyAuth)(E),session:(0,c.shopifySession)(E),utils:(0,u.shopifyUtils)(E),webhooks:(0,d.shopifyWebhooks)(E),billing:(0,p.shopifyBilling)(E),flow:(0,y.shopifyFlow)(E),fulfillmentService:(0,b.fulfillmentService)(E),logger:(0,f.logger)(E),rest:{}};return T&&(P.rest=(0,r.loadRestResources)({resources:T,config:E,RestClient:(0,g.restClientClass)({config:E})})),P.logger.info(`version ${h.SHOPIFY_API_LIBRARY_VERSION}, environment ${(0,n.abstractRuntimeString)()}`).catch(C=>console.log(C)),(0,a.logDisabledFutureFlags)(E,P.logger),P}e.shopifyApi=v})(Ft);var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});let qN=function(e){return e.AppStore="app_store",e.SingleMerchant="single_merchant",e.ShopifyAdmin="shopify_admin",e}({}),VN=function(e){return e.MissingShop="MISSING_SHOP",e.InvalidShop="INVALID_SHOP",e}({});Ia.AppDistribution=qN;Ia.LoginErrorType=VN;var bd={},vd={};Object.defineProperty(vd,"__esModule",{value:!0});function KN(e){const{parentHeaders:t,loaderHeaders:r,actionHeaders:n,errorHeaders:a}=e;return a&&Array.from(a.entries()).length>0?a:new Headers([...t?Array.from(t.entries()):[],...r?Array.from(r.entries()):[],...n?Array.from(n.entries()):[]])}vd.headersBoundary=KN;var Ed={};Object.defineProperty(Ed,"__esModule",{value:!0});var zN=Sr;function GN(e){if(e.constructor.name==="ErrorResponse"||e.constructor.name==="ErrorResponseImpl")return zN.jsx("div",{dangerouslySetInnerHTML:{__html:e.data||"Handling response"}});throw e}Ed.errorBoundary=GN;Object.defineProperty(bd,"__esModule",{value:!0});var JN=vd,XN=Ed;const YN={error:XN.errorBoundary,headers:JN.headersBoundary};bd.boundary=YN;var _d={},Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});const QN="2.6.1";Vi.SHOPIFY_REMIX_LIBRARY_VERSION=QN;var Sd={};Object.defineProperty(Sd,"__esModule",{value:!0});function ZN({api:e,logger:t}){return async function({session:n}){return e.webhooks.register({session:n}).then(a=>(Object.entries(a).forEach(([s,o])=>{o.forEach(({success:i,...c})=>{i?t.debug("Registered webhook",{topic:s,shop:n.shop,operation:c.operation}):t.error("Failed to register webhook",{topic:s,shop:n.shop,result:JSON.stringify(c.result)})})}),a)).catch(a=>{var s,o;if((((s=a.body)===null||s===void 0||(o=s.errors)===null||o===void 0?void 0:o.graphQLErrors)||[]).find(({extensions:{code:u}})=>u==="THROTTLED"))t.error("Failed to register webhooks",{shop:n.shop,error:JSON.stringify(a)});else throw a})}}Sd.registerWebhooksFactory=ZN;var wd={},Cs={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});const eL="https://cdn.shopify.com/shopifycloud/app-bridge.js",tL="X-Shopify-API-Request-Failure-Reauthorize-Url",rL={"X-Shopify-Retry-Invalid-Session-Request":"1"};bn.APP_BRIDGE_URL=eL;bn.REAUTH_URL_HEADER=tL;bn.RETRY_INVALID_SESSION_HEADER=rL;Object.defineProperty(Cs,"__esModule",{value:!0});var nL=bn;function aL(e,t,r=[]){const{logger:n,config:a}=e;return function(o){const i=t.headers.get("Origin");if(i&&i!==a.appUrl){n.debug("Request comes from a different origin, adding CORS headers");const c=new Set(["Authorization","Content-Type",...r]);o.headers.set("Access-Control-Allow-Origin","*"),o.headers.set("Access-Control-Allow-Headers",[...c].join(", ")),o.headers.set("Access-Control-Expose-Headers",nL.REAUTH_URL_HEADER)}return o}}Cs.ensureCORSHeadersFactory=aL;var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});async function sL({api:e,logger:t},r,{checkAudience:n=!0}={}){t.debug("Validating session token");try{const a=await e.session.decodeSessionToken(r,{checkAudience:n});return t.debug("Session token is valid",{payload:JSON.stringify(a)}),a}catch(a){throw t.debug(`Failed to validate session token: ${a.message}`),new Response(void 0,{status:401,statusText:"Unauthorized"})}}Ki.validateSessionToken=sL;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});const oL="id_token";function iL(e){var t;return(t=e.headers.get("authorization"))===null||t===void 0?void 0:t.replace("Bearer ","")}function lL(e){return new URL(e.url).searchParams.get(oL)}Yn.getSessionTokenFromUrlParam=lL;Yn.getSessionTokenHeader=iL;var zi={};function cL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,i=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}function uL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PE(e){var t=uL(e,"string");return typeof t=="symbol"?t:String(t)}function dL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function em(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PE(n.key),n)}}function pL(e,t,r){return t&&em(e.prototype,t),r&&em(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tm(e,t,r){return t=PE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CE(e,t){return hL(e)||cL(e,t)||fL(e,t)||mL()}function hL(e){if(Array.isArray(e))return e}function fL(e,t){if(e){if(typeof e=="string")return rm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rm(e,t)}}function rm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _r(e,t){var r=RE(e,t,"get");return gL(e,r)}function TE(e,t,r){var n=RE(e,t,"set");return yL(e,n,r),r}function RE(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function gL(e,t){return t.get?t.get.call(e):t.value}function yL(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function ja(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function kE(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nm(e,t,r){kE(e,t),t.set(e,r)}function am(e,t){kE(e,t),t.add(e)}var IE=[" daum[ /]"," deusu/"," yadirectfetcher","(?:^| )site","(?:^|[^g])news","@[a-z]","\\(at\\)[a-z]","\\(github\\.com/","\\[at\\][a-z]","^12345","^<","^[\\w \\.\\-\\(\\)]+(/v?\\d+(\\.\\d+)?(\\.\\d{1,10})?)?$","^[^ ]{50,}$","^active","^ad muncher","^amaya","^anglesharp/","^anonymous","^avsdevicesdk/","^axios/","^bidtellect/","^biglotron","^btwebclient/","^castro","^clamav[ /]","^client/","^cobweb/","^coccoc","^custom","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^facebook","^fdm[ /]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^jeode/","^jetty/","^jigsaw","^linkdex","^lwp[-: ]","^metauri","^microsoft bits","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^mozilla/\\d\\.\\d \\w*$","^navermailapp","^netsurf","^offline explorer","^php","^postman","^postrank","^python","^read","^reed","^restsharp/","^snapchat","^space bison","^svn","^swcd ","^taringa","^test certificate info","^thumbor/","^tumblr/","^user-agent:mozilla","^valid","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zoom marketplace/","^{{.*}}$","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","bot","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","cloud","crawl","cryptoapi","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","firephp","freesafeip","gomezagent","google","headlesschrome/","http","httrack","hubspot marketing grader","hydra","ibisbrowser","images","inspect","iplabel","ips-agent","java","library","mail\\.ru/","manager","monitor","morningscore/","neustar wpm","nutch","offbyone","optimize","pageburst","pagespeed","perl","phantom","pingdom","powermarks","preview","proxy","ptst[ /]\\d","reader","rexx;","rigor","rss","scan","scrape","search","serp ?reputation ?management","server","sogou","sparkler/","speedcurve","spider","splash","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","torrent","tracemyfile","transcoder","trendsmapresolver","twingly recon","url","virtuoso","wappalyzer","webglance","webkit2png","websitemetadataretriever","whatcms/","wordpress","zgrab"];function bL(e){try{new RegExp("(?<! cu)bot").test("dangerbot")}catch{return e}return[["bot","(?<! cu)bot"],["google","(?<! (?:channel/|google/))google(?!(app|/google| pixel))"],["http","(?<!(?:lib))http"],["java","java(?!;)"],["search","(?<! ya(?:yandex)?)search"]].forEach(function(t){var r=CE(t,2),n=r[0],a=r[1],s=e.lastIndexOf(n);~s&&e.splice(s,1,a)}),e}bL(IE);var xE="i",Qr=new WeakMap,la=new WeakMap,Xs=new WeakSet,wc=new WeakSet,vL=function(){function e(t){var r=this;dL(this,e),am(this,wc),am(this,Xs),nm(this,Qr,{writable:!0,value:void 0}),nm(this,la,{writable:!0,value:void 0}),TE(this,Qr,t||IE.slice()),ja(this,Xs,Ac).call(this);var n=function(s){return r.test(s)};return Object.defineProperties(n,Object.entries(Object.getOwnPropertyDescriptors(e.prototype)).reduce(function(a,s){var o=CE(s,2),i=o[0],c=o[1];return typeof c.value=="function"&&Object.assign(a,tm({},i,{value:r[i].bind(r)})),typeof c.get=="function"&&Object.assign(a,tm({},i,{get:function(){return r[i]}})),a},{}))}return pL(e,[{key:"pattern",get:function(){return new RegExp(_r(this,la))}},{key:"test",value:function(r){return!!r&&_r(this,la).test(r)}},{key:"isbot",value:function(r){return!!r&&_r(this,la).test(r)}},{key:"find",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=r.match(_r(this,la));return n&&n[0]}},{key:"matches",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return _r(this,Qr).filter(function(n){return new RegExp(n,xE).test(r)})}},{key:"clear",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.exclude(this.matches(r))}},{key:"extend",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];[].push.apply(_r(this,Qr),n.filter(function(a){return ja(r,wc,sm).call(r,a)===-1}).map(function(a){return a.toLowerCase()})),ja(this,Xs,Ac).call(this)}},{key:"exclude",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=r.length;n--;){var a=ja(this,wc,sm).call(this,r[n]);a>-1&&_r(this,Qr).splice(a,1)}ja(this,Xs,Ac).call(this)}},{key:"spawn",value:function(r){return new e(r||_r(this,Qr))}}]),e}();function Ac(){TE(this,la,new RegExp(_r(this,Qr).join("|"),xE))}function sm(e){return _r(this,Qr).indexOf(e.toLowerCase())}var EL=new vL,_L=EL;Object.defineProperty(zi,"__esModule",{value:!0});var SL=_L;function wL(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var AL=wL(SL);function PL({logger:e},t){if(AL.default(t.headers.get("User-Agent")))throw e.debug("Request is from a bot, skipping auth"),new Response(void 0,{status:410,statusText:"Gone"})}zi.respondToBotRequest=PL;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});var CL=Cs;function TL(e,t,r){if(t.method==="OPTIONS")throw CL.ensureCORSHeadersFactory(e,t,r)(new Response(null,{status:204,headers:{"Access-Control-Max-Age":"7200"}}))}Gi.respondToOptionsRequest=TL;const Qn=pn(Aw);var Ad={},Zn={},Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});async function RL(e,t,r,n){const{api:a,config:s}=e;throw await a.auth.begin({shop:n,callbackPath:s.auth.callbackPath,isOnline:r,rawRequest:t})}Ji.beginAuth=RL;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});var kL=Qn;function IL(e,t,r){const{api:n,config:a}=e,o=new URL(t.url).searchParams,i=n.utils.sanitizeHost(o.get("host"));o.set("shop",r);let c=`${a.auth.path}?shop=${r}`;throw i&&(o.set("host",i),c=`${c}&host=${i}`),o.set("exitIframe",c),kL.redirect(`${a.auth.exitIframePath}?${o.toString()}`)}Xi.redirectWithExitIframe=IL;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});var xL=bn;function $L(e){throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:$E(e)})}function $E(e){return new Headers({[xL.REAUTH_URL_HEADER]:e})}xa.getAppBridgeHeaders=$E;xa.redirectWithAppBridgeHeaders=$L;Object.defineProperty(Zn,"__esModule",{value:!0});var OL=Ji,NL=Xi,LL=xa;async function ML(e,t,r,n=!1){const{config:a}=e,o=new URL(t.url).searchParams.get("embedded")==="1";if(t.headers.get("authorization")){const c=new URL(a.auth.path,a.appUrl);c.searchParams.set("shop",r),LL.redirectWithAppBridgeHeaders(c.toString())}else if(o)NL.redirectWithExitIframe(e,t,r);else throw await OL.beginAuth(e,t,n,r)}Zn.redirectToAuthPage=ML;Object.defineProperty(Ad,"__esModule",{value:!0});var FL=Ft,HL=Zn;function DL(e,t,r){return async function(a){const{api:s,logger:o,config:i}=e;o.debug("Cancelling billing",{shop:r.shop,...a});try{return await s.billing.cancel({session:r,subscriptionId:a.subscriptionId,isTest:a.isTest,prorate:a.prorate})}catch(c){throw c instanceof FL.HttpResponseError&&c.response.code===401?(o.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await i.sessionStorage.deleteSession(r.id),await HL.redirectToAuthPage(e,t,r.shop)):c}}}Ad.cancelBillingFactory=DL;var Pd={};Object.defineProperty(Pd,"__esModule",{value:!0});var BL=Ft,WL=Zn;function UL(e,t,r){const{api:n,logger:a,config:s}=e;return async function(i){const c={shop:r.shop,plans:i.plans,isTest:i.isTest};a.debug("Checking billing for the shop",c);let u;try{u=await n.billing.check({session:r,plans:i.plans,isTest:i.isTest,returnObject:!0})}catch(d){throw d instanceof BL.HttpResponseError&&d.response.code===401?(a.debug("API token was invalid, redirecting to OAuth",c),await s.sessionStorage.deleteSession(r.id),await WL.redirectToAuthPage(e,t,r.shop)):d}if(!u.hasActivePayment)throw a.debug("Billing check failed",c),await i.onFailure(new Error("Billing check failed"));return a.debug("Billing check succeeded",c),u}}Pd.requireBillingFactory=UL;var Cd={};Object.defineProperty(Cd,"__esModule",{value:!0});var jL=Ft,om=Qn,qL=Zn,VL=xa;function KL(e,t,r){return async function({plan:a,isTest:s,returnUrl:o,...i}){const{api:c,logger:u,config:d}=e;u.info("Requesting billing",{shop:r.shop,plan:a,isTest:s,returnUrl:o});let p;try{p=await c.billing.request({plan:a,session:r,isTest:s,returnUrl:o,returnObject:!0,...i})}catch(f){throw f instanceof jL.HttpResponseError&&f.response.code===401?(u.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await d.sessionStorage.deleteSession(r.id),await qL.redirectToAuthPage(e,t,r.shop)):f}throw zL(e,t,p.confirmationUrl,r.shop)}}function zL(e,t,r,n){const{config:a,logger:s}=e;s.debug("Redirecting out of app",{url:r});const o=new URL(t.url),i=o.searchParams.get("embedded")==="1";if(t.headers.get("authorization"))throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:VL.getAppBridgeHeaders(r)});if(i){const u=new URLSearchParams({shop:n,host:o.searchParams.get("host"),exitIframe:r});throw om.redirect(`${a.auth.exitIframePath}?${u.toString()}`)}else throw om.redirect(r)}Cd.requestBillingFactory=KL;var Td={};Object.defineProperty(Td,"__esModule",{value:!0});var GL=Ft,JL=Zn;function XL(e,t,r){return async function(a){const{api:s,logger:o,config:i}=e;o.debug("Checking billing plans",{shop:r.shop,...a});try{return await s.billing.check({session:r,plans:a.plans,isTest:a.isTest,returnObject:!0})}catch(c){throw c instanceof GL.HttpResponseError&&c.response.code===401?(o.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await i.sessionStorage.deleteSession(r.id),await JL.redirectToAuthPage(e,t,r.shop)):c}}}Td.checkBillingFactory=XL;var Yi={},ea={},Rd={};Object.defineProperty(Rd,"__esModule",{value:!0});function YL({params:e,handleClientError:t,session:r}){return async function(a,s){const o=new e.api.clients.Graphql({session:r,apiVersion:s==null?void 0:s.apiVersion});try{const i=await o.request(a,{variables:s==null?void 0:s.variables,retries:s!=null&&s.tries?s.tries-1:0,headers:s==null?void 0:s.headers});return new Response(JSON.stringify(i))}catch(i){throw t?await t({error:i,params:e,session:r}):i}}}Rd.graphqlClientFactory=YL;var kd={};Object.defineProperty(kd,"__esModule",{value:!0});function QL({params:e,handleClientError:t,session:r}){const{api:n}=e,a=new ZL({params:e,handleClientError:t,session:r});if(n.rest){a.resources={};const s=eM({params:e,handleClientError:t,session:r});Object.entries(n.rest).forEach(([o,i])=>{class c extends i{}c.Client=s,Reflect.defineProperty(c,"name",{value:o}),Reflect.set(a.resources,o,c)})}return a}class ZL{constructor({params:t,session:r,handleClientError:n}){this.session=void 0,this.params=void 0,this.handleClientError=void 0,this.params=t,this.handleClientError=n,this.session=r}async get(t){return this.makeRequest({method:"GET",...t})}async post(t){return this.makeRequest({method:"POST",...t})}async put(t){return this.makeRequest({method:"PUT",...t})}async delete(t){return this.makeRequest({method:"DELETE",...t})}async makeRequest(t){const r=new this.params.api.clients.Rest({session:this.session}),n=Reflect.get(r,"request");try{const a=await n.call(r,t);return new Response(JSON.stringify(a.body),{headers:a.headers})}catch(a){throw this.handleClientError?await this.handleClientError({error:a,session:this.session,params:this.params}):new Error(a)}}}function eM({params:e,handleClientError:t,session:r}){const{api:n}=e,a=n.clients.Rest;return class extends a{async request(o){const i=new n.clients.Rest({session:r}),c=Reflect.get(i,"request");try{return await c.call(i,o)}catch(u){throw t?await t({error:u,params:e,session:r}):new Error(u)}}}}kd.restClientFactory=QL;Object.defineProperty(ea,"__esModule",{value:!0});var tM=Rd,rM=kd;function nM({params:e,handleClientError:t,session:r}){return{rest:rM.restClientFactory({params:e,session:r,handleClientError:t}),graphql:tM.graphqlClientFactory({params:e,session:r,handleClientError:t})}}ea.adminClientFactory=nM;Object.defineProperty(Yi,"__esModule",{value:!0});var aM=ea;function sM(e,t,r){return aM.adminClientFactory({session:e,params:t,handleClientError:r})}Yi.createAdminApiContext=sM;var Id={},Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});var oM=Qn;async function iM(e,t,r){const{api:n}=t,a=new URL(e.url),s=n.utils.sanitizeHost(a.searchParams.get("host")),o=n.utils.sanitizeShop(a.searchParams.get("shop")),i=n.config.isEmbeddedApp?await n.auth.getEmbeddedAppUrl({rawRequest:e}):`/?shop=${o}&host=${encodeURIComponent(s)}`;throw oM.redirect(i,{headers:r})}Qi.redirectToShopifyOrAppRoot=iM;Object.defineProperty(Id,"__esModule",{value:!0});var lM=Qi;const cM=async(e,t)=>{const{api:r,logger:n,config:a}=e,s=new URL(t.url),o=s.searchParams.get("shop");r.config.isEmbeddedApp&&s.searchParams.get("embedded")!=="1"&&(n.debug("App is not embedded, redirecting to Shopify",{shop:o}),await lM.redirectToShopifyOrAppRoot(t,{api:r,logger:n,config:a}))};Id.ensureAppIsEmbeddedIfRequired=cM;var xd={},Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});var uM=Qn;const dM=(e,t)=>{const{config:r}=e,n=t.searchParams;throw n.delete("id_token"),n.set("shopify-reload",`${r.appUrl}${t.pathname}?${n.toString()}`),uM.redirect(`${r.auth.patchSessionTokenPath}?${n.toString()}`)};Zi.redirectToBouncePage=dM;Object.defineProperty(xd,"__esModule",{value:!0});var pM=Zi;const hM="id_token",fM=async(e,t)=>{const{api:r,logger:n}=e,a=new URL(t.url),s=a.searchParams.get("shop"),o=a.searchParams.get(hM),i=a.searchParams.get("embedded")==="1";r.config.isEmbeddedApp&&i&&!o&&(n.debug("Missing session token in search params, going to bounce page",{shop:s}),pM.redirectToBouncePage(e,a))};xd.ensureSessionTokenSearchParamIfRequired=fM;var $d={},el={},tl={};Object.defineProperty(tl,"__esModule",{value:!0});var mM=bn;let OE;function gM(e){OE=e}function yM(){return OE||mM.APP_BRIDGE_URL}tl.appBridgeUrl=yM;tl.setAppBridgeUrlOverride=gM;var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});function bM(e){const{api:t,config:r}=e;return function(n,a){const{searchParams:s}=new URL(n.url),o=t.utils.sanitizeShop(s.get("shop"));NE(a,r.isEmbeddedApp,o)}}function NE(e,t,r){r&&e.set("Link",'<https://cdn.shopify.com/shopifycloud/app-bridge.js>; rel="preload"; as="script";'),t?r&&e.set("Content-Security-Policy",`frame-ancestors https://${r} https://admin.shopify.com https://*.spin.dev;`):e.set("Content-Security-Policy","frame-ancestors 'none';")}Ts.addDocumentResponseHeaders=NE;Ts.addDocumentResponseHeadersFactory=bM;var Od={};Object.defineProperty(Od,"__esModule",{value:!0});var vM=Ft;const EM=/\/\/\//,_M=/[/\\][/\\]/,SM=/\s/,wM=["https:","http:"];function AM(e,t,r=!0){if(typeof t!="string"||EM.test(t)||SM.test(t))return!1;let n;try{n=new URL(t,e)}catch{return!1}return!(_M.test(n.pathname)||!wM.includes(n.protocol)||r&&n.protocol!=="https:")}function PM(e,t,r={}){if(AM(e,t,r.requireSSL))return new URL(t,e);if(r.throwOnInvalid===!1)return;throw new vM.ShopifyError("Invalid URL. Refusing to redirect")}Od.sanitizeRedirectUrl=PM;Object.defineProperty(el,"__esModule",{value:!0});var CM=tl,TM=Ts,RM=Od;function kM({config:e},t,r){let n="";if(r){var a;const o=RM.sanitizeRedirectUrl(e.appUrl,r.url),i=(a=r.target)!==null&&a!==void 0?a:"_top";n=`<script>window.open(${JSON.stringify(o.toString())}, ${JSON.stringify(i)})<\/script>`}const s=new Headers({"content-type":"text/html;charset=utf-8"});throw TM.addDocumentResponseHeaders(s,e.isEmbeddedApp,new URL(t.url).searchParams.get("shop")),new Response(`
      <script data-api-key="${e.apiKey}" src="${CM.appBridgeUrl()}"><\/script>
      ${n}
    `,{headers:s})}el.renderAppBridge=kM;Object.defineProperty($d,"__esModule",{value:!0});var im=Qn,LE=Yn,lm=el,IM=xa;function xM(e,t){const{config:r}=e;return function(a,s){const{searchParams:o}=new URL(t.url),i=new URL(a,r.appUrl);(i.origin===r.appUrl||a.startsWith("/"))&&o.forEach((d,p)=>{i.searchParams.has(p)||i.searchParams.set(p,d)});const u=typeof s!="number"&&(s==null?void 0:s.target)||"_self";if(u==="_self"){if(ME(t))throw lm.renderAppBridge(e,t,{url:i.toString(),target:u});return im.redirect(i.toString(),s)}else{if($M(t))throw IM.redirectWithAppBridgeHeaders(i.toString());if(FE(t))throw lm.renderAppBridge(e,t,{url:i.toString(),target:u})}return im.redirect(a,s)}}function ME(e){return!!LE.getSessionTokenHeader(e)&&e.headers.has("X-Shopify-Bounce")}function $M(e){const t=e.method==="GET";return!!LE.getSessionTokenHeader(e)&&!ME(e)&&(!FE(e)||!t)}function FE(e){const{searchParams:t}=new URL(e.url);return t.get("embedded")==="1"}$d.redirectFactory=xM;var rl={};Object.defineProperty(rl,"__esModule",{value:!0});var cm=Qn;function OM(e,t){const{api:r,config:n,logger:a}=e;if(n.isEmbeddedApp){const s=new URL(t.url),o=r.utils.sanitizeShop(s.searchParams.get("shop"));if(!o)throw a.debug("Missing or invalid shop, redirecting to login path",{shop:o}),cm.redirect(n.auth.loginPath);if(!r.utils.sanitizeHost(s.searchParams.get("host")))throw a.debug("Invalid host, redirecting to login path",{host:s.searchParams.get("host")}),cm.redirect(n.auth.loginPath)}}rl.validateShopAndHostParams=OM;Object.defineProperty(wd,"__esModule",{value:!0});var um=Cs,NM=Ki,du=Yn,LM=zi,MM=Gi,FM=Ad,HM=Pd,DM=Cd,BM=Td,WM=Yi,UM=Id,jM=xd,qM=$d,dm=el,VM=rl;function KM({strategy:e,...t}){const{api:r,logger:n,config:a}=t;async function s(c){if(new URL(c.url).pathname===a.auth.patchSessionTokenPath)throw n.debug("Rendering bounce page"),dm.renderAppBridge({config:a,logger:n,api:r},c)}async function o(c){const u=new URL(c.url);if(u.pathname===a.auth.exitIframePath){const d=u.searchParams.get("exitIframe");throw n.debug("Rendering exit iframe page",{destination:d}),dm.renderAppBridge({config:a,logger:n,api:r},c,{url:d})}}function i(c,u,d,p){const f={admin:WM.createAdminApiContext(u,t,d.handleClientError(c)),billing:{require:HM.requireBillingFactory(t,c,u),check:BM.checkBillingFactory(t,c,u),request:DM.requestBillingFactory(t,c,u),cancel:FM.cancelBillingFactory(t,c,u)},session:u,cors:um.ensureCORSHeadersFactory(t,c)};return a.isEmbeddedApp?{...f,sessionToken:p,redirect:qM.redirectFactory(t,c)}:f}return async function(u){try{LM.respondToBotRequest(t,u),MM.respondToOptionsRequest(t,u),await s(u),await o(u),await e.respondToOAuthRequests(u),du.getSessionTokenHeader(u)||(VM.validateShopAndHostParams(t,u),await UM.ensureAppIsEmbeddedIfRequired(t,u),await jM.ensureSessionTokenSearchParamIfRequired(t,u)),n.info("Authenticating admin request");const{payload:d,shop:p,sessionId:f,sessionToken:h}=await zM(t,u);n.debug("Loading session from storage",{sessionId:f});const g=f?await a.sessionStorage.loadSession(f):void 0,y=await e.authenticate(u,{session:g,sessionToken:h,shop:p});return n.debug("Request is valid, loaded session from session token",{shop:y.shop,isOnline:y.isOnline}),i(u,y,e,d)}catch(d){throw d instanceof Response&&um.ensureCORSHeadersFactory(t,u)(d),d}}}async function zM(e,t){const{api:r,config:n,logger:a}=e,s=du.getSessionTokenHeader(t),o=du.getSessionTokenFromUrlParam(t),i=s||o;if(a.debug("Attempting to authenticate session token",{sessionToken:JSON.stringify({header:s,search:o})}),n.isEmbeddedApp){const p=await NM.validateSessionToken({config:n,logger:a,api:r},i),h=new URL(p.dest).hostname;a.debug("Session token is valid",{shop:h,payload:p});const g=n.useOnlineTokens?r.session.getJwtSessionId(h,p.sub):r.session.getOfflineId(h);return{shop:h,payload:p,sessionId:g,sessionToken:i}}const u=new URL(t.url).searchParams.get("shop"),d=await r.session.getCurrentId({isOnline:n.useOnlineTokens,rawRequest:t});return{shop:u,sessionId:d,payload:void 0,sessionToken:i}}wd.authStrategyFactory=KM;var Nd={},Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});var GM=Ft;function JM({request:e,onError:t}){return async function({error:n,params:a,session:s}){throw n instanceof GM.HttpResponseError?(a.logger.debug(`Got an HTTP response error from the API: ${n.message}`,{code:n.response.code,statusText:n.response.statusText,body:JSON.stringify(n.response.body)}),t&&await t({request:e,session:s,error:n}),new Response(JSON.stringify(n.response.body),{status:n.response.code,headers:{"Content-Type":n.response.headers["Content-Type"]}})):(a.logger.debug(`Got a response error from the API: ${n.message}`),n)}}Rs.handleClientErrorFactory=JM;Object.defineProperty(Nd,"__esModule",{value:!0});var XM=Ft,YM=ea,QM=Rs;function ZM(e){const{api:t,config:r,logger:n}=e;return async function(s){if(s.method!=="POST")throw n.debug("Received a non-POST request for a webhook. Only POST requests are allowed.",{url:s.url,method:s.method}),new Response(void 0,{status:405,statusText:"Method not allowed"});const o=await s.text(),i=await t.webhooks.validate({rawBody:o,rawRequest:s});if(!i.valid)throw i.reason===XM.WebhookValidationErrorReason.InvalidHmac?(n.debug("Webhook HMAC validation failed",i),new Response(void 0,{status:401,statusText:"Unauthorized"})):(n.debug("Webhook validation failed",i),new Response(void 0,{status:400,statusText:"Bad Request"}));const c=t.session.getOfflineId(i.domain),u=await r.sessionStorage.loadSession(c),d={apiVersion:i.apiVersion,shop:i.domain,topic:i.topic,webhookId:i.webhookId,payload:JSON.parse(o),subTopic:i.subTopic||void 0,session:void 0,admin:void 0};if(!u)return d;let p;if(r.future.v3_webhookAdminContext)p=YM.adminClientFactory({params:e,session:u,handleClientError:QM.handleClientErrorFactory({request:s})});else{const f=new t.clients.Rest({session:u,apiVersion:i.apiVersion}),h=new t.clients.Graphql({session:u,apiVersion:i.apiVersion});Object.entries(t.rest).forEach(([g,y])=>{Reflect.set(f,g,y)}),p={rest:f,graphql:h}}return{...d,session:u,admin:p}}}Nd.authenticateWebhookFactory=ZM;var Ld={},pu={exports:{}};const e2="2.0.0",HE=256,t2=Number.MAX_SAFE_INTEGER||9007199254740991,r2=16,n2=HE-6,a2=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var nl={MAX_LENGTH:HE,MAX_SAFE_COMPONENT_LENGTH:r2,MAX_SAFE_BUILD_LENGTH:n2,MAX_SAFE_INTEGER:t2,RELEASE_TYPES:a2,SEMVER_SPEC_VERSION:e2,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Pc={};const s2=typeof process=="object"&&Pc&&Pc.NODE_DEBUG&&/\bsemver\b/i.test(Pc.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var al=s2;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=nl,s=al;t=e.exports={};const o=t.re=[],i=t.safeRe=[],c=t.src=[],u=t.t={};let d=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",a],[p,n]],h=y=>{for(const[b,v]of f)y=y.split(`${b}*`).join(`${b}{0,${v}}`).split(`${b}+`).join(`${b}{1,${v}}`);return y},g=(y,b,v)=>{const _=h(b),A=d++;s(y,A,b),u[y]=A,c[A]=b,o[A]=new RegExp(b,v?"g":void 0),i[A]=new RegExp(_,v?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),g("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${p}+`),g("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),g("FULL",`^${c[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),g("LOOSE",`^${c[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),g("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[u.COERCE],!0),g("COERCERTLFULL",c[u.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(pu,pu.exports);var ks=pu.exports;const o2=Object.freeze({loose:!0}),i2=Object.freeze({}),l2=e=>e?typeof e!="object"?o2:e:i2;var Md=l2;const pm=/^[0-9]+$/,DE=(e,t)=>{const r=pm.test(e),n=pm.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},c2=(e,t)=>DE(t,e);var BE={compareIdentifiers:DE,rcompareIdentifiers:c2};const Ys=al,{MAX_LENGTH:hm,MAX_SAFE_INTEGER:Qs}=nl,{safeRe:fm,t:mm}=ks,u2=Md,{compareIdentifiers:oa}=BE;let d2=class yr{constructor(t,r){if(r=u2(r),t instanceof yr){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>hm)throw new TypeError(`version is longer than ${hm} characters`);Ys("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?fm[mm.LOOSE]:fm[mm.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Qs||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Qs||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Qs||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const s=+a;if(s>=0&&s<Qs)return s}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ys("SemVer.compare",this.version,this.options,t),!(t instanceof yr)){if(typeof t=="string"&&t===this.version)return 0;t=new yr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof yr||(t=new yr(t,this.options)),oa(this.major,t.major)||oa(this.minor,t.minor)||oa(this.patch,t.patch)}comparePre(t){if(t instanceof yr||(t=new yr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],a=t.prerelease[r];if(Ys("prerelease compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return oa(n,a)}while(++r)}compareBuild(t){t instanceof yr||(t=new yr(t,this.options));let r=0;do{const n=this.build[r],a=t.build[r];if(Ys("prerelease compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return oa(n,a)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(r){let s=[r,a];n===!1&&(s=[r]),oa(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Rt=d2;const gm=Rt,p2=(e,t,r=!1)=>{if(e instanceof gm)return e;try{return new gm(e,t)}catch(n){if(!r)return null;throw n}};var $a=p2;const h2=$a,f2=(e,t)=>{const r=h2(e,t);return r?r.version:null};var m2=f2;const g2=$a,y2=(e,t)=>{const r=g2(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var b2=y2;const ym=Rt,v2=(e,t,r,n,a)=>{typeof r=="string"&&(a=n,n=r,r=void 0);try{return new ym(e instanceof ym?e.version:e,r).inc(t,n,a).version}catch{return null}};var E2=v2;const bm=$a,_2=(e,t)=>{const r=bm(e,null,!0),n=bm(t,null,!0),a=r.compare(n);if(a===0)return null;const s=a>0,o=s?r:n,i=s?n:r,c=!!o.prerelease.length;if(!!i.prerelease.length&&!c)return!i.patch&&!i.minor?"major":o.patch?"patch":o.minor?"minor":"major";const d=c?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"};var S2=_2;const w2=Rt,A2=(e,t)=>new w2(e,t).major;var P2=A2;const C2=Rt,T2=(e,t)=>new C2(e,t).minor;var R2=T2;const k2=Rt,I2=(e,t)=>new k2(e,t).patch;var x2=I2;const $2=$a,O2=(e,t)=>{const r=$2(e,t);return r&&r.prerelease.length?r.prerelease:null};var N2=O2;const vm=Rt,L2=(e,t,r)=>new vm(e,r).compare(new vm(t,r));var ur=L2;const M2=ur,F2=(e,t,r)=>M2(t,e,r);var H2=F2;const D2=ur,B2=(e,t)=>D2(e,t,!0);var W2=B2;const Em=Rt,U2=(e,t,r)=>{const n=new Em(e,r),a=new Em(t,r);return n.compare(a)||n.compareBuild(a)};var Fd=U2;const j2=Fd,q2=(e,t)=>e.sort((r,n)=>j2(r,n,t));var V2=q2;const K2=Fd,z2=(e,t)=>e.sort((r,n)=>K2(n,r,t));var G2=z2;const J2=ur,X2=(e,t,r)=>J2(e,t,r)>0;var sl=X2;const Y2=ur,Q2=(e,t,r)=>Y2(e,t,r)<0;var Hd=Q2;const Z2=ur,eF=(e,t,r)=>Z2(e,t,r)===0;var WE=eF;const tF=ur,rF=(e,t,r)=>tF(e,t,r)!==0;var UE=rF;const nF=ur,aF=(e,t,r)=>nF(e,t,r)>=0;var Dd=aF;const sF=ur,oF=(e,t,r)=>sF(e,t,r)<=0;var Bd=oF;const iF=WE,lF=UE,cF=sl,uF=Dd,dF=Hd,pF=Bd,hF=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return iF(e,r,n);case"!=":return lF(e,r,n);case">":return cF(e,r,n);case">=":return uF(e,r,n);case"<":return dF(e,r,n);case"<=":return pF(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var jE=hF;const fF=Rt,mF=$a,{safeRe:Zs,t:eo}=ks,gF=(e,t)=>{if(e instanceof fF)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Zs[eo.COERCEFULL]:Zs[eo.COERCE]);else{const c=t.includePrerelease?Zs[eo.COERCERTLFULL]:Zs[eo.COERCERTL];let u;for(;(u=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;const n=r[2],a=r[3]||"0",s=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",i=t.includePrerelease&&r[6]?`+${r[6]}`:"";return mF(`${n}.${a}.${s}${o}${i}`,t)};var yF=gF,Cc,_m;function bF(){return _m||(_m=1,Cc=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Cc}var vF=be;be.Node=Kn;be.create=be;function be(e){var t=this;if(t instanceof be||(t=new be),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(a){t.push(a)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}be.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};be.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};be.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};be.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)_F(this,arguments[e]);return this.length};be.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)SF(this,arguments[e]);return this.length};be.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};be.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};be.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};be.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};be.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};be.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};be.prototype.map=function(e,t){t=t||this;for(var r=new be,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};be.prototype.mapReverse=function(e,t){t=t||this;for(var r=new be,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};be.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=0;n!==null;a++)r=e(r,n.value,a),n=n.next;return r};be.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;n!==null;a--)r=e(r,n.value,a),n=n.prev;return r};be.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};be.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};be.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new be;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,a=this.head;a!==null&&n<e;n++)a=a.next;for(;a!==null&&n<t;n++,a=a.next)r.push(a.value);return r};be.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new be;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,a=this.tail;a!==null&&n>t;n--)a=a.prev;for(;a!==null&&n>e;n--,a=a.prev)r.push(a.value);return r};be.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,a=this.head;a!==null&&n<e;n++)a=a.next;for(var s=[],n=0;a&&n<t;n++)s.push(a.value),a=this.removeNode(a);a===null&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var n=0;n<r.length;n++)a=EF(this,a,r[n]);return s};be.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function EF(e,t,r){var n=t===e.head?new Kn(r,null,t,e):new Kn(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function _F(e,t){e.tail=new Kn(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function SF(e,t){e.head=new Kn(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Kn(e,t,r,n){if(!(this instanceof Kn))return new Kn(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{bF()(be)}catch{}const wF=vF,$n=Symbol("max"),Mr=Symbol("length"),ia=Symbol("lengthCalculator"),ts=Symbol("allowStale"),Ln=Symbol("maxAge"),Nr=Symbol("dispose"),Sm=Symbol("noDisposeOnSet"),et=Symbol("lruList"),nr=Symbol("cache"),qE=Symbol("updateAgeOnGet"),Tc=()=>1;class AF{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[$n]=t.max||1/0;const r=t.length||Tc;if(this[ia]=typeof r!="function"?Tc:r,this[ts]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ln]=t.maxAge||0,this[Nr]=t.dispose,this[Sm]=t.noDisposeOnSet||!1,this[qE]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[$n]=t||1/0,qa(this)}get max(){return this[$n]}set allowStale(t){this[ts]=!!t}get allowStale(){return this[ts]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Ln]=t,qa(this)}get maxAge(){return this[Ln]}set lengthCalculator(t){typeof t!="function"&&(t=Tc),t!==this[ia]&&(this[ia]=t,this[Mr]=0,this[et].forEach(r=>{r.length=this[ia](r.value,r.key),this[Mr]+=r.length})),qa(this)}get lengthCalculator(){return this[ia]}get length(){return this[Mr]}get itemCount(){return this[et].length}rforEach(t,r){r=r||this;for(let n=this[et].tail;n!==null;){const a=n.prev;wm(this,t,n,r),n=a}}forEach(t,r){r=r||this;for(let n=this[et].head;n!==null;){const a=n.next;wm(this,t,n,r),n=a}}keys(){return this[et].toArray().map(t=>t.key)}values(){return this[et].toArray().map(t=>t.value)}reset(){this[Nr]&&this[et]&&this[et].length&&this[et].forEach(t=>this[Nr](t.key,t.value)),this[nr]=new Map,this[et]=new wF,this[Mr]=0}dump(){return this[et].map(t=>Mo(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[et]}set(t,r,n){if(n=n||this[Ln],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const a=n?Date.now():0,s=this[ia](r,t);if(this[nr].has(t)){if(s>this[$n])return ga(this,this[nr].get(t)),!1;const c=this[nr].get(t).value;return this[Nr]&&(this[Sm]||this[Nr](t,c.value)),c.now=a,c.maxAge=n,c.value=r,this[Mr]+=s-c.length,c.length=s,this.get(t),qa(this),!0}const o=new PF(t,r,s,a,n);return o.length>this[$n]?(this[Nr]&&this[Nr](t,r),!1):(this[Mr]+=o.length,this[et].unshift(o),this[nr].set(t,this[et].head),qa(this),!0)}has(t){if(!this[nr].has(t))return!1;const r=this[nr].get(t).value;return!Mo(this,r)}get(t){return Rc(this,t,!0)}peek(t){return Rc(this,t,!1)}pop(){const t=this[et].tail;return t?(ga(this,t),t.value):null}del(t){ga(this,this[nr].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const a=t[n],s=a.e||0;if(s===0)this.set(a.k,a.v);else{const o=s-r;o>0&&this.set(a.k,a.v,o)}}}prune(){this[nr].forEach((t,r)=>Rc(this,r,!1))}}const Rc=(e,t,r)=>{const n=e[nr].get(t);if(n){const a=n.value;if(Mo(e,a)){if(ga(e,n),!e[ts])return}else r&&(e[qE]&&(n.value.now=Date.now()),e[et].unshiftNode(n));return a.value}},Mo=(e,t)=>{if(!t||!t.maxAge&&!e[Ln])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Ln]&&r>e[Ln]},qa=e=>{if(e[Mr]>e[$n])for(let t=e[et].tail;e[Mr]>e[$n]&&t!==null;){const r=t.prev;ga(e,t),t=r}},ga=(e,t)=>{if(t){const r=t.value;e[Nr]&&e[Nr](r.key,r.value),e[Mr]-=r.length,e[nr].delete(r.key),e[et].removeNode(t)}};class PF{constructor(t,r,n,a,s){this.key=t,this.value=r,this.length=n,this.now=a,this.maxAge=s||0}}const wm=(e,t,r,n)=>{let a=r.value;Mo(e,a)&&(ga(e,r),e[ts]||(a=void 0)),a&&t.call(n,a.value,a.key,e)};var CF=AF,kc,Am;function dr(){if(Am)return kc;Am=1;class e{constructor(S,O){if(O=n(O),S instanceof e)return S.loose===!!O.loose&&S.includePrerelease===!!O.includePrerelease?S:new e(S.raw,O);if(S instanceof a)return this.raw=S.value,this.set=[[S]],this.format(),this;if(this.options=O,this.loose=!!O.loose,this.includePrerelease=!!O.includePrerelease,this.raw=S.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(H=>!g(H[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const H of this.set)if(H.length===1&&y(H[0])){this.set=[H];break}}}this.format()}format(){return this.range=this.set.map(S=>S.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(S){const N=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+S,H=r.get(N);if(H)return H;const L=this.options.loose,W=L?i[c.HYPHENRANGELOOSE]:i[c.HYPHENRANGE];S=S.replace(W,$(this.options.includePrerelease)),s("hyphen replace",S),S=S.replace(i[c.COMPARATORTRIM],u),s("comparator trim",S),S=S.replace(i[c.TILDETRIM],d),s("tilde trim",S),S=S.replace(i[c.CARETTRIM],p),s("caret trim",S);let F=S.split(" ").map(V=>v(V,this.options)).join(" ").split(/\s+/).map(V=>x(V,this.options));L&&(F=F.filter(V=>(s("loose invalid filter",V,this.options),!!V.match(i[c.COMPARATORLOOSE])))),s("range list",F);const D=new Map,q=F.map(V=>new a(V,this.options));for(const V of q){if(g(V))return[V];D.set(V.value,V)}D.size>1&&D.has("")&&D.delete("");const Y=[...D.values()];return r.set(N,Y),Y}intersects(S,O){if(!(S instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>b(N,O)&&S.set.some(H=>b(H,O)&&N.every(L=>H.every(W=>L.intersects(W,O)))))}test(S){if(!S)return!1;if(typeof S=="string")try{S=new o(S,this.options)}catch{return!1}for(let O=0;O<this.set.length;O++)if(M(this.set[O],S,this.options))return!0;return!1}}kc=e;const t=CF,r=new t({max:1e3}),n=Md,a=ol(),s=al,o=Rt,{safeRe:i,t:c,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:p}=ks,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=nl,g=w=>w.value==="<0.0.0-0",y=w=>w.value==="",b=(w,S)=>{let O=!0;const N=w.slice();let H=N.pop();for(;O&&N.length;)O=N.every(L=>H.intersects(L,S)),H=N.pop();return O},v=(w,S)=>(s("comp",w,S),w=k(w,S),s("caret",w),w=A(w,S),s("tildes",w),w=E(w,S),s("xrange",w),w=C(w,S),s("stars",w),w),_=w=>!w||w.toLowerCase()==="x"||w==="*",A=(w,S)=>w.trim().split(/\s+/).map(O=>T(O,S)).join(" "),T=(w,S)=>{const O=S.loose?i[c.TILDELOOSE]:i[c.TILDE];return w.replace(O,(N,H,L,W,F)=>{s("tilde",w,N,H,L,W,F);let D;return _(H)?D="":_(L)?D=`>=${H}.0.0 <${+H+1}.0.0-0`:_(W)?D=`>=${H}.${L}.0 <${H}.${+L+1}.0-0`:F?(s("replaceTilde pr",F),D=`>=${H}.${L}.${W}-${F} <${H}.${+L+1}.0-0`):D=`>=${H}.${L}.${W} <${H}.${+L+1}.0-0`,s("tilde return",D),D})},k=(w,S)=>w.trim().split(/\s+/).map(O=>I(O,S)).join(" "),I=(w,S)=>{s("caret",w,S);const O=S.loose?i[c.CARETLOOSE]:i[c.CARET],N=S.includePrerelease?"-0":"";return w.replace(O,(H,L,W,F,D)=>{s("caret",w,H,L,W,F,D);let q;return _(L)?q="":_(W)?q=`>=${L}.0.0${N} <${+L+1}.0.0-0`:_(F)?L==="0"?q=`>=${L}.${W}.0${N} <${L}.${+W+1}.0-0`:q=`>=${L}.${W}.0${N} <${+L+1}.0.0-0`:D?(s("replaceCaret pr",D),L==="0"?W==="0"?q=`>=${L}.${W}.${F}-${D} <${L}.${W}.${+F+1}-0`:q=`>=${L}.${W}.${F}-${D} <${L}.${+W+1}.0-0`:q=`>=${L}.${W}.${F}-${D} <${+L+1}.0.0-0`):(s("no pr"),L==="0"?W==="0"?q=`>=${L}.${W}.${F}${N} <${L}.${W}.${+F+1}-0`:q=`>=${L}.${W}.${F}${N} <${L}.${+W+1}.0-0`:q=`>=${L}.${W}.${F} <${+L+1}.0.0-0`),s("caret return",q),q})},E=(w,S)=>(s("replaceXRanges",w,S),w.split(/\s+/).map(O=>P(O,S)).join(" ")),P=(w,S)=>{w=w.trim();const O=S.loose?i[c.XRANGELOOSE]:i[c.XRANGE];return w.replace(O,(N,H,L,W,F,D)=>{s("xRange",w,N,H,L,W,F,D);const q=_(L),Y=q||_(W),V=Y||_(F),ue=V;return H==="="&&ue&&(H=""),D=S.includePrerelease?"-0":"",q?H===">"||H==="<"?N="<0.0.0-0":N="*":H&&ue?(Y&&(W=0),F=0,H===">"?(H=">=",Y?(L=+L+1,W=0,F=0):(W=+W+1,F=0)):H==="<="&&(H="<",Y?L=+L+1:W=+W+1),H==="<"&&(D="-0"),N=`${H+L}.${W}.${F}${D}`):Y?N=`>=${L}.0.0${D} <${+L+1}.0.0-0`:V&&(N=`>=${L}.${W}.0${D} <${L}.${+W+1}.0-0`),s("xRange return",N),N})},C=(w,S)=>(s("replaceStars",w,S),w.trim().replace(i[c.STAR],"")),x=(w,S)=>(s("replaceGTE0",w,S),w.trim().replace(i[S.includePrerelease?c.GTE0PRE:c.GTE0],"")),$=w=>(S,O,N,H,L,W,F,D,q,Y,V,ue,U)=>(_(N)?O="":_(H)?O=`>=${N}.0.0${w?"-0":""}`:_(L)?O=`>=${N}.${H}.0${w?"-0":""}`:W?O=`>=${O}`:O=`>=${O}${w?"-0":""}`,_(q)?D="":_(Y)?D=`<${+q+1}.0.0-0`:_(V)?D=`<${q}.${+Y+1}.0-0`:ue?D=`<=${q}.${Y}.${V}-${ue}`:w?D=`<${q}.${Y}.${+V+1}-0`:D=`<=${D}`,`${O} ${D}`.trim()),M=(w,S,O)=>{for(let N=0;N<w.length;N++)if(!w[N].test(S))return!1;if(S.prerelease.length&&!O.includePrerelease){for(let N=0;N<w.length;N++)if(s(w[N].semver),w[N].semver!==a.ANY&&w[N].semver.prerelease.length>0){const H=w[N].semver;if(H.major===S.major&&H.minor===S.minor&&H.patch===S.patch)return!0}return!1}return!0};return kc}var Ic,Pm;function ol(){if(Pm)return Ic;Pm=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,p){if(p=r(p),d instanceof t){if(d.loose===!!p.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,p),this.options=p,this.loose=!!p.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const p=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],f=d.match(p);if(!f)throw new TypeError(`Invalid comparator: ${d}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new i(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new i(d,this.options)}catch{return!1}return s(d,this.operator,this.semver,this.options)}intersects(d,p){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,p).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,p).test(d.semver):(p=r(p),p.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||s(this.semver,"<",d.semver,p)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||s(this.semver,">",d.semver,p)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}Ic=t;const r=Md,{safeRe:n,t:a}=ks,s=jE,o=al,i=Rt,c=dr();return Ic}const TF=dr(),RF=(e,t,r)=>{try{t=new TF(t,r)}catch{return!1}return t.test(e)};var il=RF;const kF=dr(),IF=(e,t)=>new kF(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var xF=IF;const $F=Rt,OF=dr(),NF=(e,t,r)=>{let n=null,a=null,s=null;try{s=new OF(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||a.compare(o)===-1)&&(n=o,a=new $F(n,r))}),n};var LF=NF;const MF=Rt,FF=dr(),HF=(e,t,r)=>{let n=null,a=null,s=null;try{s=new FF(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||a.compare(o)===1)&&(n=o,a=new MF(n,r))}),n};var DF=HF;const xc=Rt,BF=dr(),Cm=sl,WF=(e,t)=>{e=new BF(e,t);let r=new xc("0.0.0");if(e.test(r)||(r=new xc("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const a=e.set[n];let s=null;a.forEach(o=>{const i=new xc(o.semver.version);switch(o.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!s||Cm(i,s))&&(s=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Cm(r,s))&&(r=s)}return r&&e.test(r)?r:null};var UF=WF;const jF=dr(),qF=(e,t)=>{try{return new jF(e,t).range||"*"}catch{return null}};var VF=qF;const KF=Rt,VE=ol(),{ANY:zF}=VE,GF=dr(),JF=il,Tm=sl,Rm=Hd,XF=Bd,YF=Dd,QF=(e,t,r,n)=>{e=new KF(e,n),t=new GF(t,n);let a,s,o,i,c;switch(r){case">":a=Tm,s=XF,o=Rm,i=">",c=">=";break;case"<":a=Rm,s=YF,o=Tm,i="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(JF(e,t,n))return!1;for(let u=0;u<t.set.length;++u){const d=t.set[u];let p=null,f=null;if(d.forEach(h=>{h.semver===zF&&(h=new VE(">=0.0.0")),p=p||h,f=f||h,a(h.semver,p.semver,n)?p=h:o(h.semver,f.semver,n)&&(f=h)}),p.operator===i||p.operator===c||(!f.operator||f.operator===i)&&s(e,f.semver))return!1;if(f.operator===c&&o(e,f.semver))return!1}return!0};var Wd=QF;const ZF=Wd,e5=(e,t,r)=>ZF(e,t,">",r);var t5=e5;const r5=Wd,n5=(e,t,r)=>r5(e,t,"<",r);var a5=n5;const km=dr(),s5=(e,t,r)=>(e=new km(e,r),t=new km(t,r),e.intersects(t,r));var o5=s5;const i5=il,l5=ur;var c5=(e,t,r)=>{const n=[];let a=null,s=null;const o=e.sort((d,p)=>l5(d,p,r));for(const d of o)i5(d,t,r)?(s=d,a||(a=d)):(s&&n.push([a,s]),s=null,a=null);a&&n.push([a,null]);const i=[];for(const[d,p]of n)d===p?i.push(d):!p&&d===o[0]?i.push("*"):p?d===o[0]?i.push(`<=${p}`):i.push(`${d} - ${p}`):i.push(`>=${d}`);const c=i.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t};const Im=dr(),Ud=ol(),{ANY:$c}=Ud,Va=il,jd=ur,u5=(e,t,r={})=>{if(e===t)return!0;e=new Im(e,r),t=new Im(t,r);let n=!1;e:for(const a of e.set){for(const s of t.set){const o=p5(a,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},d5=[new Ud(">=0.0.0-0")],xm=[new Ud(">=0.0.0")],p5=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===$c){if(t.length===1&&t[0].semver===$c)return!0;r.includePrerelease?e=d5:e=xm}if(t.length===1&&t[0].semver===$c){if(r.includePrerelease)return!0;t=xm}const n=new Set;let a,s;for(const h of e)h.operator===">"||h.operator===">="?a=$m(a,h,r):h.operator==="<"||h.operator==="<="?s=Om(s,h,r):n.add(h.semver);if(n.size>1)return null;let o;if(a&&s){if(o=jd(a.semver,s.semver,r),o>0)return null;if(o===0&&(a.operator!==">="||s.operator!=="<="))return null}for(const h of n){if(a&&!Va(h,String(a),r)||s&&!Va(h,String(s),r))return null;for(const g of t)if(!Va(h,String(g),r))return!1;return!0}let i,c,u,d,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1;p&&p.prerelease.length===1&&s.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(const h of t){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",a){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator===">"||h.operator===">="){if(i=$m(a,h,r),i===h&&i!==a)return!1}else if(a.operator===">="&&!Va(a.semver,String(h),r))return!1}if(s){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(c=Om(s,h,r),c===h&&c!==s)return!1}else if(s.operator==="<="&&!Va(s.semver,String(h),r))return!1}if(!h.operator&&(s||a)&&o!==0)return!1}return!(a&&u&&!s&&o!==0||s&&d&&!a&&o!==0||f||p)},$m=(e,t,r)=>{if(!e)return t;const n=jd(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Om=(e,t,r)=>{if(!e)return t;const n=jd(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var h5=u5;const Oc=ks,Nm=nl,f5=Rt,Lm=BE,m5=$a,g5=m2,y5=b2,b5=E2,v5=S2,E5=P2,_5=R2,S5=x2,w5=N2,A5=ur,P5=H2,C5=W2,T5=Fd,R5=V2,k5=G2,I5=sl,x5=Hd,$5=WE,O5=UE,N5=Dd,L5=Bd,M5=jE,F5=yF,H5=ol(),D5=dr(),B5=il,W5=xF,U5=LF,j5=DF,q5=UF,V5=VF,K5=Wd,z5=t5,G5=a5,J5=o5,X5=c5,Y5=h5;var Q5={parse:m5,valid:g5,clean:y5,inc:b5,diff:v5,major:E5,minor:_5,patch:S5,prerelease:w5,compare:A5,rcompare:P5,compareLoose:C5,compareBuild:T5,sort:R5,rsort:k5,gt:I5,lt:x5,eq:$5,neq:O5,gte:N5,lte:L5,cmp:M5,coerce:F5,Comparator:H5,Range:D5,satisfies:B5,toComparators:W5,maxSatisfying:U5,minSatisfying:j5,minVersion:q5,validRange:V5,outside:K5,gtr:z5,ltr:G5,intersects:J5,simplifyRange:X5,subset:Y5,SemVer:f5,re:Oc.re,src:Oc.src,tokens:Oc.t,SEMVER_SPEC_VERSION:Nm.SEMVER_SPEC_VERSION,RELEASE_TYPES:Nm.RELEASE_TYPES,compareIdentifiers:Lm.compareIdentifiers,rcompareIdentifiers:Lm.rcompareIdentifiers};Object.defineProperty(Ld,"__esModule",{value:!0});var Z5=Q5,eH=Ft,tH=Vi;function rH(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var nH=rH(Z5);function aH(e){const t={package:"shopify-app"},r=(a,s={})=>e.warning(a,{...t,...s});function n(a){return function(s,o){if(nH.default.gte(tH.SHOPIFY_REMIX_LIBRARY_VERSION,s))throw new eH.FeatureDeprecatedError(`Feature was deprecated in version ${s}`);return a(`[Deprecated | ${s}] ${o}`)}}return{...e,log:(a,s,o={})=>e.log(a,s,{...t,...o}),debug:(a,s={})=>e.debug(a,{...t,...s}),info:(a,s={})=>e.info(a,{...t,...s}),warning:r,error:(a,s={})=>e.error(a,{...t,...s}),deprecated:n(r)}}Ld.overrideLogger=aH;var qd={};Object.defineProperty(qd,"__esModule",{value:!0});var sH=Qn,Mm=Ia;function oH(e){const{api:t,config:r,logger:n}=e;return async function(s){const i=new URL(s.url).searchParams.get("shop");if(s.method==="GET"&&!i)return{};const c=i||(await s.formData()).get("shop");if(!c)return n.debug("Missing shop parameter",{shop:c}),{shop:Mm.LoginErrorType.MissingShop};const u=c.replace(/^https?:\/\//,"").replace(/\/$/,""),d=(c==null?void 0:c.indexOf("."))===-1?`${u}.myshopify.com`:u,p=t.utils.sanitizeShop(d);if(!p)return n.debug("Invalid shop parameter",{shop:c}),{shop:Mm.LoginErrorType.InvalidShop};const f=`${r.appUrl}${r.auth.path}?shop=${p}`,g=`https://${t.utils.legacyUrlToShopAdminUrl(p)}/oauth/install?client_id=${r.apiKey}`,b=r.isEmbeddedApp&&r.future.unstable_newEmbeddedAuthStrategy?g:f;throw n.info(`Redirecting login request to ${b}`,{shop:p}),sH.redirect(b)}}qd.loginFactory=oH;var Vd={},Is={};Object.defineProperty(Is,"__esModule",{value:!0});var iH=Ft;class lH extends iH.ShopifyError{}Is.SessionNotFoundError=lH;var ll={};Object.defineProperty(ll,"__esModule",{value:!0});async function cH(e,{api:t,config:r}){const n=t.session.getOfflineId(e);return await r.sessionStorage.loadSession(n)}ll.getOfflineSession=cH;Object.defineProperty(Vd,"__esModule",{value:!0});var uH=Is,dH=ea,pH=ll;function hH(e){return async t=>{const r=await pH.getOfflineSession(t,e);if(!r)throw new uH.SessionNotFoundError(`Could not find a session for shop ${t} when creating unauthenticated admin context`);return{session:r,admin:dH.adminClientFactory({params:e,session:r})}}}Vd.unauthenticatedAdminContextFactory=hH;var Kd={},zd={};Object.defineProperty(zd,"__esModule",{value:!0});var fH=Cs,mH=Ki,gH=Yn,yH=zi,bH=Gi;function vH(e){return async function(r,n={}){var a;const{logger:s}=e,o=(a=n.corsHeaders)!==null&&a!==void 0?a:[];yH.respondToBotRequest(e,r),bH.respondToOptionsRequest(e,r,o);const i=gH.getSessionTokenHeader(r);if(s.info("Authenticating checkout request"),!i)throw s.debug("Request did not contain a session token"),new Response(void 0,{status:401,statusText:"Unauthorized"});return{sessionToken:await mH.validateSessionToken(e,i,{checkAudience:!1}),cors:fH.ensureCORSHeadersFactory(e,r,o)}}}zd.authenticateCheckoutFactory=vH;var Gd={},cl={};Object.defineProperty(cl,"__esModule",{value:!0});function EH({params:e,session:t}){const{api:r}=e;return{graphql:async(n,a={})=>{const o=await new r.clients.Storefront({session:t,apiVersion:a.apiVersion}).request(n,{variables:a==null?void 0:a.variables,retries:a!=null&&a.tries?a.tries-1:0,headers:a==null?void 0:a.headers});return new Response(JSON.stringify(o))}}}cl.storefrontClientFactory=EH;Object.defineProperty(Gd,"__esModule",{value:!0});var _H=ea,SH=cl;function wH(e){const{api:t,config:r,logger:n}=e;return async function(s){n.info("Authenticating app proxy request");const{searchParams:o}=new URL(s.url),i=Object.fromEntries(o.entries());let c=!1;try{c=await t.utils.validateHmac(i,{signator:"appProxy"})}catch(h){throw n.info(h.message),new Response(void 0,{status:400,statusText:"Bad Request"})}if(!c)throw n.info("App proxy request has invalid signature"),new Response(void 0,{status:400,statusText:"Bad Request"});const u=o.get("shop"),d=t.session.getOfflineId(u),p=await r.sessionStorage.loadSession(d);return p?{liquid:Fm,session:p,admin:_H.adminClientFactory({params:e,session:p}),storefront:SH.storefrontClientFactory({params:e,session:p})}:{liquid:Fm,session:void 0,admin:void 0,storefront:void 0}}}const Fm=(e,t)=>{if(typeof t!="object")return new Response(e,{status:t||200,headers:{"Content-Type":"application/liquid"}});const{layout:r,...n}=t||{},a=r===!1?`{% layout none %} ${e}`:e,s=new Headers(n.headers);return s.set("Content-Type","application/liquid"),new Response(a,{...n,headers:s})};Gd.authenticateAppProxyFactory=wH;Object.defineProperty(Kd,"__esModule",{value:!0});var AH=zd,PH=Gd;function CH(e){const{logger:t,config:r}=e,n=AH.authenticateCheckoutFactory(e),a=PH.authenticateAppProxyFactory(e);if(r.future.v3_authenticatePublic)return{checkout:n,appProxy:a};const s=(o,i)=>(t.deprecated("3.0.0","authenticate.public() will be deprecated in v3. Use authenticate.public.checkout() instead."),n(o,i));return s.checkout=n,s.appProxy=a,s}Kd.authenticatePublicFactory=CH;var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});var TH=Is,RH=cl,kH=ll;function IH(e){return async t=>{const r=await kH.getOfflineSession(t,e);if(!r)throw new TH.SessionNotFoundError(`Could not find a session for shop ${t} when creating unauthenticated storefront context`);return{session:r,storefront:RH.storefrontClientFactory({params:e,session:r})}}}Jd.unauthenticatedStorefrontContextFactory=IH;var Xd={},ul={};Object.defineProperty(ul,"__esModule",{value:!0});var xH=Yi;async function $H(e,t,r,n){const{config:a,logger:s}=e;a.hooks.afterAuth&&(s.info("Running afterAuth hook"),await a.hooks.afterAuth({session:t,admin:xH.createAdminApiContext(t,e,n.handleClientError(r))}))}ul.triggerAfterAuthHook=$H;Object.defineProperty(Xd,"__esModule",{value:!0});var Ka=Ft,to=Ji,OH=Qi,NH=Rs,Nc=Zn,Hm=Xi,LH=Yn,MH=ul,FH=rl;class HH{constructor({api:t,config:r,logger:n}){this.api=void 0,this.config=void 0,this.logger=void 0,this.api=t,this.config=r,this.logger=n}async respondToOAuthRequests(t){const{api:r,config:n}=this,a=new URL(t.url),s=a.pathname===n.auth.path,o=a.pathname===n.auth.callbackPath;if(s||o){const i=r.utils.sanitizeShop(a.searchParams.get("shop"));throw i?s?await this.handleAuthBeginRequest(t,i):await this.handleAuthCallbackRequest(t,i):new Response("Shop param is invalid",{status:400})}LH.getSessionTokenHeader(t)||await this.ensureInstalledOnShop(t)}async authenticate(t,r){const{api:n,config:a,logger:s}=this,{shop:o,session:i}=r;return i?i.isActive(a.scopes)||(s.debug("Found a session, but it has expired, redirecting to OAuth",{shop:o}),await Nc.redirectToAuthPage({config:a,logger:s,api:n},t,o)):(s.debug("No session found, redirecting to OAuth",{shop:o}),await Nc.redirectToAuthPage({config:a,logger:s,api:n},t,o)),s.debug("Found a valid session",{shop:o}),i}handleClientError(t){const{api:r,config:n,logger:a}=this;return NH.handleClientErrorFactory({request:t,onError:async({session:s,error:o})=>{if(o.response.code===401)throw await Nc.redirectToAuthPage({api:r,config:n,logger:a},t,s.shop)}})}async ensureInstalledOnShop(t){const{api:r,config:n,logger:a}=this;FH.validateShopAndHostParams({api:r,config:n,logger:a},t);const s=new URL(t.url);let o=s.searchParams.get("shop");if(a.debug("Ensuring app is installed on shop",{shop:o}),!await this.hasValidOfflineId(t))throw a.info("Could not find a shop, can't authenticate request"),new Response(void 0,{status:400,statusText:"Bad Request"});const i=await this.getOfflineSession(t),c=s.searchParams.get("embedded")==="1";if(!i)if(a.info("Shop hasn't installed app yet, redirecting to OAuth",{shop:o}),c)Hm.redirectWithExitIframe({api:r,config:n,logger:a},t,o);else throw await to.beginAuth({api:r,config:n,logger:a},t,!1,o);if(o=o||i.shop,n.isEmbeddedApp&&!c)try{a.debug("Ensuring offline session is valid before embedding",{shop:o}),await this.testSession(i),a.debug("Offline session is still valid, embedding app",{shop:o})}catch(u){await this.handleInvalidOfflineSession(u,t,o)}}async handleAuthBeginRequest(t,r){const{api:n,config:a,logger:s}=this;throw s.info("Handling OAuth begin request",{shop:r}),a.isEmbeddedApp&&t.headers.get("Sec-Fetch-Dest")==="iframe"?(s.debug("Auth request in iframe detected, exiting iframe",{shop:r}),Hm.redirectWithExitIframe({api:n,config:a,logger:s},t,r)):await to.beginAuth({api:n,config:a,logger:s},t,!1,r)}async handleAuthCallbackRequest(t,r){const{api:n,config:a,logger:s}=this;s.info("Handling OAuth callback request");try{const{session:o,headers:i}=await n.auth.callback({rawRequest:t});throw await a.sessionStorage.storeSession(o),a.useOnlineTokens&&!o.isOnline&&(s.info("Requesting online access token for offline session"),await to.beginAuth({api:n,config:a,logger:s},t,!0,r)),await MH.triggerAfterAuthHook({api:n,config:a,logger:s},o,t,this),await OH.redirectToShopifyOrAppRoot(t,{api:n,config:a,logger:s},i)}catch(o){throw o instanceof Response?o:await this.oauthCallbackError(o,t,r)}}async getOfflineSession(t){const r=await this.getOfflineSessionId(t);return this.config.sessionStorage.loadSession(r)}async hasValidOfflineId(t){return!!await this.getOfflineSessionId(t)}async getOfflineSessionId(t){const{api:r}=this,a=new URL(t.url).searchParams.get("shop");return a?r.session.getOfflineId(a):r.session.getCurrentId({isOnline:!1,rawRequest:t})}async testSession(t){const{api:r}=this;await new r.clients.Graphql({session:t}).request(`#graphql
      query shopifyAppShopName {
        shop {
          name
        }
      }
    `)}async oauthCallbackError(t,r,n){const{logger:a}=this;return a.error("Error during OAuth callback",{error:t.message}),t instanceof Ka.CookieNotFound?this.handleAuthBeginRequest(r,n):t instanceof Ka.InvalidHmacError||t instanceof Ka.InvalidOAuthError?new Response(void 0,{status:400,statusText:"Invalid OAuth Request"}):new Response(void 0,{status:500,statusText:"Internal Server Error"})}async handleInvalidOfflineSession(t,r,n){const{api:a,logger:s,config:o}=this;if(t instanceof Ka.HttpResponseError){if(t.response.code===401)throw s.info("Shop session is no longer valid, redirecting to OAuth",{shop:n}),await to.beginAuth({api:a,config:o,logger:s},r,!1,n);{const i=JSON.stringify(t.response.body,null,2);throw s.error(`Unexpected error during session validation: ${i}`,{shop:n}),new Response(void 0,{status:t.response.code,statusText:t.response.statusText})}}else if(t instanceof Ka.GraphqlQueryError){const i={shop:n};throw t.response&&(i.response=JSON.stringify(t.body)),s.error(`Unexpected error during session validation: ${t.message}`,i),new Response(void 0,{status:500,statusText:"Internal Server Error"})}}}Xd.AuthCodeFlowStrategy=HH;var Yd={},Qd={};Object.defineProperty(Qd,"__esModule",{value:!0});var DH=Zi,BH=bn;function WH({params:e,request:t,retryRequest:r=!1}){const{api:n,logger:a,config:s}=e;if(!t.headers.get("authorization"))return DH.redirectToBouncePage({api:n,logger:a,config:s},new URL(t.url));throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:r?BH.RETRY_INVALID_SESSION_HEADER:{}})}Qd.respondToInvalidSessionToken=WH;Object.defineProperty(Yd,"__esModule",{value:!0});var za=Ft,Dm=Qd,UH=Rs,jH=ul;class qH{constructor({api:t,config:r,logger:n}){this.api=void 0,this.config=void 0,this.logger=void 0,this.api=t,this.config=r,this.logger=n}async respondToOAuthRequests(t){}async authenticate(t,r){const{api:n,config:a,logger:s}=this,{shop:o,session:i,sessionToken:c}=r;if(!c)throw new za.InvalidJwtError;if(!i||i.isExpired()){s.info("No valid session found"),s.info("Requesting offline access token");const{session:u}=await this.exchangeToken({request:t,sessionToken:c,shop:o,requestedTokenType:za.RequestedTokenType.OfflineAccessToken});await a.sessionStorage.storeSession(u);let d=u;if(a.useOnlineTokens){s.info("Requesting online access token");const{session:p}=await this.exchangeToken({request:t,sessionToken:c,shop:o,requestedTokenType:za.RequestedTokenType.OnlineAccessToken});await a.sessionStorage.storeSession(p),d=p}try{await this.handleAfterAuthHook({api:n,config:a,logger:s},d,t,c)}catch{throw new Response(void 0,{status:500,statusText:"Internal Server Error"})}return d}return i}handleClientError(t){const{api:r,config:n,logger:a}=this;return UH.handleClientErrorFactory({request:t,onError:async({session:s,error:o})=>{o.response.code===401&&(n.sessionStorage.deleteSession(s.id),Dm.respondToInvalidSessionToken({params:{config:n,api:r,logger:a},request:t}))}})}async exchangeToken({request:t,shop:r,sessionToken:n,requestedTokenType:a}){const{api:s,config:o,logger:i}=this;try{return await s.auth.tokenExchange({sessionToken:n,shop:r,requestedTokenType:a})}catch(u){var c;throw u instanceof za.InvalidJwtError||u instanceof za.HttpResponseError&&u.response.code===400&&((c=u.response.body)===null||c===void 0?void 0:c.error)==="invalid_subject_token"?Dm.respondToInvalidSessionToken({params:{api:s,config:o,logger:i},request:t,retryRequest:!0}):new Response(void 0,{status:500,statusText:"Internal Server Error"})}}async handleAfterAuthHook(t,r,n,a){const{config:s}=t;await s.idempotentPromiseHandler.handlePromise({promiseFunction:()=>jH.triggerAfterAuthHook(t,r,n,this),identifier:a})}}Yd.TokenExchangeStrategy=qH;var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});const VH=6e4;class KH{constructor(){this.identifiers=void 0,this.identifiers=new Map}async handlePromise({promiseFunction:t,identifier:r}){try{this.isPromiseRunnable(r)&&await t()}finally{this.clearStaleIdentifiers()}return Promise.resolve()}isPromiseRunnable(t){return this.identifiers.has(t)?!1:(this.identifiers.set(t,Date.now()),!0)}async clearStaleIdentifiers(){this.identifiers.forEach((t,r,n)=>{Date.now()-t>VH&&n.delete(r)})}}Zd.IdempotentPromiseHandler=KH;var ep={};Object.defineProperty(ep,"__esModule",{value:!0});var zH=ea;function GH(e){const{api:t,config:r,logger:n}=e;return async function(s){if(n.info("Authenticating flow request"),s.method!=="POST")throw n.debug("Received a non-POST request for flow. Only POST requests are allowed.",{url:s.url,method:s.method}),new Response(void 0,{status:405,statusText:"Method not allowed"});const o=await s.text(),i=await t.flow.validate({rawBody:o,rawRequest:s});if(!i.valid)throw n.error("Received an invalid flow request",{reason:i.reason}),new Response(void 0,{status:400,statusText:"Bad Request"});const c=JSON.parse(o);n.debug("Flow request is valid, looking for an offline session",{shop:c.shopify_domain});const u=t.session.getOfflineId(c.shopify_domain),d=await r.sessionStorage.loadSession(u);if(!d)throw n.info("Flow request could not find session",{shop:c.shopify_domain}),new Response(void 0,{status:400,statusText:"Bad Request"});return n.debug("Found a session for the flow request",{shop:d.shop}),{session:d,payload:c,admin:zH.adminClientFactory({params:e,session:d})}}}ep.authenticateFlowFactory=GH;var Bm={};Object.defineProperty(_d,"__esModule",{value:!0});var fo=Ft,cs=Ia,JH=Vi,XH=Sd,YH=wd,QH=Nd,ZH=Ld,eD=Ts,tD=qd,rD=Vd,nD=Kd,aD=Jd,sD=Xd,oD=Yd,iD=Zd,lD=ep;function cD(e){const t=pD(e),r=hD(e,t.config),n=ZH.overrideLogger(t.logger);e.webhooks&&t.webhooks.addHandlers(e.webhooks);const a={api:t,config:r,logger:n},s=YH.authStrategyFactory({...a,strategy:r.future.unstable_newEmbeddedAuthStrategy&&r.isEmbeddedApp?new oD.TokenExchangeStrategy(a):new sD.AuthCodeFlowStrategy(a)}),o={sessionStorage:r.sessionStorage,addDocumentResponseHeaders:eD.addDocumentResponseHeadersFactory(a),registerWebhooks:XH.registerWebhooksFactory(a),authenticate:{admin:s,flow:lD.authenticateFlowFactory(a),public:nD.authenticatePublicFactory(a),webhook:QH.authenticateWebhookFactory(a)},unauthenticated:{admin:rD.unauthenticatedAdminContextFactory(a),storefront:aD.unauthenticatedStorefrontContextFactory(a)}};return(uD(o,e)||dD(o,e))&&(o.login=tD.loginFactory(a)),o}function uD(e,t){return t.distribution===cs.AppDistribution.AppStore}function dD(e,t){return t.distribution===cs.AppDistribution.SingleMerchant}function pD(e){var t,r,n;let a;try{a=new URL(e.appUrl)}catch{throw new fo.ShopifyError("Invalid appUrl provided. Please provide a valid URL.")}a.hostname==="localhost"&&!a.port&&Bm.PORT&&(a.port=Bm.PORT),e.appUrl=a.origin;let s=`Shopify Remix Library v${JH.SHOPIFY_REMIX_LIBRARY_VERSION}`;return e.userAgentPrefix&&(s=`${e.userAgentPrefix} | ${s}`),fo.shopifyApi({...e,hostName:a.host,hostScheme:a.protocol.replace(":",""),userAgentPrefix:s,isEmbeddedApp:(t=e.isEmbeddedApp)!==null&&t!==void 0?t:!0,apiVersion:(r=e.apiVersion)!==null&&r!==void 0?r:fo.LATEST_API_VERSION,isCustomStoreApp:e.distribution===cs.AppDistribution.ShopifyAdmin,future:{v10_lineItemBilling:(n=e.future)===null||n===void 0?void 0:n.v3_lineItemBilling}})}function hD(e,t){var r,n,a,s;if(!e.sessionStorage)throw new fo.ShopifyError("Please provide a valid session storage. Refer to https://github.com/Shopify/shopify-app-js/blob/main/README.md#session-storage-options for options.");const o=e.authPathPrefix||"/auth";return e.distribution=(r=e.distribution)!==null&&r!==void 0?r:cs.AppDistribution.AppStore,{...e,...t,idempotentPromiseHandler:new iD.IdempotentPromiseHandler,canUseLoginForm:e.distribution!==cs.AppDistribution.ShopifyAdmin,useOnlineTokens:(n=e.useOnlineTokens)!==null&&n!==void 0?n:!1,hooks:(a=e.hooks)!==null&&a!==void 0?a:{},sessionStorage:e.sessionStorage,future:(s=e.future)!==null&&s!==void 0?s:{},auth:{path:o,callbackPath:`${o}/callback`,patchSessionTokenPath:`${o}/session-token`,exitIframePath:`${o}/exit-iframe`,loginPath:`${o}/login`}}}_d.shopifyApp=cD;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ur,r=Ft,n=Ia,a=bd,s=_d,o=Is;t.setAbstractRuntimeString(()=>"Remix"),Object.defineProperty(e,"ApiVersion",{enumerable:!0,get:function(){return r.ApiVersion}}),Object.defineProperty(e,"BillingInterval",{enumerable:!0,get:function(){return r.BillingInterval}}),Object.defineProperty(e,"DeliveryMethod",{enumerable:!0,get:function(){return r.DeliveryMethod}}),Object.defineProperty(e,"LATEST_API_VERSION",{enumerable:!0,get:function(){return r.LATEST_API_VERSION}}),Object.defineProperty(e,"LogSeverity",{enumerable:!0,get:function(){return r.LogSeverity}}),e.AppDistribution=n.AppDistribution,e.LoginErrorType=n.LoginErrorType,e.boundary=a.boundary,e.shopifyApp=s.shopifyApp,e.SessionNotFoundError=o.SessionNotFoundError})(Ly);var KE={},tp={};const fD=pn(OT),mD={ActionMenu:{Actions:{moreActions:"More actions"},RollupActions:{rollupButton:"View actions"}},ActionList:{SearchField:{clearButtonLabel:"Clear",search:"Search",placeholder:"Search actions"}},Avatar:{label:"Avatar",labelWithInitials:"Avatar with initials {initials}"},Autocomplete:{spinnerAccessibilityLabel:"Loading",ellipsis:"{content}…"},Badge:{PROGRESS_LABELS:{incomplete:"Incomplete",partiallyComplete:"Partially complete",complete:"Complete"},TONE_LABELS:{info:"Info",success:"Success",warning:"Warning",critical:"Critical",attention:"Attention",new:"New",readOnly:"Read-only",enabled:"Enabled"},progressAndTone:"{toneLabel} {progressLabel}"},Banner:{dismissButton:"Dismiss notification"},Button:{spinnerAccessibilityLabel:"Loading"},Common:{checkbox:"checkbox",undo:"Undo",cancel:"Cancel",clear:"Clear",close:"Close",submit:"Submit",more:"More"},ContextualSaveBar:{save:"Save",discard:"Discard"},DataTable:{sortAccessibilityLabel:"sort {direction} by",navAccessibilityLabel:"Scroll table {direction} one column",totalsRowHeading:"Totals",totalRowHeading:"Total"},DatePicker:{previousMonth:"Show previous month, {previousMonthName} {showPreviousYear}",nextMonth:"Show next month, {nextMonth} {nextYear}",today:"Today ",start:"Start of range",end:"End of range",months:{january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},days:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},daysAbbreviated:{monday:"Mo",tuesday:"Tu",wednesday:"We",thursday:"Th",friday:"Fr",saturday:"Sa",sunday:"Su"}},DiscardConfirmationModal:{title:"Discard all unsaved changes",message:"If you discard changes, you’ll delete any edits you made since you last saved.",primaryAction:"Discard changes",secondaryAction:"Continue editing"},DropZone:{single:{overlayTextFile:"Drop file to upload",overlayTextImage:"Drop image to upload",overlayTextVideo:"Drop video to upload",actionTitleFile:"Add file",actionTitleImage:"Add image",actionTitleVideo:"Add video",actionHintFile:"or drop file to upload",actionHintImage:"or drop image to upload",actionHintVideo:"or drop video to upload",labelFile:"Upload file",labelImage:"Upload image",labelVideo:"Upload video"},allowMultiple:{overlayTextFile:"Drop files to upload",overlayTextImage:"Drop images to upload",overlayTextVideo:"Drop videos to upload",actionTitleFile:"Add files",actionTitleImage:"Add images",actionTitleVideo:"Add videos",actionHintFile:"or drop files to upload",actionHintImage:"or drop images to upload",actionHintVideo:"or drop videos to upload",labelFile:"Upload files",labelImage:"Upload images",labelVideo:"Upload videos"},errorOverlayTextFile:"File type is not valid",errorOverlayTextImage:"Image type is not valid",errorOverlayTextVideo:"Video type is not valid"},EmptySearchResult:{altText:"Empty search results"},Frame:{skipToContent:"Skip to content",navigationLabel:"Navigation",Navigation:{closeMobileNavigationLabel:"Close navigation"}},FullscreenBar:{back:"Back",accessibilityLabel:"Exit fullscreen mode"},Filters:{moreFilters:"More filters",moreFiltersWithCount:"More filters ({count})",filter:"Filter {resourceName}",noFiltersApplied:"No filters applied",cancel:"Cancel",done:"Done",clearAllFilters:"Clear all filters",clear:"Clear",clearLabel:"Clear {filterName}",addFilter:"Add filter",clearFilters:"Clear all",searchInView:"in:{viewName}"},FilterPill:{clear:"Clear"},IndexFilters:{searchFilterTooltip:"Search and filter",searchFilterTooltipWithShortcut:"Search and filter (F)",searchFilterAccessibilityLabel:"Search and filter results",sort:"Sort your results",addView:"Add a new view",newView:"Custom search",SortButton:{ariaLabel:"Sort the results",tooltip:"Sort",title:"Sort by",sorting:{asc:"Ascending",desc:"Descending",az:"A-Z",za:"Z-A"}},EditColumnsButton:{tooltip:"Edit columns",accessibilityLabel:"Customize table column order and visibility"},UpdateButtons:{cancel:"Cancel",update:"Update",save:"Save",saveAs:"Save as",modal:{title:"Save view as",label:"Name",sameName:"A view with this name already exists. Please choose a different name.",save:"Save",cancel:"Cancel"}}},IndexProvider:{defaultItemSingular:"Item",defaultItemPlural:"Items",allItemsSelected:"All {itemsLength}+ {resourceNamePlural} are selected",selected:"{selectedItemsCount} selected",a11yCheckboxDeselectAllSingle:"Deselect {resourceNameSingular}",a11yCheckboxSelectAllSingle:"Select {resourceNameSingular}",a11yCheckboxDeselectAllMultiple:"Deselect all {itemsLength} {resourceNamePlural}",a11yCheckboxSelectAllMultiple:"Select all {itemsLength} {resourceNamePlural}"},IndexTable:{emptySearchTitle:"No {resourceNamePlural} found",emptySearchDescription:"Try changing the filters or search term",onboardingBadgeText:"New",resourceLoadingAccessibilityLabel:"Loading {resourceNamePlural}…",selectAllLabel:"Select all {resourceNamePlural}",selected:"{selectedItemsCount} selected",undo:"Undo",selectAllItems:"Select all {itemsLength}+ {resourceNamePlural}",selectItem:"Select {resourceName}",selectButtonText:"Select",sortAccessibilityLabel:"sort {direction} by"},Loading:{label:"Page loading bar"},Modal:{iFrameTitle:"body markup",modalWarning:"These required properties are missing from Modal: {missingProps}"},Page:{Header:{rollupActionsLabel:"View actions for {title}",pageReadyAccessibilityLabel:"{title}. This page is ready"}},Pagination:{previous:"Previous",next:"Next",pagination:"Pagination"},ProgressBar:{negativeWarningMessage:"Values passed to the progress prop shouldn’t be negative. Resetting {progress} to 0.",exceedWarningMessage:"Values passed to the progress prop shouldn’t exceed 100. Setting {progress} to 100."},ResourceList:{sortingLabel:"Sort by",defaultItemSingular:"item",defaultItemPlural:"items",showing:"Showing {itemsCount} {resource}",showingTotalCount:"Showing {itemsCount} of {totalItemsCount} {resource}",loading:"Loading {resource}",selected:"{selectedItemsCount} selected",allItemsSelected:"All {itemsLength}+ {resourceNamePlural} in your store are selected",allFilteredItemsSelected:"All {itemsLength}+ {resourceNamePlural} in this filter are selected",selectAllItems:"Select all {itemsLength}+ {resourceNamePlural} in your store",selectAllFilteredItems:"Select all {itemsLength}+ {resourceNamePlural} in this filter",emptySearchResultTitle:"No {resourceNamePlural} found",emptySearchResultDescription:"Try changing the filters or search term",selectButtonText:"Select",a11yCheckboxDeselectAllSingle:"Deselect {resourceNameSingular}",a11yCheckboxSelectAllSingle:"Select {resourceNameSingular}",a11yCheckboxDeselectAllMultiple:"Deselect all {itemsLength} {resourceNamePlural}",a11yCheckboxSelectAllMultiple:"Select all {itemsLength} {resourceNamePlural}",Item:{actionsDropdownLabel:"Actions for {accessibilityLabel}",actionsDropdown:"Actions dropdown",viewItem:"View details for {itemName}"},BulkActions:{actionsActivatorLabel:"Actions",moreActionsActivatorLabel:"More actions"}},SkeletonPage:{loadingLabel:"Page loading"},Tabs:{newViewAccessibilityLabel:"Create new view",newViewTooltip:"Create view",toggleTabsLabel:"More views",Tab:{rename:"Rename view",duplicate:"Duplicate view",edit:"Edit view",editColumns:"Edit columns",delete:"Delete view",copy:"Copy of {name}",deleteModal:{title:"Delete view?",description:"This can’t be undone. {viewName} view will no longer be available in your admin.",cancel:"Cancel",delete:"Delete view"}},RenameModal:{title:"Rename view",label:"Name",cancel:"Cancel",create:"Save",errors:{sameName:"A view with this name already exists. Please choose a different name."}},DuplicateModal:{title:"Duplicate view",label:"Name",cancel:"Cancel",create:"Create view",errors:{sameName:"A view with this name already exists. Please choose a different name."}},CreateViewModal:{title:"Create new view",label:"Name",cancel:"Cancel",create:"Create view",errors:{sameName:"A view with this name already exists. Please choose a different name."}}},Tag:{ariaLabel:"Remove {children}"},TextField:{characterCount:"{count} characters",characterCountWithMaxLength:"{count} of {limit} characters used"},TooltipOverlay:{accessibilityLabel:"Tooltip: {label}"},TopBar:{toggleMenuLabel:"Toggle menu",SearchField:{clearButtonLabel:"Clear",search:"Search"}},MediaCard:{dismissButton:"Dismiss",popoverButton:"Actions"},VideoThumbnail:{playButtonA11yLabel:{default:"Play video",defaultWithDuration:"Play video of length {duration}",duration:{hours:{other:{only:"{hourCount} hours",andMinutes:"{hourCount} hours and {minuteCount} minutes",andMinute:"{hourCount} hours and {minuteCount} minute",minutesAndSeconds:"{hourCount} hours, {minuteCount} minutes, and {secondCount} seconds",minutesAndSecond:"{hourCount} hours, {minuteCount} minutes, and {secondCount} second",minuteAndSeconds:"{hourCount} hours, {minuteCount} minute, and {secondCount} seconds",minuteAndSecond:"{hourCount} hours, {minuteCount} minute, and {secondCount} second",andSeconds:"{hourCount} hours and {secondCount} seconds",andSecond:"{hourCount} hours and {secondCount} second"},one:{only:"{hourCount} hour",andMinutes:"{hourCount} hour and {minuteCount} minutes",andMinute:"{hourCount} hour and {minuteCount} minute",minutesAndSeconds:"{hourCount} hour, {minuteCount} minutes, and {secondCount} seconds",minutesAndSecond:"{hourCount} hour, {minuteCount} minutes, and {secondCount} second",minuteAndSeconds:"{hourCount} hour, {minuteCount} minute, and {secondCount} seconds",minuteAndSecond:"{hourCount} hour, {minuteCount} minute, and {secondCount} second",andSeconds:"{hourCount} hour and {secondCount} seconds",andSecond:"{hourCount} hour and {secondCount} second"}},minutes:{other:{only:"{minuteCount} minutes",andSeconds:"{minuteCount} minutes and {secondCount} seconds",andSecond:"{minuteCount} minutes and {secondCount} second"},one:{only:"{minuteCount} minute",andSeconds:"{minuteCount} minute and {secondCount} seconds",andSecond:"{minuteCount} minute and {secondCount} second"}},seconds:{other:"{secondCount} seconds",one:"{secondCount} second"}}}}},gD={Polaris:mD};var rp={};Object.defineProperty(rp,"__esModule",{value:!0});const yD="https://cdn.shopify.com/shopifycloud/app-bridge.js";rp.APP_BRIDGE_URL=yD;var np={};const bD=pn(Lw);Object.defineProperty(np,"__esModule",{value:!0});var vD=m,ED=bD,_D=Sr;function SD(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var wD=SD(vD);const AD=wD.default.forwardRef((e,t)=>{var r;return _D.jsx(ED.Link,{...e,to:(r=e.url)!==null&&r!==void 0?r:e.to,ref:t})});np.RemixPolarisLink=AD;Object.defineProperty(tp,"__esModule",{value:!0});var PD=fD,CD=gD,TD=rp,RD=np,ro=Sr;function kD(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var ID=kD(CD);function xD(e){const{children:t,apiKey:r,i18n:n,isEmbeddedApp:a=!0,__APP_BRIDGE_URL:s=TD.APP_BRIDGE_URL,...o}=e;return ro.jsxs(ro.Fragment,{children:[a&&ro.jsx("script",{src:s,"data-api-key":r}),ro.jsx(PD.AppProvider,{...o,linkComponent:RD.RemixPolarisLink,i18n:n||ID.default,children:t})]})}tp.AppProvider=xD;Object.defineProperty(KE,"__esModule",{value:!0});var $D=tp,OD=KE.AppProvider=$D.AppProvider;function zD(){const{apiKey:e}=Km();return Sr.jsxs(OD,{isEmbeddedApp:!0,apiKey:e,children:[Sr.jsxs("ui-nav-menu",{children:[Sr.jsx(Ga,{to:"/app",rel:"home",children:"Home"}),Sr.jsx(Ga,{to:"/app/fine_tune",children:"Train Assistant"}),Sr.jsx(Ga,{to:"/app/integration",children:"Integration"}),Sr.jsx(Ga,{to:"/app/settings",children:"Settings"})]}),Sr.jsx(Vm,{})]})}function GD(){return Ly.boundary.error(zm())}export{GD as ErrorBoundary,zD as default};
